<!doctype html>
<html lang="en">
  <head>
    <meta name="author" content="npub1ttc8j3sx59d4vs0zt23r6p90fjcd040x3vgu4j68u44ydx8u4rzqkxm0da">
    <meta name="block:notes" content="10-slide-m400">
    <meta name="block:articles" content="10-list">
    <meta name="comments" content="yes">
    <meta name="topics" content="asknostr,bitcoin,nostr,gita">

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/png" href="https://oracolo.me/dist/images/favicon.png" />
    <title></title>
  </head>
  <body>
    <div id="app"></div>
    <script>
      window.wnjParams = {
        position: 'bottom',
        accent: 'neutral',
        startHidden: true,
        compactMode: true,
      };
    </script>
    <script>
"use strict";(()=>{var $_=Object.create;var ul=Object.defineProperty;var B_=Object.getOwnPropertyDescriptor;var L_=Object.getOwnPropertyNames;var C_=Object.getPrototypeOf,P_=Object.prototype.hasOwnProperty;var I_=(e,t)=>()=>(e&&(t=e(e=0)),t);var Fp=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),N_=(e,t)=>{for(var r in t)ul(e,r,{get:t[r],enumerable:!0})},O_=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of L_(t))!P_.call(e,o)&&o!==r&&ul(e,o,{get:()=>t[o],enumerable:!(n=B_(t,o))||n.enumerable});return e};var ll=(e,t,r)=>(r=e!=null?$_(C_(e)):{},O_(t||!e||!e.__esModule?ul(r,"default",{value:e,enumerable:!0}):r,e));var kl=Fp((wA,tg)=>{"use strict";var Y_=function(){function e(r,n){if(typeof r!="function")throw new TypeError("DataLoader must be constructed with a function which accepts "+("Array<key> and returns Promise<Array<value>>, but got: "+r+"."));this._batchLoadFn=r,this._maxBatchSize=t2(n),this._batchScheduleFn=r2(n),this._cacheKeyFn=n2(n),this._cacheMap=o2(n),this._batch=null,this.name=i2(n)}var t=e.prototype;return t.load=function(n){if(n==null)throw new TypeError("The loader.load() function must be called with a value, "+("but got: "+String(n)+"."));var o=X_(this),i=this._cacheMap,a;if(i){a=this._cacheKeyFn(n);var u=i.get(a);if(u){var d=o.cacheHits||(o.cacheHits=[]);return new Promise(function(b){d.push(function(){b(u)})})}}o.keys.push(n);var h=new Promise(function(b,m){o.callbacks.push({resolve:b,reject:m})});return i&&i.set(a,h),h},t.loadMany=function(n){if(!eg(n))throw new TypeError("The loader.loadMany() function must be called with Array<key> "+("but got: "+n+"."));for(var o=[],i=0;i<n.length;i++)o.push(this.load(n[i]).catch(function(a){return a}));return Promise.all(o)},t.clear=function(n){var o=this._cacheMap;if(o){var i=this._cacheKeyFn(n);o.delete(i)}return this},t.clearAll=function(){var n=this._cacheMap;return n&&n.clear(),this},t.prime=function(n,o){var i=this._cacheMap;if(i){var a=this._cacheKeyFn(n);if(i.get(a)===void 0){var u;o instanceof Error?(u=Promise.reject(o),u.catch(function(){})):u=Promise.resolve(o),i.set(a,u)}}return this},e}(),J_=typeof process=="object"&&typeof process.nextTick=="function"?function(e){_l||(_l=Promise.resolve()),_l.then(function(){process.nextTick(e)})}:typeof setImmediate=="function"?function(e){setImmediate(e)}:function(e){setTimeout(e)},_l;function X_(e){var t=e._batch;if(t!==null&&!t.hasDispatched&&t.keys.length<e._maxBatchSize)return t;var r={hasDispatched:!1,keys:[],callbacks:[]};return e._batch=r,e._batchScheduleFn(function(){e2(e,r)}),r}function e2(e,t){if(t.hasDispatched=!0,t.keys.length===0){xl(t);return}var r;try{r=e._batchLoadFn(t.keys)}catch(n){return El(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function "+("errored synchronously: "+String(n)+".")))}if(!r||typeof r.then!="function")return El(e,t,new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise: "+String(r)+".")));r.then(function(n){if(!eg(n))throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did "+("not return a Promise of an Array: "+String(n)+"."));if(n.length!==t.keys.length)throw new TypeError("DataLoader must be constructed with a function which accepts Array<key> and returns Promise<Array<value>>, but the function did not return a Promise of an Array of the same length as the Array of keys."+(`

Keys:
`+String(t.keys))+(`

Values:
`+String(n)));xl(t);for(var o=0;o<t.callbacks.length;o++){var i=n[o];i instanceof Error?t.callbacks[o].reject(i):t.callbacks[o].resolve(i)}}).catch(function(n){El(e,t,n)})}function El(e,t,r){xl(t);for(var n=0;n<t.keys.length;n++)e.clear(t.keys[n]),t.callbacks[n].reject(r)}function xl(e){if(e.cacheHits)for(var t=0;t<e.cacheHits.length;t++)e.cacheHits[t]()}function t2(e){var t=!e||e.batch!==!1;if(!t)return 1;var r=e&&e.maxBatchSize;if(r===void 0)return 1/0;if(typeof r!="number"||r<1)throw new TypeError("maxBatchSize must be a positive number: "+r);return r}function r2(e){var t=e&&e.batchScheduleFn;if(t===void 0)return J_;if(typeof t!="function")throw new TypeError("batchScheduleFn must be a function: "+t);return t}function n2(e){var t=e&&e.cacheKeyFn;if(t===void 0)return function(r){return r};if(typeof t!="function")throw new TypeError("cacheKeyFn must be a function: "+t);return t}function o2(e){var t=!e||e.cache!==!1;if(!t)return null;var r=e&&e.cacheMap;if(r===void 0)return new Map;if(r!==null){var n=["get","set","delete","clear"],o=n.filter(function(i){return r&&typeof r[i]!="function"});if(o.length!==0)throw new TypeError("Custom cacheMap missing methods: "+o.join(", "))}return r}function i2(e){return e&&e.name?e.name:null}function eg(e){return typeof e=="object"&&e!==null&&typeof e.length=="number"&&(e.length===0||e.length>0&&Object.prototype.hasOwnProperty.call(e,e.length-1))}tg.exports=Y_});var u0=Fp((c0,Xa)=>{(function(){function e(f){"use strict";var p={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:`Remove only spaces, ' and " from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids`,type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `\xAB\xAB\xAB` and `\xBB\xBB\xBB` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(f===!1)return JSON.parse(JSON.stringify(p));var w={};for(var v in p)p.hasOwnProperty(v)&&(w[v]=p[v].defaultValue);return w}function t(){"use strict";var f=e(!0),p={};for(var w in f)f.hasOwnProperty(w)&&(p[w]=!0);return p}var r={},n={},o={},i=e(!0),a="vanilla",u={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:e(!0),allOn:t()};r.helper={},r.extensions={},r.setOption=function(f,p){"use strict";return i[f]=p,this},r.getOption=function(f){"use strict";return i[f]},r.getOptions=function(){"use strict";return i},r.resetOptions=function(){"use strict";i=e(!0)},r.setFlavor=function(f){"use strict";if(!u.hasOwnProperty(f))throw Error(f+" flavor was not found");r.resetOptions();var p=u[f];a=f;for(var w in p)p.hasOwnProperty(w)&&(i[w]=p[w])},r.getFlavor=function(){"use strict";return a},r.getFlavorOptions=function(f){"use strict";if(u.hasOwnProperty(f))return u[f]},r.getDefaultOptions=function(f){"use strict";return e(f)},r.subParser=function(f,p){"use strict";if(r.helper.isString(f))if(typeof p<"u")n[f]=p;else{if(n.hasOwnProperty(f))return n[f];throw Error("SubParser named "+f+" not registered!")}},r.extension=function(f,p){"use strict";if(!r.helper.isString(f))throw Error("Extension 'name' must be a string");if(f=r.helper.stdExtName(f),r.helper.isUndefined(p)){if(!o.hasOwnProperty(f))throw Error("Extension named "+f+" is not registered!");return o[f]}else{typeof p=="function"&&(p=p()),r.helper.isArray(p)||(p=[p]);var w=d(p,f);if(w.valid)o[f]=p;else throw Error(w.error)}},r.getAllExtensions=function(){"use strict";return o},r.removeExtension=function(f){"use strict";delete o[f]},r.resetExtensions=function(){"use strict";o={}};function d(f,p){"use strict";var w=p?"Error in "+p+" extension->":"Error in unnamed extension",v={valid:!0,error:""};r.helper.isArray(f)||(f=[f]);for(var S=0;S<f.length;++S){var T=w+" sub-extension "+S+": ",I=f[S];if(typeof I!="object")return v.valid=!1,v.error=T+"must be an object, but "+typeof I+" given",v;if(!r.helper.isString(I.type))return v.valid=!1,v.error=T+'property "type" must be a string, but '+typeof I.type+" given",v;var M=I.type=I.type.toLowerCase();if(M==="language"&&(M=I.type="lang"),M==="html"&&(M=I.type="output"),M!=="lang"&&M!=="output"&&M!=="listener")return v.valid=!1,v.error=T+"type "+M+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',v;if(M==="listener"){if(r.helper.isUndefined(I.listeners))return v.valid=!1,v.error=T+'. Extensions of type "listener" must have a property called "listeners"',v}else if(r.helper.isUndefined(I.filter)&&r.helper.isUndefined(I.regex))return v.valid=!1,v.error=T+M+' extensions must define either a "regex" property or a "filter" method',v;if(I.listeners){if(typeof I.listeners!="object")return v.valid=!1,v.error=T+'"listeners" property must be an object but '+typeof I.listeners+" given",v;for(var P in I.listeners)if(I.listeners.hasOwnProperty(P)&&typeof I.listeners[P]!="function")return v.valid=!1,v.error=T+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+P+" must be a function but "+typeof I.listeners[P]+" given",v}if(I.filter){if(typeof I.filter!="function")return v.valid=!1,v.error=T+'"filter" must be a function, but '+typeof I.filter+" given",v}else if(I.regex){if(r.helper.isString(I.regex)&&(I.regex=new RegExp(I.regex,"g")),!(I.regex instanceof RegExp))return v.valid=!1,v.error=T+'"regex" property must either be a string or a RegExp object, but '+typeof I.regex+" given",v;if(r.helper.isUndefined(I.replace))return v.valid=!1,v.error=T+'"regex" extensions must implement a replace string or function',v}}return v}r.validateExtension=function(f){"use strict";var p=d(f,null);return p.valid?!0:(console.warn(p.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(f){"use strict";return typeof f=="string"||f instanceof String},r.helper.isFunction=function(f){"use strict";var p={};return f&&p.toString.call(f)==="[object Function]"},r.helper.isArray=function(f){"use strict";return Array.isArray(f)},r.helper.isUndefined=function(f){"use strict";return typeof f>"u"},r.helper.forEach=function(f,p){"use strict";if(r.helper.isUndefined(f))throw new Error("obj param is required");if(r.helper.isUndefined(p))throw new Error("callback param is required");if(!r.helper.isFunction(p))throw new Error("callback param must be a function/closure");if(typeof f.forEach=="function")f.forEach(p);else if(r.helper.isArray(f))for(var w=0;w<f.length;w++)p(f[w],w,f);else if(typeof f=="object")for(var v in f)f.hasOwnProperty(v)&&p(f[v],v,f);else throw new Error("obj does not seem to be an array or an iterable object")},r.helper.stdExtName=function(f){"use strict";return f.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()};function h(f,p){"use strict";var w=p.charCodeAt(0);return"\xA8E"+w+"E"}r.helper.escapeCharactersCallback=h,r.helper.escapeCharacters=function(f,p,w){"use strict";var v="(["+p.replace(/([\[\]\\])/g,"\\$1")+"])";w&&(v="\\\\"+v);var S=new RegExp(v,"g");return f=f.replace(S,h),f},r.helper.unescapeHTMLEntities=function(f){"use strict";return f.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var b=function(f,p,w,v){"use strict";var S=v||"",T=S.indexOf("g")>-1,I=new RegExp(p+"|"+w,"g"+S.replace(/g/g,"")),M=new RegExp(p,S.replace(/g/g,"")),P=[],$,F,q,x,z;do for($=0;q=I.exec(f);)if(M.test(q[0]))$++||(F=I.lastIndex,x=F-q[0].length);else if($&&!--$){z=q.index+q[0].length;var V={left:{start:x,end:F},match:{start:F,end:q.index},right:{start:q.index,end:z},wholeMatch:{start:x,end:z}};if(P.push(V),!T)return P}while($&&(I.lastIndex=F));return P};r.helper.matchRecursiveRegExp=function(f,p,w,v){"use strict";for(var S=b(f,p,w,v),T=[],I=0;I<S.length;++I)T.push([f.slice(S[I].wholeMatch.start,S[I].wholeMatch.end),f.slice(S[I].match.start,S[I].match.end),f.slice(S[I].left.start,S[I].left.end),f.slice(S[I].right.start,S[I].right.end)]);return T},r.helper.replaceRecursiveRegExp=function(f,p,w,v,S){"use strict";if(!r.helper.isFunction(p)){var T=p;p=function(){return T}}var I=b(f,w,v,S),M=f,P=I.length;if(P>0){var $=[];I[0].wholeMatch.start!==0&&$.push(f.slice(0,I[0].wholeMatch.start));for(var F=0;F<P;++F)$.push(p(f.slice(I[F].wholeMatch.start,I[F].wholeMatch.end),f.slice(I[F].match.start,I[F].match.end),f.slice(I[F].left.start,I[F].left.end),f.slice(I[F].right.start,I[F].right.end))),F<P-1&&$.push(f.slice(I[F].wholeMatch.end,I[F+1].wholeMatch.start));I[P-1].wholeMatch.end<f.length&&$.push(f.slice(I[P-1].wholeMatch.end)),M=$.join("")}return M},r.helper.regexIndexOf=function(f,p,w){"use strict";if(!r.helper.isString(f))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(!(p instanceof RegExp))throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var v=f.substring(w||0).search(p);return v>=0?v+(w||0):v},r.helper.splitAtIndex=function(f,p){"use strict";if(!r.helper.isString(f))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[f.substring(0,p),f.substring(p)]},r.helper.encodeEmailAddress=function(f){"use strict";var p=[function(w){return"&#"+w.charCodeAt(0)+";"},function(w){return"&#x"+w.charCodeAt(0).toString(16)+";"},function(w){return w}];return f=f.replace(/./g,function(w){if(w==="@")w=p[Math.floor(Math.random()*2)](w);else{var v=Math.random();w=v>.9?p[2](w):v>.45?p[1](w):p[0](w)}return w}),f},r.helper.padEnd=function(p,w,v){"use strict";return w=w>>0,v=String(v||" "),p.length>w?String(p):(w=w-p.length,w>v.length&&(v+=v.repeat(w/v.length)),String(p)+v.slice(0,w))},typeof console>"u"&&(console={warn:function(f){"use strict";alert(f)},log:function(f){"use strict";alert(f)},error:function(f){"use strict";throw f}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"\u{1F44D}","-1":"\u{1F44E}",100:"\u{1F4AF}",1234:"\u{1F522}","1st_place_medal":"\u{1F947}","2nd_place_medal":"\u{1F948}","3rd_place_medal":"\u{1F949}","8ball":"\u{1F3B1}",a:"\u{1F170}\uFE0F",ab:"\u{1F18E}",abc:"\u{1F524}",abcd:"\u{1F521}",accept:"\u{1F251}",aerial_tramway:"\u{1F6A1}",airplane:"\u2708\uFE0F",alarm_clock:"\u23F0",alembic:"\u2697\uFE0F",alien:"\u{1F47D}",ambulance:"\u{1F691}",amphora:"\u{1F3FA}",anchor:"\u2693\uFE0F",angel:"\u{1F47C}",anger:"\u{1F4A2}",angry:"\u{1F620}",anguished:"\u{1F627}",ant:"\u{1F41C}",apple:"\u{1F34E}",aquarius:"\u2652\uFE0F",aries:"\u2648\uFE0F",arrow_backward:"\u25C0\uFE0F",arrow_double_down:"\u23EC",arrow_double_up:"\u23EB",arrow_down:"\u2B07\uFE0F",arrow_down_small:"\u{1F53D}",arrow_forward:"\u25B6\uFE0F",arrow_heading_down:"\u2935\uFE0F",arrow_heading_up:"\u2934\uFE0F",arrow_left:"\u2B05\uFE0F",arrow_lower_left:"\u2199\uFE0F",arrow_lower_right:"\u2198\uFE0F",arrow_right:"\u27A1\uFE0F",arrow_right_hook:"\u21AA\uFE0F",arrow_up:"\u2B06\uFE0F",arrow_up_down:"\u2195\uFE0F",arrow_up_small:"\u{1F53C}",arrow_upper_left:"\u2196\uFE0F",arrow_upper_right:"\u2197\uFE0F",arrows_clockwise:"\u{1F503}",arrows_counterclockwise:"\u{1F504}",art:"\u{1F3A8}",articulated_lorry:"\u{1F69B}",artificial_satellite:"\u{1F6F0}",astonished:"\u{1F632}",athletic_shoe:"\u{1F45F}",atm:"\u{1F3E7}",atom_symbol:"\u269B\uFE0F",avocado:"\u{1F951}",b:"\u{1F171}\uFE0F",baby:"\u{1F476}",baby_bottle:"\u{1F37C}",baby_chick:"\u{1F424}",baby_symbol:"\u{1F6BC}",back:"\u{1F519}",bacon:"\u{1F953}",badminton:"\u{1F3F8}",baggage_claim:"\u{1F6C4}",baguette_bread:"\u{1F956}",balance_scale:"\u2696\uFE0F",balloon:"\u{1F388}",ballot_box:"\u{1F5F3}",ballot_box_with_check:"\u2611\uFE0F",bamboo:"\u{1F38D}",banana:"\u{1F34C}",bangbang:"\u203C\uFE0F",bank:"\u{1F3E6}",bar_chart:"\u{1F4CA}",barber:"\u{1F488}",baseball:"\u26BE\uFE0F",basketball:"\u{1F3C0}",basketball_man:"\u26F9\uFE0F",basketball_woman:"\u26F9\uFE0F&zwj;\u2640\uFE0F",bat:"\u{1F987}",bath:"\u{1F6C0}",bathtub:"\u{1F6C1}",battery:"\u{1F50B}",beach_umbrella:"\u{1F3D6}",bear:"\u{1F43B}",bed:"\u{1F6CF}",bee:"\u{1F41D}",beer:"\u{1F37A}",beers:"\u{1F37B}",beetle:"\u{1F41E}",beginner:"\u{1F530}",bell:"\u{1F514}",bellhop_bell:"\u{1F6CE}",bento:"\u{1F371}",biking_man:"\u{1F6B4}",bike:"\u{1F6B2}",biking_woman:"\u{1F6B4}&zwj;\u2640\uFE0F",bikini:"\u{1F459}",biohazard:"\u2623\uFE0F",bird:"\u{1F426}",birthday:"\u{1F382}",black_circle:"\u26AB\uFE0F",black_flag:"\u{1F3F4}",black_heart:"\u{1F5A4}",black_joker:"\u{1F0CF}",black_large_square:"\u2B1B\uFE0F",black_medium_small_square:"\u25FE\uFE0F",black_medium_square:"\u25FC\uFE0F",black_nib:"\u2712\uFE0F",black_small_square:"\u25AA\uFE0F",black_square_button:"\u{1F532}",blonde_man:"\u{1F471}",blonde_woman:"\u{1F471}&zwj;\u2640\uFE0F",blossom:"\u{1F33C}",blowfish:"\u{1F421}",blue_book:"\u{1F4D8}",blue_car:"\u{1F699}",blue_heart:"\u{1F499}",blush:"\u{1F60A}",boar:"\u{1F417}",boat:"\u26F5\uFE0F",bomb:"\u{1F4A3}",book:"\u{1F4D6}",bookmark:"\u{1F516}",bookmark_tabs:"\u{1F4D1}",books:"\u{1F4DA}",boom:"\u{1F4A5}",boot:"\u{1F462}",bouquet:"\u{1F490}",bowing_man:"\u{1F647}",bow_and_arrow:"\u{1F3F9}",bowing_woman:"\u{1F647}&zwj;\u2640\uFE0F",bowling:"\u{1F3B3}",boxing_glove:"\u{1F94A}",boy:"\u{1F466}",bread:"\u{1F35E}",bride_with_veil:"\u{1F470}",bridge_at_night:"\u{1F309}",briefcase:"\u{1F4BC}",broken_heart:"\u{1F494}",bug:"\u{1F41B}",building_construction:"\u{1F3D7}",bulb:"\u{1F4A1}",bullettrain_front:"\u{1F685}",bullettrain_side:"\u{1F684}",burrito:"\u{1F32F}",bus:"\u{1F68C}",business_suit_levitating:"\u{1F574}",busstop:"\u{1F68F}",bust_in_silhouette:"\u{1F464}",busts_in_silhouette:"\u{1F465}",butterfly:"\u{1F98B}",cactus:"\u{1F335}",cake:"\u{1F370}",calendar:"\u{1F4C6}",call_me_hand:"\u{1F919}",calling:"\u{1F4F2}",camel:"\u{1F42B}",camera:"\u{1F4F7}",camera_flash:"\u{1F4F8}",camping:"\u{1F3D5}",cancer:"\u264B\uFE0F",candle:"\u{1F56F}",candy:"\u{1F36C}",canoe:"\u{1F6F6}",capital_abcd:"\u{1F520}",capricorn:"\u2651\uFE0F",car:"\u{1F697}",card_file_box:"\u{1F5C3}",card_index:"\u{1F4C7}",card_index_dividers:"\u{1F5C2}",carousel_horse:"\u{1F3A0}",carrot:"\u{1F955}",cat:"\u{1F431}",cat2:"\u{1F408}",cd:"\u{1F4BF}",chains:"\u26D3",champagne:"\u{1F37E}",chart:"\u{1F4B9}",chart_with_downwards_trend:"\u{1F4C9}",chart_with_upwards_trend:"\u{1F4C8}",checkered_flag:"\u{1F3C1}",cheese:"\u{1F9C0}",cherries:"\u{1F352}",cherry_blossom:"\u{1F338}",chestnut:"\u{1F330}",chicken:"\u{1F414}",children_crossing:"\u{1F6B8}",chipmunk:"\u{1F43F}",chocolate_bar:"\u{1F36B}",christmas_tree:"\u{1F384}",church:"\u26EA\uFE0F",cinema:"\u{1F3A6}",circus_tent:"\u{1F3AA}",city_sunrise:"\u{1F307}",city_sunset:"\u{1F306}",cityscape:"\u{1F3D9}",cl:"\u{1F191}",clamp:"\u{1F5DC}",clap:"\u{1F44F}",clapper:"\u{1F3AC}",classical_building:"\u{1F3DB}",clinking_glasses:"\u{1F942}",clipboard:"\u{1F4CB}",clock1:"\u{1F550}",clock10:"\u{1F559}",clock1030:"\u{1F565}",clock11:"\u{1F55A}",clock1130:"\u{1F566}",clock12:"\u{1F55B}",clock1230:"\u{1F567}",clock130:"\u{1F55C}",clock2:"\u{1F551}",clock230:"\u{1F55D}",clock3:"\u{1F552}",clock330:"\u{1F55E}",clock4:"\u{1F553}",clock430:"\u{1F55F}",clock5:"\u{1F554}",clock530:"\u{1F560}",clock6:"\u{1F555}",clock630:"\u{1F561}",clock7:"\u{1F556}",clock730:"\u{1F562}",clock8:"\u{1F557}",clock830:"\u{1F563}",clock9:"\u{1F558}",clock930:"\u{1F564}",closed_book:"\u{1F4D5}",closed_lock_with_key:"\u{1F510}",closed_umbrella:"\u{1F302}",cloud:"\u2601\uFE0F",cloud_with_lightning:"\u{1F329}",cloud_with_lightning_and_rain:"\u26C8",cloud_with_rain:"\u{1F327}",cloud_with_snow:"\u{1F328}",clown_face:"\u{1F921}",clubs:"\u2663\uFE0F",cocktail:"\u{1F378}",coffee:"\u2615\uFE0F",coffin:"\u26B0\uFE0F",cold_sweat:"\u{1F630}",comet:"\u2604\uFE0F",computer:"\u{1F4BB}",computer_mouse:"\u{1F5B1}",confetti_ball:"\u{1F38A}",confounded:"\u{1F616}",confused:"\u{1F615}",congratulations:"\u3297\uFE0F",construction:"\u{1F6A7}",construction_worker_man:"\u{1F477}",construction_worker_woman:"\u{1F477}&zwj;\u2640\uFE0F",control_knobs:"\u{1F39B}",convenience_store:"\u{1F3EA}",cookie:"\u{1F36A}",cool:"\u{1F192}",policeman:"\u{1F46E}",copyright:"\xA9\uFE0F",corn:"\u{1F33D}",couch_and_lamp:"\u{1F6CB}",couple:"\u{1F46B}",couple_with_heart_woman_man:"\u{1F491}",couple_with_heart_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F468}",couple_with_heart_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F469}",couplekiss_man_man:"\u{1F468}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F468}",couplekiss_man_woman:"\u{1F48F}",couplekiss_woman_woman:"\u{1F469}&zwj;\u2764\uFE0F&zwj;\u{1F48B}&zwj;\u{1F469}",cow:"\u{1F42E}",cow2:"\u{1F404}",cowboy_hat_face:"\u{1F920}",crab:"\u{1F980}",crayon:"\u{1F58D}",credit_card:"\u{1F4B3}",crescent_moon:"\u{1F319}",cricket:"\u{1F3CF}",crocodile:"\u{1F40A}",croissant:"\u{1F950}",crossed_fingers:"\u{1F91E}",crossed_flags:"\u{1F38C}",crossed_swords:"\u2694\uFE0F",crown:"\u{1F451}",cry:"\u{1F622}",crying_cat_face:"\u{1F63F}",crystal_ball:"\u{1F52E}",cucumber:"\u{1F952}",cupid:"\u{1F498}",curly_loop:"\u27B0",currency_exchange:"\u{1F4B1}",curry:"\u{1F35B}",custard:"\u{1F36E}",customs:"\u{1F6C3}",cyclone:"\u{1F300}",dagger:"\u{1F5E1}",dancer:"\u{1F483}",dancing_women:"\u{1F46F}",dancing_men:"\u{1F46F}&zwj;\u2642\uFE0F",dango:"\u{1F361}",dark_sunglasses:"\u{1F576}",dart:"\u{1F3AF}",dash:"\u{1F4A8}",date:"\u{1F4C5}",deciduous_tree:"\u{1F333}",deer:"\u{1F98C}",department_store:"\u{1F3EC}",derelict_house:"\u{1F3DA}",desert:"\u{1F3DC}",desert_island:"\u{1F3DD}",desktop_computer:"\u{1F5A5}",male_detective:"\u{1F575}\uFE0F",diamond_shape_with_a_dot_inside:"\u{1F4A0}",diamonds:"\u2666\uFE0F",disappointed:"\u{1F61E}",disappointed_relieved:"\u{1F625}",dizzy:"\u{1F4AB}",dizzy_face:"\u{1F635}",do_not_litter:"\u{1F6AF}",dog:"\u{1F436}",dog2:"\u{1F415}",dollar:"\u{1F4B5}",dolls:"\u{1F38E}",dolphin:"\u{1F42C}",door:"\u{1F6AA}",doughnut:"\u{1F369}",dove:"\u{1F54A}",dragon:"\u{1F409}",dragon_face:"\u{1F432}",dress:"\u{1F457}",dromedary_camel:"\u{1F42A}",drooling_face:"\u{1F924}",droplet:"\u{1F4A7}",drum:"\u{1F941}",duck:"\u{1F986}",dvd:"\u{1F4C0}","e-mail":"\u{1F4E7}",eagle:"\u{1F985}",ear:"\u{1F442}",ear_of_rice:"\u{1F33E}",earth_africa:"\u{1F30D}",earth_americas:"\u{1F30E}",earth_asia:"\u{1F30F}",egg:"\u{1F95A}",eggplant:"\u{1F346}",eight_pointed_black_star:"\u2734\uFE0F",eight_spoked_asterisk:"\u2733\uFE0F",electric_plug:"\u{1F50C}",elephant:"\u{1F418}",email:"\u2709\uFE0F",end:"\u{1F51A}",envelope_with_arrow:"\u{1F4E9}",euro:"\u{1F4B6}",european_castle:"\u{1F3F0}",european_post_office:"\u{1F3E4}",evergreen_tree:"\u{1F332}",exclamation:"\u2757\uFE0F",expressionless:"\u{1F611}",eye:"\u{1F441}",eye_speech_bubble:"\u{1F441}&zwj;\u{1F5E8}",eyeglasses:"\u{1F453}",eyes:"\u{1F440}",face_with_head_bandage:"\u{1F915}",face_with_thermometer:"\u{1F912}",fist_oncoming:"\u{1F44A}",factory:"\u{1F3ED}",fallen_leaf:"\u{1F342}",family_man_woman_boy:"\u{1F46A}",family_man_boy:"\u{1F468}&zwj;\u{1F466}",family_man_boy_boy:"\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_girl:"\u{1F468}&zwj;\u{1F467}",family_man_girl_boy:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_girl_girl:"\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_man_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}",family_man_man_boy_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_man_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}",family_man_man_girl_boy:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_man_girl_girl:"\u{1F468}&zwj;\u{1F468}&zwj;\u{1F467}&zwj;\u{1F467}",family_man_woman_boy_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_man_woman_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}",family_man_woman_girl_boy:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_man_woman_girl_girl:"\u{1F468}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_boy:"\u{1F469}&zwj;\u{1F466}",family_woman_boy_boy:"\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_girl:"\u{1F469}&zwj;\u{1F467}",family_woman_girl_boy:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_girl_girl:"\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",family_woman_woman_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}",family_woman_woman_boy_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F466}&zwj;\u{1F466}",family_woman_woman_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}",family_woman_woman_girl_boy:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F466}",family_woman_woman_girl_girl:"\u{1F469}&zwj;\u{1F469}&zwj;\u{1F467}&zwj;\u{1F467}",fast_forward:"\u23E9",fax:"\u{1F4E0}",fearful:"\u{1F628}",feet:"\u{1F43E}",female_detective:"\u{1F575}\uFE0F&zwj;\u2640\uFE0F",ferris_wheel:"\u{1F3A1}",ferry:"\u26F4",field_hockey:"\u{1F3D1}",file_cabinet:"\u{1F5C4}",file_folder:"\u{1F4C1}",film_projector:"\u{1F4FD}",film_strip:"\u{1F39E}",fire:"\u{1F525}",fire_engine:"\u{1F692}",fireworks:"\u{1F386}",first_quarter_moon:"\u{1F313}",first_quarter_moon_with_face:"\u{1F31B}",fish:"\u{1F41F}",fish_cake:"\u{1F365}",fishing_pole_and_fish:"\u{1F3A3}",fist_raised:"\u270A",fist_left:"\u{1F91B}",fist_right:"\u{1F91C}",flags:"\u{1F38F}",flashlight:"\u{1F526}",fleur_de_lis:"\u269C\uFE0F",flight_arrival:"\u{1F6EC}",flight_departure:"\u{1F6EB}",floppy_disk:"\u{1F4BE}",flower_playing_cards:"\u{1F3B4}",flushed:"\u{1F633}",fog:"\u{1F32B}",foggy:"\u{1F301}",football:"\u{1F3C8}",footprints:"\u{1F463}",fork_and_knife:"\u{1F374}",fountain:"\u26F2\uFE0F",fountain_pen:"\u{1F58B}",four_leaf_clover:"\u{1F340}",fox_face:"\u{1F98A}",framed_picture:"\u{1F5BC}",free:"\u{1F193}",fried_egg:"\u{1F373}",fried_shrimp:"\u{1F364}",fries:"\u{1F35F}",frog:"\u{1F438}",frowning:"\u{1F626}",frowning_face:"\u2639\uFE0F",frowning_man:"\u{1F64D}&zwj;\u2642\uFE0F",frowning_woman:"\u{1F64D}",middle_finger:"\u{1F595}",fuelpump:"\u26FD\uFE0F",full_moon:"\u{1F315}",full_moon_with_face:"\u{1F31D}",funeral_urn:"\u26B1\uFE0F",game_die:"\u{1F3B2}",gear:"\u2699\uFE0F",gem:"\u{1F48E}",gemini:"\u264A\uFE0F",ghost:"\u{1F47B}",gift:"\u{1F381}",gift_heart:"\u{1F49D}",girl:"\u{1F467}",globe_with_meridians:"\u{1F310}",goal_net:"\u{1F945}",goat:"\u{1F410}",golf:"\u26F3\uFE0F",golfing_man:"\u{1F3CC}\uFE0F",golfing_woman:"\u{1F3CC}\uFE0F&zwj;\u2640\uFE0F",gorilla:"\u{1F98D}",grapes:"\u{1F347}",green_apple:"\u{1F34F}",green_book:"\u{1F4D7}",green_heart:"\u{1F49A}",green_salad:"\u{1F957}",grey_exclamation:"\u2755",grey_question:"\u2754",grimacing:"\u{1F62C}",grin:"\u{1F601}",grinning:"\u{1F600}",guardsman:"\u{1F482}",guardswoman:"\u{1F482}&zwj;\u2640\uFE0F",guitar:"\u{1F3B8}",gun:"\u{1F52B}",haircut_woman:"\u{1F487}",haircut_man:"\u{1F487}&zwj;\u2642\uFE0F",hamburger:"\u{1F354}",hammer:"\u{1F528}",hammer_and_pick:"\u2692",hammer_and_wrench:"\u{1F6E0}",hamster:"\u{1F439}",hand:"\u270B",handbag:"\u{1F45C}",handshake:"\u{1F91D}",hankey:"\u{1F4A9}",hatched_chick:"\u{1F425}",hatching_chick:"\u{1F423}",headphones:"\u{1F3A7}",hear_no_evil:"\u{1F649}",heart:"\u2764\uFE0F",heart_decoration:"\u{1F49F}",heart_eyes:"\u{1F60D}",heart_eyes_cat:"\u{1F63B}",heartbeat:"\u{1F493}",heartpulse:"\u{1F497}",hearts:"\u2665\uFE0F",heavy_check_mark:"\u2714\uFE0F",heavy_division_sign:"\u2797",heavy_dollar_sign:"\u{1F4B2}",heavy_heart_exclamation:"\u2763\uFE0F",heavy_minus_sign:"\u2796",heavy_multiplication_x:"\u2716\uFE0F",heavy_plus_sign:"\u2795",helicopter:"\u{1F681}",herb:"\u{1F33F}",hibiscus:"\u{1F33A}",high_brightness:"\u{1F506}",high_heel:"\u{1F460}",hocho:"\u{1F52A}",hole:"\u{1F573}",honey_pot:"\u{1F36F}",horse:"\u{1F434}",horse_racing:"\u{1F3C7}",hospital:"\u{1F3E5}",hot_pepper:"\u{1F336}",hotdog:"\u{1F32D}",hotel:"\u{1F3E8}",hotsprings:"\u2668\uFE0F",hourglass:"\u231B\uFE0F",hourglass_flowing_sand:"\u23F3",house:"\u{1F3E0}",house_with_garden:"\u{1F3E1}",houses:"\u{1F3D8}",hugs:"\u{1F917}",hushed:"\u{1F62F}",ice_cream:"\u{1F368}",ice_hockey:"\u{1F3D2}",ice_skate:"\u26F8",icecream:"\u{1F366}",id:"\u{1F194}",ideograph_advantage:"\u{1F250}",imp:"\u{1F47F}",inbox_tray:"\u{1F4E5}",incoming_envelope:"\u{1F4E8}",tipping_hand_woman:"\u{1F481}",information_source:"\u2139\uFE0F",innocent:"\u{1F607}",interrobang:"\u2049\uFE0F",iphone:"\u{1F4F1}",izakaya_lantern:"\u{1F3EE}",jack_o_lantern:"\u{1F383}",japan:"\u{1F5FE}",japanese_castle:"\u{1F3EF}",japanese_goblin:"\u{1F47A}",japanese_ogre:"\u{1F479}",jeans:"\u{1F456}",joy:"\u{1F602}",joy_cat:"\u{1F639}",joystick:"\u{1F579}",kaaba:"\u{1F54B}",key:"\u{1F511}",keyboard:"\u2328\uFE0F",keycap_ten:"\u{1F51F}",kick_scooter:"\u{1F6F4}",kimono:"\u{1F458}",kiss:"\u{1F48B}",kissing:"\u{1F617}",kissing_cat:"\u{1F63D}",kissing_closed_eyes:"\u{1F61A}",kissing_heart:"\u{1F618}",kissing_smiling_eyes:"\u{1F619}",kiwi_fruit:"\u{1F95D}",koala:"\u{1F428}",koko:"\u{1F201}",label:"\u{1F3F7}",large_blue_circle:"\u{1F535}",large_blue_diamond:"\u{1F537}",large_orange_diamond:"\u{1F536}",last_quarter_moon:"\u{1F317}",last_quarter_moon_with_face:"\u{1F31C}",latin_cross:"\u271D\uFE0F",laughing:"\u{1F606}",leaves:"\u{1F343}",ledger:"\u{1F4D2}",left_luggage:"\u{1F6C5}",left_right_arrow:"\u2194\uFE0F",leftwards_arrow_with_hook:"\u21A9\uFE0F",lemon:"\u{1F34B}",leo:"\u264C\uFE0F",leopard:"\u{1F406}",level_slider:"\u{1F39A}",libra:"\u264E\uFE0F",light_rail:"\u{1F688}",link:"\u{1F517}",lion:"\u{1F981}",lips:"\u{1F444}",lipstick:"\u{1F484}",lizard:"\u{1F98E}",lock:"\u{1F512}",lock_with_ink_pen:"\u{1F50F}",lollipop:"\u{1F36D}",loop:"\u27BF",loud_sound:"\u{1F50A}",loudspeaker:"\u{1F4E2}",love_hotel:"\u{1F3E9}",love_letter:"\u{1F48C}",low_brightness:"\u{1F505}",lying_face:"\u{1F925}",m:"\u24C2\uFE0F",mag:"\u{1F50D}",mag_right:"\u{1F50E}",mahjong:"\u{1F004}\uFE0F",mailbox:"\u{1F4EB}",mailbox_closed:"\u{1F4EA}",mailbox_with_mail:"\u{1F4EC}",mailbox_with_no_mail:"\u{1F4ED}",man:"\u{1F468}",man_artist:"\u{1F468}&zwj;\u{1F3A8}",man_astronaut:"\u{1F468}&zwj;\u{1F680}",man_cartwheeling:"\u{1F938}&zwj;\u2642\uFE0F",man_cook:"\u{1F468}&zwj;\u{1F373}",man_dancing:"\u{1F57A}",man_facepalming:"\u{1F926}&zwj;\u2642\uFE0F",man_factory_worker:"\u{1F468}&zwj;\u{1F3ED}",man_farmer:"\u{1F468}&zwj;\u{1F33E}",man_firefighter:"\u{1F468}&zwj;\u{1F692}",man_health_worker:"\u{1F468}&zwj;\u2695\uFE0F",man_in_tuxedo:"\u{1F935}",man_judge:"\u{1F468}&zwj;\u2696\uFE0F",man_juggling:"\u{1F939}&zwj;\u2642\uFE0F",man_mechanic:"\u{1F468}&zwj;\u{1F527}",man_office_worker:"\u{1F468}&zwj;\u{1F4BC}",man_pilot:"\u{1F468}&zwj;\u2708\uFE0F",man_playing_handball:"\u{1F93E}&zwj;\u2642\uFE0F",man_playing_water_polo:"\u{1F93D}&zwj;\u2642\uFE0F",man_scientist:"\u{1F468}&zwj;\u{1F52C}",man_shrugging:"\u{1F937}&zwj;\u2642\uFE0F",man_singer:"\u{1F468}&zwj;\u{1F3A4}",man_student:"\u{1F468}&zwj;\u{1F393}",man_teacher:"\u{1F468}&zwj;\u{1F3EB}",man_technologist:"\u{1F468}&zwj;\u{1F4BB}",man_with_gua_pi_mao:"\u{1F472}",man_with_turban:"\u{1F473}",tangerine:"\u{1F34A}",mans_shoe:"\u{1F45E}",mantelpiece_clock:"\u{1F570}",maple_leaf:"\u{1F341}",martial_arts_uniform:"\u{1F94B}",mask:"\u{1F637}",massage_woman:"\u{1F486}",massage_man:"\u{1F486}&zwj;\u2642\uFE0F",meat_on_bone:"\u{1F356}",medal_military:"\u{1F396}",medal_sports:"\u{1F3C5}",mega:"\u{1F4E3}",melon:"\u{1F348}",memo:"\u{1F4DD}",men_wrestling:"\u{1F93C}&zwj;\u2642\uFE0F",menorah:"\u{1F54E}",mens:"\u{1F6B9}",metal:"\u{1F918}",metro:"\u{1F687}",microphone:"\u{1F3A4}",microscope:"\u{1F52C}",milk_glass:"\u{1F95B}",milky_way:"\u{1F30C}",minibus:"\u{1F690}",minidisc:"\u{1F4BD}",mobile_phone_off:"\u{1F4F4}",money_mouth_face:"\u{1F911}",money_with_wings:"\u{1F4B8}",moneybag:"\u{1F4B0}",monkey:"\u{1F412}",monkey_face:"\u{1F435}",monorail:"\u{1F69D}",moon:"\u{1F314}",mortar_board:"\u{1F393}",mosque:"\u{1F54C}",motor_boat:"\u{1F6E5}",motor_scooter:"\u{1F6F5}",motorcycle:"\u{1F3CD}",motorway:"\u{1F6E3}",mount_fuji:"\u{1F5FB}",mountain:"\u26F0",mountain_biking_man:"\u{1F6B5}",mountain_biking_woman:"\u{1F6B5}&zwj;\u2640\uFE0F",mountain_cableway:"\u{1F6A0}",mountain_railway:"\u{1F69E}",mountain_snow:"\u{1F3D4}",mouse:"\u{1F42D}",mouse2:"\u{1F401}",movie_camera:"\u{1F3A5}",moyai:"\u{1F5FF}",mrs_claus:"\u{1F936}",muscle:"\u{1F4AA}",mushroom:"\u{1F344}",musical_keyboard:"\u{1F3B9}",musical_note:"\u{1F3B5}",musical_score:"\u{1F3BC}",mute:"\u{1F507}",nail_care:"\u{1F485}",name_badge:"\u{1F4DB}",national_park:"\u{1F3DE}",nauseated_face:"\u{1F922}",necktie:"\u{1F454}",negative_squared_cross_mark:"\u274E",nerd_face:"\u{1F913}",neutral_face:"\u{1F610}",new:"\u{1F195}",new_moon:"\u{1F311}",new_moon_with_face:"\u{1F31A}",newspaper:"\u{1F4F0}",newspaper_roll:"\u{1F5DE}",next_track_button:"\u23ED",ng:"\u{1F196}",no_good_man:"\u{1F645}&zwj;\u2642\uFE0F",no_good_woman:"\u{1F645}",night_with_stars:"\u{1F303}",no_bell:"\u{1F515}",no_bicycles:"\u{1F6B3}",no_entry:"\u26D4\uFE0F",no_entry_sign:"\u{1F6AB}",no_mobile_phones:"\u{1F4F5}",no_mouth:"\u{1F636}",no_pedestrians:"\u{1F6B7}",no_smoking:"\u{1F6AD}","non-potable_water":"\u{1F6B1}",nose:"\u{1F443}",notebook:"\u{1F4D3}",notebook_with_decorative_cover:"\u{1F4D4}",notes:"\u{1F3B6}",nut_and_bolt:"\u{1F529}",o:"\u2B55\uFE0F",o2:"\u{1F17E}\uFE0F",ocean:"\u{1F30A}",octopus:"\u{1F419}",oden:"\u{1F362}",office:"\u{1F3E2}",oil_drum:"\u{1F6E2}",ok:"\u{1F197}",ok_hand:"\u{1F44C}",ok_man:"\u{1F646}&zwj;\u2642\uFE0F",ok_woman:"\u{1F646}",old_key:"\u{1F5DD}",older_man:"\u{1F474}",older_woman:"\u{1F475}",om:"\u{1F549}",on:"\u{1F51B}",oncoming_automobile:"\u{1F698}",oncoming_bus:"\u{1F68D}",oncoming_police_car:"\u{1F694}",oncoming_taxi:"\u{1F696}",open_file_folder:"\u{1F4C2}",open_hands:"\u{1F450}",open_mouth:"\u{1F62E}",open_umbrella:"\u2602\uFE0F",ophiuchus:"\u26CE",orange_book:"\u{1F4D9}",orthodox_cross:"\u2626\uFE0F",outbox_tray:"\u{1F4E4}",owl:"\u{1F989}",ox:"\u{1F402}",package:"\u{1F4E6}",page_facing_up:"\u{1F4C4}",page_with_curl:"\u{1F4C3}",pager:"\u{1F4DF}",paintbrush:"\u{1F58C}",palm_tree:"\u{1F334}",pancakes:"\u{1F95E}",panda_face:"\u{1F43C}",paperclip:"\u{1F4CE}",paperclips:"\u{1F587}",parasol_on_ground:"\u26F1",parking:"\u{1F17F}\uFE0F",part_alternation_mark:"\u303D\uFE0F",partly_sunny:"\u26C5\uFE0F",passenger_ship:"\u{1F6F3}",passport_control:"\u{1F6C2}",pause_button:"\u23F8",peace_symbol:"\u262E\uFE0F",peach:"\u{1F351}",peanuts:"\u{1F95C}",pear:"\u{1F350}",pen:"\u{1F58A}",pencil2:"\u270F\uFE0F",penguin:"\u{1F427}",pensive:"\u{1F614}",performing_arts:"\u{1F3AD}",persevere:"\u{1F623}",person_fencing:"\u{1F93A}",pouting_woman:"\u{1F64E}",phone:"\u260E\uFE0F",pick:"\u26CF",pig:"\u{1F437}",pig2:"\u{1F416}",pig_nose:"\u{1F43D}",pill:"\u{1F48A}",pineapple:"\u{1F34D}",ping_pong:"\u{1F3D3}",pisces:"\u2653\uFE0F",pizza:"\u{1F355}",place_of_worship:"\u{1F6D0}",plate_with_cutlery:"\u{1F37D}",play_or_pause_button:"\u23EF",point_down:"\u{1F447}",point_left:"\u{1F448}",point_right:"\u{1F449}",point_up:"\u261D\uFE0F",point_up_2:"\u{1F446}",police_car:"\u{1F693}",policewoman:"\u{1F46E}&zwj;\u2640\uFE0F",poodle:"\u{1F429}",popcorn:"\u{1F37F}",post_office:"\u{1F3E3}",postal_horn:"\u{1F4EF}",postbox:"\u{1F4EE}",potable_water:"\u{1F6B0}",potato:"\u{1F954}",pouch:"\u{1F45D}",poultry_leg:"\u{1F357}",pound:"\u{1F4B7}",rage:"\u{1F621}",pouting_cat:"\u{1F63E}",pouting_man:"\u{1F64E}&zwj;\u2642\uFE0F",pray:"\u{1F64F}",prayer_beads:"\u{1F4FF}",pregnant_woman:"\u{1F930}",previous_track_button:"\u23EE",prince:"\u{1F934}",princess:"\u{1F478}",printer:"\u{1F5A8}",purple_heart:"\u{1F49C}",purse:"\u{1F45B}",pushpin:"\u{1F4CC}",put_litter_in_its_place:"\u{1F6AE}",question:"\u2753",rabbit:"\u{1F430}",rabbit2:"\u{1F407}",racehorse:"\u{1F40E}",racing_car:"\u{1F3CE}",radio:"\u{1F4FB}",radio_button:"\u{1F518}",radioactive:"\u2622\uFE0F",railway_car:"\u{1F683}",railway_track:"\u{1F6E4}",rainbow:"\u{1F308}",rainbow_flag:"\u{1F3F3}\uFE0F&zwj;\u{1F308}",raised_back_of_hand:"\u{1F91A}",raised_hand_with_fingers_splayed:"\u{1F590}",raised_hands:"\u{1F64C}",raising_hand_woman:"\u{1F64B}",raising_hand_man:"\u{1F64B}&zwj;\u2642\uFE0F",ram:"\u{1F40F}",ramen:"\u{1F35C}",rat:"\u{1F400}",record_button:"\u23FA",recycle:"\u267B\uFE0F",red_circle:"\u{1F534}",registered:"\xAE\uFE0F",relaxed:"\u263A\uFE0F",relieved:"\u{1F60C}",reminder_ribbon:"\u{1F397}",repeat:"\u{1F501}",repeat_one:"\u{1F502}",rescue_worker_helmet:"\u26D1",restroom:"\u{1F6BB}",revolving_hearts:"\u{1F49E}",rewind:"\u23EA",rhinoceros:"\u{1F98F}",ribbon:"\u{1F380}",rice:"\u{1F35A}",rice_ball:"\u{1F359}",rice_cracker:"\u{1F358}",rice_scene:"\u{1F391}",right_anger_bubble:"\u{1F5EF}",ring:"\u{1F48D}",robot:"\u{1F916}",rocket:"\u{1F680}",rofl:"\u{1F923}",roll_eyes:"\u{1F644}",roller_coaster:"\u{1F3A2}",rooster:"\u{1F413}",rose:"\u{1F339}",rosette:"\u{1F3F5}",rotating_light:"\u{1F6A8}",round_pushpin:"\u{1F4CD}",rowing_man:"\u{1F6A3}",rowing_woman:"\u{1F6A3}&zwj;\u2640\uFE0F",rugby_football:"\u{1F3C9}",running_man:"\u{1F3C3}",running_shirt_with_sash:"\u{1F3BD}",running_woman:"\u{1F3C3}&zwj;\u2640\uFE0F",sa:"\u{1F202}\uFE0F",sagittarius:"\u2650\uFE0F",sake:"\u{1F376}",sandal:"\u{1F461}",santa:"\u{1F385}",satellite:"\u{1F4E1}",saxophone:"\u{1F3B7}",school:"\u{1F3EB}",school_satchel:"\u{1F392}",scissors:"\u2702\uFE0F",scorpion:"\u{1F982}",scorpius:"\u264F\uFE0F",scream:"\u{1F631}",scream_cat:"\u{1F640}",scroll:"\u{1F4DC}",seat:"\u{1F4BA}",secret:"\u3299\uFE0F",see_no_evil:"\u{1F648}",seedling:"\u{1F331}",selfie:"\u{1F933}",shallow_pan_of_food:"\u{1F958}",shamrock:"\u2618\uFE0F",shark:"\u{1F988}",shaved_ice:"\u{1F367}",sheep:"\u{1F411}",shell:"\u{1F41A}",shield:"\u{1F6E1}",shinto_shrine:"\u26E9",ship:"\u{1F6A2}",shirt:"\u{1F455}",shopping:"\u{1F6CD}",shopping_cart:"\u{1F6D2}",shower:"\u{1F6BF}",shrimp:"\u{1F990}",signal_strength:"\u{1F4F6}",six_pointed_star:"\u{1F52F}",ski:"\u{1F3BF}",skier:"\u26F7",skull:"\u{1F480}",skull_and_crossbones:"\u2620\uFE0F",sleeping:"\u{1F634}",sleeping_bed:"\u{1F6CC}",sleepy:"\u{1F62A}",slightly_frowning_face:"\u{1F641}",slightly_smiling_face:"\u{1F642}",slot_machine:"\u{1F3B0}",small_airplane:"\u{1F6E9}",small_blue_diamond:"\u{1F539}",small_orange_diamond:"\u{1F538}",small_red_triangle:"\u{1F53A}",small_red_triangle_down:"\u{1F53B}",smile:"\u{1F604}",smile_cat:"\u{1F638}",smiley:"\u{1F603}",smiley_cat:"\u{1F63A}",smiling_imp:"\u{1F608}",smirk:"\u{1F60F}",smirk_cat:"\u{1F63C}",smoking:"\u{1F6AC}",snail:"\u{1F40C}",snake:"\u{1F40D}",sneezing_face:"\u{1F927}",snowboarder:"\u{1F3C2}",snowflake:"\u2744\uFE0F",snowman:"\u26C4\uFE0F",snowman_with_snow:"\u2603\uFE0F",sob:"\u{1F62D}",soccer:"\u26BD\uFE0F",soon:"\u{1F51C}",sos:"\u{1F198}",sound:"\u{1F509}",space_invader:"\u{1F47E}",spades:"\u2660\uFE0F",spaghetti:"\u{1F35D}",sparkle:"\u2747\uFE0F",sparkler:"\u{1F387}",sparkles:"\u2728",sparkling_heart:"\u{1F496}",speak_no_evil:"\u{1F64A}",speaker:"\u{1F508}",speaking_head:"\u{1F5E3}",speech_balloon:"\u{1F4AC}",speedboat:"\u{1F6A4}",spider:"\u{1F577}",spider_web:"\u{1F578}",spiral_calendar:"\u{1F5D3}",spiral_notepad:"\u{1F5D2}",spoon:"\u{1F944}",squid:"\u{1F991}",stadium:"\u{1F3DF}",star:"\u2B50\uFE0F",star2:"\u{1F31F}",star_and_crescent:"\u262A\uFE0F",star_of_david:"\u2721\uFE0F",stars:"\u{1F320}",station:"\u{1F689}",statue_of_liberty:"\u{1F5FD}",steam_locomotive:"\u{1F682}",stew:"\u{1F372}",stop_button:"\u23F9",stop_sign:"\u{1F6D1}",stopwatch:"\u23F1",straight_ruler:"\u{1F4CF}",strawberry:"\u{1F353}",stuck_out_tongue:"\u{1F61B}",stuck_out_tongue_closed_eyes:"\u{1F61D}",stuck_out_tongue_winking_eye:"\u{1F61C}",studio_microphone:"\u{1F399}",stuffed_flatbread:"\u{1F959}",sun_behind_large_cloud:"\u{1F325}",sun_behind_rain_cloud:"\u{1F326}",sun_behind_small_cloud:"\u{1F324}",sun_with_face:"\u{1F31E}",sunflower:"\u{1F33B}",sunglasses:"\u{1F60E}",sunny:"\u2600\uFE0F",sunrise:"\u{1F305}",sunrise_over_mountains:"\u{1F304}",surfing_man:"\u{1F3C4}",surfing_woman:"\u{1F3C4}&zwj;\u2640\uFE0F",sushi:"\u{1F363}",suspension_railway:"\u{1F69F}",sweat:"\u{1F613}",sweat_drops:"\u{1F4A6}",sweat_smile:"\u{1F605}",sweet_potato:"\u{1F360}",swimming_man:"\u{1F3CA}",swimming_woman:"\u{1F3CA}&zwj;\u2640\uFE0F",symbols:"\u{1F523}",synagogue:"\u{1F54D}",syringe:"\u{1F489}",taco:"\u{1F32E}",tada:"\u{1F389}",tanabata_tree:"\u{1F38B}",taurus:"\u2649\uFE0F",taxi:"\u{1F695}",tea:"\u{1F375}",telephone_receiver:"\u{1F4DE}",telescope:"\u{1F52D}",tennis:"\u{1F3BE}",tent:"\u26FA\uFE0F",thermometer:"\u{1F321}",thinking:"\u{1F914}",thought_balloon:"\u{1F4AD}",ticket:"\u{1F3AB}",tickets:"\u{1F39F}",tiger:"\u{1F42F}",tiger2:"\u{1F405}",timer_clock:"\u23F2",tipping_hand_man:"\u{1F481}&zwj;\u2642\uFE0F",tired_face:"\u{1F62B}",tm:"\u2122\uFE0F",toilet:"\u{1F6BD}",tokyo_tower:"\u{1F5FC}",tomato:"\u{1F345}",tongue:"\u{1F445}",top:"\u{1F51D}",tophat:"\u{1F3A9}",tornado:"\u{1F32A}",trackball:"\u{1F5B2}",tractor:"\u{1F69C}",traffic_light:"\u{1F6A5}",train:"\u{1F68B}",train2:"\u{1F686}",tram:"\u{1F68A}",triangular_flag_on_post:"\u{1F6A9}",triangular_ruler:"\u{1F4D0}",trident:"\u{1F531}",triumph:"\u{1F624}",trolleybus:"\u{1F68E}",trophy:"\u{1F3C6}",tropical_drink:"\u{1F379}",tropical_fish:"\u{1F420}",truck:"\u{1F69A}",trumpet:"\u{1F3BA}",tulip:"\u{1F337}",tumbler_glass:"\u{1F943}",turkey:"\u{1F983}",turtle:"\u{1F422}",tv:"\u{1F4FA}",twisted_rightwards_arrows:"\u{1F500}",two_hearts:"\u{1F495}",two_men_holding_hands:"\u{1F46C}",two_women_holding_hands:"\u{1F46D}",u5272:"\u{1F239}",u5408:"\u{1F234}",u55b6:"\u{1F23A}",u6307:"\u{1F22F}\uFE0F",u6708:"\u{1F237}\uFE0F",u6709:"\u{1F236}",u6e80:"\u{1F235}",u7121:"\u{1F21A}\uFE0F",u7533:"\u{1F238}",u7981:"\u{1F232}",u7a7a:"\u{1F233}",umbrella:"\u2614\uFE0F",unamused:"\u{1F612}",underage:"\u{1F51E}",unicorn:"\u{1F984}",unlock:"\u{1F513}",up:"\u{1F199}",upside_down_face:"\u{1F643}",v:"\u270C\uFE0F",vertical_traffic_light:"\u{1F6A6}",vhs:"\u{1F4FC}",vibration_mode:"\u{1F4F3}",video_camera:"\u{1F4F9}",video_game:"\u{1F3AE}",violin:"\u{1F3BB}",virgo:"\u264D\uFE0F",volcano:"\u{1F30B}",volleyball:"\u{1F3D0}",vs:"\u{1F19A}",vulcan_salute:"\u{1F596}",walking_man:"\u{1F6B6}",walking_woman:"\u{1F6B6}&zwj;\u2640\uFE0F",waning_crescent_moon:"\u{1F318}",waning_gibbous_moon:"\u{1F316}",warning:"\u26A0\uFE0F",wastebasket:"\u{1F5D1}",watch:"\u231A\uFE0F",water_buffalo:"\u{1F403}",watermelon:"\u{1F349}",wave:"\u{1F44B}",wavy_dash:"\u3030\uFE0F",waxing_crescent_moon:"\u{1F312}",wc:"\u{1F6BE}",weary:"\u{1F629}",wedding:"\u{1F492}",weight_lifting_man:"\u{1F3CB}\uFE0F",weight_lifting_woman:"\u{1F3CB}\uFE0F&zwj;\u2640\uFE0F",whale:"\u{1F433}",whale2:"\u{1F40B}",wheel_of_dharma:"\u2638\uFE0F",wheelchair:"\u267F\uFE0F",white_check_mark:"\u2705",white_circle:"\u26AA\uFE0F",white_flag:"\u{1F3F3}\uFE0F",white_flower:"\u{1F4AE}",white_large_square:"\u2B1C\uFE0F",white_medium_small_square:"\u25FD\uFE0F",white_medium_square:"\u25FB\uFE0F",white_small_square:"\u25AB\uFE0F",white_square_button:"\u{1F533}",wilted_flower:"\u{1F940}",wind_chime:"\u{1F390}",wind_face:"\u{1F32C}",wine_glass:"\u{1F377}",wink:"\u{1F609}",wolf:"\u{1F43A}",woman:"\u{1F469}",woman_artist:"\u{1F469}&zwj;\u{1F3A8}",woman_astronaut:"\u{1F469}&zwj;\u{1F680}",woman_cartwheeling:"\u{1F938}&zwj;\u2640\uFE0F",woman_cook:"\u{1F469}&zwj;\u{1F373}",woman_facepalming:"\u{1F926}&zwj;\u2640\uFE0F",woman_factory_worker:"\u{1F469}&zwj;\u{1F3ED}",woman_farmer:"\u{1F469}&zwj;\u{1F33E}",woman_firefighter:"\u{1F469}&zwj;\u{1F692}",woman_health_worker:"\u{1F469}&zwj;\u2695\uFE0F",woman_judge:"\u{1F469}&zwj;\u2696\uFE0F",woman_juggling:"\u{1F939}&zwj;\u2640\uFE0F",woman_mechanic:"\u{1F469}&zwj;\u{1F527}",woman_office_worker:"\u{1F469}&zwj;\u{1F4BC}",woman_pilot:"\u{1F469}&zwj;\u2708\uFE0F",woman_playing_handball:"\u{1F93E}&zwj;\u2640\uFE0F",woman_playing_water_polo:"\u{1F93D}&zwj;\u2640\uFE0F",woman_scientist:"\u{1F469}&zwj;\u{1F52C}",woman_shrugging:"\u{1F937}&zwj;\u2640\uFE0F",woman_singer:"\u{1F469}&zwj;\u{1F3A4}",woman_student:"\u{1F469}&zwj;\u{1F393}",woman_teacher:"\u{1F469}&zwj;\u{1F3EB}",woman_technologist:"\u{1F469}&zwj;\u{1F4BB}",woman_with_turban:"\u{1F473}&zwj;\u2640\uFE0F",womans_clothes:"\u{1F45A}",womans_hat:"\u{1F452}",women_wrestling:"\u{1F93C}&zwj;\u2640\uFE0F",womens:"\u{1F6BA}",world_map:"\u{1F5FA}",worried:"\u{1F61F}",wrench:"\u{1F527}",writing_hand:"\u270D\uFE0F",x:"\u274C",yellow_heart:"\u{1F49B}",yen:"\u{1F4B4}",yin_yang:"\u262F\uFE0F",yum:"\u{1F60B}",zap:"\u26A1\uFE0F",zipper_mouth_face:"\u{1F910}",zzz:"\u{1F4A4}",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:`<span style="font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;">S</span>`},r.Converter=function(f){"use strict";var p={},w=[],v=[],S={},T=a,I={parsed:{},raw:"",format:""};M();function M(){f=f||{};for(var x in i)i.hasOwnProperty(x)&&(p[x]=i[x]);if(typeof f=="object")for(var z in f)f.hasOwnProperty(z)&&(p[z]=f[z]);else throw Error("Converter expects the passed parameter to be an object, but "+typeof f+" was passed instead.");p.extensions&&r.helper.forEach(p.extensions,P)}function P(x,z){if(z=z||null,r.helper.isString(x))if(x=r.helper.stdExtName(x),z=x,r.extensions[x]){console.warn("DEPRECATION WARNING: "+x+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),$(r.extensions[x],x);return}else if(!r.helper.isUndefined(o[x]))x=o[x];else throw Error('Extension "'+x+'" could not be loaded. It was either not found or is not a valid extension.');typeof x=="function"&&(x=x()),r.helper.isArray(x)||(x=[x]);var V=d(x,z);if(!V.valid)throw Error(V.error);for(var K=0;K<x.length;++K){switch(x[K].type){case"lang":w.push(x[K]);break;case"output":v.push(x[K]);break}if(x[K].hasOwnProperty("listeners"))for(var Z in x[K].listeners)x[K].listeners.hasOwnProperty(Z)&&F(Z,x[K].listeners[Z])}}function $(x,z){typeof x=="function"&&(x=x(new r.Converter)),r.helper.isArray(x)||(x=[x]);var V=d(x,z);if(!V.valid)throw Error(V.error);for(var K=0;K<x.length;++K)switch(x[K].type){case"lang":w.push(x[K]);break;case"output":v.push(x[K]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function F(x,z){if(!r.helper.isString(x))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof x+" given");if(typeof z!="function")throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof z+" given");S.hasOwnProperty(x)||(S[x]=[]),S[x].push(z)}function q(x){var z=x.match(/^\s*/)[0].length,V=new RegExp("^\\s{0,"+z+"}","gm");return x.replace(V,"")}this._dispatch=function(z,V,K,Z){if(S.hasOwnProperty(z))for(var W=0;W<S[z].length;++W){var J=S[z][W](z,V,this,K,Z);J&&typeof J<"u"&&(V=J)}return V},this.listen=function(x,z){return F(x,z),this},this.makeHtml=function(x){if(!x)return x;var z={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:w,outputModifiers:v,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return x=x.replace(/¨/g,"\xA8T"),x=x.replace(/\$/g,"\xA8D"),x=x.replace(/\r\n/g,`
`),x=x.replace(/\r/g,`
`),x=x.replace(/\u00A0/g,"&nbsp;"),p.smartIndentationFix&&(x=q(x)),x=`

`+x+`

`,x=r.subParser("detab")(x,p,z),x=x.replace(/^[ \t]+$/mg,""),r.helper.forEach(w,function(V){x=r.subParser("runExtension")(V,x,p,z)}),x=r.subParser("metadata")(x,p,z),x=r.subParser("hashPreCodeTags")(x,p,z),x=r.subParser("githubCodeBlocks")(x,p,z),x=r.subParser("hashHTMLBlocks")(x,p,z),x=r.subParser("hashCodeTags")(x,p,z),x=r.subParser("stripLinkDefinitions")(x,p,z),x=r.subParser("blockGamut")(x,p,z),x=r.subParser("unhashHTMLSpans")(x,p,z),x=r.subParser("unescapeSpecialChars")(x,p,z),x=x.replace(/¨D/g,"$$"),x=x.replace(/¨T/g,"\xA8"),x=r.subParser("completeHTMLDocument")(x,p,z),r.helper.forEach(v,function(V){x=r.subParser("runExtension")(V,x,p,z)}),I=z.metadata,x},this.makeMarkdown=this.makeMd=function(x,z){if(x=x.replace(/\r\n/g,`
`),x=x.replace(/\r/g,`
`),x=x.replace(/>[ \t]+</,">\xA8NBSP;<"),!z)if(window&&window.document)z=window.document;else throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");var V=z.createElement("div");V.innerHTML=x;var K={preList:_e(V)};le(V);for(var Z=V.childNodes,W="",J=0;J<Z.length;J++)W+=r.subParser("makeMarkdown.node")(Z[J],K);function le(ve){for(var Ie=0;Ie<ve.childNodes.length;++Ie){var ie=ve.childNodes[Ie];ie.nodeType===3?!/\S/.test(ie.nodeValue)&&!/^[ ]+$/.test(ie.nodeValue)?(ve.removeChild(ie),--Ie):(ie.nodeValue=ie.nodeValue.split(`
`).join(" "),ie.nodeValue=ie.nodeValue.replace(/(\s)+/g,"$1")):ie.nodeType===1&&le(ie)}}function _e(ve){for(var Ie=ve.querySelectorAll("pre"),ie=[],Se=0;Se<Ie.length;++Se)if(Ie[Se].childElementCount===1&&Ie[Se].firstChild.tagName.toLowerCase()==="code"){var Ve=Ie[Se].firstChild.innerHTML.trim(),Re=Ie[Se].firstChild.getAttribute("data-language")||"";if(Re==="")for(var je=Ie[Se].firstChild.className.split(" "),Et=0;Et<je.length;++Et){var Qe=je[Et].match(/^language-(.+)$/);if(Qe!==null){Re=Qe[1];break}}Ve=r.helper.unescapeHTMLEntities(Ve),ie.push(Ve),Ie[Se].outerHTML='<precode language="'+Re+'" precodenum="'+Se.toString()+'"></precode>'}else ie.push(Ie[Se].innerHTML),Ie[Se].innerHTML="",Ie[Se].setAttribute("prenum",Se.toString());return ie}return W},this.setOption=function(x,z){p[x]=z},this.getOption=function(x){return p[x]},this.getOptions=function(){return p},this.addExtension=function(x,z){z=z||null,P(x,z)},this.useExtension=function(x){P(x)},this.setFlavor=function(x){if(!u.hasOwnProperty(x))throw Error(x+" flavor was not found");var z=u[x];T=x;for(var V in z)z.hasOwnProperty(V)&&(p[V]=z[V])},this.getFlavor=function(){return T},this.removeExtension=function(x){r.helper.isArray(x)||(x=[x]);for(var z=0;z<x.length;++z){for(var V=x[z],K=0;K<w.length;++K)w[K]===V&&w.splice(K,1);for(var Z=0;Z<v.length;++Z)v[Z]===V&&v.splice(Z,1)}},this.getAllExtensions=function(){return{language:w,output:v}},this.getMetadata=function(x){return x?I.raw:I.parsed},this.getMetadataFormat=function(){return I.format},this._setMetadataPair=function(x,z){I.parsed[x]=z},this._setMetadataFormat=function(x){I.format=x},this._setMetadataRaw=function(x){I.raw=x}},r.subParser("anchors",function(f,p,w){"use strict";f=w.converter._dispatch("anchors.before",f,p,w);var v=function(S,T,I,M,P,$,F){if(r.helper.isUndefined(F)&&(F=""),I=I.toLowerCase(),S.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)M="";else if(!M)if(I||(I=T.toLowerCase().replace(/ ?\n/g," ")),M="#"+I,!r.helper.isUndefined(w.gUrls[I]))M=w.gUrls[I],r.helper.isUndefined(w.gTitles[I])||(F=w.gTitles[I]);else return S;M=M.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var q='<a href="'+M+'"';return F!==""&&F!==null&&(F=F.replace(/"/g,"&quot;"),F=F.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),q+=' title="'+F+'"'),p.openLinksInNewWindow&&!/^#/.test(M)&&(q+=' rel="noopener noreferrer" target="\xA8E95Eblank"'),q+=">"+T+"</a>",q};return f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,v),f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),f=f.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,v),f=f.replace(/\[([^\[\]]+)]()()()()()/g,v),p.ghMentions&&(f=f.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gmi,function(S,T,I,M,P){if(I==="\\")return T+M;if(!r.helper.isString(p.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var $=p.ghMentionsLink.replace(/\{u}/g,P),F="";return p.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="\xA8E95Eblank"'),T+'<a href="'+$+'"'+F+">"+M+"</a>"})),f=w.converter._dispatch("anchors.after",f,p,w),f});var m=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,_=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,A=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,C=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gmi,k=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,N=function(f){"use strict";return function(p,w,v,S,T,I,M){v=v.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var P=v,$="",F="",q=w||"",x=M||"";return/^www\./i.test(v)&&(v=v.replace(/^www\./i,"http://www.")),f.excludeTrailingPunctuationFromURLs&&I&&($=I),f.openLinksInNewWindow&&(F=' rel="noopener noreferrer" target="\xA8E95Eblank"'),q+'<a href="'+v+'"'+F+">"+P+"</a>"+$+x}},R=function(f,p){"use strict";return function(w,v,S){var T="mailto:";return v=v||"",S=r.subParser("unescapeSpecialChars")(S,f,p),f.encodeEmails?(T=r.helper.encodeEmailAddress(T+S),S=r.helper.encodeEmailAddress(S)):T=T+S,v+'<a href="'+T+'">'+S+"</a>"}};r.subParser("autoLinks",function(f,p,w){"use strict";return f=w.converter._dispatch("autoLinks.before",f,p,w),f=f.replace(A,N(p)),f=f.replace(k,R(p,w)),f=w.converter._dispatch("autoLinks.after",f,p,w),f}),r.subParser("simplifiedAutoLinks",function(f,p,w){"use strict";return p.simplifiedAutoLink&&(f=w.converter._dispatch("simplifiedAutoLinks.before",f,p,w),p.excludeTrailingPunctuationFromURLs?f=f.replace(_,N(p)):f=f.replace(m,N(p)),f=f.replace(C,R(p,w)),f=w.converter._dispatch("simplifiedAutoLinks.after",f,p,w)),f}),r.subParser("blockGamut",function(f,p,w){"use strict";return f=w.converter._dispatch("blockGamut.before",f,p,w),f=r.subParser("blockQuotes")(f,p,w),f=r.subParser("headers")(f,p,w),f=r.subParser("horizontalRule")(f,p,w),f=r.subParser("lists")(f,p,w),f=r.subParser("codeBlocks")(f,p,w),f=r.subParser("tables")(f,p,w),f=r.subParser("hashHTMLBlocks")(f,p,w),f=r.subParser("paragraphs")(f,p,w),f=w.converter._dispatch("blockGamut.after",f,p,w),f}),r.subParser("blockQuotes",function(f,p,w){"use strict";f=w.converter._dispatch("blockQuotes.before",f,p,w),f=f+`

`;var v=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return p.splitAdjacentBlockquotes&&(v=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),f=f.replace(v,function(S){return S=S.replace(/^[ \t]*>[ \t]?/gm,""),S=S.replace(/¨0/g,""),S=S.replace(/^[ \t]+$/gm,""),S=r.subParser("githubCodeBlocks")(S,p,w),S=r.subParser("blockGamut")(S,p,w),S=S.replace(/(^|\n)/g,"$1  "),S=S.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(T,I){var M=I;return M=M.replace(/^  /mg,"\xA80"),M=M.replace(/¨0/g,""),M}),r.subParser("hashBlock")(`<blockquote>
`+S+`
</blockquote>`,p,w)}),f=w.converter._dispatch("blockQuotes.after",f,p,w),f}),r.subParser("codeBlocks",function(f,p,w){"use strict";f=w.converter._dispatch("codeBlocks.before",f,p,w),f+="\xA80";var v=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g;return f=f.replace(v,function(S,T,I){var M=T,P=I,$=`
`;return M=r.subParser("outdent")(M,p,w),M=r.subParser("encodeCode")(M,p,w),M=r.subParser("detab")(M,p,w),M=M.replace(/^\n+/g,""),M=M.replace(/\n+$/g,""),p.omitExtraWLInCodeBlocks&&($=""),M="<pre><code>"+M+$+"</code></pre>",r.subParser("hashBlock")(M,p,w)+P}),f=f.replace(/¨0/,""),f=w.converter._dispatch("codeBlocks.after",f,p,w),f}),r.subParser("codeSpans",function(f,p,w){"use strict";return f=w.converter._dispatch("codeSpans.before",f,p,w),typeof f>"u"&&(f=""),f=f.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(v,S,T,I){var M=I;return M=M.replace(/^([ \t]*)/g,""),M=M.replace(/[ \t]*$/g,""),M=r.subParser("encodeCode")(M,p,w),M=S+"<code>"+M+"</code>",M=r.subParser("hashHTMLSpans")(M,p,w),M}),f=w.converter._dispatch("codeSpans.after",f,p,w),f}),r.subParser("completeHTMLDocument",function(f,p,w){"use strict";if(!p.completeHTMLDocument)return f;f=w.converter._dispatch("completeHTMLDocument.before",f,p,w);var v="html",S=`<!DOCTYPE HTML>
`,T="",I=`<meta charset="utf-8">
`,M="",P="";typeof w.metadata.parsed.doctype<"u"&&(S="<!DOCTYPE "+w.metadata.parsed.doctype+`>
`,v=w.metadata.parsed.doctype.toString().toLowerCase(),(v==="html"||v==="html5")&&(I='<meta charset="utf-8">'));for(var $ in w.metadata.parsed)if(w.metadata.parsed.hasOwnProperty($))switch($.toLowerCase()){case"doctype":break;case"title":T="<title>"+w.metadata.parsed.title+`</title>
`;break;case"charset":v==="html"||v==="html5"?I='<meta charset="'+w.metadata.parsed.charset+`">
`:I='<meta name="charset" content="'+w.metadata.parsed.charset+`">
`;break;case"language":case"lang":M=' lang="'+w.metadata.parsed[$]+'"',P+='<meta name="'+$+'" content="'+w.metadata.parsed[$]+`">
`;break;default:P+='<meta name="'+$+'" content="'+w.metadata.parsed[$]+`">
`}return f=S+"<html"+M+`>
<head>
`+T+I+P+`</head>
<body>
`+f.trim()+`
</body>
</html>`,f=w.converter._dispatch("completeHTMLDocument.after",f,p,w),f}),r.subParser("detab",function(f,p,w){"use strict";return f=w.converter._dispatch("detab.before",f,p,w),f=f.replace(/\t(?=\t)/g,"    "),f=f.replace(/\t/g,"\xA8A\xA8B"),f=f.replace(/¨B(.+?)¨A/g,function(v,S){for(var T=S,I=4-T.length%4,M=0;M<I;M++)T+=" ";return T}),f=f.replace(/¨A/g,"    "),f=f.replace(/¨B/g,""),f=w.converter._dispatch("detab.after",f,p,w),f}),r.subParser("ellipsis",function(f,p,w){"use strict";return p.ellipsis&&(f=w.converter._dispatch("ellipsis.before",f,p,w),f=f.replace(/\.\.\./g,"\u2026"),f=w.converter._dispatch("ellipsis.after",f,p,w)),f}),r.subParser("emoji",function(f,p,w){"use strict";if(!p.emoji)return f;f=w.converter._dispatch("emoji.before",f,p,w);var v=/:([\S]+?):/g;return f=f.replace(v,function(S,T){return r.helper.emojis.hasOwnProperty(T)?r.helper.emojis[T]:S}),f=w.converter._dispatch("emoji.after",f,p,w),f}),r.subParser("encodeAmpsAndAngles",function(f,p,w){"use strict";return f=w.converter._dispatch("encodeAmpsAndAngles.before",f,p,w),f=f.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),f=f.replace(/<(?![a-z\/?$!])/gi,"&lt;"),f=f.replace(/</g,"&lt;"),f=f.replace(/>/g,"&gt;"),f=w.converter._dispatch("encodeAmpsAndAngles.after",f,p,w),f}),r.subParser("encodeBackslashEscapes",function(f,p,w){"use strict";return f=w.converter._dispatch("encodeBackslashEscapes.before",f,p,w),f=f.replace(/\\(\\)/g,r.helper.escapeCharactersCallback),f=f.replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),f=w.converter._dispatch("encodeBackslashEscapes.after",f,p,w),f}),r.subParser("encodeCode",function(f,p,w){"use strict";return f=w.converter._dispatch("encodeCode.before",f,p,w),f=f.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),f=w.converter._dispatch("encodeCode.after",f,p,w),f}),r.subParser("escapeSpecialCharsWithinTagAttributes",function(f,p,w){"use strict";f=w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",f,p,w);var v=/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,S=/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi;return f=f.replace(v,function(T){return T.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),f=f.replace(S,function(T){return T.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}),f=w.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",f,p,w),f}),r.subParser("githubCodeBlocks",function(f,p,w){"use strict";return p.ghCodeBlocks?(f=w.converter._dispatch("githubCodeBlocks.before",f,p,w),f+="\xA80",f=f.replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,function(v,S,T,I){var M=p.omitExtraWLInCodeBlocks?"":`
`;return I=r.subParser("encodeCode")(I,p,w),I=r.subParser("detab")(I,p,w),I=I.replace(/^\n+/g,""),I=I.replace(/\n+$/g,""),I="<pre><code"+(T?' class="'+T+" language-"+T+'"':"")+">"+I+M+"</code></pre>",I=r.subParser("hashBlock")(I,p,w),`

\xA8G`+(w.ghCodeBlocks.push({text:v,codeblock:I})-1)+`G

`}),f=f.replace(/¨0/,""),w.converter._dispatch("githubCodeBlocks.after",f,p,w)):f}),r.subParser("hashBlock",function(f,p,w){"use strict";return f=w.converter._dispatch("hashBlock.before",f,p,w),f=f.replace(/(^\n+|\n+$)/g,""),f=`

\xA8K`+(w.gHtmlBlocks.push(f)-1)+`K

`,f=w.converter._dispatch("hashBlock.after",f,p,w),f}),r.subParser("hashCodeTags",function(f,p,w){"use strict";f=w.converter._dispatch("hashCodeTags.before",f,p,w);var v=function(S,T,I,M){var P=I+r.subParser("encodeCode")(T,p,w)+M;return"\xA8C"+(w.gHtmlSpans.push(P)-1)+"C"};return f=r.helper.replaceRecursiveRegExp(f,v,"<code\\b[^>]*>","</code>","gim"),f=w.converter._dispatch("hashCodeTags.after",f,p,w),f}),r.subParser("hashElement",function(f,p,w){"use strict";return function(v,S){var T=S;return T=T.replace(/\n\n/g,`
`),T=T.replace(/^\n/,""),T=T.replace(/\n+$/g,""),T=`

\xA8K`+(w.gHtmlBlocks.push(T)-1)+`K

`,T}}),r.subParser("hashHTMLBlocks",function(f,p,w){"use strict";f=w.converter._dispatch("hashHTMLBlocks.before",f,p,w);var v=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],S=function(x,z,V,K){var Z=x;return V.search(/\bmarkdown\b/)!==-1&&(Z=V+w.converter.makeHtml(z)+K),`

\xA8K`+(w.gHtmlBlocks.push(Z)-1)+`K

`};p.backslashEscapesHTMLTags&&(f=f.replace(/\\<(\/?[^>]+?)>/g,function(x,z){return"&lt;"+z+"&gt;"}));for(var T=0;T<v.length;++T)for(var I,M=new RegExp("^ {0,3}(<"+v[T]+"\\b[^>]*>)","im"),P="<"+v[T]+"\\b[^>]*>",$="</"+v[T]+">";(I=r.helper.regexIndexOf(f,M))!==-1;){var F=r.helper.splitAtIndex(f,I),q=r.helper.replaceRecursiveRegExp(F[1],S,P,$,"im");if(q===F[1])break;f=F[0].concat(q)}return f=f.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(f,p,w)),f=r.helper.replaceRecursiveRegExp(f,function(x){return`

\xA8K`+(w.gHtmlBlocks.push(x)-1)+`K

`},"^ {0,3}<!--","-->","gm"),f=f.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(f,p,w)),f=w.converter._dispatch("hashHTMLBlocks.after",f,p,w),f}),r.subParser("hashHTMLSpans",function(f,p,w){"use strict";f=w.converter._dispatch("hashHTMLSpans.before",f,p,w);function v(S){return"\xA8C"+(w.gHtmlSpans.push(S)-1)+"C"}return f=f.replace(/<[^>]+?\/>/gi,function(S){return v(S)}),f=f.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(S){return v(S)}),f=f.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(S){return v(S)}),f=f.replace(/<[^>]+?>/gi,function(S){return v(S)}),f=w.converter._dispatch("hashHTMLSpans.after",f,p,w),f}),r.subParser("unhashHTMLSpans",function(f,p,w){"use strict";f=w.converter._dispatch("unhashHTMLSpans.before",f,p,w);for(var v=0;v<w.gHtmlSpans.length;++v){for(var S=w.gHtmlSpans[v],T=0;/¨C(\d+)C/.test(S);){var I=RegExp.$1;if(S=S.replace("\xA8C"+I+"C",w.gHtmlSpans[I]),T===10){console.error("maximum nesting of 10 spans reached!!!");break}++T}f=f.replace("\xA8C"+v+"C",S)}return f=w.converter._dispatch("unhashHTMLSpans.after",f,p,w),f}),r.subParser("hashPreCodeTags",function(f,p,w){"use strict";f=w.converter._dispatch("hashPreCodeTags.before",f,p,w);var v=function(S,T,I,M){var P=I+r.subParser("encodeCode")(T,p,w)+M;return`

\xA8G`+(w.ghCodeBlocks.push({text:S,codeblock:P})-1)+`G

`};return f=r.helper.replaceRecursiveRegExp(f,v,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),f=w.converter._dispatch("hashPreCodeTags.after",f,p,w),f}),r.subParser("headers",function(f,p,w){"use strict";f=w.converter._dispatch("headers.before",f,p,w);var v=isNaN(parseInt(p.headerLevelStart))?1:parseInt(p.headerLevelStart),S=p.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,T=p.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;f=f.replace(S,function(P,$){var F=r.subParser("spanGamut")($,p,w),q=p.noHeaderId?"":' id="'+M($)+'"',x=v,z="<h"+x+q+">"+F+"</h"+x+">";return r.subParser("hashBlock")(z,p,w)}),f=f.replace(T,function(P,$){var F=r.subParser("spanGamut")($,p,w),q=p.noHeaderId?"":' id="'+M($)+'"',x=v+1,z="<h"+x+q+">"+F+"</h"+x+">";return r.subParser("hashBlock")(z,p,w)});var I=p.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;f=f.replace(I,function(P,$,F){var q=F;p.customizedHeaderId&&(q=F.replace(/\s?\{([^{]+?)}\s*$/,""));var x=r.subParser("spanGamut")(q,p,w),z=p.noHeaderId?"":' id="'+M(F)+'"',V=v-1+$.length,K="<h"+V+z+">"+x+"</h"+V+">";return r.subParser("hashBlock")(K,p,w)});function M(P){var $,F;if(p.customizedHeaderId){var q=P.match(/\{([^{]+?)}\s*$/);q&&q[1]&&(P=q[1])}return $=P,r.helper.isString(p.prefixHeaderId)?F=p.prefixHeaderId:p.prefixHeaderId===!0?F="section-":F="",p.rawPrefixHeaderId||($=F+$),p.ghCompatibleHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():p.rawHeaderId?$=$.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"\xA8").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():$=$.replace(/[^\w]/g,"").toLowerCase(),p.rawPrefixHeaderId&&($=F+$),w.hashLinkCounts[$]?$=$+"-"+w.hashLinkCounts[$]++:w.hashLinkCounts[$]=1,$}return f=w.converter._dispatch("headers.after",f,p,w),f}),r.subParser("horizontalRule",function(f,p,w){"use strict";f=w.converter._dispatch("horizontalRule.before",f,p,w);var v=r.subParser("hashBlock")("<hr />",p,w);return f=f.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,v),f=f.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,v),f=f.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,v),f=w.converter._dispatch("horizontalRule.after",f,p,w),f}),r.subParser("images",function(f,p,w){"use strict";f=w.converter._dispatch("images.before",f,p,w);var v=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,S=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,T=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,I=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,M=/!\[([^\[\]]+)]()()()()()/g;function P(F,q,x,z,V,K,Z,W){return z=z.replace(/\s/g,""),$(F,q,x,z,V,K,Z,W)}function $(F,q,x,z,V,K,Z,W){var J=w.gUrls,le=w.gTitles,_e=w.gDimensions;if(x=x.toLowerCase(),W||(W=""),F.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)z="";else if(z===""||z===null)if((x===""||x===null)&&(x=q.toLowerCase().replace(/ ?\n/g," ")),z="#"+x,!r.helper.isUndefined(J[x]))z=J[x],r.helper.isUndefined(le[x])||(W=le[x]),r.helper.isUndefined(_e[x])||(V=_e[x].width,K=_e[x].height);else return F;q=q.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),z=z.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var ve='<img src="'+z+'" alt="'+q+'"';return W&&r.helper.isString(W)&&(W=W.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),ve+=' title="'+W+'"'),V&&K&&(V=V==="*"?"auto":V,K=K==="*"?"auto":K,ve+=' width="'+V+'"',ve+=' height="'+K+'"'),ve+=" />",ve}return f=f.replace(I,$),f=f.replace(T,P),f=f.replace(S,$),f=f.replace(v,$),f=f.replace(M,$),f=w.converter._dispatch("images.after",f,p,w),f}),r.subParser("italicsAndBold",function(f,p,w){"use strict";f=w.converter._dispatch("italicsAndBold.before",f,p,w);function v(S,T,I){return T+S+I}return p.literalMidWordUnderscores?(f=f.replace(/\b___(\S[\s\S]*?)___\b/g,function(S,T){return v(T,"<strong><em>","</em></strong>")}),f=f.replace(/\b__(\S[\s\S]*?)__\b/g,function(S,T){return v(T,"<strong>","</strong>")}),f=f.replace(/\b_(\S[\s\S]*?)_\b/g,function(S,T){return v(T,"<em>","</em>")})):(f=f.replace(/___(\S[\s\S]*?)___/g,function(S,T){return/\S$/.test(T)?v(T,"<strong><em>","</em></strong>"):S}),f=f.replace(/__(\S[\s\S]*?)__/g,function(S,T){return/\S$/.test(T)?v(T,"<strong>","</strong>"):S}),f=f.replace(/_([^\s_][\s\S]*?)_/g,function(S,T){return/\S$/.test(T)?v(T,"<em>","</em>"):S})),p.literalMidWordAsterisks?(f=f.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,function(S,T,I){return v(I,T+"<strong><em>","</em></strong>")}),f=f.replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,function(S,T,I){return v(I,T+"<strong>","</strong>")}),f=f.replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,function(S,T,I){return v(I,T+"<em>","</em>")})):(f=f.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(S,T){return/\S$/.test(T)?v(T,"<strong><em>","</em></strong>"):S}),f=f.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(S,T){return/\S$/.test(T)?v(T,"<strong>","</strong>"):S}),f=f.replace(/\*([^\s*][\s\S]*?)\*/g,function(S,T){return/\S$/.test(T)?v(T,"<em>","</em>"):S})),f=w.converter._dispatch("italicsAndBold.after",f,p,w),f}),r.subParser("lists",function(f,p,w){"use strict";function v(I,M){w.gListLevel++,I=I.replace(/\n{2,}$/,`
`),I+="\xA80";var P=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,$=/\n[ \t]*\n(?!¨0)/.test(I);return p.disableForced4SpacesIndentedSublists&&(P=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),I=I.replace(P,function(F,q,x,z,V,K,Z){Z=Z&&Z.trim()!=="";var W=r.subParser("outdent")(V,p,w),J="";return K&&p.tasklists&&(J=' class="task-list-item" style="list-style-type: none;"',W=W.replace(/^[ \t]*\[(x|X| )?]/m,function(){var le='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return Z&&(le+=" checked"),le+=">",le})),W=W.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(le){return"\xA8A"+le}),q||W.search(/\n{2,}/)>-1?(W=r.subParser("githubCodeBlocks")(W,p,w),W=r.subParser("blockGamut")(W,p,w)):(W=r.subParser("lists")(W,p,w),W=W.replace(/\n$/,""),W=r.subParser("hashHTMLBlocks")(W,p,w),W=W.replace(/\n\n+/g,`

`),$?W=r.subParser("paragraphs")(W,p,w):W=r.subParser("spanGamut")(W,p,w)),W=W.replace("\xA8A",""),W="<li"+J+">"+W+`</li>
`,W}),I=I.replace(/¨0/g,""),w.gListLevel--,M&&(I=I.replace(/\s+$/,"")),I}function S(I,M){if(M==="ol"){var P=I.match(/^ *(\d+)\./);if(P&&P[1]!=="1")return' start="'+P[1]+'"'}return""}function T(I,M,P){var $=p.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,F=p.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,q=M==="ul"?$:F,x="";if(I.search(q)!==-1)(function V(K){var Z=K.search(q),W=S(I,M);Z!==-1?(x+=`

<`+M+W+`>
`+v(K.slice(0,Z),!!P)+"</"+M+`>
`,M=M==="ul"?"ol":"ul",q=M==="ul"?$:F,V(K.slice(Z))):x+=`

<`+M+W+`>
`+v(K,!!P)+"</"+M+`>
`})(I);else{var z=S(I,M);x=`

<`+M+z+`>
`+v(I,!!P)+"</"+M+`>
`}return x}return f=w.converter._dispatch("lists.before",f,p,w),f+="\xA80",w.gListLevel?f=f.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(I,M,P){var $=P.search(/[*+-]/g)>-1?"ul":"ol";return T(M,$,!0)}):f=f.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(I,M,P,$){var F=$.search(/[*+-]/g)>-1?"ul":"ol";return T(P,F,!1)}),f=f.replace(/¨0/,""),f=w.converter._dispatch("lists.after",f,p,w),f}),r.subParser("metadata",function(f,p,w){"use strict";if(!p.metadata)return f;f=w.converter._dispatch("metadata.before",f,p,w);function v(S){w.metadata.raw=S,S=S.replace(/&/g,"&amp;").replace(/"/g,"&quot;"),S=S.replace(/\n {4}/g," "),S.replace(/^([\S ]+): +([\s\S]+?)$/gm,function(T,I,M){return w.metadata.parsed[I]=M,""})}return f=f.replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,function(S,T,I){return v(I),"\xA8M"}),f=f.replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,function(S,T,I){return T&&(w.metadata.format=T),v(I),"\xA8M"}),f=f.replace(/¨M/g,""),f=w.converter._dispatch("metadata.after",f,p,w),f}),r.subParser("outdent",function(f,p,w){"use strict";return f=w.converter._dispatch("outdent.before",f,p,w),f=f.replace(/^(\t|[ ]{1,4})/gm,"\xA80"),f=f.replace(/¨0/g,""),f=w.converter._dispatch("outdent.after",f,p,w),f}),r.subParser("paragraphs",function(f,p,w){"use strict";f=w.converter._dispatch("paragraphs.before",f,p,w),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,"");for(var v=f.split(/\n{2,}/g),S=[],T=v.length,I=0;I<T;I++){var M=v[I];M.search(/¨(K|G)(\d+)\1/g)>=0?S.push(M):M.search(/\S/)>=0&&(M=r.subParser("spanGamut")(M,p,w),M=M.replace(/^([ \t]*)/g,"<p>"),M+="</p>",S.push(M))}for(T=S.length,I=0;I<T;I++){for(var P="",$=S[I],F=!1;/¨(K|G)(\d+)\1/.test($);){var q=RegExp.$1,x=RegExp.$2;q==="K"?P=w.gHtmlBlocks[x]:F?P=r.subParser("encodeCode")(w.ghCodeBlocks[x].text,p,w):P=w.ghCodeBlocks[x].codeblock,P=P.replace(/\$/g,"$$$$"),$=$.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,P),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test($)&&(F=!0)}S[I]=$}return f=S.join(`
`),f=f.replace(/^\n+/g,""),f=f.replace(/\n+$/g,""),w.converter._dispatch("paragraphs.after",f,p,w)}),r.subParser("runExtension",function(f,p,w,v){"use strict";if(f.filter)p=f.filter(p,v.converter,w);else if(f.regex){var S=f.regex;S instanceof RegExp||(S=new RegExp(S,"g")),p=p.replace(S,f.replace)}return p}),r.subParser("spanGamut",function(f,p,w){"use strict";return f=w.converter._dispatch("spanGamut.before",f,p,w),f=r.subParser("codeSpans")(f,p,w),f=r.subParser("escapeSpecialCharsWithinTagAttributes")(f,p,w),f=r.subParser("encodeBackslashEscapes")(f,p,w),f=r.subParser("images")(f,p,w),f=r.subParser("anchors")(f,p,w),f=r.subParser("autoLinks")(f,p,w),f=r.subParser("simplifiedAutoLinks")(f,p,w),f=r.subParser("emoji")(f,p,w),f=r.subParser("underline")(f,p,w),f=r.subParser("italicsAndBold")(f,p,w),f=r.subParser("strikethrough")(f,p,w),f=r.subParser("ellipsis")(f,p,w),f=r.subParser("hashHTMLSpans")(f,p,w),f=r.subParser("encodeAmpsAndAngles")(f,p,w),p.simpleLineBreaks?/\n\n¨K/.test(f)||(f=f.replace(/\n+/g,`<br />
`)):f=f.replace(/  +\n/g,`<br />
`),f=w.converter._dispatch("spanGamut.after",f,p,w),f}),r.subParser("strikethrough",function(f,p,w){"use strict";function v(S){return p.simplifiedAutoLink&&(S=r.subParser("simplifiedAutoLinks")(S,p,w)),"<del>"+S+"</del>"}return p.strikethrough&&(f=w.converter._dispatch("strikethrough.before",f,p,w),f=f.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(S,T){return v(T)}),f=w.converter._dispatch("strikethrough.after",f,p,w)),f}),r.subParser("stripLinkDefinitions",function(f,p,w){"use strict";var v=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,S=/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm;f+="\xA80";var T=function(I,M,P,$,F,q,x){return M=M.toLowerCase(),f.toLowerCase().split(M).length-1<2?I:(P.match(/^data:.+?\/.+?;base64,/)?w.gUrls[M]=P.replace(/\s/g,""):w.gUrls[M]=r.subParser("encodeAmpsAndAngles")(P,p,w),q?q+x:(x&&(w.gTitles[M]=x.replace(/"|'/g,"&quot;")),p.parseImgDimensions&&$&&F&&(w.gDimensions[M]={width:$,height:F}),""))};return f=f.replace(S,T),f=f.replace(v,T),f=f.replace(/¨0/,""),f}),r.subParser("tables",function(f,p,w){"use strict";if(!p.tables)return f;var v=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,S=/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm;function T(F){return/^:[ \t]*--*$/.test(F)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(F)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(F)?' style="text-align:center;"':""}function I(F,q){var x="";return F=F.trim(),(p.tablesHeaderId||p.tableHeaderId)&&(x=' id="'+F.replace(/ /g,"_").toLowerCase()+'"'),F=r.subParser("spanGamut")(F,p,w),"<th"+x+q+">"+F+`</th>
`}function M(F,q){var x=r.subParser("spanGamut")(F,p,w);return"<td"+q+">"+x+`</td>
`}function P(F,q){for(var x=`<table>
<thead>
<tr>
`,z=F.length,V=0;V<z;++V)x+=F[V];for(x+=`</tr>
</thead>
<tbody>
`,V=0;V<q.length;++V){x+=`<tr>
`;for(var K=0;K<z;++K)x+=q[V][K];x+=`</tr>
`}return x+=`</tbody>
</table>
`,x}function $(F){var q,x=F.split(`
`);for(q=0;q<x.length;++q)/^ {0,3}\|/.test(x[q])&&(x[q]=x[q].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(x[q])&&(x[q]=x[q].replace(/\|[ \t]*$/,"")),x[q]=r.subParser("codeSpans")(x[q],p,w);var z=x[0].split("|").map(function(ve){return ve.trim()}),V=x[1].split("|").map(function(ve){return ve.trim()}),K=[],Z=[],W=[],J=[];for(x.shift(),x.shift(),q=0;q<x.length;++q)x[q].trim()!==""&&K.push(x[q].split("|").map(function(ve){return ve.trim()}));if(z.length<V.length)return F;for(q=0;q<V.length;++q)W.push(T(V[q]));for(q=0;q<z.length;++q)r.helper.isUndefined(W[q])&&(W[q]=""),Z.push(I(z[q],W[q]));for(q=0;q<K.length;++q){for(var le=[],_e=0;_e<Z.length;++_e)r.helper.isUndefined(K[q][_e]),le.push(M(K[q][_e],W[_e]));J.push(le)}return P(Z,J)}return f=w.converter._dispatch("tables.before",f,p,w),f=f.replace(/\\(\|)/g,r.helper.escapeCharactersCallback),f=f.replace(v,$),f=f.replace(S,$),f=w.converter._dispatch("tables.after",f,p,w),f}),r.subParser("underline",function(f,p,w){"use strict";return p.underline&&(f=w.converter._dispatch("underline.before",f,p,w),p.literalMidWordUnderscores?(f=f.replace(/\b___(\S[\s\S]*?)___\b/g,function(v,S){return"<u>"+S+"</u>"}),f=f.replace(/\b__(\S[\s\S]*?)__\b/g,function(v,S){return"<u>"+S+"</u>"})):(f=f.replace(/___(\S[\s\S]*?)___/g,function(v,S){return/\S$/.test(S)?"<u>"+S+"</u>":v}),f=f.replace(/__(\S[\s\S]*?)__/g,function(v,S){return/\S$/.test(S)?"<u>"+S+"</u>":v})),f=f.replace(/(_)/g,r.helper.escapeCharactersCallback),f=w.converter._dispatch("underline.after",f,p,w)),f}),r.subParser("unescapeSpecialChars",function(f,p,w){"use strict";return f=w.converter._dispatch("unescapeSpecialChars.before",f,p,w),f=f.replace(/¨E(\d+)E/g,function(v,S){var T=parseInt(S);return String.fromCharCode(T)}),f=w.converter._dispatch("unescapeSpecialChars.after",f,p,w),f}),r.subParser("makeMarkdown.blockquote",function(f,p){"use strict";var w="";if(f.hasChildNodes())for(var v=f.childNodes,S=v.length,T=0;T<S;++T){var I=r.subParser("makeMarkdown.node")(v[T],p);I!==""&&(w+=I)}return w=w.trim(),w="> "+w.split(`
`).join(`
> `),w}),r.subParser("makeMarkdown.codeBlock",function(f,p){"use strict";var w=f.getAttribute("language"),v=f.getAttribute("precodenum");return"```"+w+`
`+p.preList[v]+"\n```"}),r.subParser("makeMarkdown.codeSpan",function(f){"use strict";return"`"+f.innerHTML+"`"}),r.subParser("makeMarkdown.emphasis",function(f,p){"use strict";var w="";if(f.hasChildNodes()){w+="*";for(var v=f.childNodes,S=v.length,T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p);w+="*"}return w}),r.subParser("makeMarkdown.header",function(f,p,w){"use strict";var v=new Array(w+1).join("#"),S="";if(f.hasChildNodes()){S=v+" ";for(var T=f.childNodes,I=T.length,M=0;M<I;++M)S+=r.subParser("makeMarkdown.node")(T[M],p)}return S}),r.subParser("makeMarkdown.hr",function(){"use strict";return"---"}),r.subParser("makeMarkdown.image",function(f){"use strict";var p="";return f.hasAttribute("src")&&(p+="!["+f.getAttribute("alt")+"](",p+="<"+f.getAttribute("src")+">",f.hasAttribute("width")&&f.hasAttribute("height")&&(p+=" ="+f.getAttribute("width")+"x"+f.getAttribute("height")),f.hasAttribute("title")&&(p+=' "'+f.getAttribute("title")+'"'),p+=")"),p}),r.subParser("makeMarkdown.links",function(f,p){"use strict";var w="";if(f.hasChildNodes()&&f.hasAttribute("href")){var v=f.childNodes,S=v.length;w="[";for(var T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p);w+="](",w+="<"+f.getAttribute("href")+">",f.hasAttribute("title")&&(w+=' "'+f.getAttribute("title")+'"'),w+=")"}return w}),r.subParser("makeMarkdown.list",function(f,p,w){"use strict";var v="";if(!f.hasChildNodes())return"";for(var S=f.childNodes,T=S.length,I=f.getAttribute("start")||1,M=0;M<T;++M)if(!(typeof S[M].tagName>"u"||S[M].tagName.toLowerCase()!=="li")){var P="";w==="ol"?P=I.toString()+". ":P="- ",v+=P+r.subParser("makeMarkdown.listItem")(S[M],p),++I}return v+=`
<!-- -->
`,v.trim()}),r.subParser("makeMarkdown.listItem",function(f,p){"use strict";for(var w="",v=f.childNodes,S=v.length,T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p);return/\n$/.test(w)?w=w.split(`
`).join(`
    `).replace(/^ {4}$/gm,"").replace(/\n\n+/g,`

`):w+=`
`,w}),r.subParser("makeMarkdown.node",function(f,p,w){"use strict";w=w||!1;var v="";if(f.nodeType===3)return r.subParser("makeMarkdown.txt")(f,p);if(f.nodeType===8)return"<!--"+f.data+`-->

`;if(f.nodeType!==1)return"";var S=f.tagName.toLowerCase();switch(S){case"h1":w||(v=r.subParser("makeMarkdown.header")(f,p,1)+`

`);break;case"h2":w||(v=r.subParser("makeMarkdown.header")(f,p,2)+`

`);break;case"h3":w||(v=r.subParser("makeMarkdown.header")(f,p,3)+`

`);break;case"h4":w||(v=r.subParser("makeMarkdown.header")(f,p,4)+`

`);break;case"h5":w||(v=r.subParser("makeMarkdown.header")(f,p,5)+`

`);break;case"h6":w||(v=r.subParser("makeMarkdown.header")(f,p,6)+`

`);break;case"p":w||(v=r.subParser("makeMarkdown.paragraph")(f,p)+`

`);break;case"blockquote":w||(v=r.subParser("makeMarkdown.blockquote")(f,p)+`

`);break;case"hr":w||(v=r.subParser("makeMarkdown.hr")(f,p)+`

`);break;case"ol":w||(v=r.subParser("makeMarkdown.list")(f,p,"ol")+`

`);break;case"ul":w||(v=r.subParser("makeMarkdown.list")(f,p,"ul")+`

`);break;case"precode":w||(v=r.subParser("makeMarkdown.codeBlock")(f,p)+`

`);break;case"pre":w||(v=r.subParser("makeMarkdown.pre")(f,p)+`

`);break;case"table":w||(v=r.subParser("makeMarkdown.table")(f,p)+`

`);break;case"code":v=r.subParser("makeMarkdown.codeSpan")(f,p);break;case"em":case"i":v=r.subParser("makeMarkdown.emphasis")(f,p);break;case"strong":case"b":v=r.subParser("makeMarkdown.strong")(f,p);break;case"del":v=r.subParser("makeMarkdown.strikethrough")(f,p);break;case"a":v=r.subParser("makeMarkdown.links")(f,p);break;case"img":v=r.subParser("makeMarkdown.image")(f,p);break;default:v=f.outerHTML+`

`}return v}),r.subParser("makeMarkdown.paragraph",function(f,p){"use strict";var w="";if(f.hasChildNodes())for(var v=f.childNodes,S=v.length,T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p);return w=w.trim(),w}),r.subParser("makeMarkdown.pre",function(f,p){"use strict";var w=f.getAttribute("prenum");return"<pre>"+p.preList[w]+"</pre>"}),r.subParser("makeMarkdown.strikethrough",function(f,p){"use strict";var w="";if(f.hasChildNodes()){w+="~~";for(var v=f.childNodes,S=v.length,T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p);w+="~~"}return w}),r.subParser("makeMarkdown.strong",function(f,p){"use strict";var w="";if(f.hasChildNodes()){w+="**";for(var v=f.childNodes,S=v.length,T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p);w+="**"}return w}),r.subParser("makeMarkdown.table",function(f,p){"use strict";var w="",v=[[],[]],S=f.querySelectorAll("thead>tr>th"),T=f.querySelectorAll("tbody>tr"),I,M;for(I=0;I<S.length;++I){var P=r.subParser("makeMarkdown.tableCell")(S[I],p),$="---";if(S[I].hasAttribute("style")){var F=S[I].getAttribute("style").toLowerCase().replace(/\s/g,"");switch(F){case"text-align:left;":$=":---";break;case"text-align:right;":$="---:";break;case"text-align:center;":$=":---:";break}}v[0][I]=P.trim(),v[1][I]=$}for(I=0;I<T.length;++I){var q=v.push([])-1,x=T[I].getElementsByTagName("td");for(M=0;M<S.length;++M){var z=" ";typeof x[M]<"u"&&(z=r.subParser("makeMarkdown.tableCell")(x[M],p)),v[q].push(z)}}var V=3;for(I=0;I<v.length;++I)for(M=0;M<v[I].length;++M){var K=v[I][M].length;K>V&&(V=K)}for(I=0;I<v.length;++I){for(M=0;M<v[I].length;++M)I===1?v[I][M].slice(-1)===":"?v[I][M]=r.helper.padEnd(v[I][M].slice(-1),V-1,"-")+":":v[I][M]=r.helper.padEnd(v[I][M],V,"-"):v[I][M]=r.helper.padEnd(v[I][M],V);w+="| "+v[I].join(" | ")+` |
`}return w.trim()}),r.subParser("makeMarkdown.tableCell",function(f,p){"use strict";var w="";if(!f.hasChildNodes())return"";for(var v=f.childNodes,S=v.length,T=0;T<S;++T)w+=r.subParser("makeMarkdown.node")(v[T],p,!0);return w.trim()}),r.subParser("makeMarkdown.txt",function(f){"use strict";var p=f.nodeValue;return p=p.replace(/ +/g," "),p=p.replace(/¨NBSP;/g," "),p=r.helper.unescapeHTMLEntities(p),p=p.replace(/([*_~|`])/g,"\\$1"),p=p.replace(/^(\s*)>/g,"\\$1>"),p=p.replace(/^#/gm,"\\#"),p=p.replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3"),p=p.replace(/^( {0,3}\d+)\./gm,"$1\\."),p=p.replace(/^( {0,3})([+-])/gm,"$1\\$2"),p=p.replace(/]([\s]*)\(/g,"\\]$1\\("),p=p.replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:"),p});var B=this;typeof define=="function"&&define.amd?define(function(){"use strict";return r}):typeof Xa<"u"&&Xa.exports?Xa.exports=r:B.showdown=r}).call(c0)});var b5={};var g5,m5,ce,Rw=I_(()=>{g5=Object.defineProperty,m5=(e,t,r)=>t in e?g5(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,ce=(e,t,r)=>(m5(e,typeof t!="symbol"?t+"":t,r),r);(function(){"use strict";var e,t,r,n,o;let i='*,:before,:after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}:before,:after{--tw-content: ""}html,:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}body{margin:0;line-height:inherit}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-feature-settings:normal;font-variation-settings:normal;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}button,input,optgroup,select,textarea{font-family:inherit;font-feature-settings:inherit;font-variation-settings:inherit;font-size:100%;font-weight:inherit;line-height:inherit;color:inherit;margin:0;padding:0}button,select{text-transform:none}button,[type=button],[type=reset],[type=submit]{-webkit-appearance:button;background-color:transparent;background-image:none}:-moz-focusring{outline:auto}:-moz-ui-invalid{box-shadow:none}progress{vertical-align:baseline}::-webkit-inner-spin-button,::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}blockquote,dl,dd,h1,h2,h3,h4,h5,h6,hr,figure,p,pre{margin:0}fieldset{margin:0;padding:0}legend{padding:0}ol,ul,menu{list-style:none;margin:0;padding:0}dialog{padding:0}textarea{resize:vertical}input::-moz-placeholder,textarea::-moz-placeholder{opacity:1;color:#9ca3af}input::placeholder,textarea::placeholder{opacity:1;color:#9ca3af}button,[role=button]{cursor:pointer}:disabled{cursor:default}img,svg,video,canvas,audio,iframe,embed,object{display:block;vertical-align:middle}img,video{max-width:100%;height:auto}[hidden]{display:none}*,:before,:after{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }::backdrop{--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgb(59 130 246 / .5);--tw-ring-offset-shadow: 0 0 #0000;--tw-ring-shadow: 0 0 #0000;--tw-shadow: 0 0 #0000;--tw-shadow-colored: 0 0 #0000;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: }.fixed{position:fixed}.absolute{position:absolute}.bottom-1{bottom:.25rem}.right-2{right:.5rem}.right-3{right:.75rem}.top-0{top:0}.m-auto{margin:auto}.mx-2{margin-left:.5rem;margin-right:.5rem}.my-2{margin-top:.5rem;margin-bottom:.5rem}.mb-1{margin-bottom:.25rem}.mb-2{margin-bottom:.5rem}.mb-4{margin-bottom:1rem}.ml-2{margin-left:.5rem}.mr-2{margin-right:.5rem}.mt-4{margin-top:1rem}.mt-6{margin-top:1.5rem}.box-border{box-sizing:border-box}.block{display:block}.inline-block{display:inline-block}.inline{display:inline}.flex{display:flex}.h-10{height:2.5rem}.h-5{height:1.25rem}.h-6{height:1.5rem}.w-10{width:2.5rem}.w-40{width:10rem}.w-5{width:1.25rem}.w-6{width:1.5rem}.w-full{width:100%}.max-w-56{max-width:14rem}@keyframes moveIn{0%{transform:translateY(-10px)}to{transform:translateY(0)}}.animate-fadein{animation:fadeIn 1s ease-in-out,moveIn 1s ease-in-out}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.animate-show{animation:fadeIn .2s ease-in-out}@keyframes spin{to{transform:rotate(360deg)}}.animate-spin{animation:spin 1s linear infinite}.cursor-grabbing{cursor:grabbing}.cursor-pointer{cursor:pointer}.flex-row{flex-direction:row}.flex-col{flex-direction:column}.items-center{align-items:center}.justify-center{justify-content:center}.gap-2{gap:.5rem}.overflow-hidden{overflow:hidden}.overflow-ellipsis{text-overflow:ellipsis}.whitespace-nowrap{white-space:nowrap}.break-all{word-break:break-all}.rounded{border-radius:.25rem}.rounded-full{border-radius:9999px}.rounded-md{border-radius:.375rem}.border-0{border-width:0px}.border-2{border-width:2px}.border-solid{border-style:solid}.border-transparent{border-color:transparent}.bg-cyan-700{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.bg-cyan-800{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.bg-cyan-900{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.bg-cyan-950{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.bg-green-700{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.bg-green-800{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.bg-green-900{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.bg-green-950{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.bg-neutral-700{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.bg-neutral-800{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.bg-neutral-900{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.bg-neutral-950{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.bg-orange-700{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.bg-orange-800{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.bg-orange-900{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.bg-orange-950{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.bg-purple-700{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.bg-purple-800{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.bg-purple-900{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.bg-purple-950{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.bg-red-700{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.bg-red-800{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.bg-red-900{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.bg-red-950{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.bg-stone-700{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.bg-stone-800{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.bg-stone-900{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.bg-stone-950{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.bg-transparent{background-color:transparent}.bg-yellow-100{--tw-bg-opacity: 1;background-color:rgb(254 249 195 / var(--tw-bg-opacity))}.bg-gradient-to-b{background-image:linear-gradient(to bottom,var(--tw-gradient-stops))}.from-cyan-900{--tw-gradient-from: #164e63 var(--tw-gradient-from-position);--tw-gradient-to: rgb(22 78 99 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-green-900{--tw-gradient-from: #14532d var(--tw-gradient-from-position);--tw-gradient-to: rgb(20 83 45 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-neutral-900{--tw-gradient-from: #171717 var(--tw-gradient-from-position);--tw-gradient-to: rgb(23 23 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-orange-900{--tw-gradient-from: #7c2d12 var(--tw-gradient-from-position);--tw-gradient-to: rgb(124 45 18 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-purple-900{--tw-gradient-from: #581c87 var(--tw-gradient-from-position);--tw-gradient-to: rgb(88 28 135 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-red-900{--tw-gradient-from: #7f1d1d var(--tw-gradient-from-position);--tw-gradient-to: rgb(127 29 29 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.from-stone-900{--tw-gradient-from: #1c1917 var(--tw-gradient-from-position);--tw-gradient-to: rgb(28 25 23 / 0) var(--tw-gradient-to-position);--tw-gradient-stops: var(--tw-gradient-from), var(--tw-gradient-to)}.to-cyan-700{--tw-gradient-to: #0e7490 var(--tw-gradient-to-position)}.to-green-700{--tw-gradient-to: #15803d var(--tw-gradient-to-position)}.to-neutral-700{--tw-gradient-to: #404040 var(--tw-gradient-to-position)}.to-orange-700{--tw-gradient-to: #c2410c var(--tw-gradient-to-position)}.to-purple-700{--tw-gradient-to: #7e22ce var(--tw-gradient-to-position)}.to-red-700{--tw-gradient-to: #b91c1c var(--tw-gradient-to-position)}.to-stone-700{--tw-gradient-to: #44403c var(--tw-gradient-to-position)}.p-2{padding:.5rem}.px-2{padding-left:.5rem;padding-right:.5rem}.px-8{padding-left:2rem;padding-right:2rem}.py-1{padding-top:.25rem;padding-bottom:.25rem}.py-2{padding-top:.5rem;padding-bottom:.5rem}.py-8{padding-top:2rem;padding-bottom:2rem}.text-center{text-align:center}.font-sans{font-family:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji",Segoe UI Symbol,"Noto Color Emoji"}.text-2xl{font-size:1.5rem;line-height:2rem}.text-3xl{font-size:1.875rem;line-height:2.25rem}.text-base{font-size:1rem;line-height:1.5rem}.text-lg{font-size:1.125rem;line-height:1.75rem}.text-sm{font-size:.875rem;line-height:1.25rem}.text-xl{font-size:1.25rem;line-height:1.75rem}.leading-3{line-height:.75rem}.leading-4{line-height:1rem}.leading-5{line-height:1.25rem}.text-cyan-600{--tw-text-opacity: 1;color:rgb(8 145 178 / var(--tw-text-opacity))}.text-green-600{--tw-text-opacity: 1;color:rgb(22 163 74 / var(--tw-text-opacity))}.text-neutral-600{--tw-text-opacity: 1;color:rgb(82 82 82 / var(--tw-text-opacity))}.text-neutral-800{--tw-text-opacity: 1;color:rgb(38 38 38 / var(--tw-text-opacity))}.text-orange-600{--tw-text-opacity: 1;color:rgb(234 88 12 / var(--tw-text-opacity))}.text-purple-600{--tw-text-opacity: 1;color:rgb(147 51 234 / var(--tw-text-opacity))}.text-red-400{--tw-text-opacity: 1;color:rgb(248 113 113 / var(--tw-text-opacity))}.text-red-600{--tw-text-opacity: 1;color:rgb(220 38 38 / var(--tw-text-opacity))}.text-stone-600{--tw-text-opacity: 1;color:rgb(87 83 78 / var(--tw-text-opacity))}.text-white{--tw-text-opacity: 1;color:rgb(255 255 255 / var(--tw-text-opacity))}.underline{text-decoration-line:underline}.no-underline{text-decoration-line:none}.decoration-2{text-decoration-thickness:2px}.underline-offset-4{text-underline-offset:4px}.opacity-25{opacity:.25}.opacity-75{opacity:.75}.shadow-\\[0_0px_10px_0px_rgba\\(0\\,0\\,0\\,0\\.3\\)\\]{--tw-shadow: 0 0px 10px 0px rgba(0,0,0,.3);--tw-shadow-colored: 0 0px 10px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.shadow-\\[0_0px_30px_0px_rgba\\(0\\,0\\,0\\,0\\.6\\)\\]{--tw-shadow: 0 0px 30px 0px rgba(0,0,0,.6);--tw-shadow-colored: 0 0px 30px 0px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}.outline-none{outline:2px solid transparent;outline-offset:2px}.outline-dashed{outline-style:dashed}.outline-1{outline-width:1px}.outline-offset-4{outline-offset:4px}.outline-cyan-500{outline-color:#06b6d4}.outline-green-500{outline-color:#22c55e}.outline-neutral-500{outline-color:#737373}.outline-orange-500{outline-color:#f97316}.outline-purple-500{outline-color:#a855f7}.outline-red-500{outline-color:#ef4444}.outline-stone-500{outline-color:#78716c}.transition-all{transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}.duration-200{transition-duration:.2s}.hover\\:bg-cyan-700:hover{--tw-bg-opacity: 1;background-color:rgb(14 116 144 / var(--tw-bg-opacity))}.hover\\:bg-cyan-800:hover{--tw-bg-opacity: 1;background-color:rgb(21 94 117 / var(--tw-bg-opacity))}.hover\\:bg-cyan-900:hover{--tw-bg-opacity: 1;background-color:rgb(22 78 99 / var(--tw-bg-opacity))}.hover\\:bg-cyan-950:hover{--tw-bg-opacity: 1;background-color:rgb(8 51 68 / var(--tw-bg-opacity))}.hover\\:bg-green-700:hover{--tw-bg-opacity: 1;background-color:rgb(21 128 61 / var(--tw-bg-opacity))}.hover\\:bg-green-800:hover{--tw-bg-opacity: 1;background-color:rgb(22 101 52 / var(--tw-bg-opacity))}.hover\\:bg-green-900:hover{--tw-bg-opacity: 1;background-color:rgb(20 83 45 / var(--tw-bg-opacity))}.hover\\:bg-green-950:hover{--tw-bg-opacity: 1;background-color:rgb(5 46 22 / var(--tw-bg-opacity))}.hover\\:bg-neutral-700:hover{--tw-bg-opacity: 1;background-color:rgb(64 64 64 / var(--tw-bg-opacity))}.hover\\:bg-neutral-800:hover{--tw-bg-opacity: 1;background-color:rgb(38 38 38 / var(--tw-bg-opacity))}.hover\\:bg-neutral-900:hover{--tw-bg-opacity: 1;background-color:rgb(23 23 23 / var(--tw-bg-opacity))}.hover\\:bg-neutral-950:hover{--tw-bg-opacity: 1;background-color:rgb(10 10 10 / var(--tw-bg-opacity))}.hover\\:bg-orange-700:hover{--tw-bg-opacity: 1;background-color:rgb(194 65 12 / var(--tw-bg-opacity))}.hover\\:bg-orange-800:hover{--tw-bg-opacity: 1;background-color:rgb(154 52 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-900:hover{--tw-bg-opacity: 1;background-color:rgb(124 45 18 / var(--tw-bg-opacity))}.hover\\:bg-orange-950:hover{--tw-bg-opacity: 1;background-color:rgb(67 20 7 / var(--tw-bg-opacity))}.hover\\:bg-purple-700:hover{--tw-bg-opacity: 1;background-color:rgb(126 34 206 / var(--tw-bg-opacity))}.hover\\:bg-purple-800:hover{--tw-bg-opacity: 1;background-color:rgb(107 33 168 / var(--tw-bg-opacity))}.hover\\:bg-purple-900:hover{--tw-bg-opacity: 1;background-color:rgb(88 28 135 / var(--tw-bg-opacity))}.hover\\:bg-purple-950:hover{--tw-bg-opacity: 1;background-color:rgb(59 7 100 / var(--tw-bg-opacity))}.hover\\:bg-red-700:hover{--tw-bg-opacity: 1;background-color:rgb(185 28 28 / var(--tw-bg-opacity))}.hover\\:bg-red-800:hover{--tw-bg-opacity: 1;background-color:rgb(153 27 27 / var(--tw-bg-opacity))}.hover\\:bg-red-900:hover{--tw-bg-opacity: 1;background-color:rgb(127 29 29 / var(--tw-bg-opacity))}.hover\\:bg-red-950:hover{--tw-bg-opacity: 1;background-color:rgb(69 10 10 / var(--tw-bg-opacity))}.hover\\:bg-stone-700:hover{--tw-bg-opacity: 1;background-color:rgb(68 64 60 / var(--tw-bg-opacity))}.hover\\:bg-stone-800:hover{--tw-bg-opacity: 1;background-color:rgb(41 37 36 / var(--tw-bg-opacity))}.hover\\:bg-stone-900:hover{--tw-bg-opacity: 1;background-color:rgb(28 25 23 / var(--tw-bg-opacity))}.hover\\:bg-stone-950:hover{--tw-bg-opacity: 1;background-color:rgb(12 10 9 / var(--tw-bg-opacity))}.disabled\\:cursor-default:disabled{cursor:default}.disabled\\:bg-neutral-400:disabled{--tw-bg-opacity: 1;background-color:rgb(163 163 163 / var(--tw-bg-opacity))}.disabled\\:text-neutral-200:disabled{--tw-text-opacity: 1;color:rgb(229 229 229 / var(--tw-text-opacity))}.group:hover .group-hover\\:underline{text-decoration-line:underline}@media (min-width: 640px){.sm\\:w-96{width:24rem}}';function a(){}function u(s){return s()}function d(){return Object.create(null)}function h(s){s.forEach(u)}function b(s){return typeof s=="function"}function m(s,c){return s!=s?c==c:s!==c||s&&typeof s=="object"||typeof s=="function"}let _;function A(s,c){return s===c?!0:(_||(_=document.createElement("a")),_.href=c,s===_.href)}function C(s){return Object.keys(s).length===0}function k(s,...c){if(s==null){for(let g of c)g(void 0);return a}let l=s.subscribe(...c);return l.unsubscribe?()=>l.unsubscribe():l}function N(s,c,l){s.$$.on_destroy.push(k(c,l))}let R=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function B(s,c){s.appendChild(c)}function f(s,c,l){s.insertBefore(c,l||null)}function p(s){s.parentNode&&s.parentNode.removeChild(s)}function w(s,c){for(let l=0;l<s.length;l+=1)s[l]&&s[l].d(c)}function v(s){return document.createElement(s)}function S(s){return document.createElementNS("http://www.w3.org/2000/svg",s)}function T(s){return document.createTextNode(s)}function I(){return T(" ")}function M(){return T("")}function P(s,c,l,g){return s.addEventListener(c,l,g),()=>s.removeEventListener(c,l,g)}function $(s,c,l){l==null?s.removeAttribute(c):s.getAttribute(c)!==l&&s.setAttribute(c,l)}function F(s){return Array.from(s.childNodes)}function q(s,c){c=""+c,s.data!==c&&(s.data=c)}function x(s,c){s.value=c??""}function z(s,c,l){for(let g=0;g<s.options.length;g+=1){let y=s.options[g];if(y.__value===c){y.selected=!0;return}}(!l||c!==void 0)&&(s.selectedIndex=-1)}function V(s){let c=s.querySelector(":checked");return c&&c.__value}function K(s,c,l){s.classList.toggle(c,!!l)}let Z;function W(s){Z=s}function J(){if(!Z)throw new Error("Function called outside component initialization");return Z}function le(s){J().$$.on_mount.push(s)}let _e=[],ve=[],Ie=[],ie=[],Se=Promise.resolve(),Ve=!1;function Re(){Ve||(Ve=!0,Se.then(he))}function je(s){Ie.push(s)}let Et=new Set,Qe=0;function he(){if(Qe!==0)return;let s=Z;do{try{for(;Qe<_e.length;){let c=_e[Qe];Qe++,W(c),Me(c.$$)}}catch(c){throw _e.length=0,Qe=0,c}for(W(null),_e.length=0,Qe=0;ve.length;)ve.pop()();for(let c=0;c<Ie.length;c+=1){let l=Ie[c];Et.has(l)||(Et.add(l),l())}Ie.length=0}while(_e.length);for(;ie.length;)ie.pop()();Ve=!1,Et.clear(),W(s)}function Me(s){if(s.fragment!==null){s.update(),h(s.before_update);let c=s.dirty;s.dirty=[-1],s.fragment&&s.fragment.p(s.ctx,c),s.after_update.forEach(je)}}function Ce(s){let c=[],l=[];Ie.forEach(g=>s.indexOf(g)===-1?c.push(g):l.push(g)),l.forEach(g=>g()),Ie=c}let Ne=new Set,qe;function Bt(){qe={r:0,c:[],p:qe}}function Wt(){qe.r||h(qe.c),qe=qe.p}function Mt(s,c){s&&s.i&&(Ne.delete(s),s.i(c))}function cr(s,c,l,g){if(s&&s.o){if(Ne.has(s))return;Ne.add(s),qe.c.push(()=>{Ne.delete(s),g&&(l&&s.d(1),g())}),s.o(c)}else g&&g()}function uh(s){return s?.length!==void 0?s:Array.from(s)}function lh(s){s&&s.c()}function mu(s,c,l){let{fragment:g,after_update:y}=s.$$;g&&g.m(c,l),je(()=>{let E=s.$$.on_mount.map(u).filter(b);s.$$.on_destroy?s.$$.on_destroy.push(...E):h(E),s.$$.on_mount=[]}),y.forEach(je)}function bu(s,c){let l=s.$$;l.fragment!==null&&(Ce(l.after_update),h(l.on_destroy),l.fragment&&l.fragment.d(c),l.on_destroy=l.fragment=null,l.ctx=[])}function Vw(s,c){s.$$.dirty[0]===-1&&(_e.push(s),Re(),s.$$.dirty.fill(0)),s.$$.dirty[c/31|0]|=1<<c%31}function dh(s,c,l,g,y,E,L=null,U=[-1]){let O=Z;W(s);let D=s.$$={fragment:null,ctx:[],props:E,update:a,not_equal:y,bound:d(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(O?O.$$.context:[])),callbacks:d(),dirty:U,skip_bound:!1,root:c.target||O.$$.root};L&&L(D.root);let H=!1;if(D.ctx=l?l(s,c.props||{},(j,Y,...G)=>{let ee=G.length?G[0]:Y;return D.ctx&&y(D.ctx[j],D.ctx[j]=ee)&&(!D.skip_bound&&D.bound[j]&&D.bound[j](ee),H&&Vw(s,j)),Y}):[],D.update(),H=!0,h(D.before_update),D.fragment=g?g(D.ctx):!1,c.target){if(c.hydrate){let j=F(c.target);D.fragment&&D.fragment.l(j),j.forEach(p)}else D.fragment&&D.fragment.c();c.intro&&Mt(s.$$.fragment),mu(s,c.target,c.anchor),he()}W(O)}class fh{constructor(){ce(this,"$$"),ce(this,"$$set")}$destroy(){bu(this,1),this.$destroy=a}$on(c,l){if(!b(l))return a;let g=this.$$.callbacks[c]||(this.$$.callbacks[c]=[]);return g.push(l),()=>{let y=g.indexOf(l);y!==-1&&g.splice(y,1)}}$set(c){this.$$set&&!C(c)&&(this.$$.skip_bound=!0,this.$$set(c),this.$$.skip_bound=!1)}}let qw="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(qw);function Ww(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wu={exports:{}};function hh(s,c=100,l={}){if(typeof s!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof s}\`.`);if(c<0)throw new RangeError("`wait` must not be negative.");let{immediate:g}=typeof l=="boolean"?{immediate:l}:l,y,E,L,U,O;function D(){let j=Date.now()-U;if(j<c&&j>=0)L=setTimeout(D,c-j);else if(L=void 0,!g){let Y=y,G=E;y=void 0,E=void 0,O=s.apply(Y,G)}}let H=function(...j){if(y&&this!==y)throw new Error("Debounced method called with different contexts.");y=this,E=j,U=Date.now();let Y=g&&!L;if(L||(L=setTimeout(D,c)),Y){let G=y,ee=E;y=void 0,E=void 0,O=s.apply(G,ee)}return O};return H.clear=()=>{L&&(clearTimeout(L),L=void 0)},H.flush=()=>{if(!L)return;let j=y,Y=E;y=void 0,E=void 0,O=s.apply(j,Y),clearTimeout(L),L=void 0},H}wu.exports.debounce=hh,wu.exports=hh;var Qw=wu.exports;let ph=Ww(Qw),yu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let gh=s=>s instanceof Uint8Array,vu=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),Ur=(s,c)=>s<<32-c|s>>>c;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");let Kw=Array.from({length:256},(s,c)=>c.toString(16).padStart(2,"0"));function Qt(s){if(!gh(s))throw new Error("Uint8Array expected");let c="";for(let l=0;l<s.length;l++)c+=Kw[s[l]];return c}function _u(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);let c=s.length;if(c%2)throw new Error("padded hex string expected, got unpadded hex of length "+c);let l=new Uint8Array(c/2);for(let g=0;g<l.length;g++){let y=g*2,E=s.slice(y,y+2),L=Number.parseInt(E,16);if(Number.isNaN(L)||L<0)throw new Error("Invalid byte sequence");l[g]=L}return l}function Gw(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function mh(s){if(typeof s=="string"&&(s=Gw(s)),!gh(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}let Zw=class{clone(){return this._cloneInto()}};function bh(s){let c=g=>s().update(mh(g)).digest(),l=s();return c.outputLen=l.outputLen,c.blockLen=l.blockLen,c.create=()=>s(),c}function Yw(s=32){if(yu&&typeof yu.getRandomValues=="function")return yu.getRandomValues(new Uint8Array(s));throw new Error("crypto.getRandomValues must be defined")}function wh(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function yh(s,...c){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(c.length>0&&!c.includes(s.length))throw new Error(`Expected Uint8Array of length ${c}, not of length=${s.length}`)}function Jw(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");wh(s.outputLen),wh(s.blockLen)}function Zs(s,c=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(c&&s.finished)throw new Error("Hash#digest() has already been called")}function Xw(s,c){yh(s);let l=c.outputLen;if(s.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}let Eu=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;let vh=s=>s instanceof Uint8Array,xu=s=>new DataView(s.buffer,s.byteOffset,s.byteLength),zr=(s,c)=>s<<32-c|s>>>c;if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function ey(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function ku(s){if(typeof s=="string"&&(s=ey(s)),!vh(s))throw new Error(`expected Uint8Array, got ${typeof s}`);return s}function ty(...s){let c=new Uint8Array(s.reduce((g,y)=>g+y.length,0)),l=0;return s.forEach(g=>{if(!vh(g))throw new Error("Uint8Array expected");c.set(g,l),l+=g.length}),c}class _h{clone(){return this._cloneInto()}}function ry(s){let c=g=>s().update(ku(g)).digest(),l=s();return c.outputLen=l.outputLen,c.blockLen=l.blockLen,c.create=()=>s(),c}function Eh(s=32){if(Eu&&typeof Eu.getRandomValues=="function")return Eu.getRandomValues(new Uint8Array(s));throw new Error("crypto.getRandomValues must be defined")}function ny(s,c,l,g){if(typeof s.setBigUint64=="function")return s.setBigUint64(c,l,g);let y=BigInt(32),E=BigInt(4294967295),L=Number(l>>y&E),U=Number(l&E),O=g?4:0,D=g?0:4;s.setUint32(c+O,L,g),s.setUint32(c+D,U,g)}let oy=class extends _h{constructor(s,c,l,g){super(),this.blockLen=s,this.outputLen=c,this.padOffset=l,this.isLE=g,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(s),this.view=xu(this.buffer)}update(s){Zs(this);let{view:c,buffer:l,blockLen:g}=this;s=ku(s);let y=s.length;for(let E=0;E<y;){let L=Math.min(g-this.pos,y-E);if(L===g){let U=xu(s);for(;g<=y-E;E+=g)this.process(U,E);continue}l.set(s.subarray(E,E+L),this.pos),this.pos+=L,E+=L,this.pos===g&&(this.process(c,0),this.pos=0)}return this.length+=s.length,this.roundClean(),this}digestInto(s){Zs(this),Xw(s,this),this.finished=!0;let{buffer:c,view:l,blockLen:g,isLE:y}=this,{pos:E}=this;c[E++]=128,this.buffer.subarray(E).fill(0),this.padOffset>g-E&&(this.process(l,0),E=0);for(let H=E;H<g;H++)c[H]=0;ny(l,g-8,BigInt(this.length*8),y),this.process(l,0);let L=xu(s),U=this.outputLen;if(U%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let O=U/4,D=this.get();if(O>D.length)throw new Error("_sha2: outputLen bigger than state");for(let H=0;H<O;H++)L.setUint32(4*H,D[H],y)}digest(){let{buffer:s,outputLen:c}=this;this.digestInto(s);let l=s.slice(0,c);return this.destroy(),l}_cloneInto(s){s||(s=new this.constructor),s.set(...this.get());let{blockLen:c,buffer:l,length:g,finished:y,destroyed:E,pos:L}=this;return s.length=g,s.pos=L,s.finished=y,s.destroyed=E,g%c&&s.buffer.set(l),s}},iy=(s,c,l)=>s&c^~s&l,sy=(s,c,l)=>s&c^s&l^c&l,ay=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Cn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Pn=new Uint32Array(64),cy=class extends oy{constructor(){super(64,32,8,!1),this.A=Cn[0]|0,this.B=Cn[1]|0,this.C=Cn[2]|0,this.D=Cn[3]|0,this.E=Cn[4]|0,this.F=Cn[5]|0,this.G=Cn[6]|0,this.H=Cn[7]|0}get(){let{A:s,B:c,C:l,D:g,E:y,F:E,G:L,H:U}=this;return[s,c,l,g,y,E,L,U]}set(s,c,l,g,y,E,L,U){this.A=s|0,this.B=c|0,this.C=l|0,this.D=g|0,this.E=y|0,this.F=E|0,this.G=L|0,this.H=U|0}process(s,c){for(let H=0;H<16;H++,c+=4)Pn[H]=s.getUint32(c,!1);for(let H=16;H<64;H++){let j=Pn[H-15],Y=Pn[H-2],G=zr(j,7)^zr(j,18)^j>>>3,ee=zr(Y,17)^zr(Y,19)^Y>>>10;Pn[H]=ee+Pn[H-7]+G+Pn[H-16]|0}let{A:l,B:g,C:y,D:E,E:L,F:U,G:O,H:D}=this;for(let H=0;H<64;H++){let j=zr(L,6)^zr(L,11)^zr(L,25),Y=D+j+iy(L,U,O)+ay[H]+Pn[H]|0,G=(zr(l,2)^zr(l,13)^zr(l,22))+sy(l,g,y)|0;D=O,O=U,U=L,L=E+Y|0,E=y,y=g,g=l,l=Y+G|0}l=l+this.A|0,g=g+this.B|0,y=y+this.C|0,E=E+this.D|0,L=L+this.E|0,U=U+this.F|0,O=O+this.G|0,D=D+this.H|0,this.set(l,g,y,E,L,U,O,D)}roundClean(){Pn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Su=ry(()=>new cy);let xh=BigInt(0),Ys=BigInt(1),uy=BigInt(2),Js=s=>s instanceof Uint8Array,ly=Array.from({length:256},(s,c)=>c.toString(16).padStart(2,"0"));function Yo(s){if(!Js(s))throw new Error("Uint8Array expected");let c="";for(let l=0;l<s.length;l++)c+=ly[s[l]];return c}function kh(s){let c=s.toString(16);return c.length&1?`0${c}`:c}function Au(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);return BigInt(s===""?"0":`0x${s}`)}function Jo(s){if(typeof s!="string")throw new Error("hex string expected, got "+typeof s);let c=s.length;if(c%2)throw new Error("padded hex string expected, got unpadded hex of length "+c);let l=new Uint8Array(c/2);for(let g=0;g<l.length;g++){let y=g*2,E=s.slice(y,y+2),L=Number.parseInt(E,16);if(Number.isNaN(L)||L<0)throw new Error("Invalid byte sequence");l[g]=L}return l}function Yt(s){return Au(Yo(s))}function Tu(s){if(!Js(s))throw new Error("Uint8Array expected");return Au(Yo(Uint8Array.from(s).reverse()))}function In(s,c){return Jo(s.toString(16).padStart(c*2,"0"))}function $u(s,c){return In(s,c).reverse()}function dy(s){return Jo(kh(s))}function Dt(s,c,l){let g;if(typeof c=="string")try{g=Jo(c)}catch(E){throw new Error(`${s} must be valid hex string, got "${c}". Cause: ${E}`)}else if(Js(c))g=Uint8Array.from(c);else throw new Error(`${s} must be hex string or Uint8Array`);let y=g.length;if(typeof l=="number"&&y!==l)throw new Error(`${s} expected ${l} bytes, got ${y}`);return g}function mo(...s){let c=new Uint8Array(s.reduce((g,y)=>g+y.length,0)),l=0;return s.forEach(g=>{if(!Js(g))throw new Error("Uint8Array expected");c.set(g,l),l+=g.length}),c}function fy(s,c){if(s.length!==c.length)return!1;for(let l=0;l<s.length;l++)if(s[l]!==c[l])return!1;return!0}function hy(s){if(typeof s!="string")throw new Error(`utf8ToBytes expected string, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function py(s){let c;for(c=0;s>xh;s>>=Ys,c+=1);return c}function gy(s,c){return s>>BigInt(c)&Ys}let my=(s,c,l)=>s|(l?Ys:xh)<<BigInt(c),Bu=s=>(uy<<BigInt(s-1))-Ys,Lu=s=>new Uint8Array(s),Sh=s=>Uint8Array.from(s);function Ah(s,c,l){if(typeof s!="number"||s<2)throw new Error("hashLen must be a number");if(typeof c!="number"||c<2)throw new Error("qByteLen must be a number");if(typeof l!="function")throw new Error("hmacFn must be a function");let g=Lu(s),y=Lu(s),E=0,L=()=>{g.fill(1),y.fill(0),E=0},U=(...H)=>l(y,g,...H),O=(H=Lu())=>{y=U(Sh([0]),H),g=U(),H.length!==0&&(y=U(Sh([1]),H),g=U())},D=()=>{if(E++>=1e3)throw new Error("drbg: tried 1000 values");let H=0,j=[];for(;H<c;){g=U();let Y=g.slice();j.push(Y),H+=g.length}return mo(...j)};return(H,j)=>{L(),O(H);let Y;for(;!(Y=j(D()));)O();return L(),Y}}let by={bigint:s=>typeof s=="bigint",function:s=>typeof s=="function",boolean:s=>typeof s=="boolean",string:s=>typeof s=="string",stringOrUint8Array:s=>typeof s=="string"||s instanceof Uint8Array,isSafeInteger:s=>Number.isSafeInteger(s),array:s=>Array.isArray(s),field:(s,c)=>c.Fp.isValid(s),hash:s=>typeof s=="function"&&Number.isSafeInteger(s.outputLen)};function ji(s,c,l={}){let g=(y,E,L)=>{let U=by[E];if(typeof U!="function")throw new Error(`Invalid validator "${E}", expected function`);let O=s[y];if(!(L&&O===void 0)&&!U(O,s))throw new Error(`Invalid param ${String(y)}=${O} (${typeof O}), expected ${E}`)};for(let[y,E]of Object.entries(c))g(y,E,!1);for(let[y,E]of Object.entries(l))g(y,E,!0);return s}let wy=Object.freeze(Object.defineProperty({__proto__:null,bitGet:gy,bitLen:py,bitMask:Bu,bitSet:my,bytesToHex:Yo,bytesToNumberBE:Yt,bytesToNumberLE:Tu,concatBytes:mo,createHmacDrbg:Ah,ensureBytes:Dt,equalBytes:fy,hexToBytes:Jo,hexToNumber:Au,numberToBytesBE:In,numberToBytesLE:$u,numberToHexUnpadded:kh,numberToVarBytesBE:dy,utf8ToBytes:hy,validateObject:ji},Symbol.toStringTag,{value:"Module"}));let Tt=BigInt(0),lt=BigInt(1),bo=BigInt(2),yy=BigInt(3),Cu=BigInt(4),Th=BigInt(5),$h=BigInt(8);BigInt(9),BigInt(16);function Lt(s,c){let l=s%c;return l>=Tt?l:c+l}function vy(s,c,l){if(l<=Tt||c<Tt)throw new Error("Expected power/modulo > 0");if(l===lt)return Tt;let g=lt;for(;c>Tt;)c&lt&&(g=g*s%l),s=s*s%l,c>>=lt;return g}function ur(s,c,l){let g=s;for(;c-- >Tt;)g*=g,g%=l;return g}function Pu(s,c){if(s===Tt||c<=Tt)throw new Error(`invert: expected positive integers, got n=${s} mod=${c}`);let l=Lt(s,c),g=c,y=Tt,E=lt;for(;l!==Tt;){let L=g/l,U=g%l,O=y-E*L;g=l,l=U,y=E,E=O}if(g!==lt)throw new Error("invert: does not exist");return Lt(y,c)}function _y(s){let c=(s-lt)/bo,l,g,y;for(l=s-lt,g=0;l%bo===Tt;l/=bo,g++);for(y=bo;y<s&&vy(y,c,s)!==s-lt;y++);if(g===1){let L=(s+lt)/Cu;return function(U,O){let D=U.pow(O,L);if(!U.eql(U.sqr(D),O))throw new Error("Cannot find square root");return D}}let E=(l+lt)/bo;return function(L,U){if(L.pow(U,c)===L.neg(L.ONE))throw new Error("Cannot find square root");let O=g,D=L.pow(L.mul(L.ONE,y),l),H=L.pow(U,E),j=L.pow(U,l);for(;!L.eql(j,L.ONE);){if(L.eql(j,L.ZERO))return L.ZERO;let Y=1;for(let ee=L.sqr(j);Y<O&&!L.eql(ee,L.ONE);Y++)ee=L.sqr(ee);let G=L.pow(D,lt<<BigInt(O-Y-1));D=L.sqr(G),H=L.mul(H,G),j=L.mul(j,D),O=Y}return H}}function Ey(s){if(s%Cu===yy){let c=(s+lt)/Cu;return function(l,g){let y=l.pow(g,c);if(!l.eql(l.sqr(y),g))throw new Error("Cannot find square root");return y}}if(s%$h===Th){let c=(s-Th)/$h;return function(l,g){let y=l.mul(g,bo),E=l.pow(y,c),L=l.mul(g,E),U=l.mul(l.mul(L,bo),E),O=l.mul(L,l.sub(U,l.ONE));if(!l.eql(l.sqr(O),g))throw new Error("Cannot find square root");return O}}return _y(s)}let xy=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function ky(s){let c={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},l=xy.reduce((g,y)=>(g[y]="function",g),c);return ji(s,l)}function Sy(s,c,l){if(l<Tt)throw new Error("Expected power > 0");if(l===Tt)return s.ONE;if(l===lt)return c;let g=s.ONE,y=c;for(;l>Tt;)l&lt&&(g=s.mul(g,y)),y=s.sqr(y),l>>=lt;return g}function Ay(s,c){let l=new Array(c.length),g=c.reduce((E,L,U)=>s.is0(L)?E:(l[U]=E,s.mul(E,L)),s.ONE),y=s.inv(g);return c.reduceRight((E,L,U)=>s.is0(L)?E:(l[U]=s.mul(E,l[U]),s.mul(E,L)),y),l}function Bh(s,c){let l=c!==void 0?c:s.toString(2).length,g=Math.ceil(l/8);return{nBitLength:l,nByteLength:g}}function Ty(s,c,l=!1,g={}){if(s<=Tt)throw new Error(`Expected Field ORDER > 0, got ${s}`);let{nBitLength:y,nByteLength:E}=Bh(s,c);if(E>2048)throw new Error("Field lengths over 2048 bytes are not supported");let L=Ey(s),U=Object.freeze({ORDER:s,BITS:y,BYTES:E,MASK:Bu(y),ZERO:Tt,ONE:lt,create:O=>Lt(O,s),isValid:O=>{if(typeof O!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof O}`);return Tt<=O&&O<s},is0:O=>O===Tt,isOdd:O=>(O&lt)===lt,neg:O=>Lt(-O,s),eql:(O,D)=>O===D,sqr:O=>Lt(O*O,s),add:(O,D)=>Lt(O+D,s),sub:(O,D)=>Lt(O-D,s),mul:(O,D)=>Lt(O*D,s),pow:(O,D)=>Sy(U,O,D),div:(O,D)=>Lt(O*Pu(D,s),s),sqrN:O=>O*O,addN:(O,D)=>O+D,subN:(O,D)=>O-D,mulN:(O,D)=>O*D,inv:O=>Pu(O,s),sqrt:g.sqrt||(O=>L(U,O)),invertBatch:O=>Ay(U,O),cmov:(O,D,H)=>H?D:O,toBytes:O=>l?$u(O,E):In(O,E),fromBytes:O=>{if(O.length!==E)throw new Error(`Fp.fromBytes: expected ${E}, got ${O.length}`);return l?Tu(O):Yt(O)}});return Object.freeze(U)}function Lh(s){if(typeof s!="bigint")throw new Error("field order must be bigint");let c=s.toString(2).length;return Math.ceil(c/8)}function Ch(s){let c=Lh(s);return c+Math.ceil(c/2)}function $y(s,c,l=!1){let g=s.length,y=Lh(c),E=Ch(c);if(g<16||g<E||g>1024)throw new Error(`expected ${E}-1024 bytes of input, got ${g}`);let L=l?Yt(s):Tu(s),U=Lt(L,c-lt)+lt;return l?$u(U,y):In(U,y)}let By=BigInt(0),Iu=BigInt(1);function Ly(s,c){let l=(y,E)=>{let L=E.negate();return y?L:E},g=y=>{let E=Math.ceil(c/y)+1,L=2**(y-1);return{windows:E,windowSize:L}};return{constTimeNegate:l,unsafeLadder(y,E){let L=s.ZERO,U=y;for(;E>By;)E&Iu&&(L=L.add(U)),U=U.double(),E>>=Iu;return L},precomputeWindow(y,E){let{windows:L,windowSize:U}=g(E),O=[],D=y,H=D;for(let j=0;j<L;j++){H=D,O.push(H);for(let Y=1;Y<U;Y++)H=H.add(D),O.push(H);D=H.double()}return O},wNAF(y,E,L){let{windows:U,windowSize:O}=g(y),D=s.ZERO,H=s.BASE,j=BigInt(2**y-1),Y=2**y,G=BigInt(y);for(let ee=0;ee<U;ee++){let Q=ee*O,te=Number(L&j);L>>=G,te>O&&(te-=Y,L+=Iu);let ne=Q,X=Q+Math.abs(te)-1,pe=ee%2!==0,Ae=te<0;te===0?H=H.add(l(pe,E[ne])):D=D.add(l(Ae,E[X]))}return{p:D,f:H}},wNAFCached(y,E,L,U){let O=y._WINDOW_SIZE||1,D=E.get(y);return D||(D=this.precomputeWindow(y,O),O!==1&&E.set(y,U(D))),this.wNAF(O,D,L)}}}function Ph(s){return ky(s.Fp),ji(s,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Bh(s.n,s.nBitLength),...s,p:s.Fp.ORDER})}function Cy(s){let c=Ph(s);ji(c,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:l,Fp:g,a:y}=c;if(l){if(!g.eql(y,g.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof l!="object"||typeof l.beta!="bigint"||typeof l.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...c})}let{bytesToNumberBE:Py,hexToBytes:Iy}=wy,wo={Err:class extends Error{constructor(s=""){super(s)}},_parseInt(s){let{Err:c}=wo;if(s.length<2||s[0]!==2)throw new c("Invalid signature integer tag");let l=s[1],g=s.subarray(2,l+2);if(!l||g.length!==l)throw new c("Invalid signature integer: wrong length");if(g[0]&128)throw new c("Invalid signature integer: negative");if(g[0]===0&&!(g[1]&128))throw new c("Invalid signature integer: unnecessary leading zero");return{d:Py(g),l:s.subarray(l+2)}},toSig(s){let{Err:c}=wo,l=typeof s=="string"?Iy(s):s;if(!(l instanceof Uint8Array))throw new Error("ui8a expected");let g=l.length;if(g<2||l[0]!=48)throw new c("Invalid signature tag");if(l[1]!==g-2)throw new c("Invalid signature: incorrect length");let{d:y,l:E}=wo._parseInt(l.subarray(2)),{d:L,l:U}=wo._parseInt(E);if(U.length)throw new c("Invalid signature: left bytes after parsing");return{r:y,s:L}},hexFromSig(s){let c=D=>Number.parseInt(D[0],16)&8?"00"+D:D,l=D=>{let H=D.toString(16);return H.length&1?`0${H}`:H},g=c(l(s.s)),y=c(l(s.r)),E=g.length/2,L=y.length/2,U=l(E),O=l(L);return`30${l(L+E+4)}02${O}${y}02${U}${g}`}},Xr=BigInt(0),lr=BigInt(1);BigInt(2);let Ih=BigInt(3);BigInt(4);function Ny(s){let c=Cy(s),{Fp:l}=c,g=c.toBytes||((ee,Q,te)=>{let ne=Q.toAffine();return mo(Uint8Array.from([4]),l.toBytes(ne.x),l.toBytes(ne.y))}),y=c.fromBytes||(ee=>{let Q=ee.subarray(1),te=l.fromBytes(Q.subarray(0,l.BYTES)),ne=l.fromBytes(Q.subarray(l.BYTES,2*l.BYTES));return{x:te,y:ne}});function E(ee){let{a:Q,b:te}=c,ne=l.sqr(ee),X=l.mul(ne,ee);return l.add(l.add(X,l.mul(ee,Q)),te)}if(!l.eql(l.sqr(c.Gy),E(c.Gx)))throw new Error("bad generator point: equation left != right");function L(ee){return typeof ee=="bigint"&&Xr<ee&&ee<c.n}function U(ee){if(!L(ee))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function O(ee){let{allowedPrivateKeyLengths:Q,nByteLength:te,wrapPrivateKey:ne,n:X}=c;if(Q&&typeof ee!="bigint"){if(ee instanceof Uint8Array&&(ee=Yo(ee)),typeof ee!="string"||!Q.includes(ee.length))throw new Error("Invalid key");ee=ee.padStart(te*2,"0")}let pe;try{pe=typeof ee=="bigint"?ee:Yt(Dt("private key",ee,te))}catch{throw new Error(`private key must be ${te} bytes, hex or bigint, not ${typeof ee}`)}return ne&&(pe=Lt(pe,X)),U(pe),pe}let D=new Map;function H(ee){if(!(ee instanceof j))throw new Error("ProjectivePoint expected")}class j{constructor(Q,te,ne){if(this.px=Q,this.py=te,this.pz=ne,Q==null||!l.isValid(Q))throw new Error("x required");if(te==null||!l.isValid(te))throw new Error("y required");if(ne==null||!l.isValid(ne))throw new Error("z required")}static fromAffine(Q){let{x:te,y:ne}=Q||{};if(!Q||!l.isValid(te)||!l.isValid(ne))throw new Error("invalid affine point");if(Q instanceof j)throw new Error("projective point not allowed");let X=pe=>l.eql(pe,l.ZERO);return X(te)&&X(ne)?j.ZERO:new j(te,ne,l.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(Q){let te=l.invertBatch(Q.map(ne=>ne.pz));return Q.map((ne,X)=>ne.toAffine(te[X])).map(j.fromAffine)}static fromHex(Q){let te=j.fromAffine(y(Dt("pointHex",Q)));return te.assertValidity(),te}static fromPrivateKey(Q){return j.BASE.multiply(O(Q))}_setWindowSize(Q){this._WINDOW_SIZE=Q,D.delete(this)}assertValidity(){if(this.is0()){if(c.allowInfinityPoint&&!l.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:Q,y:te}=this.toAffine();if(!l.isValid(Q)||!l.isValid(te))throw new Error("bad point: x or y not FE");let ne=l.sqr(te),X=E(Q);if(!l.eql(ne,X))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:Q}=this.toAffine();if(l.isOdd)return!l.isOdd(Q);throw new Error("Field doesn't support isOdd")}equals(Q){H(Q);let{px:te,py:ne,pz:X}=this,{px:pe,py:Ae,pz:$e}=Q,ge=l.eql(l.mul(te,$e),l.mul(pe,X)),de=l.eql(l.mul(ne,$e),l.mul(Ae,X));return ge&&de}negate(){return new j(this.px,l.neg(this.py),this.pz)}double(){let{a:Q,b:te}=c,ne=l.mul(te,Ih),{px:X,py:pe,pz:Ae}=this,$e=l.ZERO,ge=l.ZERO,de=l.ZERO,se=l.mul(X,X),be=l.mul(pe,pe),Be=l.mul(Ae,Ae),Oe=l.mul(X,pe);return Oe=l.add(Oe,Oe),de=l.mul(X,Ae),de=l.add(de,de),$e=l.mul(Q,de),ge=l.mul(ne,Be),ge=l.add($e,ge),$e=l.sub(be,ge),ge=l.add(be,ge),ge=l.mul($e,ge),$e=l.mul(Oe,$e),de=l.mul(ne,de),Be=l.mul(Q,Be),Oe=l.sub(se,Be),Oe=l.mul(Q,Oe),Oe=l.add(Oe,de),de=l.add(se,se),se=l.add(de,se),se=l.add(se,Be),se=l.mul(se,Oe),ge=l.add(ge,se),Be=l.mul(pe,Ae),Be=l.add(Be,Be),se=l.mul(Be,Oe),$e=l.sub($e,se),de=l.mul(Be,be),de=l.add(de,de),de=l.add(de,de),new j($e,ge,de)}add(Q){H(Q);let{px:te,py:ne,pz:X}=this,{px:pe,py:Ae,pz:$e}=Q,ge=l.ZERO,de=l.ZERO,se=l.ZERO,be=c.a,Be=l.mul(c.b,Ih),Oe=l.mul(te,pe),gt=l.mul(ne,Ae),mt=l.mul(X,$e),bt=l.add(te,ne),me=l.add(pe,Ae);bt=l.mul(bt,me),me=l.add(Oe,gt),bt=l.sub(bt,me),me=l.add(te,X);let ke=l.add(pe,$e);return me=l.mul(me,ke),ke=l.add(Oe,mt),me=l.sub(me,ke),ke=l.add(ne,X),ge=l.add(Ae,$e),ke=l.mul(ke,ge),ge=l.add(gt,mt),ke=l.sub(ke,ge),se=l.mul(be,me),ge=l.mul(Be,mt),se=l.add(ge,se),ge=l.sub(gt,se),se=l.add(gt,se),de=l.mul(ge,se),gt=l.add(Oe,Oe),gt=l.add(gt,Oe),mt=l.mul(be,mt),me=l.mul(Be,me),gt=l.add(gt,mt),mt=l.sub(Oe,mt),mt=l.mul(be,mt),me=l.add(me,mt),Oe=l.mul(gt,me),de=l.add(de,Oe),Oe=l.mul(ke,me),ge=l.mul(bt,ge),ge=l.sub(ge,Oe),Oe=l.mul(bt,gt),se=l.mul(ke,se),se=l.add(se,Oe),new j(ge,de,se)}subtract(Q){return this.add(Q.negate())}is0(){return this.equals(j.ZERO)}wNAF(Q){return G.wNAFCached(this,D,Q,te=>{let ne=l.invertBatch(te.map(X=>X.pz));return te.map((X,pe)=>X.toAffine(ne[pe])).map(j.fromAffine)})}multiplyUnsafe(Q){let te=j.ZERO;if(Q===Xr)return te;if(U(Q),Q===lr)return this;let{endo:ne}=c;if(!ne)return G.unsafeLadder(this,Q);let{k1neg:X,k1:pe,k2neg:Ae,k2:$e}=ne.splitScalar(Q),ge=te,de=te,se=this;for(;pe>Xr||$e>Xr;)pe&lr&&(ge=ge.add(se)),$e&lr&&(de=de.add(se)),se=se.double(),pe>>=lr,$e>>=lr;return X&&(ge=ge.negate()),Ae&&(de=de.negate()),de=new j(l.mul(de.px,ne.beta),de.py,de.pz),ge.add(de)}multiply(Q){U(Q);let te=Q,ne,X,{endo:pe}=c;if(pe){let{k1neg:Ae,k1:$e,k2neg:ge,k2:de}=pe.splitScalar(te),{p:se,f:be}=this.wNAF($e),{p:Be,f:Oe}=this.wNAF(de);se=G.constTimeNegate(Ae,se),Be=G.constTimeNegate(ge,Be),Be=new j(l.mul(Be.px,pe.beta),Be.py,Be.pz),ne=se.add(Be),X=be.add(Oe)}else{let{p:Ae,f:$e}=this.wNAF(te);ne=Ae,X=$e}return j.normalizeZ([ne,X])[0]}multiplyAndAddUnsafe(Q,te,ne){let X=j.BASE,pe=($e,ge)=>ge===Xr||ge===lr||!$e.equals(X)?$e.multiplyUnsafe(ge):$e.multiply(ge),Ae=pe(this,te).add(pe(Q,ne));return Ae.is0()?void 0:Ae}toAffine(Q){let{px:te,py:ne,pz:X}=this,pe=this.is0();Q==null&&(Q=pe?l.ONE:l.inv(X));let Ae=l.mul(te,Q),$e=l.mul(ne,Q),ge=l.mul(X,Q);if(pe)return{x:l.ZERO,y:l.ZERO};if(!l.eql(ge,l.ONE))throw new Error("invZ was invalid");return{x:Ae,y:$e}}isTorsionFree(){let{h:Q,isTorsionFree:te}=c;if(Q===lr)return!0;if(te)return te(j,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:Q,clearCofactor:te}=c;return Q===lr?this:te?te(j,this):this.multiplyUnsafe(c.h)}toRawBytes(Q=!0){return this.assertValidity(),g(j,this,Q)}toHex(Q=!0){return Yo(this.toRawBytes(Q))}}j.BASE=new j(c.Gx,c.Gy,l.ONE),j.ZERO=new j(l.ZERO,l.ONE,l.ZERO);let Y=c.nBitLength,G=Ly(j,c.endo?Math.ceil(Y/2):Y);return{CURVE:c,ProjectivePoint:j,normPrivateKeyToScalar:O,weierstrassEquation:E,isWithinCurveOrder:L}}function Oy(s){let c=Ph(s);return ji(c,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...c})}function Ry(s){let c=Oy(s),{Fp:l,n:g}=c,y=l.BYTES+1,E=2*l.BYTES+1;function L(me){return Xr<me&&me<l.ORDER}function U(me){return Lt(me,g)}function O(me){return Pu(me,g)}let{ProjectivePoint:D,normPrivateKeyToScalar:H,weierstrassEquation:j,isWithinCurveOrder:Y}=Ny({...c,toBytes(me,ke,Ue){let Ge=ke.toAffine(),Ye=l.toBytes(Ge.x),Ke=mo;return Ue?Ke(Uint8Array.from([ke.hasEvenY()?2:3]),Ye):Ke(Uint8Array.from([4]),Ye,l.toBytes(Ge.y))},fromBytes(me){let ke=me.length,Ue=me[0],Ge=me.subarray(1);if(ke===y&&(Ue===2||Ue===3)){let Ye=Yt(Ge);if(!L(Ye))throw new Error("Point is not on curve");let Ke=j(Ye),Ft=l.sqrt(Ke),Ct=(Ft&lr)===lr;return(Ue&1)===1!==Ct&&(Ft=l.neg(Ft)),{x:Ye,y:Ft}}else if(ke===E&&Ue===4){let Ye=l.fromBytes(Ge.subarray(0,l.BYTES)),Ke=l.fromBytes(Ge.subarray(l.BYTES,2*l.BYTES));return{x:Ye,y:Ke}}else throw new Error(`Point of length ${ke} was invalid. Expected ${y} compressed bytes or ${E} uncompressed bytes`)}}),G=me=>Yo(In(me,c.nByteLength));function ee(me){let ke=g>>lr;return me>ke}function Q(me){return ee(me)?U(-me):me}let te=(me,ke,Ue)=>Yt(me.slice(ke,Ue));class ne{constructor(ke,Ue,Ge){this.r=ke,this.s=Ue,this.recovery=Ge,this.assertValidity()}static fromCompact(ke){let Ue=c.nByteLength;return ke=Dt("compactSignature",ke,Ue*2),new ne(te(ke,0,Ue),te(ke,Ue,2*Ue))}static fromDER(ke){let{r:Ue,s:Ge}=wo.toSig(Dt("DER",ke));return new ne(Ue,Ge)}assertValidity(){if(!Y(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!Y(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(ke){return new ne(this.r,this.s,ke)}recoverPublicKey(ke){let{r:Ue,s:Ge,recovery:Ye}=this,Ke=de(Dt("msgHash",ke));if(Ye==null||![0,1,2,3].includes(Ye))throw new Error("recovery id invalid");let Ft=Ye===2||Ye===3?Ue+c.n:Ue;if(Ft>=l.ORDER)throw new Error("recovery id 2 or 3 invalid");let Ct=Ye&1?"03":"02",Jt=D.fromHex(Ct+G(Ft)),wt=O(Ft),fr=U(-Ke*wt),kr=U(Ge*wt),Fr=D.BASE.multiplyAndAddUnsafe(Jt,fr,kr);if(!Fr)throw new Error("point at infinify");return Fr.assertValidity(),Fr}hasHighS(){return ee(this.s)}normalizeS(){return this.hasHighS()?new ne(this.r,U(-this.s),this.recovery):this}toDERRawBytes(){return Jo(this.toDERHex())}toDERHex(){return wo.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Jo(this.toCompactHex())}toCompactHex(){return G(this.r)+G(this.s)}}let X={isValidPrivateKey(me){try{return H(me),!0}catch{return!1}},normPrivateKeyToScalar:H,randomPrivateKey:()=>{let me=Ch(c.n);return $y(c.randomBytes(me),c.n)},precompute(me=8,ke=D.BASE){return ke._setWindowSize(me),ke.multiply(BigInt(3)),ke}};function pe(me,ke=!0){return D.fromPrivateKey(me).toRawBytes(ke)}function Ae(me){let ke=me instanceof Uint8Array,Ue=typeof me=="string",Ge=(ke||Ue)&&me.length;return ke?Ge===y||Ge===E:Ue?Ge===2*y||Ge===2*E:me instanceof D}function $e(me,ke,Ue=!0){if(Ae(me))throw new Error("first arg must be private key");if(!Ae(ke))throw new Error("second arg must be public key");return D.fromHex(ke).multiply(H(me)).toRawBytes(Ue)}let ge=c.bits2int||function(me){let ke=Yt(me),Ue=me.length*8-c.nBitLength;return Ue>0?ke>>BigInt(Ue):ke},de=c.bits2int_modN||function(me){return U(ge(me))},se=Bu(c.nBitLength);function be(me){if(typeof me!="bigint")throw new Error("bigint expected");if(!(Xr<=me&&me<se))throw new Error(`bigint expected < 2^${c.nBitLength}`);return In(me,c.nByteLength)}function Be(me,ke,Ue=Oe){if(["recovered","canonical"].some(ir=>ir in Ue))throw new Error("sign() legacy options not supported");let{hash:Ge,randomBytes:Ye}=c,{lowS:Ke,prehash:Ft,extraEntropy:Ct}=Ue;Ke==null&&(Ke=!0),me=Dt("msgHash",me),Ft&&(me=Dt("prehashed msgHash",Ge(me)));let Jt=de(me),wt=H(ke),fr=[be(wt),be(Jt)];if(Ct!=null){let ir=Ct===!0?Ye(l.BYTES):Ct;fr.push(Dt("extraEntropy",ir))}let kr=mo(...fr),Fr=Jt;function Dn(ir){let Fn=ge(ir);if(!Y(Fn))return;let Eo=O(Fn),sr=D.BASE.multiply(Fn).toAffine(),on=U(sr.x);if(on===Xr)return;let xo=U(Eo*U(Fr+on*wt));if(xo===Xr)return;let ko=(sr.x===on?0:2)|Number(sr.y&lr),jn=xo;return Ke&&ee(xo)&&(jn=Q(xo),ko^=1),new ne(on,jn,ko)}return{seed:kr,k2sig:Dn}}let Oe={lowS:c.lowS,prehash:!1},gt={lowS:c.lowS,prehash:!1};function mt(me,ke,Ue=Oe){let{seed:Ge,k2sig:Ye}=Be(me,ke,Ue),Ke=c;return Ah(Ke.hash.outputLen,Ke.nByteLength,Ke.hmac)(Ge,Ye)}D.BASE._setWindowSize(8);function bt(me,ke,Ue,Ge=gt){var Ye;let Ke=me;if(ke=Dt("msgHash",ke),Ue=Dt("publicKey",Ue),"strict"in Ge)throw new Error("options.strict was renamed to lowS");let{lowS:Ft,prehash:Ct}=Ge,Jt,wt;try{if(typeof Ke=="string"||Ke instanceof Uint8Array)try{Jt=ne.fromDER(Ke)}catch(sr){if(!(sr instanceof wo.Err))throw sr;Jt=ne.fromCompact(Ke)}else if(typeof Ke=="object"&&typeof Ke.r=="bigint"&&typeof Ke.s=="bigint"){let{r:sr,s:on}=Ke;Jt=new ne(sr,on)}else throw new Error("PARSE");wt=D.fromHex(Ue)}catch(sr){if(sr.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Ft&&Jt.hasHighS())return!1;Ct&&(ke=c.hash(ke));let{r:fr,s:kr}=Jt,Fr=de(ke),Dn=O(kr),ir=U(Fr*Dn),Fn=U(fr*Dn),Eo=(Ye=D.BASE.multiplyAndAddUnsafe(wt,ir,Fn))==null?void 0:Ye.toAffine();return Eo?U(Eo.x)===fr:!1}return{CURVE:c,getPublicKey:pe,getSharedSecret:$e,sign:mt,verify:bt,ProjectivePoint:D,Signature:ne,utils:X}}class Nh extends _h{constructor(c,l){super(),this.finished=!1,this.destroyed=!1,Jw(c);let g=ku(l);if(this.iHash=c.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let y=this.blockLen,E=new Uint8Array(y);E.set(g.length>y?c.create().update(g).digest():g);for(let L=0;L<E.length;L++)E[L]^=54;this.iHash.update(E),this.oHash=c.create();for(let L=0;L<E.length;L++)E[L]^=106;this.oHash.update(E),E.fill(0)}update(c){return Zs(this),this.iHash.update(c),this}digestInto(c){Zs(this),yh(c,this.outputLen),this.finished=!0,this.iHash.digestInto(c),this.oHash.update(c),this.oHash.digestInto(c),this.destroy()}digest(){let c=new Uint8Array(this.oHash.outputLen);return this.digestInto(c),c}_cloneInto(c){c||(c=Object.create(Object.getPrototypeOf(this),{}));let{oHash:l,iHash:g,finished:y,destroyed:E,blockLen:L,outputLen:U}=this;return c=c,c.finished=y,c.destroyed=E,c.blockLen=L,c.outputLen=U,c.oHash=l._cloneInto(c.oHash),c.iHash=g._cloneInto(c.iHash),c}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let Oh=(s,c,l)=>new Nh(s,c).update(l).digest();Oh.create=(s,c)=>new Nh(s,c);function Uy(s){return{hash:s,hmac:(c,...l)=>Oh(s,c,ty(...l)),randomBytes:Eh}}function zy(s,c){let l=g=>Ry({...s,...Uy(g)});return Object.freeze({...l(c),create:l})}let Xs=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),ea=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Rh=BigInt(1),ta=BigInt(2),Uh=(s,c)=>(s+c/ta)/c;function zh(s){let c=Xs,l=BigInt(3),g=BigInt(6),y=BigInt(11),E=BigInt(22),L=BigInt(23),U=BigInt(44),O=BigInt(88),D=s*s*s%c,H=D*D*s%c,j=ur(H,l,c)*H%c,Y=ur(j,l,c)*H%c,G=ur(Y,ta,c)*D%c,ee=ur(G,y,c)*G%c,Q=ur(ee,E,c)*ee%c,te=ur(Q,U,c)*Q%c,ne=ur(te,O,c)*te%c,X=ur(ne,U,c)*Q%c,pe=ur(X,l,c)*H%c,Ae=ur(pe,L,c)*ee%c,$e=ur(Ae,g,c)*D%c,ge=ur($e,ta,c);if(!Nu.eql(Nu.sqr(ge),s))throw new Error("Cannot find square root");return ge}let Nu=Ty(Xs,void 0,void 0,{sqrt:zh}),Hi=zy({a:BigInt(0),b:BigInt(7),Fp:Nu,n:ea,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:s=>{let c=ea,l=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),g=-Rh*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),y=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),E=l,L=BigInt("0x100000000000000000000000000000000"),U=Uh(E*s,c),O=Uh(-g*s,c),D=Lt(s-U*l-O*y,c),H=Lt(-U*g-O*E,c),j=D>L,Y=H>L;if(j&&(D=c-D),Y&&(H=c-H),D>L||H>L)throw new Error("splitScalar: Endomorphism failed, k="+s);return{k1neg:j,k1:D,k2neg:Y,k2:H}}}},Su),ra=BigInt(0),Mh=s=>typeof s=="bigint"&&ra<s&&s<Xs,My=s=>typeof s=="bigint"&&ra<s&&s<ea,Dh={};function na(s,...c){let l=Dh[s];if(l===void 0){let g=Su(Uint8Array.from(s,y=>y.charCodeAt(0)));l=mo(g,g),Dh[s]=l}return Su(mo(l,...c))}let Ou=s=>s.toRawBytes(!0).slice(1),Ru=s=>In(s,32),Uu=s=>Lt(s,Xs),Vi=s=>Lt(s,ea),zu=Hi.ProjectivePoint,Dy=(s,c,l)=>zu.BASE.multiplyAndAddUnsafe(s,c,l);function Mu(s){let c=Hi.utils.normPrivateKeyToScalar(s),l=zu.fromPrivateKey(c);return{scalar:l.hasEvenY()?c:Vi(-c),bytes:Ou(l)}}function Fh(s){if(!Mh(s))throw new Error("bad x: need 0 < x < p");let c=Uu(s*s),l=Uu(c*s+BigInt(7)),g=zh(l);g%ta!==ra&&(g=Uu(-g));let y=new zu(s,g,Rh);return y.assertValidity(),y}function jh(...s){return Vi(Yt(na("BIP0340/challenge",...s)))}function Fy(s){return Mu(s).bytes}function jy(s,c,l=Eh(32)){let g=Dt("message",s),{bytes:y,scalar:E}=Mu(c),L=Dt("auxRand",l,32),U=Ru(E^Yt(na("BIP0340/aux",L))),O=na("BIP0340/nonce",U,y,g),D=Vi(Yt(O));if(D===ra)throw new Error("sign failed: k is zero");let{bytes:H,scalar:j}=Mu(D),Y=jh(H,y,g),G=new Uint8Array(64);if(G.set(H,0),G.set(Ru(Vi(j+Y*E)),32),!Hh(G,g,y))throw new Error("sign: Invalid signature produced");return G}function Hh(s,c,l){let g=Dt("signature",s,64),y=Dt("message",c),E=Dt("publicKey",l,32);try{let L=Fh(Yt(E)),U=Yt(g.subarray(0,32));if(!Mh(U))return!1;let O=Yt(g.subarray(32,64));if(!My(O))return!1;let D=jh(Ru(U),Ou(L),y),H=Dy(L,O,Vi(-D));return!(!H||!H.hasEvenY()||H.toAffine().x!==U)}catch{return!1}}let Kt={getPublicKey:Fy,sign:jy,verify:Hh,utils:{randomPrivateKey:Hi.utils.randomPrivateKey,lift_x:Fh,pointToBytes:Ou,numberToBytesBE:In,bytesToNumberBE:Yt,taggedHash:na,mod:Lt}};function Du(s){if(!Number.isSafeInteger(s)||s<0)throw new Error(`Wrong positive integer: ${s}`)}function Hy(s){if(typeof s!="boolean")throw new Error(`Expected boolean, not ${s}`)}function Vh(s,...c){if(!(s instanceof Uint8Array))throw new Error("Expected Uint8Array");if(c.length>0&&!c.includes(s.length))throw new Error(`Expected Uint8Array of length ${c}, not of length=${s.length}`)}function Vy(s){if(typeof s!="function"||typeof s.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Du(s.outputLen),Du(s.blockLen)}function qy(s,c=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(c&&s.finished)throw new Error("Hash#digest() has already been called")}function Wy(s,c){Vh(s);let l=c.outputLen;if(s.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}let Fu={number:Du,bool:Hy,bytes:Vh,hash:Vy,exists:qy,output:Wy};function Qy(s,c,l,g){if(typeof s.setBigUint64=="function")return s.setBigUint64(c,l,g);let y=BigInt(32),E=BigInt(4294967295),L=Number(l>>y&E),U=Number(l&E),O=g?4:0,D=g?0:4;s.setUint32(c+O,L,g),s.setUint32(c+D,U,g)}class Ky extends Zw{constructor(c,l,g,y){super(),this.blockLen=c,this.outputLen=l,this.padOffset=g,this.isLE=y,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(c),this.view=vu(this.buffer)}update(c){Fu.exists(this);let{view:l,buffer:g,blockLen:y}=this;c=mh(c);let E=c.length;for(let L=0;L<E;){let U=Math.min(y-this.pos,E-L);if(U===y){let O=vu(c);for(;y<=E-L;L+=y)this.process(O,L);continue}g.set(c.subarray(L,L+U),this.pos),this.pos+=U,L+=U,this.pos===y&&(this.process(l,0),this.pos=0)}return this.length+=c.length,this.roundClean(),this}digestInto(c){Fu.exists(this),Fu.output(c,this),this.finished=!0;let{buffer:l,view:g,blockLen:y,isLE:E}=this,{pos:L}=this;l[L++]=128,this.buffer.subarray(L).fill(0),this.padOffset>y-L&&(this.process(g,0),L=0);for(let j=L;j<y;j++)l[j]=0;Qy(g,y-8,BigInt(this.length*8),E),this.process(g,0);let U=vu(c),O=this.outputLen;if(O%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let D=O/4,H=this.get();if(D>H.length)throw new Error("_sha2: outputLen bigger than state");for(let j=0;j<D;j++)U.setUint32(4*j,H[j],E)}digest(){let{buffer:c,outputLen:l}=this;this.digestInto(c);let g=c.slice(0,l);return this.destroy(),g}_cloneInto(c){c||(c=new this.constructor),c.set(...this.get());let{blockLen:l,buffer:g,length:y,finished:E,destroyed:L,pos:U}=this;return c.length=y,c.pos=U,c.finished=E,c.destroyed=L,y%l&&c.buffer.set(g),c}}let Gy=(s,c,l)=>s&c^~s&l,Zy=(s,c,l)=>s&c^s&l^c&l,Yy=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Nn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),On=new Uint32Array(64);class qh extends Ky{constructor(){super(64,32,8,!1),this.A=Nn[0]|0,this.B=Nn[1]|0,this.C=Nn[2]|0,this.D=Nn[3]|0,this.E=Nn[4]|0,this.F=Nn[5]|0,this.G=Nn[6]|0,this.H=Nn[7]|0}get(){let{A:c,B:l,C:g,D:y,E,F:L,G:U,H:O}=this;return[c,l,g,y,E,L,U,O]}set(c,l,g,y,E,L,U,O){this.A=c|0,this.B=l|0,this.C=g|0,this.D=y|0,this.E=E|0,this.F=L|0,this.G=U|0,this.H=O|0}process(c,l){for(let j=0;j<16;j++,l+=4)On[j]=c.getUint32(l,!1);for(let j=16;j<64;j++){let Y=On[j-15],G=On[j-2],ee=Ur(Y,7)^Ur(Y,18)^Y>>>3,Q=Ur(G,17)^Ur(G,19)^G>>>10;On[j]=Q+On[j-7]+ee+On[j-16]|0}let{A:g,B:y,C:E,D:L,E:U,F:O,G:D,H}=this;for(let j=0;j<64;j++){let Y=Ur(U,6)^Ur(U,11)^Ur(U,25),G=H+Y+Gy(U,O,D)+Yy[j]+On[j]|0,ee=(Ur(g,2)^Ur(g,13)^Ur(g,22))+Zy(g,y,E)|0;H=D,D=O,O=U,U=L+G|0,L=E,E=y,y=g,g=G+ee|0}g=g+this.A|0,y=y+this.B|0,E=E+this.C|0,L=L+this.D|0,U=U+this.E|0,O=O+this.F|0,D=D+this.G|0,H=H+this.H|0,this.set(g,y,E,L,U,O,D,H)}roundClean(){On.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class Jy extends qh{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}let ju=bh(()=>new qh);bh(()=>new Jy);var Xo=Symbol("verified"),Xy=s=>s instanceof Object;function e1(s){if(!Xy(s)||typeof s.kind!="number"||typeof s.content!="string"||typeof s.created_at!="number"||typeof s.pubkey!="string"||!s.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(s.tags))return!1;for(let c=0;c<s.tags.length;c++){let l=s.tags[c];if(!Array.isArray(l))return!1;for(let g=0;g<l.length;g++)if(typeof l[g]=="object")return!1}return!0}new TextDecoder("utf-8");var t1=new TextEncoder,r1=class{generateSecretKey(){return Kt.utils.randomPrivateKey()}getPublicKey(s){return Qt(Kt.getPublicKey(s))}finalizeEvent(s,c){let l=s;return l.pubkey=Qt(Kt.getPublicKey(c)),l.id=Hu(l),l.sig=Qt(Kt.sign(Hu(l),c)),l[Xo]=!0,l}verifyEvent(s){if(typeof s[Xo]=="boolean")return s[Xo];let c=Hu(s);if(c!==s.id)return s[Xo]=!1,!1;try{let l=Kt.verify(s.sig,c,s.pubkey);return s[Xo]=l,l}catch{return s[Xo]=!1,!1}}};function n1(s){if(!e1(s))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,s.pubkey,s.created_at,s.kind,s.tags,s.content])}function Hu(s){let c=ju(t1.encode(n1(s)));return Qt(c)}var oa=new r1,o1=oa.generateSecretKey,Wh=oa.getPublicKey;oa.finalizeEvent,oa.verifyEvent;var yo=Symbol("verified"),i1=s=>s instanceof Object;function s1(s){if(!i1(s)||typeof s.kind!="number"||typeof s.content!="string"||typeof s.created_at!="number"||typeof s.pubkey!="string"||!s.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(s.tags))return!1;for(let c=0;c<s.tags.length;c++){let l=s.tags[c];if(!Array.isArray(l))return!1;for(let g=0;g<l.length;g++)if(typeof l[g]=="object")return!1}return!0}new TextDecoder("utf-8");var a1=new TextEncoder;function qi(s){s.indexOf("://")===-1&&(s="wss://"+s);let c=new URL(s);return c.pathname=c.pathname.replace(/\/+/g,"/"),c.pathname.endsWith("/")&&(c.pathname=c.pathname.slice(0,-1)),(c.port==="80"&&c.protocol==="ws:"||c.port==="443"&&c.protocol==="wss:")&&(c.port=""),c.searchParams.sort(),c.hash="",c.toString()}var c1=class{constructor(s){ce(this,"value"),ce(this,"next",null),ce(this,"prev",null),this.value=s}},u1=class{constructor(){ce(this,"first"),ce(this,"last"),this.first=null,this.last=null}enqueue(s){let c=new c1(s);return this.last?this.last===this.first?(this.last=c,this.last.prev=this.first,this.first.next=c):(c.prev=this.last,this.last.next=c,this.last=c):(this.first=c,this.last=c),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let c=this.first;return this.first=null,this.last=null,c.value}let s=this.first;return this.first=s.next,s.value}},l1=class{generateSecretKey(){return Kt.utils.randomPrivateKey()}getPublicKey(s){return Qt(Kt.getPublicKey(s))}finalizeEvent(s,c){let l=s;return l.pubkey=Qt(Kt.getPublicKey(c)),l.id=Vu(l),l.sig=Qt(Kt.sign(Vu(l),c)),l[yo]=!0,l}verifyEvent(s){if(typeof s[yo]=="boolean")return s[yo];let c=Vu(s);if(c!==s.id)return s[yo]=!1,!1;try{let l=Kt.verify(s.sig,c,s.pubkey);return s[yo]=l,l}catch{return s[yo]=!1,!1}}};function d1(s){if(!s1(s))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,s.pubkey,s.created_at,s.kind,s.tags,s.content])}function Vu(s){let c=ju(a1.encode(d1(s)));return Qt(c)}var ia=new l1;ia.generateSecretKey,ia.getPublicKey,ia.finalizeEvent;var f1=ia.verifyEvent,h1=22242;function p1(s,c){if(s.ids&&s.ids.indexOf(c.id)===-1&&!s.ids.some(l=>c.id.startsWith(l))||s.kinds&&s.kinds.indexOf(c.kind)===-1||s.authors&&s.authors.indexOf(c.pubkey)===-1&&!s.authors.some(l=>c.pubkey.startsWith(l)))return!1;for(let l in s)if(l[0]==="#"){let g=l.slice(1),y=s[`#${g}`];if(y&&!c.tags.find(([E,L])=>E===l.slice(1)&&y.indexOf(L)!==-1))return!1}return!(s.since&&c.created_at<s.since||s.until&&c.created_at>s.until)}function g1(s,c){for(let l=0;l<s.length;l++)if(p1(s[l],c))return!0;return!1}function m1(s,c){let l=c.length+3,g=s.indexOf(`"${c}":`)+l,y=s.slice(g).indexOf('"')+g+1;return s.slice(y,y+64)}function b1(s){let c=s.slice(0,22).indexOf('"EVENT"');if(c===-1)return null;let l=s.slice(c+7+1).indexOf('"');if(l===-1)return null;let g=c+7+1+l,y=s.slice(g+1,80).indexOf('"');if(y===-1)return null;let E=g+1+y;return s.slice(g+1,E)}function w1(s,c){return{kind:h1,created_at:Math.floor(Date.now()/1e3),tags:[["relay",s],["challenge",c]],content:""}}async function y1(){return new Promise(s=>{let c=new MessageChannel,l=()=>{c.port1.removeEventListener("message",l),s()};c.port1.addEventListener("message",l),c.port2.postMessage(0),c.port1.start()})}var v1=s=>(s[yo]=!0,!0),Qh;try{Qh=WebSocket}catch{}var Kh=class{constructor(s,c){ce(this,"url"),ce(this,"_connected",!1),ce(this,"onclose",null),ce(this,"onnotice",l=>console.debug(`NOTICE from ${this.url}: ${l}`)),ce(this,"_onauth",null),ce(this,"baseEoseTimeout",4400),ce(this,"connectionTimeout",4400),ce(this,"openSubs",new Map),ce(this,"connectionTimeoutHandle"),ce(this,"connectionPromise"),ce(this,"openCountRequests",new Map),ce(this,"openEventPublishes",new Map),ce(this,"ws"),ce(this,"incomingMessageQueue",new u1),ce(this,"queueRunning",!1),ce(this,"challenge"),ce(this,"serial",0),ce(this,"verifyEvent"),this.url=qi(s),this.verifyEvent=c.verifyEvent}static async connect(s,c){let l=new Kh(s,c);return await l.connect(),l}closeAllSubscriptions(s){for(let[c,l]of this.openSubs)l.close(s);this.openSubs.clear();for(let[c,l]of this.openEventPublishes)l.reject(new Error(s));this.openEventPublishes.clear();for(let[c,l]of this.openCountRequests)l.reject(new Error(s));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((s,c)=>{this.connectionTimeoutHandle=setTimeout(()=>{var l;c("connection timed out"),this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Qh(this.url)}catch(l){c(l);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,s()},this.ws.onerror=l=>{var g;c(l.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var l;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await y1();this.queueRunning=!1}handleNext(){var s,c,l;let g=this.incomingMessageQueue.dequeue();if(!g)return!1;let y=b1(g);if(y){let E=this.openSubs.get(y);if(!E)return;let L=m1(g,"id"),U=(s=E.alreadyHaveEvent)==null?void 0:s.call(E,L);if((c=E.receivedEvent)==null||c.call(E,this,L),U)return}try{let E=JSON.parse(g);switch(E[0]){case"EVENT":{let L=this.openSubs.get(E[1]),U=E[2];this.verifyEvent(U)&&g1(L.filters,U)&&L.onevent(U);return}case"COUNT":{let L=E[1],U=E[2],O=this.openCountRequests.get(L);O&&(O.resolve(U.count),this.openCountRequests.delete(L));return}case"EOSE":{let L=this.openSubs.get(E[1]);if(!L)return;L.receivedEose();return}case"OK":{let L=E[1],U=E[2],O=E[3],D=this.openEventPublishes.get(L);U?D.resolve(O):D.reject(new Error(O)),this.openEventPublishes.delete(L);return}case"CLOSED":{let L=E[1],U=this.openSubs.get(L);if(!U)return;U.closed=!0,U.close(E[2]);return}case"NOTICE":this.onnotice(E[1]);return;case"AUTH":{this.challenge=E[1],(l=this._onauth)==null||l.call(this,E[1]);return}}}catch{return}}async send(s){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var c;(c=this.ws)==null||c.send(s)})}async auth(s){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let c=await s(w1(this.url,this.challenge)),l=new Promise((g,y)=>{this.openEventPublishes.set(c.id,{resolve:g,reject:y})});return this.send('["AUTH",'+JSON.stringify(c)+"]"),l}async publish(s){let c=new Promise((l,g)=>{this.openEventPublishes.set(s.id,{resolve:l,reject:g})});return this.send('["EVENT",'+JSON.stringify(s)+"]"),c}async count(s,c){this.serial++;let l=c?.id||"count:"+this.serial,g=new Promise((y,E)=>{this.openCountRequests.set(l,{resolve:y,reject:E})});return this.send('["COUNT","'+l+'",'+JSON.stringify(s)+"]"),g}subscribe(s,c){let l=this.prepareSubscription(s,c);return l.fire(),l}prepareSubscription(s,c){this.serial++;let l=c.id||"sub:"+this.serial,g=new _1(this,l,s,c);return this.openSubs.set(l,g),g}close(){var s;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(s=this.ws)==null||s.close()}_onmessage(s){this.incomingMessageQueue.enqueue(s.data),this.queueRunning||this.runQueue()}},_1=class{constructor(s,c,l,g){ce(this,"relay"),ce(this,"id"),ce(this,"closed",!1),ce(this,"eosed",!1),ce(this,"filters"),ce(this,"alreadyHaveEvent"),ce(this,"receivedEvent"),ce(this,"onevent"),ce(this,"oneose"),ce(this,"onclose"),ce(this,"eoseTimeout"),ce(this,"eoseTimeoutHandle"),this.relay=s,this.filters=l,this.id=c,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||s.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(y=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,y)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var s;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(s=this.oneose)==null||s.call(this))}close(s="closed by caller"){var c;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(c=this.onclose)==null||c.call(this,s)}},E1=class{constructor(s){ce(this,"relays",new Map),ce(this,"seenOn",new Map),ce(this,"trackRelays",!1),ce(this,"verifyEvent"),ce(this,"trustedRelayURLs",new Set),this.verifyEvent=s.verifyEvent}async ensureRelay(s,c){s=qi(s);let l=this.relays.get(s);return l||(l=new Kh(s,{verifyEvent:this.trustedRelayURLs.has(s)?v1:this.verifyEvent}),c!=null&&c.connectionTimeout&&(l.connectionTimeout=c.connectionTimeout),this.relays.set(s,l)),await l.connect(),l}close(s){s.map(qi).forEach(c=>{var l;(l=this.relays.get(c))==null||l.close()})}subscribeMany(s,c,l){return this.subscribeManyMap(Object.fromEntries(s.map(g=>[g,c])),l)}subscribeManyMap(s,c){this.trackRelays&&(c.receivedEvent=(j,Y)=>{let G=this.seenOn.get(Y);G||(G=new Set,this.seenOn.set(Y,G)),G.add(j)});let l=new Set,g=[],y=Object.keys(s).length,E=[],L=j=>{var Y;E[j]=!0,E.filter(G=>G).length===y&&((Y=c.oneose)==null||Y.call(c),L=()=>{})},U=[],O=(j,Y)=>{var G;L(j),U[j]=Y,U.filter(ee=>ee).length===y&&((G=c.onclose)==null||G.call(c,U),O=()=>{})},D=j=>{var Y;if((Y=c.alreadyHaveEvent)!=null&&Y.call(c,j))return!0;let G=l.has(j);return l.add(j),G},H=Promise.all(Object.entries(s).map(async(j,Y,G)=>{if(G.indexOf(j)!==Y){O(Y,"duplicate url");return}let[ee,Q]=j;ee=qi(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:c.maxWait?Math.max(c.maxWait*.8,c.maxWait-1e3):void 0})}catch(X){O(Y,X?.message||String(X));return}let ne=te.subscribe(Q,{...c,oneose:()=>L(Y),onclose:X=>O(Y,X),alreadyHaveEvent:D,eoseTimeout:c.maxWait});g.push(ne)}));return{async close(){await H,g.forEach(j=>{j.close()})}}}subscribeManyEose(s,c,l){let g=this.subscribeMany(s,c,{...l,oneose(){g.close()}});return g}async querySync(s,c,l){return new Promise(async g=>{let y=[];this.subscribeManyEose(s,[c],{...l,onevent(E){y.push(E)},onclose(E){g(y)}})})}async get(s,c,l){c.limit=1;let g=await this.querySync(s,c,l);return g.sort((y,E)=>E.created_at-y.created_at),g[0]||null}publish(s,c){return s.map(qi).map(async(l,g,y)=>y.indexOf(l)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(l)).publish(c))}},x1=class extends E1{constructor(){super({verifyEvent:f1})}};function Gh(s){return s instanceof Uint8Array||s!=null&&typeof s=="object"&&s.constructor.name==="Uint8Array"}function vo(s,...c){if(!Gh(s))throw new Error("Uint8Array expected");if(c.length>0&&!c.includes(s.length))throw new Error(`Uint8Array expected of length ${c}, not of length=${s.length}`)}function sa(s,c=!0){if(s.destroyed)throw new Error("Hash instance has been destroyed");if(c&&s.finished)throw new Error("Hash#digest() has already been called")}function Zh(s,c){vo(s);let l=c.outputLen;if(s.length<l)throw new Error(`digestInto() expects output buffer of length at least ${l}`)}let or=s=>new Uint32Array(s.buffer,s.byteOffset,Math.floor(s.byteLength/4)),k1=s=>new DataView(s.buffer,s.byteOffset,s.byteLength);if(new Uint8Array(new Uint32Array([287454020]).buffer)[0]!==68)throw new Error("Non little-endian hardware is not supported");function S1(s){if(typeof s!="string")throw new Error(`string expected, got ${typeof s}`);return new Uint8Array(new TextEncoder().encode(s))}function Wi(s){if(typeof s=="string")s=S1(s);else if(Gh(s))s=s.slice();else throw new Error(`Uint8Array expected, got ${typeof s}`);return s}let A1=(s,c)=>(Object.assign(c,s),c),en=16,qu=new Uint8Array(16),Mr=or(qu),T1=225,$1=(s,c,l,g)=>{let y=g&1;return{s3:l<<31|g>>>1,s2:c<<31|l>>>1,s1:s<<31|c>>>1,s0:s>>>1^T1<<24&-(y&1)}},dr=s=>(s>>>0&255)<<24|(s>>>8&255)<<16|(s>>>16&255)<<8|s>>>24&255|0;function B1(s){s.reverse();let c=s[15]&1,l=0;for(let g=0;g<s.length;g++){let y=s[g];s[g]=y>>>1|l,l=(y&1)<<7}return s[0]^=-c&225,s}let L1=s=>s>64*1024?8:s>1024?4:2;class Yh{constructor(c,l){this.blockLen=en,this.outputLen=en,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,c=Wi(c),vo(c,16);let g=k1(c),y=g.getUint32(0,!1),E=g.getUint32(4,!1),L=g.getUint32(8,!1),U=g.getUint32(12,!1),O=[];for(let G=0;G<128;G++)O.push({s0:dr(y),s1:dr(E),s2:dr(L),s3:dr(U)}),{s0:y,s1:E,s2:L,s3:U}=$1(y,E,L,U);let D=L1(l||1024);if(![1,2,4,8].includes(D))throw new Error(`ghash: wrong window size=${D}, should be 2, 4 or 8`);this.W=D;let H=128/D,j=this.windowSize=2**D,Y=[];for(let G=0;G<H;G++)for(let ee=0;ee<j;ee++){let Q=0,te=0,ne=0,X=0;for(let pe=0;pe<D;pe++){if(!(ee>>>D-pe-1&1))continue;let{s0:Ae,s1:$e,s2:ge,s3:de}=O[D*G+pe];Q^=Ae,te^=$e,ne^=ge,X^=de}Y.push({s0:Q,s1:te,s2:ne,s3:X})}this.t=Y}_updateBlock(c,l,g,y){c^=this.s0,l^=this.s1,g^=this.s2,y^=this.s3;let{W:E,t:L,windowSize:U}=this,O=0,D=0,H=0,j=0,Y=(1<<E)-1,G=0;for(let ee of[c,l,g,y])for(let Q=0;Q<4;Q++){let te=ee>>>8*Q&255;for(let ne=8/E-1;ne>=0;ne--){let X=te>>>E*ne&Y,{s0:pe,s1:Ae,s2:$e,s3:ge}=L[G*U+X];O^=pe,D^=Ae,H^=$e,j^=ge,G+=1}}this.s0=O,this.s1=D,this.s2=H,this.s3=j}update(c){c=Wi(c),sa(this);let l=or(c),g=Math.floor(c.length/en),y=c.length%en;for(let E=0;E<g;E++)this._updateBlock(l[E*4+0],l[E*4+1],l[E*4+2],l[E*4+3]);return y&&(qu.set(c.subarray(g*en)),this._updateBlock(Mr[0],Mr[1],Mr[2],Mr[3]),Mr.fill(0)),this}destroy(){let{t:c}=this;for(let l of c)l.s0=0,l.s1=0,l.s2=0,l.s3=0}digestInto(c){sa(this),Zh(c,this),this.finished=!0;let{s0:l,s1:g,s2:y,s3:E}=this,L=or(c);return L[0]=l,L[1]=g,L[2]=y,L[3]=E,c}digest(){let c=new Uint8Array(en);return this.digestInto(c),this.destroy(),c}}class C1 extends Yh{constructor(c,l){c=Wi(c);let g=B1(c.slice());super(g,l),g.fill(0)}update(c){c=Wi(c),sa(this);let l=or(c),g=c.length%en,y=Math.floor(c.length/en);for(let E=0;E<y;E++)this._updateBlock(dr(l[E*4+3]),dr(l[E*4+2]),dr(l[E*4+1]),dr(l[E*4+0]));return g&&(qu.set(c.subarray(y*en)),this._updateBlock(dr(Mr[3]),dr(Mr[2]),dr(Mr[1]),dr(Mr[0])),Mr.fill(0)),this}digestInto(c){sa(this),Zh(c,this),this.finished=!0;let{s0:l,s1:g,s2:y,s3:E}=this,L=or(c);return L[0]=l,L[1]=g,L[2]=y,L[3]=E,c.reverse()}}function Jh(s){let c=(g,y)=>s(y,g.length).update(Wi(g)).digest(),l=s(new Uint8Array(16),0);return c.outputLen=l.outputLen,c.blockLen=l.blockLen,c.create=(g,y)=>s(g,y),c}Jh((s,c)=>new Yh(s,c)),Jh((s,c)=>new C1(s,c));let Rn=16,P1=283;function Wu(s){return s<<1^P1&-(s>>7)}function ei(s,c){let l=0;for(;c>0;c>>=1)l^=s&-(c&1),s=Wu(s);return l}let Qu=(()=>{let s=new Uint8Array(256);for(let l=0,g=1;l<256;l++,g^=Wu(g))s[l]=g;let c=new Uint8Array(256);c[0]=99;for(let l=0;l<255;l++){let g=s[255-l];g|=g<<8,c[s[l]]=(g^g>>4^g>>5^g>>6^g>>7^99)&255}return c})(),I1=Qu.map((s,c)=>Qu.indexOf(c)),N1=s=>s<<24|s>>>8,Ku=s=>s<<8|s>>>24;function Xh(s,c){if(s.length!==256)throw new Error("Wrong sbox length");let l=new Uint32Array(256).map((D,H)=>c(s[H])),g=l.map(Ku),y=g.map(Ku),E=y.map(Ku),L=new Uint32Array(256*256),U=new Uint32Array(256*256),O=new Uint16Array(256*256);for(let D=0;D<256;D++)for(let H=0;H<256;H++){let j=D*256+H;L[j]=l[D]^g[H],U[j]=y[D]^E[H],O[j]=s[D]<<8|s[H]}return{sbox:s,sbox2:O,T0:l,T1:g,T2:y,T3:E,T01:L,T23:U}}let Gu=Xh(Qu,s=>ei(s,3)<<24|s<<16|s<<8|ei(s,2)),ep=Xh(I1,s=>ei(s,11)<<24|ei(s,13)<<16|ei(s,9)<<8|ei(s,14)),O1=(()=>{let s=new Uint8Array(16);for(let c=0,l=1;c<16;c++,l=Wu(l))s[c]=l;return s})();function tp(s){vo(s);let c=s.length;if(![16,24,32].includes(c))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${c}`);let{sbox2:l}=Gu,g=or(s),y=g.length,E=U=>Dr(l,U,U,U,U),L=new Uint32Array(c+28);L.set(g);for(let U=y;U<L.length;U++){let O=L[U-1];U%y===0?O=E(N1(O))^O1[U/y-1]:y>6&&U%y===4&&(O=E(O)),L[U]=L[U-y]^O}return L}function R1(s){let c=tp(s),l=c.slice(),g=c.length,{sbox2:y}=Gu,{T0:E,T1:L,T2:U,T3:O}=ep;for(let D=0;D<g;D+=4)for(let H=0;H<4;H++)l[D+H]=c[g-D-4+H];c.fill(0);for(let D=4;D<g-4;D++){let H=l[D],j=Dr(y,H,H,H,H);l[D]=E[j&255]^L[j>>>8&255]^U[j>>>16&255]^O[j>>>24]}return l}function Un(s,c,l,g,y,E){return s[l<<8&65280|g>>>8&255]^c[y>>>8&65280|E>>>24&255]}function Dr(s,c,l,g,y){return s[c&255|l&65280]|s[g>>>16&255|y>>>16&65280]<<16}function rp(s,c,l,g,y){let{sbox2:E,T01:L,T23:U}=Gu,O=0;c^=s[O++],l^=s[O++],g^=s[O++],y^=s[O++];let D=s.length/4-2;for(let ee=0;ee<D;ee++){let Q=s[O++]^Un(L,U,c,l,g,y),te=s[O++]^Un(L,U,l,g,y,c),ne=s[O++]^Un(L,U,g,y,c,l),X=s[O++]^Un(L,U,y,c,l,g);c=Q,l=te,g=ne,y=X}let H=s[O++]^Dr(E,c,l,g,y),j=s[O++]^Dr(E,l,g,y,c),Y=s[O++]^Dr(E,g,y,c,l),G=s[O++]^Dr(E,y,c,l,g);return{s0:H,s1:j,s2:Y,s3:G}}function U1(s,c,l,g,y){let{sbox2:E,T01:L,T23:U}=ep,O=0;c^=s[O++],l^=s[O++],g^=s[O++],y^=s[O++];let D=s.length/4-2;for(let ee=0;ee<D;ee++){let Q=s[O++]^Un(L,U,c,y,g,l),te=s[O++]^Un(L,U,l,c,y,g),ne=s[O++]^Un(L,U,g,l,c,y),X=s[O++]^Un(L,U,y,g,l,c);c=Q,l=te,g=ne,y=X}let H=s[O++]^Dr(E,c,y,g,l),j=s[O++]^Dr(E,l,c,y,g),Y=s[O++]^Dr(E,g,l,c,y),G=s[O++]^Dr(E,y,g,l,c);return{s0:H,s1:j,s2:Y,s3:G}}function np(s,c){if(!c)return new Uint8Array(s);if(vo(c),c.length<s)throw new Error(`aes: wrong destination length, expected at least ${s}, got: ${c.length}`);return c}function z1(s){if(vo(s),s.length%Rn!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Rn}`)}function M1(s,c,l){let g=s.length,y=g%Rn;if(!c&&y!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");let E=or(s);if(c){let O=Rn-y;O||(O=Rn),g=g+O}let L=np(g,l),U=or(L);return{b:E,o:U,out:L}}function D1(s,c){if(!c)return s;let l=s.length;if(!l)throw new Error("aes/pcks5: empty ciphertext not allowed");let g=s[l-1];if(g<=0||g>16)throw new Error(`aes/pcks5: wrong padding byte: ${g}`);let y=s.subarray(0,-g);for(let E=0;E<g;E++)if(s[l-E-1]!==g)throw new Error("aes/pcks5: wrong padding");return y}function F1(s){let c=new Uint8Array(16),l=or(c);c.set(s);let g=Rn-s.length;for(let y=Rn-g;y<Rn;y++)c[y]=g;return l}let op=A1({blockSize:16,nonceLength:16},function(s,c,l={}){vo(s),vo(c,16);let g=!l.disablePadding;return{encrypt:(y,E)=>{let L=tp(s),{b:U,o:O,out:D}=M1(y,g,E),H=or(c),j=H[0],Y=H[1],G=H[2],ee=H[3],Q=0;for(;Q+4<=U.length;)j^=U[Q+0],Y^=U[Q+1],G^=U[Q+2],ee^=U[Q+3],{s0:j,s1:Y,s2:G,s3:ee}=rp(L,j,Y,G,ee),O[Q++]=j,O[Q++]=Y,O[Q++]=G,O[Q++]=ee;if(g){let te=F1(y.subarray(Q*4));j^=te[0],Y^=te[1],G^=te[2],ee^=te[3],{s0:j,s1:Y,s2:G,s3:ee}=rp(L,j,Y,G,ee),O[Q++]=j,O[Q++]=Y,O[Q++]=G,O[Q++]=ee}return L.fill(0),D},decrypt:(y,E)=>{z1(y);let L=R1(s),U=or(c),O=np(y.length,E),D=or(y),H=or(O),j=U[0],Y=U[1],G=U[2],ee=U[3];for(let Q=0;Q+4<=D.length;){let te=j,ne=Y,X=G,pe=ee;j=D[Q+0],Y=D[Q+1],G=D[Q+2],ee=D[Q+3];let{s0:Ae,s1:$e,s2:ge,s3:de}=U1(L,j,Y,G,ee);H[Q++]=Ae^te,H[Q++]=$e^ne,H[Q++]=ge^X,H[Q++]=de^pe}return L.fill(0),D1(O,g)}}});function ti(s){if(!Number.isSafeInteger(s))throw new Error(`Wrong integer: ${s}`)}function tn(...s){let c=(y,E)=>L=>y(E(L)),l=Array.from(s).reverse().reduce((y,E)=>y?c(y,E.encode):E.encode,void 0),g=s.reduce((y,E)=>y?c(y,E.decode):E.decode,void 0);return{encode:l,decode:g}}function rn(s){return{encode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return c.map(l=>{if(ti(l),l<0||l>=s.length)throw new Error(`Digit index outside alphabet: ${l} (alphabet: ${s.length})`);return s[l]})},decode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="string")throw new Error("alphabet.decode input should be array of strings");return c.map(l=>{if(typeof l!="string")throw new Error(`alphabet.decode: not string element=${l}`);let g=s.indexOf(l);if(g===-1)throw new Error(`Unknown letter: "${l}". Allowed: ${s}`);return g})}}}function nn(s=""){if(typeof s!="string")throw new Error("join separator should be string");return{encode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="string")throw new Error("join.encode input should be array of strings");for(let l of c)if(typeof l!="string")throw new Error(`join.encode: non-string input=${l}`);return c.join(s)},decode:c=>{if(typeof c!="string")throw new Error("join.decode input should be string");return c.split(s)}}}function aa(s,c="="){if(ti(s),typeof c!="string")throw new Error("padding chr should be string");return{encode(l){if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("padding.encode input should be array of strings");for(let g of l)if(typeof g!="string")throw new Error(`padding.encode: non-string input=${g}`);for(;l.length*s%8;)l.push(c);return l},decode(l){if(!Array.isArray(l)||l.length&&typeof l[0]!="string")throw new Error("padding.encode input should be array of strings");for(let y of l)if(typeof y!="string")throw new Error(`padding.decode: non-string input=${y}`);let g=l.length;if(g*s%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;g>0&&l[g-1]===c;g--)if(!((g-1)*s%8))throw new Error("Invalid padding: string has too much padding");return l.slice(0,g)}}}function ip(s){if(typeof s!="function")throw new Error("normalize fn should be function");return{encode:c=>c,decode:c=>s(c)}}function sp(s,c,l){if(c<2)throw new Error(`convertRadix: wrong from=${c}, base cannot be less than 2`);if(l<2)throw new Error(`convertRadix: wrong to=${l}, base cannot be less than 2`);if(!Array.isArray(s))throw new Error("convertRadix: data should be array");if(!s.length)return[];let g=0,y=[],E=Array.from(s);for(E.forEach(L=>{if(ti(L),L<0||L>=c)throw new Error(`Wrong integer: ${L}`)});;){let L=0,U=!0;for(let O=g;O<E.length;O++){let D=E[O],H=c*L+D;if(!Number.isSafeInteger(H)||c*L/c!==L||H-D!==c*L)throw new Error("convertRadix: carry overflow");if(L=H%l,E[O]=Math.floor(H/l),!Number.isSafeInteger(E[O])||E[O]*l+L!==H)throw new Error("convertRadix: carry overflow");if(U)E[O]?U=!1:g=O;else continue}if(y.push(L),U)break}for(let L=0;L<s.length-1&&s[L]===0;L++)y.push(0);return y.reverse()}let ap=(s,c)=>c?ap(c,s%c):s,ca=(s,c)=>s+(c-ap(s,c));function Zu(s,c,l,g){if(!Array.isArray(s))throw new Error("convertRadix2: data should be array");if(c<=0||c>32)throw new Error(`convertRadix2: wrong from=${c}`);if(l<=0||l>32)throw new Error(`convertRadix2: wrong to=${l}`);if(ca(c,l)>32)throw new Error(`convertRadix2: carry overflow from=${c} to=${l} carryBits=${ca(c,l)}`);let y=0,E=0,L=2**l-1,U=[];for(let O of s){if(ti(O),O>=2**c)throw new Error(`convertRadix2: invalid data word=${O} from=${c}`);if(y=y<<c|O,E+c>32)throw new Error(`convertRadix2: carry overflow pos=${E} from=${c}`);for(E+=c;E>=l;E-=l)U.push((y>>E-l&L)>>>0);y&=2**E-1}if(y=y<<l-E&L,!g&&E>=c)throw new Error("Excess padding");if(!g&&y)throw new Error(`Non-zero padding: ${y}`);return g&&E>0&&U.push(y>>>0),U}function j1(s){return ti(s),{encode:c=>{if(!(c instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return sp(Array.from(c),2**8,s)},decode:c=>{if(!Array.isArray(c)||c.length&&typeof c[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(sp(c,s,2**8))}}}function zn(s,c=!1){if(ti(s),s<=0||s>32)throw new Error("radix2: bits should be in (0..32]");if(ca(8,s)>32||ca(s,8)>32)throw new Error("radix2: carry overflow");return{encode:l=>{if(!(l instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Zu(Array.from(l),8,s,!c)},decode:l=>{if(!Array.isArray(l)||l.length&&typeof l[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Zu(l,s,8,c))}}}function cp(s){if(typeof s!="function")throw new Error("unsafeWrapper fn should be function");return function(...c){try{return s.apply(null,c)}catch{}}}let H1=tn(zn(4),rn("0123456789ABCDEF"),nn("")),V1=tn(zn(5),rn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),aa(5),nn(""));tn(zn(5),rn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),aa(5),nn("")),tn(zn(5),rn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),nn(""),ip(s=>s.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let Qi=tn(zn(6),rn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),aa(6),nn("")),q1=tn(zn(6),rn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),aa(6),nn("")),Yu=s=>tn(j1(58),rn(s),nn("")),Ju=Yu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");Yu("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),Yu("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let up=[0,2,3,5,6,7,9,10,11],W1={encode(s){let c="";for(let l=0;l<s.length;l+=8){let g=s.subarray(l,l+8);c+=Ju.encode(g).padStart(up[g.length],"1")}return c},decode(s){let c=[];for(let l=0;l<s.length;l+=11){let g=s.slice(l,l+11),y=up.indexOf(g.length),E=Ju.decode(g);for(let L=0;L<E.length-y;L++)if(E[L]!==0)throw new Error("base58xmr: wrong padding");c=c.concat(Array.from(E.slice(E.length-y)))}return Uint8Array.from(c)}},Xu=tn(rn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),nn("")),lp=[996825010,642813549,513874426,1027748829,705979059];function Ki(s){let c=s>>25,l=(s&33554431)<<5;for(let g=0;g<lp.length;g++)(c>>g&1)===1&&(l^=lp[g]);return l}function dp(s,c,l=1){let g=s.length,y=1;for(let E=0;E<g;E++){let L=s.charCodeAt(E);if(L<33||L>126)throw new Error(`Invalid prefix (${s})`);y=Ki(y)^L>>5}y=Ki(y);for(let E=0;E<g;E++)y=Ki(y)^s.charCodeAt(E)&31;for(let E of c)y=Ki(y)^E;for(let E=0;E<6;E++)y=Ki(y);return y^=l,Xu.encode(Zu([y%2**30],30,5,!1))}function fp(s){let c=s==="bech32"?1:734539939,l=zn(5),g=l.decode,y=l.encode,E=cp(g);function L(H,j,Y=90){if(typeof H!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof H}`);if(!Array.isArray(j)||j.length&&typeof j[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof j}`);let G=H.length+7+j.length;if(Y!==!1&&G>Y)throw new TypeError(`Length ${G} exceeds limit ${Y}`);return H=H.toLowerCase(),`${H}1${Xu.encode(j)}${dp(H,j,c)}`}function U(H,j=90){if(typeof H!="string")throw new Error(`bech32.decode input should be string, not ${typeof H}`);if(H.length<8||j!==!1&&H.length>j)throw new TypeError(`Wrong string length: ${H.length} (${H}). Expected (8..${j})`);let Y=H.toLowerCase();if(H!==Y&&H!==H.toUpperCase())throw new Error("String must be lowercase or uppercase");H=Y;let G=H.lastIndexOf("1");if(G===0||G===-1)throw new Error('Letter "1" must be present between prefix and data only');let ee=H.slice(0,G),Q=H.slice(G+1);if(Q.length<6)throw new Error("Data must be at least 6 characters long");let te=Xu.decode(Q).slice(0,-6),ne=dp(ee,te,c);if(!Q.endsWith(ne))throw new Error(`Invalid checksum in ${H}: expected "${ne}"`);return{prefix:ee,words:te}}let O=cp(U);function D(H){let{prefix:j,words:Y}=U(H,!1);return{prefix:j,words:Y,bytes:g(Y)}}return{encode:L,decode:U,decodeToBytes:D,decodeUnsafe:O,fromWords:g,fromWordsUnsafe:E,toWords:y}}let hp=fp("bech32");fp("bech32m");let Q1={encode:s=>new TextDecoder().decode(s),decode:s=>new TextEncoder().encode(s)},K1=tn(zn(4),rn("0123456789abcdef"),nn(""),ip(s=>{if(typeof s!="string"||s.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof s} with length ${s.length}`);return s.toLowerCase()}));`${Object.keys({utf8:Q1,hex:K1,base16:H1,base32:V1,base64:Qi,base64url:q1,base58:Ju,base58xmr:W1}).join(", ")}`;var _o=Symbol("verified"),G1=s=>s instanceof Object;function Z1(s){if(!G1(s)||typeof s.kind!="number"||typeof s.content!="string"||typeof s.created_at!="number"||typeof s.pubkey!="string"||!s.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(s.tags))return!1;for(let c=0;c<s.tags.length;c++){let l=s.tags[c];if(!Array.isArray(l))return!1;for(let g=0;g<l.length;g++)if(typeof l[g]=="object")return!1}return!0}var Y1=new TextDecoder("utf-8"),pp=new TextEncoder;function Gi(s){s.indexOf("://")===-1&&(s="wss://"+s);let c=new URL(s);return c.pathname=c.pathname.replace(/\/+/g,"/"),c.pathname.endsWith("/")&&(c.pathname=c.pathname.slice(0,-1)),(c.port==="80"&&c.protocol==="ws:"||c.port==="443"&&c.protocol==="wss:")&&(c.port=""),c.searchParams.sort(),c.hash="",c.toString()}var J1=class{constructor(s){ce(this,"value"),ce(this,"next",null),ce(this,"prev",null),this.value=s}},X1=class{constructor(){ce(this,"first"),ce(this,"last"),this.first=null,this.last=null}enqueue(s){let c=new J1(s);return this.last?this.last===this.first?(this.last=c,this.last.prev=this.first,this.first.next=c):(c.prev=this.last,this.last.next=c,this.last=c):(this.first=c,this.last=c),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let c=this.first;return this.first=null,this.last=null,c.value}let s=this.first;return this.first=s.next,s.value}},ev=class{generateSecretKey(){return Kt.utils.randomPrivateKey()}getPublicKey(s){return Qt(Kt.getPublicKey(s))}finalizeEvent(s,c){let l=s;return l.pubkey=Qt(Kt.getPublicKey(c)),l.id=el(l),l.sig=Qt(Kt.sign(el(l),c)),l[_o]=!0,l}verifyEvent(s){if(typeof s[_o]=="boolean")return s[_o];let c=el(s);if(c!==s.id)return s[_o]=!1,!1;try{let l=Kt.verify(s.sig,c,s.pubkey);return s[_o]=l,l}catch{return s[_o]=!1,!1}}};function tv(s){if(!Z1(s))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,s.pubkey,s.created_at,s.kind,s.tags,s.content])}function el(s){let c=ju(pp.encode(tv(s)));return Qt(c)}var ua=new ev,rv=ua.generateSecretKey,nv=ua.getPublicKey,ov=ua.finalizeEvent,gp=ua.verifyEvent;async function iv(s,c,l){let g=s instanceof Uint8Array?Qt(s):s,y=Hi.getSharedSecret(g,"02"+c),E=mp(y),L=Uint8Array.from(Yw(16)),U=pp.encode(l),O=op(E,L).encrypt(U),D=Qi.encode(new Uint8Array(O)),H=Qi.encode(new Uint8Array(L.buffer));return`${D}?iv=${H}`}async function sv(s,c,l){let g=s instanceof Uint8Array?Qt(s):s,[y,E]=l.split("?iv="),L=Hi.getSharedSecret(g,"02"+c),U=mp(L),O=Qi.decode(E),D=Qi.decode(y),H=op(U,O).decrypt(D);return Y1.decode(H)}function mp(s){return s.slice(1,33)}var av=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,cv;try{cv=fetch}catch{}var uv=22242,tl=24133,lv=31990;function dv(s,c){if(s.ids&&s.ids.indexOf(c.id)===-1&&!s.ids.some(l=>c.id.startsWith(l))||s.kinds&&s.kinds.indexOf(c.kind)===-1||s.authors&&s.authors.indexOf(c.pubkey)===-1&&!s.authors.some(l=>c.pubkey.startsWith(l)))return!1;for(let l in s)if(l[0]==="#"){let g=l.slice(1),y=s[`#${g}`];if(y&&!c.tags.find(([E,L])=>E===l.slice(1)&&y.indexOf(L)!==-1))return!1}return!(s.since&&c.created_at<s.since||s.until&&c.created_at>s.until)}function fv(s,c){for(let l=0;l<s.length;l++)if(dv(s[l],c))return!0;return!1}function hv(s,c){let l=c.length+3,g=s.indexOf(`"${c}":`)+l,y=s.slice(g).indexOf('"')+g+1;return s.slice(y,y+64)}function pv(s){let c=s.slice(0,22).indexOf('"EVENT"');if(c===-1)return null;let l=s.slice(c+7+1).indexOf('"');if(l===-1)return null;let g=c+7+1+l,y=s.slice(g+1,80).indexOf('"');if(y===-1)return null;let E=g+1+y;return s.slice(g+1,E)}function gv(s,c){return{kind:uv,created_at:Math.floor(Date.now()/1e3),tags:[["relay",s],["challenge",c]],content:""}}async function mv(){return new Promise(s=>{let c=new MessageChannel,l=()=>{c.port1.removeEventListener("message",l),s()};c.port1.addEventListener("message",l),c.port2.postMessage(0),c.port1.start()})}var bv=s=>(s[_o]=!0,!0),bp;try{bp=WebSocket}catch{}var wp=class{constructor(s,c){ce(this,"url"),ce(this,"_connected",!1),ce(this,"onclose",null),ce(this,"onnotice",l=>console.debug(`NOTICE from ${this.url}: ${l}`)),ce(this,"_onauth",null),ce(this,"baseEoseTimeout",4400),ce(this,"connectionTimeout",4400),ce(this,"openSubs",new Map),ce(this,"connectionTimeoutHandle"),ce(this,"connectionPromise"),ce(this,"openCountRequests",new Map),ce(this,"openEventPublishes",new Map),ce(this,"ws"),ce(this,"incomingMessageQueue",new X1),ce(this,"queueRunning",!1),ce(this,"challenge"),ce(this,"serial",0),ce(this,"verifyEvent"),this.url=Gi(s),this.verifyEvent=c.verifyEvent}static async connect(s,c){let l=new wp(s,c);return await l.connect(),l}closeAllSubscriptions(s){for(let[c,l]of this.openSubs)l.close(s);this.openSubs.clear();for(let[c,l]of this.openEventPublishes)l.reject(new Error(s));this.openEventPublishes.clear();for(let[c,l]of this.openCountRequests)l.reject(new Error(s));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((s,c)=>{this.connectionTimeoutHandle=setTimeout(()=>{var l;c("connection timed out"),this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new bp(this.url)}catch(l){c(l);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,s()},this.ws.onerror=l=>{var g;c(l.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(g=this.onclose)==null||g.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var l;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(l=this.onclose)==null||l.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await mv();this.queueRunning=!1}handleNext(){var s,c,l;let g=this.incomingMessageQueue.dequeue();if(!g)return!1;let y=pv(g);if(y){let E=this.openSubs.get(y);if(!E)return;let L=hv(g,"id"),U=(s=E.alreadyHaveEvent)==null?void 0:s.call(E,L);if((c=E.receivedEvent)==null||c.call(E,this,L),U)return}try{let E=JSON.parse(g);switch(E[0]){case"EVENT":{let L=this.openSubs.get(E[1]),U=E[2];this.verifyEvent(U)&&fv(L.filters,U)&&L.onevent(U);return}case"COUNT":{let L=E[1],U=E[2],O=this.openCountRequests.get(L);O&&(O.resolve(U.count),this.openCountRequests.delete(L));return}case"EOSE":{let L=this.openSubs.get(E[1]);if(!L)return;L.receivedEose();return}case"OK":{let L=E[1],U=E[2],O=E[3],D=this.openEventPublishes.get(L);U?D.resolve(O):D.reject(new Error(O)),this.openEventPublishes.delete(L);return}case"CLOSED":{let L=E[1],U=this.openSubs.get(L);if(!U)return;U.closed=!0,U.close(E[2]);return}case"NOTICE":this.onnotice(E[1]);return;case"AUTH":{this.challenge=E[1],(l=this._onauth)==null||l.call(this,E[1]);return}}}catch{return}}async send(s){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var c;(c=this.ws)==null||c.send(s)})}async auth(s){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let c=await s(gv(this.url,this.challenge)),l=new Promise((g,y)=>{this.openEventPublishes.set(c.id,{resolve:g,reject:y})});return this.send('["AUTH",'+JSON.stringify(c)+"]"),l}async publish(s){let c=new Promise((l,g)=>{this.openEventPublishes.set(s.id,{resolve:l,reject:g})});return this.send('["EVENT",'+JSON.stringify(s)+"]"),c}async count(s,c){this.serial++;let l=c?.id||"count:"+this.serial,g=new Promise((y,E)=>{this.openCountRequests.set(l,{resolve:y,reject:E})});return this.send('["COUNT","'+l+'",'+JSON.stringify(s)+"]"),g}subscribe(s,c){let l=this.prepareSubscription(s,c);return l.fire(),l}prepareSubscription(s,c){this.serial++;let l=c.id||"sub:"+this.serial,g=new wv(this,l,s,c);return this.openSubs.set(l,g),g}close(){var s;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(s=this.ws)==null||s.close()}_onmessage(s){this.incomingMessageQueue.enqueue(s.data),this.queueRunning||this.runQueue()}},wv=class{constructor(s,c,l,g){ce(this,"relay"),ce(this,"id"),ce(this,"closed",!1),ce(this,"eosed",!1),ce(this,"filters"),ce(this,"alreadyHaveEvent"),ce(this,"receivedEvent"),ce(this,"onevent"),ce(this,"oneose"),ce(this,"onclose"),ce(this,"eoseTimeout"),ce(this,"eoseTimeoutHandle"),this.relay=s,this.filters=l,this.id=c,this.alreadyHaveEvent=g.alreadyHaveEvent,this.receivedEvent=g.receivedEvent,this.eoseTimeout=g.eoseTimeout||s.baseEoseTimeout,this.oneose=g.oneose,this.onclose=g.onclose,this.onevent=g.onevent||(y=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,y)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var s;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(s=this.oneose)==null||s.call(this))}close(s="closed by caller"){var c;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(c=this.onclose)==null||c.call(this,s)}},yv=class{constructor(s){ce(this,"relays",new Map),ce(this,"seenOn",new Map),ce(this,"trackRelays",!1),ce(this,"verifyEvent"),ce(this,"trustedRelayURLs",new Set),this.verifyEvent=s.verifyEvent}async ensureRelay(s,c){s=Gi(s);let l=this.relays.get(s);return l||(l=new wp(s,{verifyEvent:this.trustedRelayURLs.has(s)?bv:this.verifyEvent}),c!=null&&c.connectionTimeout&&(l.connectionTimeout=c.connectionTimeout),this.relays.set(s,l)),await l.connect(),l}close(s){s.map(Gi).forEach(c=>{var l;(l=this.relays.get(c))==null||l.close()})}subscribeMany(s,c,l){return this.subscribeManyMap(Object.fromEntries(s.map(g=>[g,c])),l)}subscribeManyMap(s,c){this.trackRelays&&(c.receivedEvent=(j,Y)=>{let G=this.seenOn.get(Y);G||(G=new Set,this.seenOn.set(Y,G)),G.add(j)});let l=new Set,g=[],y=Object.keys(s).length,E=[],L=j=>{var Y;E[j]=!0,E.filter(G=>G).length===y&&((Y=c.oneose)==null||Y.call(c),L=()=>{})},U=[],O=(j,Y)=>{var G;L(j),U[j]=Y,U.filter(ee=>ee).length===y&&((G=c.onclose)==null||G.call(c,U),O=()=>{})},D=j=>{var Y;if((Y=c.alreadyHaveEvent)!=null&&Y.call(c,j))return!0;let G=l.has(j);return l.add(j),G},H=Promise.all(Object.entries(s).map(async(j,Y,G)=>{if(G.indexOf(j)!==Y){O(Y,"duplicate url");return}let[ee,Q]=j;ee=Gi(ee);let te;try{te=await this.ensureRelay(ee,{connectionTimeout:c.maxWait?Math.max(c.maxWait*.8,c.maxWait-1e3):void 0})}catch(X){O(Y,X?.message||String(X));return}let ne=te.subscribe(Q,{...c,oneose:()=>L(Y),onclose:X=>O(Y,X),alreadyHaveEvent:D,eoseTimeout:c.maxWait});g.push(ne)}));return{async close(){await H,g.forEach(j=>{j.close()})}}}subscribeManyEose(s,c,l){let g=this.subscribeMany(s,c,{...l,oneose(){g.close()}});return g}async querySync(s,c,l){return new Promise(async g=>{let y=[];this.subscribeManyEose(s,[c],{...l,onevent(E){y.push(E)},onclose(E){g(y)}})})}async get(s,c,l){c.limit=1;let g=await this.querySync(s,c,l);return g.sort((y,E)=>E.created_at-y.created_at),g[0]||null}publish(s,c){return s.map(Gi).map(async(l,g,y)=>y.indexOf(l)!==g?Promise.reject("duplicate url"):(await this.ensureRelay(l)).publish(c))}},vv=class extends yv{constructor(){super({verifyEvent:gp})}},yp;try{yp=fetch}catch{}var la=/^bunker:\/\/([0-9a-f]{64})\??([?\/\w:.=&%]*)$/,_v=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;async function Ev(s){let c=s.match(la);if(c)try{let l=c[1],g=new URLSearchParams(c[2]);return{pubkey:l,relays:g.getAll("relay"),secret:g.get("secret")}}catch{}return vp(s)}async function vp(s){let c=s.match(av);if(!c)return null;let[l,g="_",y]=c;try{let E=`https://${y}/.well-known/nostr.json?name=${g}`,L=await(await yp(E,{redirect:"error"})).json(),U=L.names[g],O=L.nip46[U]||[];return{pubkey:U,relays:O,secret:null}}catch{return null}}var _p=class{constructor(s,c,l={}){if(ce(this,"pool"),ce(this,"subCloser"),ce(this,"isOpen"),ce(this,"serial"),ce(this,"idPrefix"),ce(this,"listeners"),ce(this,"waitingForAuth"),ce(this,"secretKey"),ce(this,"bp"),c.relays.length===0)throw new Error("no relays are specified for this bunker");this.pool=l.pool||new vv,this.secretKey=s,this.bp=c,this.isOpen=!1,this.idPrefix=Math.random().toString(36).substring(7),this.serial=0,this.listeners={},this.waitingForAuth={};let g=this.listeners,y=this.waitingForAuth;this.subCloser=this.pool.subscribeMany(this.bp.relays,[{kinds:[tl],"#p":[nv(this.secretKey)]}],{async onevent(E){let{id:L,result:U,error:O}=JSON.parse(await sv(s,E.pubkey,E.content));if(U==="auth_url"&&y[L]){delete y[L],l.onauth?l.onauth(O):console.warn(`nostr-tools/nip46: remote signer ${c.pubkey} tried to send an "auth_url"='${O}' but there was no onauth() callback configured.`);return}let D=g[L];D&&(O?D.reject(O):U&&D.resolve(U),delete g[L])}}),this.isOpen=!0}async close(){this.isOpen=!1,this.subCloser.close()}async sendRequest(s,c){return new Promise(async(l,g)=>{try{if(!this.isOpen)throw new Error("this signer is not open anymore, create a new one");this.serial++;let y=`${this.idPrefix}-${this.serial}`,E=await iv(this.secretKey,this.bp.pubkey,JSON.stringify({id:y,method:s,params:c})),L=ov({kind:tl,tags:[["p",this.bp.pubkey]],content:E,created_at:Math.floor(Date.now()/1e3)},this.secretKey);this.listeners[y]={resolve:l,reject:g},this.waitingForAuth[y]=!0,await Promise.any(this.pool.publish(this.bp.relays,L))}catch(y){g(y)}})}async ping(){let s=await this.sendRequest("ping",[]);if(s!=="pong")throw new Error(`result is not pong: ${s}`)}async connect(){await this.sendRequest("connect",[this.bp.pubkey,this.bp.secret||""])}async getPublicKey(){return this.bp.pubkey}async getRelays(){return JSON.parse(await this.sendRequest("get_relays",[]))}async signEvent(s){let c=await this.sendRequest("sign_event",[JSON.stringify(s)]),l=JSON.parse(c);if(l.pubkey===this.bp.pubkey&&gp(l))return l;throw new Error(`event returned from bunker is improperly signed: ${JSON.stringify(l)}`)}async nip04Encrypt(s,c){return await this.sendRequest("nip04_encrypt",[s,c])}async nip04Decrypt(s,c){return await this.sendRequest("nip04_decrypt",[s,c])}async nip44GetKey(s){let c=await this.sendRequest("nip44_get_key",[s]);return _u(c)}async nip44Encrypt(s,c){return await this.sendRequest("nip44_encrypt",[s,c])}async nip44Decrypt(s,c){return await this.sendRequest("nip44_encrypt",[s,c])}};async function xv(s,c,l,g,y){if(y&&!_v.test(y))throw new Error("Invalid email");let E=rv(),L=new _p(E,s.bunkerPointer,c),U=await L.sendRequest("create_account",[l,g,y||""]);return L.bp.pubkey=U,await L.connect(),L}async function kv(s,c){let l=await s.querySync(c,{kinds:[lv],"#k":[tl.toString()]});return l.sort((g,y)=>y.created_at-g.created_at),(await Promise.all(l.map(async(g,y)=>{try{let E=JSON.parse(g.content);try{if(l.findIndex(U=>JSON.parse(U.content).nip05===E.nip05)!==y)return}catch{}let L=await vp(E.nip05);if(L&&L.pubkey===g.pubkey&&L.relays.length)return{bunkerPointer:L,nip05:E.nip05,domain:E.nip05.split("@")[1],name:E.name||E.display_name,picture:E.picture,about:E.about,website:E.website,local:!1}}catch{return}}))).filter(g=>g!==void 0)}var Ep=/^(?:([\w.+-]+)@)?([\w_-]+(\.[\w_-]+)+)$/,xp;try{xp=fetch}catch{}async function Sv(s){var c;let l=s.match(Ep);if(!l)return null;let[g,y="_",E]=l;try{let L=`https://${E}/.well-known/nostr.json?name=${y}`,U=await(await xp(L,{redirect:"error"})).json(),O=U.names[y];return O?{pubkey:O,relays:(c=U.relays)==null?void 0:c[O]}:null}catch{return null}}new TextDecoder("utf-8"),new TextEncoder;var Av=5e3;function Tv(s){return Bv("npub",_u(s))}function $v(s,c){let l=hp.toWords(c);return hp.encode(s,l,Av)}function Bv(s,c){return $v(s,c)}let ri=[];function Lv(s,c=a){let l,g=new Set;function y(U){if(m(s,U)&&(s=U,l)){let O=!ri.length;for(let D of g)D[1](),ri.push(D,s);if(O){for(let D=0;D<ri.length;D+=2)ri[D][0](ri[D+1]);ri.length=0}}}function E(U){y(U(s))}function L(U,O=a){let D=[U,O];return g.add(D),g.size===1&&(l=c(y,E)||a),U(s),()=>{g.delete(D),g.size===0&&l&&(l(),l=null)}}return{set:y,update:E,subscribe:L}}let Cv=s=>{let{subscribe:c,set:l}=Lv(void 0,()=>{let g=window.matchMedia(s);l(g.matches);let y=()=>l(g.matches);return"addEventListener"in g?g.addEventListener("change",y):g.addListener(y),()=>{"removeEventListener"in g?g.removeEventListener("change",y):g.removeListener(y)}});return{subscribe:c}};function Pv(s){let c,l,g;return{c(){c=S("svg"),l=S("circle"),g=S("path"),$(l,"class","opacity-25"),$(l,"cx","12"),$(l,"cy","12"),$(l,"r","10"),$(l,"stroke","currentColor"),$(l,"stroke-width","4"),$(g,"class","opacity-75"),$(g,"fill","currentColor"),$(g,"d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"),$(c,"class","ml-2 h-5 w-5 animate-spin text-white"),$(c,"xmlns","http://www.w3.org/2000/svg"),$(c,"fill","none"),$(c,"viewBox","0 0 24 24")},m(y,E){f(y,c,E),B(c,l),B(c,g)},p:a,i:a,o:a,d(y){y&&p(c)}}}class kp extends fh{constructor(c){super(),dh(this,c,null,Pv,m,{})}}let{window:rl}=R;function Sp(s,c,l){let g=s.slice();return g[78]=c[l],g}function Iv(s){let c,l,g,y,E,L,U,O,D,H,j,Y,G=!s[20]&&!s[13]&&!s[14]&&!s[15]&&Ap(s),ee=[jv,Fv,Dv,Mv,zv,Uv,Rv],Q=[];function te(ne,X){return ne[13]?0:ne[14]?1:ne[15]?2:ne[20]?3:ne[17]?4:ne[21]?6:5}return U=te(s),O=Q[U]=ee[U](s),{c(){c=v("div"),l=v("button"),g=T("\u292B"),E=I(),G&&G.c(),L=I(),O.c(),$(l,"class",y="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+s[0]+"-600"),$(c,"class",D="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+s[0]+"-900 to-"+s[0]+"-700 "+s[27])},m(ne,X){f(ne,c,X),B(c,l),B(l,g),B(c,E),G&&G.m(c,null),B(c,L),Q[U].m(c,null),H=!0,j||(Y=P(l,"click",function(){b(s[20]?s[32]:s[30])&&(s[20]?s[32]:s[30]).apply(this,arguments)}),j=!0)},p(ne,X){s=ne,(!H||X[0]&1&&y!==(y="absolute right-2 top-0 cursor-pointer bg-transparent text-3xl text-"+s[0]+"-600"))&&$(l,"class",y),!s[20]&&!s[13]&&!s[14]&&!s[15]?G?G.p(s,X):(G=Ap(s),G.c(),G.m(c,L)):G&&(G.d(1),G=null);let pe=U;U=te(s),U===pe?Q[U].p(s,X):(Bt(),cr(Q[pe],1,1,()=>{Q[pe]=null}),Wt(),O=Q[U],O?O.p(s,X):(O=Q[U]=ee[U](s),O.c()),Mt(O,1),O.m(c,null)),(!H||X[0]&134217729&&D!==(D="animate-show rounded-md bg-gradient-to-b px-8 py-8 shadow-[0_0px_30px_0px_rgba(0,0,0,0.6)] transition-all sm:w-96 from-"+s[0]+"-900 to-"+s[0]+"-700 "+s[27]))&&$(c,"class",D)},i(ne){H||(Mt(O),H=!0)},o(ne){cr(O),H=!1},d(ne){ne&&p(c),G&&G.d(),Q[U].d(),j=!1,Y()}}}function Nv(s){let c,l,g,y,E,L=[Gv,Kv,Qv,Wv,qv],U=[];function O(D,H){return D[12]?0:!D[21]&&!D[2]?1:!D[21]&&D[2]?2:D[2]?4:3}return l=O(s),g=U[l]=L[l](s),{c(){c=v("div"),g.c(),$(c,"class",y="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+s[0]+"-700 hover:bg-"+s[0]+"-800 "+s[27])},m(D,H){f(D,c,H),U[l].m(c,null),E=!0},p(D,H){let j=l;l=O(D),l===j?U[l].p(D,H):(Bt(),cr(U[j],1,1,()=>{U[j]=null}),Wt(),g=U[l],g?g.p(D,H):(g=U[l]=L[l](D),g.c()),Mt(g,1),g.m(c,null)),(!E||H[0]&134217729&&y!==(y="rounded px-2 py-2 shadow-[0_0px_10px_0px_rgba(0,0,0,0.3)] transition-all duration-200 bg-"+D[0]+"-700 hover:bg-"+D[0]+"-800 "+D[27]))&&$(c,"class",y)},i(D){E||(Mt(g),E=!0)},o(D){cr(g),E=!1},d(D){D&&p(c),U[l].d()}}}function Ov(s){return{c:a,m:a,p:a,i:a,o:a,d:a}}function Ap(s){let c,l,g,y,E;return{c(){c=v("button"),l=T("?"),$(c,"class",g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+s[0]+"-600")},m(L,U){f(L,c,U),B(c,l),y||(E=P(c,"click",s[31]),y=!0)},p(L,U){U[0]&1&&g!==(g="absolute bottom-1 right-3 cursor-pointer bg-transparent text-xl text-"+L[0]+"-600")&&$(c,"class",g)},d(L){L&&p(c),y=!1,E()}}}function Rv(s){let c,l,g,y,E,L,U=s[21].npub+"",O,D,H,j,Y,G,ee,Q,te,ne,X,pe=Wh(s[11])+"",Ae,$e,ge,de=(s[21].picture||s[21].name)&&Tp(s);return{c(){c=v("div"),l=v("div"),l.textContent="You are connected to Nostr as",g=I(),y=v("a"),de&&de.c(),E=I(),L=v("div"),O=T(U),H=I(),j=v("button"),Y=T("Disconnect"),ee=I(),Q=v("div"),te=T("This webpage is using the public key:"),ne=v("br"),X=I(),Ae=T(pe),$(l,"class","mb-4 text-sm"),$(L,"class","block break-all"),$(y,"target","_blank"),$(y,"href",D="https://nosta.me/"+s[21].npub),$(y,"class","group text-white no-underline"),$(c,"class","text-center"),$(j,"class",G="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(Q,"class","mt-6 block break-all text-center text-sm")},m(se,be){f(se,c,be),B(c,l),B(c,g),B(c,y),de&&de.m(y,null),B(y,E),B(y,L),B(L,O),f(se,H,be),f(se,j,be),B(j,Y),f(se,ee,be),f(se,Q,be),B(Q,te),B(Q,ne),B(Q,X),B(Q,Ae),$e||(ge=P(j,"click",s[34]),$e=!0)},p(se,be){se[21].picture||se[21].name?de?de.p(se,be):(de=Tp(se),de.c(),de.m(y,E)):de&&(de.d(1),de=null),be[0]&2097152&&U!==(U=se[21].npub+"")&&q(O,U),be[0]&2097152&&D!==(D="https://nosta.me/"+se[21].npub)&&$(y,"href",D),be[0]&1&&G!==(G="my-2 mt-6 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white bg-"+se[0]+"-900 hover:bg-"+se[0]+"-950")&&$(j,"class",G),be[0]&2048&&pe!==(pe=Wh(se[11])+"")&&q(Ae,pe)},i:a,o:a,d(se){se&&(p(c),p(H),p(j),p(ee),p(Q)),de&&de.d(),$e=!1,ge()}}}function Uv(s){let c,l,g,y,E,L,U,O,D,H,j,Y,G,ee,Q,te,ne,X=s[19]&&Lp(s),pe=[Vv,Hv],Ae=[];function $e(se,be){return se[12]?0:1}O=$e(s),D=Ae[O]=pe[O](s);let ge=s[12]&&s[16]&&Cp(s),de=!s[12]&&Pp(s);return{c(){c=v("div"),c.textContent="How do you want to connect to Nostr?",l=I(),g=v("form"),y=v("input"),E=I(),X&&X.c(),L=I(),U=v("button"),D.c(),Y=I(),ge&&ge.c(),G=I(),de&&de.c(),ee=M(),$(c,"class","text-center text-lg"),$(y,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),$(y,"placeholder","user@provider or bunker://..."),y.autofocus=!0,y.disabled=s[12],$(y,"autocapitalize","none"),$(U,"class",H="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),U.disabled=j=!s[26]||s[12],$(g,"class","mb-1 mt-4 flex flex-col")},m(se,be){f(se,c,be),f(se,l,be),f(se,g,be),B(g,y),s[52](y),x(y,s[4]),B(g,E),X&&X.m(g,null),B(g,L),B(g,U),Ae[O].m(U,null),B(g,Y),ge&&ge.m(g,null),f(se,G,be),de&&de.m(se,be),f(se,ee,be),Q=!0,y.focus(),te||(ne=[P(y,"input",s[53]),P(g,"submit",s[33])],te=!0)},p(se,be){(!Q||be[0]&4096)&&(y.disabled=se[12]),be[0]&16&&y.value!==se[4]&&x(y,se[4]),se[19]?X?X.p(se,be):(X=Lp(se),X.c(),X.m(g,L)):X&&(X.d(1),X=null);let Be=O;O=$e(se),O!==Be&&(Bt(),cr(Ae[Be],1,1,()=>{Ae[Be]=null}),Wt(),D=Ae[O],D||(D=Ae[O]=pe[O](se),D.c()),Mt(D,1),D.m(U,null)),(!Q||be[0]&1&&H!==(H="mt-4 flex w-full cursor-pointer items-center justify-center rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+se[0]+"-900 hover:bg-"+se[0]+"-950"))&&$(U,"class",H),(!Q||be[0]&67112960&&j!==(j=!se[26]||se[12]))&&(U.disabled=j),se[12]&&se[16]?ge?ge.p(se,be):(ge=Cp(se),ge.c(),ge.m(g,null)):ge&&(ge.d(1),ge=null),se[12]?de&&(de.d(1),de=null):de?de.p(se,be):(de=Pp(se),de.c(),de.m(ee.parentNode,ee))},i(se){Q||(Mt(D),Q=!0)},o(se){cr(D),Q=!1},d(se){se&&(p(c),p(l),p(g),p(G),p(ee)),s[52](null),X&&X.d(),Ae[O].d(),ge&&ge.d(),de&&de.d(se),te=!1,h(ne)}}}function zv(s){let c,l,g,y,E,L,U,O,D,H,j,Y,G,ee,Q,te,ne,X,pe,Ae,$e,ge,de=uh(s[22]),se=[];for(let be=0;be<de.length;be+=1)se[be]=Ip(Sp(s,de,be));return{c(){c=v("div"),c.textContent="Create a Nostr account",l=I(),g=v("form"),y=v("div"),E=v("input"),L=I(),U=v("div"),U.textContent="@",O=I(),D=v("select");for(let be=0;be<se.length;be+=1)se[be].c();H=I(),j=v("button"),Y=T("Continue \xBB"),Q=I(),te=v("div"),ne=T("Do you already have a Nostr address?"),X=v("br"),pe=I(),Ae=v("button"),Ae.textContent="Login now",$(c,"class","text-center text-lg"),$(E,"class","box-border w-40 rounded px-2 py-1 text-lg text-neutral-800 outline-none"),$(E,"placeholder","bob"),E.autofocus=!0,$(E,"autocapitalize","none"),$(U,"class","mx-2 text-2xl"),$(D,"class","box-border w-full rounded px-2 py-1 text-lg text-neutral-800 outline-none"),s[10]===void 0&&je(()=>s[51].call(D)),$(y,"class","flex flex-row"),$(j,"class",G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),j.disabled=ee=!s[10]||!s[9]||s[18],$(g,"class","mb-1 mt-4"),$(Ae,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(te,"class","mt-6 text-center text-sm leading-3")},m(be,Be){f(be,c,Be),f(be,l,Be),f(be,g,Be),B(g,y),B(y,E),s[49](E),x(E,s[9]),B(y,L),B(y,U),B(y,O),B(y,D);for(let Oe=0;Oe<se.length;Oe+=1)se[Oe]&&se[Oe].m(D,null);z(D,s[10],!0),B(g,H),B(g,j),B(j,Y),f(be,Q,Be),f(be,te,Be),B(te,ne),B(te,X),B(te,pe),B(te,Ae),E.focus(),$e||(ge=[P(E,"input",s[50]),P(E,"input",s[38]),P(D,"change",s[51]),P(g,"submit",s[37]),P(Ae,"click",s[36])],$e=!0)},p(be,Be){if(Be[0]&512&&E.value!==be[9]&&x(E,be[9]),Be[0]&4194304){de=uh(be[22]);let Oe;for(Oe=0;Oe<de.length;Oe+=1){let gt=Sp(be,de,Oe);se[Oe]?se[Oe].p(gt,Be):(se[Oe]=Ip(gt),se[Oe].c(),se[Oe].m(D,null))}for(;Oe<se.length;Oe+=1)se[Oe].d(1);se.length=de.length}Be[0]&4195328&&z(D,be[10]),Be[0]&1&&G!==(G="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+be[0]+"-900 hover:bg-"+be[0]+"-950")&&$(j,"class",G),Be[0]&4457984&&ee!==(ee=!be[10]||!be[9]||be[18])&&(j.disabled=ee)},i:a,o:a,d(be){be&&(p(c),p(l),p(g),p(Q),p(te)),s[49](null),w(se,be),$e=!1,h(ge)}}}function Mv(s){let c,l,g;return{c(){c=v("div"),c.textContent="What is that?",l=I(),g=v("div"),g.innerHTML=`<p class="mb mt-4">This widget is created with <i>window.nostr.js</i>, a small script
            you can drop in any page that already uses NIP-07 and make it also
            work with NIP-46 automatically when the user doesn&#39;t have an
            extension installed.
            <br/>
            It adds a small floating button on the side of the window that users
            can use to create Nostr accuonts or connect to their NIP-46 bunkers.</p> <p class="mt-4">This tool is opensource, get the code from the <a target="_blank" class="underline" href="https://github.com/fiatjaf/window.nostr.js">project&#39;s page</a>.</p> <p class="mt-4">You don&#39;t know what Nostr is?
            <a target="_blank" class="underline" href="https://www.nostr.com">Learn more</a>.</p>`,$(c,"class","text-center text-lg"),$(g,"class","text-base leading-5")},m(y,E){f(y,c,E),f(y,l,E),f(y,g,E)},p:a,i:a,o:a,d(y){y&&(p(c),p(l),p(g))}}}function Dv(s){let c,l,g,y,E,L,U=new URL(s[15]).host+"",O,D,H,j,Y,G,ee,Q,te,ne;return{c(){c=v("div"),l=v("div"),l.textContent="An action requires your confirmation",g=I(),y=v("div"),E=T("Now you a new window will bring you to "),L=v("strong"),O=T(U),D=T(" where you can approve the current action. If nothing happens check that if your browser is blocking popups, pleaase."),H=v("br"),j=T(`
            After that you will be returned to this page.`),Y=I(),G=v("button"),ee=T("Confirm action \xBB"),$(l,"class","text-center text-lg"),$(y,"class","mt-4 text-center text-sm leading-4"),$(G,"class",Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(c,"class","m-auto w-full")},m(X,pe){f(X,c,pe),B(c,l),B(c,g),B(c,y),B(y,E),B(y,L),B(L,O),B(y,D),B(y,H),B(y,j),B(c,Y),B(c,G),B(G,ee),te||(ne=P(G,"click",s[48]),te=!0)},p(X,pe){pe[0]&32768&&U!==(U=new URL(X[15]).host+"")&&q(O,U),pe[0]&1&&Q!==(Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(G,"class",Q)},i:a,o:a,d(X){X&&p(c),te=!1,ne()}}}function Fv(s){let c,l,g,y,E,L,U=new URL(s[14]).host+"",O,D,H,j,Y,G,ee,Q,te,ne;return{c(){c=v("div"),l=v("div"),l.textContent="Login into a Nostr account",g=I(),y=v("div"),E=T("Now you a new window will bring you to "),L=v("strong"),O=T(U),D=T(" where you can login and approve the permissions. If nothing happens check that if your browser is blocking popups, pleaase."),H=v("br"),j=T(`
            After that you will be returned to this page.`),Y=I(),G=v("button"),ee=T("Login now \xBB"),$(l,"class","text-center text-lg"),$(y,"class","mt-4 text-center text-sm leading-4"),$(G,"class",Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(c,"class","m-auto w-full")},m(X,pe){f(X,c,pe),B(c,l),B(c,g),B(c,y),B(y,E),B(y,L),B(L,O),B(y,D),B(y,H),B(y,j),B(c,Y),B(c,G),B(G,ee),te||(ne=P(G,"click",s[47]),te=!0)},p(X,pe){pe[0]&16384&&U!==(U=new URL(X[14]).host+"")&&q(O,U),pe[0]&1&&Q!==(Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(G,"class",Q)},i:a,o:a,d(X){X&&p(c),te=!1,ne()}}}function jv(s){let c,l,g,y,E,L,U=new URL(s[13]).host+"",O,D,H,j,Y,G,ee,Q,te,ne;return{c(){c=v("div"),l=v("div"),l.textContent="Create a Nostr account",g=I(),y=v("div"),E=T("Now you a new window will bring you to "),L=v("strong"),O=T(U),D=T(" where the account creation will take place. If nothing happens check that if your browser is blocking popups, pleaase."),H=v("br"),j=T(`
            After that you will be returned to this page.`),Y=I(),G=v("button"),ee=T("Start account creation \xBB"),$(l,"class","text-center text-lg"),$(y,"class","mt-4 text-center text-sm leading-4"),$(G,"class",Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+s[0]+"-900 hover:bg-"+s[0]+"-950"),$(c,"class","m-auto w-full")},m(X,pe){f(X,c,pe),B(c,l),B(c,g),B(c,y),B(y,E),B(y,L),B(L,O),B(y,D),B(y,H),B(y,j),B(c,Y),B(c,G),B(G,ee),te||(ne=P(G,"click",s[46]),te=!0)},p(X,pe){pe[0]&8192&&U!==(U=new URL(X[13]).host+"")&&q(O,U),pe[0]&1&&Q!==(Q="mt-4 block w-full cursor-pointer rounded border-0 px-2 py-1 text-lg text-white disabled:cursor-default disabled:bg-neutral-400 disabled:text-neutral-200 bg-"+X[0]+"-900 hover:bg-"+X[0]+"-950")&&$(G,"class",Q)},i:a,o:a,d(X){X&&p(c),te=!1,ne()}}}function Tp(s){let c,l,g=s[21].picture&&$p(s),y=s[21].name&&Bp(s);return{c(){c=v("div"),g&&g.c(),l=I(),y&&y.c(),$(c,"class","mb-2 flex items-center justify-center gap-2")},m(E,L){f(E,c,L),g&&g.m(c,null),B(c,l),y&&y.m(c,null)},p(E,L){E[21].picture?g?g.p(E,L):(g=$p(E),g.c(),g.m(c,l)):g&&(g.d(1),g=null),E[21].name?y?y.p(E,L):(y=Bp(E),y.c(),y.m(c,null)):y&&(y.d(1),y=null)},d(E){E&&p(c),g&&g.d(),y&&y.d()}}}function $p(s){let c,l,g;return{c(){c=v("img"),A(c.src,l=s[21].picture)||$(c,"src",l),$(c,"alt",""),$(c,"class",g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+s[0]+"-100")},m(y,E){f(y,c,E)},p(y,E){E[0]&2097152&&!A(c.src,l=y[21].picture)&&$(c,"src",l),E[0]&1&&g!==(g="h-10 w-10 rounded-full border-2 border-solid border-transparent group-hover:border-"+y[0]+"-100")&&$(c,"class",g)},d(y){y&&p(c)}}}function Bp(s){let c,l=s[21].name+"",g;return{c(){c=v("div"),g=T(l),$(c,"class","text-3xl decoration-2 underline-offset-4 group-hover:underline")},m(y,E){f(y,c,E),B(c,g)},p(y,E){E[0]&2097152&&l!==(l=y[21].name+"")&&q(g,l)},d(y){y&&p(c)}}}function Lp(s){let c,l;return{c(){c=v("div"),l=T(s[19]),$(c,"class","my-2 rounded bg-yellow-100 p-2 text-center text-sm leading-4 text-red-400")},m(g,y){f(g,c,y),B(c,l)},p(g,y){y[0]&524288&&q(l,g[19])},d(g){g&&p(c)}}}function Hv(s){let c;return{c(){c=T("Connect \xBB")},m(l,g){f(l,c,g)},i:a,o:a,d(l){l&&p(c)}}}function Vv(s){let c,l,g;return l=new kp({}),{c(){c=T(`Connecting to bunker
              `),lh(l.$$.fragment)},m(y,E){f(y,c,E),mu(l,y,E),g=!0},i(y){g||(Mt(l.$$.fragment,y),g=!0)},o(y){cr(l.$$.fragment,y),g=!1},d(y){y&&p(c),bu(l,y)}}}function Cp(s){let c,l,g,y,E;return{c(){c=v("div"),l=T(`Waiting too much?
              `),g=v("button"),g.textContent="Cancel the connection",$(g,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(c,"class","mt-6 text-center text-sm leading-3")},m(L,U){f(L,c,U),B(c,l),B(c,g),y||(E=P(g,"click",s[39]),y=!0)},p:a,d(L){L&&p(c),y=!1,E()}}}function Pp(s){let c,l,g,y,E,L,U;return{c(){c=v("div"),l=T("Do you need a Nostr account?"),g=v("br"),y=I(),E=v("button"),E.textContent="Sign up now",$(E,"class","cursor-pointer border-0 bg-transparent text-sm text-white underline"),$(c,"class","mt-6 text-center text-sm leading-3")},m(O,D){f(O,c,D),B(c,l),B(c,g),B(c,y),B(c,E),L||(U=P(E,"click",s[35]),L=!0)},p:a,d(O){O&&p(c),L=!1,U()}}}function Ip(s){let c,l,g;return{c(){c=v("option"),$(c,"label",l=s[78].domain),c.__value=g=s[78],x(c,c.__value),$(c,"class","px-2 py-1 text-lg")},m(y,E){f(y,c,E)},p(y,E){E[0]&4194304&&l!==(l=y[78].domain)&&$(c,"label",l),E[0]&4194304&&g!==(g=y[78])&&(c.__value=g,x(c,c.__value))},d(y){y&&p(c)}}}function qv(s){let c,l;return{c(){c=v("img"),A(c.src,l=s[21].picture)||$(c,"src",l),$(c,"alt",""),$(c,"class","h-6 w-6 rounded-full")},m(g,y){f(g,c,y)},p(g,y){y[0]&2097152&&!A(c.src,l=g[21].picture)&&$(c,"src",l)},i:a,o:a,d(g){g&&p(c)}}}function Wv(s){let c,l,g,y=(s[21].name||s[21].npub.slice(0,7)+"\u2026"+s[21].npub.slice(-4))+"",E;function L(D,H){return D[21].picture?Yv:Zv}let U=L(s),O=U(s);return{c(){c=v("div"),O.c(),l=I(),g=v("div"),E=T(y),$(g,"class","max-w-56 overflow-hidden whitespace-nowrap overflow-ellipsis inline-block"),$(c,"class","flex px-2 items-center")},m(D,H){f(D,c,H),O.m(c,null),B(c,l),B(c,g),B(g,E)},p(D,H){U===(U=L(D))&&O?O.p(D,H):(O.d(1),O=U(D),O&&(O.c(),O.m(c,l))),H[0]&2097152&&y!==(y=(D[21].name||D[21].npub.slice(0,7)+"\u2026"+D[21].npub.slice(-4))+"")&&q(E,y)},i:a,o:a,d(D){D&&p(c),O.d()}}}function Qv(s){let c;return{c(){c=v("div"),c.textContent="N",$(c,"class","w-6 text-center")},m(l,g){f(l,c,g)},p:a,i:a,o:a,d(l){l&&p(c)}}}function Kv(s){let c;return{c(){c=v("div"),c.textContent="Connect with Nostr",$(c,"class","flex px-2 items-center")},m(l,g){f(l,c,g)},p:a,i:a,o:a,d(l){l&&p(c)}}}function Gv(s){let c,l,g,y;return g=new kp({}),{c(){c=v("div"),l=T(`Connecting to bunker
          `),lh(g.$$.fragment),$(c,"class","flex px-2 items-center")},m(E,L){f(E,c,L),B(c,l),mu(g,c,null),y=!0},p:a,i(E){y||(Mt(g.$$.fragment,E),y=!0)},o(E){cr(g.$$.fragment,E),y=!1},d(E){E&&p(c),bu(g)}}}function Zv(s){let c;return{c(){c=T("\u2609")},m(l,g){f(l,c,g)},p:a,d(l){l&&p(c)}}}function Yv(s){let c,l;return{c(){c=v("img"),A(c.src,l=s[21].picture)||$(c,"src",l),$(c,"alt",""),$(c,"class","mr-2 h-5 w-5 rounded-full")},m(g,y){f(g,c,y)},p(g,y){y[0]&2097152&&!A(c.src,l=g[21].picture)&&$(c,"src",l)},d(g){g&&p(c)}}}function Jv(s){let c,l,g,y,E,L,U,O=[Ov,Nv,Iv],D=[];function H(j,Y){return!j[25]&&!j[21]&&j[1]?0:j[25]?2:1}return l=H(s),g=D[l]=O[l](s),{c(){c=v("div"),g.c(),$(c,"class","draggable animate-fadein font-sans text-white"),$(c,"style",y="position: fixed; "+(s[25]&&s[5]?"width: 100vw;":"")+"; right: "+(s[25]&&s[5]?"0":s[3])+"px; user-select: none; "+(s[25]&&s[5]?"bottom: 0px":s[24]+":"+s[23]+"px")),K(c,"cursor-pointer",!s[21]&&!s[25])},m(j,Y){f(j,c,Y),D[l].m(c,null),s[54](c),E=!0,L||(U=[P(rl,"click",s[29]),P(rl,"mouseup",s[42]),P(rl,"mousemove",s[41]),P(c,"mousedown",s[40])],L=!0)},p(j,Y){let G=l;l=H(j),l===G?D[l].p(j,Y):(Bt(),cr(D[G],1,1,()=>{D[G]=null}),Wt(),g=D[l],g?g.p(j,Y):(g=D[l]=O[l](j),g.c()),Mt(g,1),g.m(c,null)),(!E||Y[0]&58720296&&y!==(y="position: fixed; "+(j[25]&&j[5]?"width: 100vw;":"")+"; right: "+(j[25]&&j[5]?"0":j[3])+"px; user-select: none; "+(j[25]&&j[5]?"bottom: 0px":j[24]+":"+j[23]+"px")))&&$(c,"style",y),(!E||Y[0]&35651584)&&K(c,"cursor-pointer",!j[21]&&!j[25])},i(j){E||(Mt(g),E=!0)},o(j){cr(g),E=!1},d(j){j&&p(c),D[l].d(),s[54](null),L=!1,h(U)}}}let Np="We could not connect to a NIP-46 bunker with that url, are you sure it is set up correctly?",Op="We were not able to connect using this address. For it to work it has to come from a NIP-46 provider.",Mn=20;function nl(s){return window.open(s,"window.nostr","width=600,height=800,popup=yes")}function Xv(s,c,l){let g,y,E,L,U,O,D=Cv("only screen and (max-width: 640px)");N(s,D,ye=>l(5,O=ye));let H={ORIGIN:"wnj:origin",CLIENT_SECRET:"wnj:clientSecret",Y_POS:"wnj:ypos",CALLBACK_TOKEN:"wnj:callbackToken",BUNKER_POINTER:"wnj:bunkerPointer"},j,{accent:Y}=c,{position:G="top"}=c,{startHidden:ee}=c,{compactMode:Q}=c,te=window,ne=new x1,X,pe,Ae,$e,ge,de,se=localStorage.getItem(H.CLIENT_SECRET);se?de=_u(se):(de=o1(),localStorage.setItem(H.CLIENT_SECRET,Qt(de)));let be="closed",Be,Oe,gt,mt,bt,me,ke=null,Ue=null,Ge=null,Ye=!1,Ke,Ft,Ct,Jt=!1,wt,fr,kr=[],{right:Fr=20}=c,Dn=!1,ir=!1,Fn,Eo,sr,on={pool:ne,onauth(ye){Ke?l(13,ke=ye):wt?(l(15,Ge=ye),l(25,E=!0)):l(14,Ue=ye)}},xo=ph(()=>{switch(be){case"justopened":l(44,be="opened");break;case"justclosed":l(44,be="closed");break}},500);function ko(){l(44,be="justopened"),xo()}function jn(){l(44,be="justclosed"),xo()}function da(){if(Be&&!me){al();return}ko()}sl();let Mp={isWnj:!0,async getPublicKey(){return Be?Be.pubkey:(!bt&&!me&&ko(),(await mt).bp.pubkey)},async signEvent(ye){try{return!bt&&!me&&da(),await(await mt).signEvent(ye)}finally{l(15,Ge=null),jn()}},async getRelays(){return!bt&&!me&&da(),(await mt).getRelays()},nip04:{async encrypt(ye,dt){return!bt&&!me&&da(),(await mt).nip04Encrypt(ye,dt)},async decrypt(ye,dt){return!bt&&!me&&da(),(await mt).nip04Decrypt(ye,dt)}}};function sl(){jn(),Be=null,mt=new Promise((ye,dt)=>{Oe=ye,gt=dt}),l(21,wt=null),l(12,bt=!1),l(16,Ye=!1),l(17,Ke=!1),me=!1,fr=null,l(19,Ct="")}le(()=>{if(!Be){let ye=localStorage.getItem(H.BUNKER_POINTER);ye&&(Be=JSON.parse(ye),cl())}if(te.nostr&&!te.nostr.isWnj){te.destroyWnj();return}else Object.defineProperty(window,"nostr",{get(){return Mp},set(ye){Mp=ye,ye.isWnj||te.destroyWnj()},configurable:!0});return()=>{fr&&fr.close()}});function n_(ye){Math.abs(y-Eo)>6||Date.now()-sr>600||be==="justopened"||be==="justclosed"||(ye.composedPath().find(dt=>dt.id==="wnj")?ko():jn())}function o_(ye){jn(),l(17,Ke=!1),l(13,ke=null),l(14,Ue=null),l(15,Ge=null),ye.stopPropagation()}function i_(ye){l(20,Jt=!0),ye.stopPropagation()}function s_(ye){l(20,Jt=!1),ye.stopPropagation()}async function a_(ye){ye.preventDefault();try{if(Be=await Ev(X.value),!Be){X.value.match(la)?l(19,Ct=Np):l(19,Ct=Op);return}X.setCustomValidity(""),l(19,Ct=""),await al(),cl()}catch{X.value.match(la)?l(19,Ct=Np):l(19,Ct=Op),l(12,bt=!1)}}async function c_(ye){ye.preventDefault(),localStorage.removeItem(H.BUNKER_POINTER),sl()}async function u_(ye){ye.preventDefault(),l(17,Ke=!0),kr.length===0&&(l(22,kr=await kv(ne,["wss://relay.nostr.band","wss://nos.lol","wss://nostr-pub.wellorder.net"])),l(10,ge=kr[0]))}function l_(ye){l(17,Ke=!1)}async function d_(ye){if(ye.preventDefault(),!ge)return;l(18,Ft=!0);let dt=await xv(ge,on,Ae.value,ge.domain,void 0);l(18,Ft=!1),ko(),l(17,Ke=!1),Be=dt.bp,cl(),al(dt)}let f_=ph(async()=>{ge&&Ae.value.length>0&&(await Sv(Ae.value+"@"+ge.domain)?Ae.setCustomValidity(`'${Ae.value}' is already taken.`):Ae.setCustomValidity(""))},500);function h_(){l(16,Ye=!1),l(12,bt=!1),gt("connection aborted"),sl()}async function al(ye=void 0){ye=ye||new _p(de,Be,on),l(12,bt=!0);let dt=setTimeout(()=>{l(16,Ye=!0),l(25,E=!0)},5e3);try{await ye.connect(),me=!0,localStorage.setItem(H.BUNKER_POINTER,JSON.stringify(Be)),jn(),Oe(ye)}catch(sn){gt(sn?.message||String(sn))}finally{clearTimeout(dt),l(12,bt=!1),l(16,Ye=!1),l(13,ke=null),l(14,Ue=null),l(15,Ge=null)}}function cl(ye=null){let dt=Be.pubkey;l(21,wt={pubkey:dt,npub:Tv(dt),event:null}),fr=ne.subscribeMany(["wss://purplepag.es","wss://relay.snort.social","wss://relay.nos.social"],[{kinds:[0],authors:[dt]}],{onevent(sn){var Dp;if(!((((Dp=wt.event)==null?void 0:Dp.created_at)||0)>=sn.created_at))try{let{name:A_,picture:T_}=JSON.parse(sn.content);l(21,wt.event=sn,wt),l(21,wt.name=A_,wt),l(21,wt.picture=T_,wt),ye?.(),ye=null}catch{}}})}function p_(ye){if(E)return;Dn=!0;let dt=j.getBoundingClientRect();Fn=ye.clientY-dt.top,Eo=y,sr=Date.now()}function g_(ye){Dn&&(g==="top"?l(23,y=ye.clientY):l(23,y=window.innerHeight-ye.clientY),l(23,y-=Fn),l(45,ir=!0),y<Mn&&l(23,y=Mn),y>window.innerHeight-Mn&&l(23,y=window.innerHeight-Mn))}function m_(){if(Dn=!1,setTimeout(()=>{l(45,ir=!1)},10),ir){let ye=j.getBoundingClientRect(),dt=window.innerHeight,sn=dt/2;ye.top<sn?(l(24,g="top"),l(23,y=ye.top)):(l(24,g="bottom"),l(23,y=dt-ye.bottom)),y<Mn&&l(23,y=Mn),localStorage.setItem(H.ORIGIN,g),localStorage.setItem(H.Y_POS,y.toString())}}let b_=()=>nl(ke),w_=()=>nl(Ue),y_=()=>{nl(Ge)};function v_(ye){ve[ye?"unshift":"push"](()=>{Ae=ye,l(8,Ae)})}function __(){$e=this.value,l(9,$e)}function E_(){ge=V(this),l(10,ge),l(22,kr)}function x_(ye){ve[ye?"unshift":"push"](()=>{X=ye,l(7,X)})}function k_(){pe=this.value,l(4,pe)}function S_(ye){ve[ye?"unshift":"push"](()=>{j=ye,l(6,j)})}return s.$$set=ye=>{"accent"in ye&&l(0,Y=ye.accent),"position"in ye&&l(43,G=ye.position),"startHidden"in ye&&l(1,ee=ye.startHidden),"compactMode"in ye&&l(2,Q=ye.compactMode),"right"in ye&&l(3,Fr=ye.right)},s.$$.update=()=>{s.$$.dirty[0]&32|s.$$.dirty[1]&4096&&l(24,g=O?"bottom":localStorage.getItem(H.ORIGIN)||G),s.$$.dirty[0]&32&&l(23,y=O?Mn:parseInt(localStorage.getItem(H.Y_POS)||"0")||Mn),s.$$.dirty[1]&8192&&l(25,E=be==="justopened"||be==="opened"),s.$$.dirty[0]&1|s.$$.dirty[1]&16384&&l(27,L=ir?"cursor-grabbing outline-dashed outline-"+Y+"-500 outline-1 outline-offset-4":"outline-none"),s.$$.dirty[0]&16&&l(26,U=pe&&(pe.match(la)||pe.match(Ep)))},[Y,ee,Q,Fr,pe,O,j,X,Ae,$e,ge,de,bt,ke,Ue,Ge,Ye,Ke,Ft,Ct,Jt,wt,kr,y,g,E,U,L,D,n_,o_,i_,s_,a_,c_,u_,l_,d_,f_,h_,p_,g_,m_,G,be,ir,b_,w_,y_,v_,__,E_,x_,k_,S_]}class e_ extends fh{constructor(c){super(),dh(this,c,Xv,Jv,m,{accent:0,position:43,startHidden:1,compactMode:2,right:3},null,[-1,-1,-1])}}let ni=window;ni.destroyWnj=()=>{setTimeout(()=>{t_.$destroy()},1)};let ol=document.createElement("div");ol.style.zIndex="90000",document.body.appendChild(ol);let il=document.createElement("div");il.id="wnj";let Rp=document.createElement("style");Rp.innerHTML=i;let Up=ol.attachShadow({mode:"open"});Up.appendChild(il),Up.appendChild(Rp);let t_=new e_({target:il,props:{accent:((e=ni.wnjParams)==null?void 0:e.accent)||"cyan",position:((t=ni.wnjParams)==null?void 0:t.position)==="bottom"?"bottom":"top",startHidden:!!((r=ni.wnjParams)!=null&&r.startHidden),compactMode:!!((n=ni.wnjParams)!=null&&n.compactMode)}});if(!((o=ni.wnjParams)!=null&&o.disableOverflowFix)){var zp=document.createElement("style"),r_=`
    html, body {
      overflow: auto;
      height: 100%;
    }
  `;zp.innerHTML=r_,document.head.appendChild(zp)}})()});function De(){}function Pt(e,t){for(let r in t)e[r]=t[r];return e}function dl(e){return e()}function ha(){return Object.create(null)}function Sr(e){e.forEach(dl)}function Zi(e){return typeof e=="function"}function tt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}var fa;function It(e,t){return e===t?!0:(fa||(fa=document.createElement("a")),fa.href=t,e===fa.href)}function jp(e){return Object.keys(e).length===0}function Hp(e,...t){if(e==null){for(let n of t)n(void 0);return De}let r=e.subscribe(...t);return r.unsubscribe?()=>r.unsubscribe():r}function fl(e,t,r){e.$$.on_destroy.push(Hp(t,r))}function So(e,t,r,n){if(e){let o=Vp(e,t,r,n);return e[0](o)}}function Vp(e,t,r,n){return e[1]&&n?Pt(r.ctx.slice(),e[1](n(t))):r.ctx}function Ao(e,t,r,n){if(e[2]&&n){let o=e[2](n(r));if(t.dirty===void 0)return o;if(typeof o=="object"){let i=[],a=Math.max(t.dirty.length,o.length);for(let u=0;u<a;u+=1)i[u]=t.dirty[u]|o[u];return i}return t.dirty|o}return t.dirty}function To(e,t,r,n,o,i){if(o){let a=Vp(t,r,n,i);e.p(a,o)}}function $o(e){if(e.ctx.length>32){let t=[],r=e.ctx.length/32;for(let n=0;n<r;n++)t[n]=-1;return t}return-1}function oi(e){let t={};for(let r in e)r[0]!=="$"&&(t[r]=e[r]);return t}function an(e,t){let r={};t=new Set(t);for(let n in e)!t.has(n)&&n[0]!=="$"&&(r[n]=e[n]);return r}function hl(e){return e??""}var pl=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var pa=class e{_listeners="WeakMap"in pl?new WeakMap:void 0;_observer=void 0;options;constructor(t){this.options=t}observe(t,r){return this._listeners.set(t,r),this._getObserver().observe(t,this.options),()=>{this._listeners.delete(t),this._observer.unobserve(t)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(t=>{for(let r of t)e.entries.set(r.target,r),this._listeners.get(r.target)?.(r)}))}};pa.entries="WeakMap"in pl?new WeakMap:void 0;var qp=!1;function Wp(){qp=!0}function Qp(){qp=!1}function re(e,t){e.appendChild(t)}function fe(e,t,r){e.insertBefore(t,r||null)}function ue(e){e.parentNode&&e.parentNode.removeChild(e)}function Xt(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function ae(e){return document.createElement(e)}function ze(e){return document.createTextNode(e)}function Pe(){return ze(" ")}function Nt(){return ze("")}function Yi(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function oe(e,t,r){r==null?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}var z_=["width","height"];function cn(e,t){let r=Object.getOwnPropertyDescriptors(e.__proto__);for(let n in t)t[n]==null?e.removeAttribute(n):n==="style"?e.style.cssText=t[n]:n==="__value"?e.value=e[n]=t[n]:r[n]&&r[n].set&&z_.indexOf(n)===-1?e[n]=t[n]:oe(e,n,t[n])}function Ji(e,t,r){let n=t.toLowerCase();n in e?e[n]=typeof e[n]=="boolean"&&r===""?!0:r:t in e?e[t]=typeof e[t]=="boolean"&&r===""?!0:r:oe(e,t,r)}function Kp(e){return Array.from(e.childNodes)}function Ze(e,t){t=""+t,e.data!==t&&(e.data=t)}function Bo(e,t,r){e.classList.toggle(t,!!r)}function ga(e,t,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(e,{detail:t,bubbles:r,cancelable:n})}function Gp(e){let t={};return e.childNodes.forEach(r=>{t[r.slot||"default"]=!0}),t}var Hn;function un(e){Hn=e}function Xi(){if(!Hn)throw new Error("Function called outside component initialization");return Hn}function Ot(e){Xi().$$.on_mount.push(e)}function gl(e){Xi().$$.after_update.push(e)}function ml(e){Xi().$$.on_destroy.push(e)}function bl(){let e=Xi();return(t,r,{cancelable:n=!1}={})=>{let o=e.$$.callbacks[t];if(o){let i=ga(t,r,{cancelable:n});return o.slice().forEach(a=>{a.call(e,i)}),!i.defaultPrevented}return!0}}var Lo=[];var ma=[],si=[],Zp=[],V_=Promise.resolve(),yl=!1;function Yp(){yl||(yl=!0,V_.then(Ar))}function es(e){si.push(e)}var wl=new Set,ii=0;function Ar(){if(ii!==0)return;let e=Hn;do{try{for(;ii<Lo.length;){let t=Lo[ii];ii++,un(t),q_(t.$$)}}catch(t){throw Lo.length=0,ii=0,t}for(un(null),Lo.length=0,ii=0;ma.length;)ma.pop()();for(let t=0;t<si.length;t+=1){let r=si[t];wl.has(r)||(wl.add(r),r())}si.length=0}while(Lo.length);for(;Zp.length;)Zp.pop()();yl=!1,wl.clear(),un(e)}function q_(e){if(e.fragment!==null){e.update(),Sr(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(es)}}function Jp(e){let t=[],r=[];si.forEach(n=>e.indexOf(n)===-1?t.push(n):r.push(n)),r.forEach(n=>n()),si=t}var ba=new Set,Co;function yt(){Co={r:0,c:[],p:Co}}function vt(){Co.r||Sr(Co.c),Co=Co.p}function Ee(e,t){e&&e.i&&(ba.delete(e),e.i(t))}function Te(e,t,r,n){if(e&&e.o){if(ba.has(e))return;ba.add(e),Co.c.push(()=>{ba.delete(e),n&&(r&&e.d(1),n())}),e.o(t)}else n&&n()}function Je(e){return e?.length!==void 0?e:Array.from(e)}function jr(e,t){let r={},n={},o={$$scope:1},i=e.length;for(;i--;){let a=e[i],u=t[i];if(u){for(let d in a)d in u||(n[d]=1);for(let d in u)o[d]||(r[d]=u[d],o[d]=1);e[i]=u}else for(let d in a)o[d]=1}for(let a in n)a in r||(r[a]=void 0);return r}function wa(e){return typeof e=="object"&&e!==null?e:{}}var W_=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Q_=new Set([...W_]);function ft(e){e&&e.c()}function st(e,t,r){let{fragment:n,after_update:o}=e.$$;n&&n.m(t,r),es(()=>{let i=e.$$.on_mount.map(dl).filter(Zi);e.$$.on_destroy?e.$$.on_destroy.push(...i):Sr(i),e.$$.on_mount=[]}),o.forEach(es)}function at(e,t){let r=e.$$;r.fragment!==null&&(Jp(r.after_update),Sr(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function G_(e,t){e.$$.dirty[0]===-1&&(Lo.push(e),Yp(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ct(e,t,r,n,o,i,a=null,u=[-1]){let d=Hn;un(e);let h=e.$$={fragment:null,ctx:[],props:i,update:De,not_equal:o,bound:ha(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(d?d.$$.context:[])),callbacks:ha(),dirty:u,skip_bound:!1,root:t.target||d.$$.root};a&&a(h.root);let b=!1;if(h.ctx=r?r(e,t.props||{},(m,_,...A)=>{let C=A.length?A[0]:_;return h.ctx&&o(h.ctx[m],h.ctx[m]=C)&&(!h.skip_bound&&h.bound[m]&&h.bound[m](C),b&&G_(e,m)),_}):[],h.update(),b=!0,Sr(h.before_update),h.fragment=n?n(h.ctx):!1,t.target){if(t.hydrate){Wp();let m=Kp(t.target);h.fragment&&h.fragment.l(m),m.forEach(ue)}else h.fragment&&h.fragment.c();t.intro&&Ee(e.$$.fragment),st(e,t.target,t.anchor),Qp(),Ar()}un(d)}var Z_;typeof HTMLElement=="function"&&(Z_=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(e,t,r){super(),this.$$ctor=e,this.$$s=t,r&&this.attachShadow({mode:"open"})}addEventListener(e,t,r){if(this.$$l[e]=this.$$l[e]||[],this.$$l[e].push(t),this.$$c){let n=this.$$c.$on(e,t);this.$$l_u.set(t,n)}super.addEventListener(e,t,r)}removeEventListener(e,t,r){if(super.removeEventListener(e,t,r),this.$$c){let n=this.$$l_u.get(t);n&&(n(),this.$$l_u.delete(t))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let e=function(o){return()=>{let i;return{c:function(){i=ae("slot"),o!=="default"&&oe(i,"name",o)},m:function(d,h){fe(d,i,h)},d:function(d){d&&ue(i)}}}};if(await Promise.resolve(),!this.$$cn||this.$$c)return;let t={},r=Gp(this);for(let o of this.$$s)o in r&&(t[o]=[e(o)]);for(let o of this.attributes){let i=this.$$g_p(o.name);i in this.$$d||(this.$$d[i]=vl(i,o.value,this.$$p_d,"toProp"))}for(let o in this.$$p_d)!(o in this.$$d)&&this[o]!==void 0&&(this.$$d[o]=this[o],delete this[o]);this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:t,$$scope:{ctx:[]}}});let n=()=>{this.$$r=!0;for(let o in this.$$p_d)if(this.$$d[o]=this.$$c.$$.ctx[this.$$c.$$.props[o]],this.$$p_d[o].reflect){let i=vl(o,this.$$d[o],this.$$p_d,"toAttribute");i==null?this.removeAttribute(this.$$p_d[o].attribute||o):this.setAttribute(this.$$p_d[o].attribute||o,i)}this.$$r=!1};this.$$c.$$.after_update.push(n),n();for(let o in this.$$l)for(let i of this.$$l[o]){let a=this.$$c.$on(o,i);this.$$l_u.set(i,a)}this.$$l={}}}attributeChangedCallback(e,t,r){this.$$r||(e=this.$$g_p(e),this.$$d[e]=vl(e,r,this.$$p_d,"toProp"),this.$$c?.$set({[e]:this.$$d[e]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{!this.$$cn&&this.$$c&&(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(e){return Object.keys(this.$$p_d).find(t=>this.$$p_d[t].attribute===e||!this.$$p_d[t].attribute&&t.toLowerCase()===e)||e}});function vl(e,t,r,n){let o=r[e]?.type;if(t=o==="Boolean"&&typeof t!="boolean"?t!=null:t,!n||!r[e])return t;if(n==="toAttribute")switch(o){case"Object":case"Array":return t==null?null:JSON.stringify(t);case"Boolean":return t?"":null;case"Number":return t??null;default:return t}else switch(o){case"Object":case"Array":return t&&JSON.parse(t);case"Boolean":return t;case"Number":return t!=null?+t:t;default:return t}}var rt=class{$$=void 0;$$set=void 0;$destroy(){at(this,1),this.$destroy=De}$on(t,r){if(!Zi(r))return De;let n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(r),()=>{let o=n.indexOf(r);o!==-1&&n.splice(o,1)}}$set(t){this.$$set&&!jp(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}};var Xp="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Xp);var t0=ll(kl(),1);var s2=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Sl=e=>e instanceof Uint8Array;var va=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Tr=(e,t)=>e<<32-t|e>>>t,a2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!a2)throw new Error("Non little-endian hardware is not supported");var c2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function xt(e){if(!Sl(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=c2[e[r]];return t}function Po(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let o=n*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[n]=a}return r}function u2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Al(e){if(typeof e=="string"&&(e=u2(e)),!Sl(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function Tl(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!Sl(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var ya=class{clone(){return this._cloneInto()}};function $l(e){let t=n=>e().update(Al(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function ai(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function ln(...e){let t=(o,i)=>a=>o(i(a)),r=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),n=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:r,decode:n}}function dn(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(ai(r),r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function fn(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function Ea(e,t="="){if(ai(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of r)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of r)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function ag(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function rg(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,o=[],i=Array.from(e);for(i.forEach(a=>{if(ai(a),a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,u=!0;for(let d=n;d<i.length;d++){let h=i[d],b=t*a+h;if(!Number.isSafeInteger(b)||t*a/t!==a||b-h!==t*a)throw new Error("convertRadix: carry overflow");if(a=b%r,i[d]=Math.floor(b/r),!Number.isSafeInteger(i[d])||i[d]*r+a!==b)throw new Error("convertRadix: carry overflow");if(u)i[d]?u=!1:n=d;else continue}if(o.push(a),u)break}for(let a=0;a<e.length-1&&e[a]===0;a++)o.push(0);return o.reverse()}var cg=(e,t)=>t?cg(t,e%t):e,_a=(e,t)=>e+(t-cg(e,t));function Bl(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(_a(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${_a(t,r)}`);let o=0,i=0,a=2**r-1,u=[];for(let d of e){if(ai(d),d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(o=o<<t|d,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)u.push((o>>i-r&a)>>>0);o&=2**i-1}if(o=o<<r-i&a,!n&&i>=t)throw new Error("Excess padding");if(!n&&o)throw new Error(`Non-zero padding: ${o}`);return n&&i>0&&u.push(o>>>0),u}function l2(e){return ai(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return rg(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(rg(t,e,2**8))}}}function Vn(e,t=!1){if(ai(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(_a(8,e)>32||_a(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Bl(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Bl(r,e,8,t))}}}function ng(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}var d2=ln(Vn(4),dn("0123456789ABCDEF"),fn("")),f2=ln(Vn(5),dn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),Ea(5),fn("")),EA=ln(Vn(5),dn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),Ea(5),fn("")),xA=ln(Vn(5),dn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),fn(""),ag(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),h2=ln(Vn(6),dn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),Ea(6),fn("")),p2=ln(Vn(6),dn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),Ea(6),fn("")),Pl=e=>ln(l2(58),dn(e),fn("")),Ll=Pl("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),kA=Pl("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),SA=Pl("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz"),og=[0,2,3,5,6,7,9,10,11],g2={encode(e){let t="";for(let r=0;r<e.length;r+=8){let n=e.subarray(r,r+8);t+=Ll.encode(n).padStart(og[n.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){let n=e.slice(r,r+11),o=og.indexOf(n.length),i=Ll.decode(n);for(let a=0;a<i.length-o;a++)if(i[a]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}};var Cl=ln(dn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),fn("")),ig=[996825010,642813549,513874426,1027748829,705979059];function ts(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<ig.length;n++)(t>>n&1)===1&&(r^=ig[n]);return r}function sg(e,t,r=1){let n=e.length,o=1;for(let i=0;i<n;i++){let a=e.charCodeAt(i);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);o=ts(o)^a>>5}o=ts(o);for(let i=0;i<n;i++)o=ts(o)^e.charCodeAt(i)&31;for(let i of t)o=ts(o)^i;for(let i=0;i<6;i++)o=ts(o);return o^=r,Cl.encode(Bl([o%2**30],30,5,!1))}function ug(e){let t=e==="bech32"?1:734539939,r=Vn(5),n=r.decode,o=r.encode,i=ng(n);function a(b,m,_=90){if(typeof b!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof b}`);if(!Array.isArray(m)||m.length&&typeof m[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof m}`);let A=b.length+7+m.length;if(_!==!1&&A>_)throw new TypeError(`Length ${A} exceeds limit ${_}`);return b=b.toLowerCase(),`${b}1${Cl.encode(m)}${sg(b,m,t)}`}function u(b,m=90){if(typeof b!="string")throw new Error(`bech32.decode input should be string, not ${typeof b}`);if(b.length<8||m!==!1&&b.length>m)throw new TypeError(`Wrong string length: ${b.length} (${b}). Expected (8..${m})`);let _=b.toLowerCase();if(b!==_&&b!==b.toUpperCase())throw new Error("String must be lowercase or uppercase");b=_;let A=b.lastIndexOf("1");if(A===0||A===-1)throw new Error('Letter "1" must be present between prefix and data only');let C=b.slice(0,A),k=b.slice(A+1);if(k.length<6)throw new Error("Data must be at least 6 characters long");let N=Cl.decode(k).slice(0,-6),R=sg(C,N,t);if(!k.endsWith(R))throw new Error(`Invalid checksum in ${b}: expected "${R}"`);return{prefix:C,words:N}}let d=ng(u);function h(b){let{prefix:m,words:_}=u(b,!1);return{prefix:m,words:_,bytes:n(_)}}return{encode:a,decode:u,decodeToBytes:h,decodeUnsafe:d,fromWords:n,fromWordsUnsafe:i,toWords:o}}var qn=ug("bech32"),AA=ug("bech32m"),m2={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},b2=ln(Vn(4),dn("0123456789abcdef"),fn(""),ag(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),w2={utf8:m2,hex:b2,base16:d2,base32:f2,base64:h2,base64url:p2,base58:Ll,base58xmr:g2},TA=`Invalid encoding type. Available types: ${Object.keys(w2).join(", ")}`;var y2=new TextDecoder("utf-8"),Nl=new TextEncoder;function Wn(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var Il=class{value;next=null;prev=null;constructor(t){this.value=t}},xa=class{first;last;constructor(){this.first=null,this.last=null}enqueue(t){let r=new Il(t);return this.last?this.last===this.first?(this.last=r,this.last.prev=this.first,this.first.next=r):(r.prev=this.last,this.last.next=r,this.last=r):(this.first=r,this.last=r),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let r=this.first;return this.first=null,this.last=null,r.value}let t=this.first;return this.first=t.next,t.value}};var v2=5e3;function lg(e){return E2("npub",Po(e))}function _2(e,t){let r=qn.toWords(t);return qn.encode(e,r,v2)}function E2(e,t){return _2(e,t)}function Rl(e){return new Promise((t,r)=>{e.oncomplete=e.onsuccess=()=>t(e.result),e.onabort=e.onerror=()=>r(e.error)})}function rs(e,t){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(t);let n=Rl(r);return(o,i)=>n.then(a=>i(a.transaction(t,o).objectStore(t)))}var Ol;function dg(){return Ol||(Ol=rs("keyval-store","keyval")),Ol}function ka(e,t=dg()){return t("readwrite",r=>(e.forEach(n=>r.put(n[1],n[0])),Rl(r.transaction)))}function Sa(e,t=dg()){return t("readonly",r=>Promise.all(e.map(n=>Rl(r.get(n)))))}var x2=Math.pow(2,8)-1,k2=Math.pow(2,16)-1,S2=Math.pow(2,32)-1,OA=Math.pow(2,7)-1,RA=Math.pow(2,15)-1,UA=Math.pow(2,31)-1;var fg=function(e){var t=e-1;if(t<=x2)return Uint8Array;if(t<=k2)return Uint16Array;if(t<=S2)return Uint32Array;throw new Error("mnemonist: Pointer Array of size > 4294967295 is not supported.")};function Hr(e){if(this.capacity=e,typeof this.capacity!="number"||this.capacity<=0)throw new Error("mnemonist/lru-cache: capacity should be positive number.");if(!isFinite(this.capacity)||Math.floor(this.capacity)!==this.capacity)throw new Error("mnemonist/lru-cache: capacity should be a finite positive integer.");var t=fg(e);this.forward=new t(e),this.backward=new t(e),this.K=new Array(e),this.V=new Array(e),this.size=0,this.head=0,this.tail=0,this.items={}}Hr.prototype.clear=function(){this.size=0,this.head=0,this.tail=0,this.items={}};Hr.prototype.splayOnTop=function(e){var t=this.head;if(this.head===e)return this;var r=this.backward[e],n=this.forward[e];return this.tail===e?this.tail=r:this.backward[n]=r,this.forward[r]=n,this.backward[t]=e,this.head=e,this.forward[e]=t,this};Hr.prototype.set=function(e,t){var r=this.items[e];if(typeof r<"u"){this.splayOnTop(r),this.V[r]=t;return}this.size<this.capacity?r=this.size++:(r=this.tail,this.tail=this.backward[r],delete this.items[this.K[r]]),this.items[e]=r,this.K[r]=e,this.V[r]=t,this.forward[r]=this.head,this.backward[this.head]=r,this.head=r};Hr.prototype.setpop=function(e,t){var r=null,n=null,o=this.items[e];return typeof o<"u"?(this.splayOnTop(o),r=this.V[o],this.V[o]=t,{evicted:!1,key:e,value:r}):(this.size<this.capacity?o=this.size++:(o=this.tail,this.tail=this.backward[o],r=this.V[o],n=this.K[o],delete this.items[n]),this.items[e]=o,this.K[o]=e,this.V[o]=t,this.forward[o]=this.head,this.backward[this.head]=o,this.head=o,n?{evicted:!0,key:n,value:r}:null)};Hr.prototype.has=function(e){return e in this.items};Hr.prototype.get=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.splayOnTop(t),this.V[t]};Hr.prototype.peek=function(e){var t=this.items[e];if(!(typeof t>"u"))return this.V[t]};function Aa(){let e=new Hr(2e3);return e.delete=t=>{},e}function hg(e){return!!e}function pg(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function Ul(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function gg(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");pg(e.outputLen),pg(e.blockLen)}function ci(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function mg(e,t){Ul(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var Ta=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var bg=e=>e instanceof Uint8Array;var $a=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),$r=(e,t)=>e<<32-t|e>>>t,T2=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!T2)throw new Error("Non little-endian hardware is not supported");function $2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function ns(e){if(typeof e=="string"&&(e=$2(e)),!bg(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function wg(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!bg(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var ui=class{clone(){return this._cloneInto()}},VA={}.toString;function yg(e){let t=n=>e().update(ns(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Ba(e=32){if(Ta&&typeof Ta.getRandomValues=="function")return Ta.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function B2(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),a=Number(r>>o&i),u=Number(r&i),d=n?4:0,h=n?0:4;e.setUint32(t+d,a,n),e.setUint32(t+h,u,n)}var La=class extends ui{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=$a(this.buffer)}update(t){ci(this);let{view:r,buffer:n,blockLen:o}=this;t=ns(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=$a(t);for(;o<=i-a;a+=o)this.process(d,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ci(this),mg(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let m=a;m<o;m++)r[m]=0;B2(n,o-8,BigInt(this.length*8),i),this.process(n,0);let u=$a(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,b=this.get();if(h>b.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)u.setUint32(4*m,b[m],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%r&&t.buffer.set(n),t}};var L2=(e,t,r)=>e&t^~e&r,C2=(e,t,r)=>e&t^e&r^t&r,P2=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Qn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Kn=new Uint32Array(64),zl=class extends La{constructor(){super(64,32,8,!1),this.A=Qn[0]|0,this.B=Qn[1]|0,this.C=Qn[2]|0,this.D=Qn[3]|0,this.E=Qn[4]|0,this.F=Qn[5]|0,this.G=Qn[6]|0,this.H=Qn[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:a,G:u,H:d}=this;return[t,r,n,o,i,a,u,d]}set(t,r,n,o,i,a,u,d){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,r){for(let m=0;m<16;m++,r+=4)Kn[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){let _=Kn[m-15],A=Kn[m-2],C=$r(_,7)^$r(_,18)^_>>>3,k=$r(A,17)^$r(A,19)^A>>>10;Kn[m]=k+Kn[m-7]+C+Kn[m-16]|0}let{A:n,B:o,C:i,D:a,E:u,F:d,G:h,H:b}=this;for(let m=0;m<64;m++){let _=$r(u,6)^$r(u,11)^$r(u,25),A=b+_+L2(u,d,h)+P2[m]+Kn[m]|0,k=($r(n,2)^$r(n,13)^$r(n,22))+C2(n,o,i)|0;b=h,h=d,d=u,u=a+A|0,a=i,i=o,o=n,n=A+k|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,b=b+this.H|0,this.set(n,o,i,a,u,d,h,b)}roundClean(){Kn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var Ca=yg(()=>new zl);var jl={};N_(jl,{bitGet:()=>M2,bitLen:()=>z2,bitMask:()=>os,bitSet:()=>D2,bytesToHex:()=>Io,bytesToNumberBE:()=>Rt,bytesToNumberLE:()=>Na,concatBytes:()=>hn,createHmacDrbg:()=>Fl,ensureBytes:()=>kt,equalBytes:()=>R2,hexToBytes:()=>No,hexToNumber:()=>Dl,numberToBytesBE:()=>Br,numberToBytesLE:()=>Oa,numberToHexUnpadded:()=>Eg,numberToVarBytesBE:()=>O2,utf8ToBytes:()=>U2,validateObject:()=>Gn});var _g=BigInt(0),Pa=BigInt(1),I2=BigInt(2),Ia=e=>e instanceof Uint8Array,N2=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Io(e){if(!Ia(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=N2[e[r]];return t}function Eg(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Dl(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function No(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let o=n*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[n]=a}return r}function Rt(e){return Dl(Io(e))}function Na(e){if(!Ia(e))throw new Error("Uint8Array expected");return Dl(Io(Uint8Array.from(e).reverse()))}function Br(e,t){return No(e.toString(16).padStart(t*2,"0"))}function Oa(e,t){return Br(e,t).reverse()}function O2(e){return No(Eg(e))}function kt(e,t,r){let n;if(typeof t=="string")try{n=No(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(Ia(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}function hn(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!Ia(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function R2(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function U2(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function z2(e){let t;for(t=0;e>_g;e>>=Pa,t+=1);return t}function M2(e,t){return e>>BigInt(t)&Pa}var D2=(e,t,r)=>e|(r?Pa:_g)<<BigInt(t),os=e=>(I2<<BigInt(e-1))-Pa,Ml=e=>new Uint8Array(e),vg=e=>Uint8Array.from(e);function Fl(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=Ml(e),o=Ml(e),i=0,a=()=>{n.fill(1),o.fill(0),i=0},u=(...m)=>r(o,n,...m),d=(m=Ml())=>{o=u(vg([0]),m),n=u(),m.length!==0&&(o=u(vg([1]),m),n=u())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let m=0,_=[];for(;m<t;){n=u();let A=n.slice();_.push(A),m+=n.length}return hn(..._)};return(m,_)=>{a(),d(m);let A;for(;!(A=_(h()));)d();return a(),A}}var F2={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Gn(e,t,r={}){let n=(o,i,a)=>{let u=F2[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);let d=e[o];if(!(a&&d===void 0)&&!u(d,e))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${i}`)};for(let[o,i]of Object.entries(t))n(o,i,!1);for(let[o,i]of Object.entries(r))n(o,i,!0);return e}var At=BigInt(0),ut=BigInt(1),Oo=BigInt(2),j2=BigInt(3),Hl=BigInt(4),xg=BigInt(5),kg=BigInt(8),H2=BigInt(9),V2=BigInt(16);function St(e,t){let r=e%t;return r>=At?r:t+r}function q2(e,t,r){if(r<=At||t<At)throw new Error("Expected power/modulo > 0");if(r===ut)return At;let n=ut;for(;t>At;)t&ut&&(n=n*e%r),e=e*e%r,t>>=ut;return n}function ar(e,t,r){let n=e;for(;t-- >At;)n*=n,n%=r;return n}function Ra(e,t){if(e===At||t<=At)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=St(e,t),n=t,o=At,i=ut,a=ut,u=At;for(;r!==At;){let h=n/r,b=n%r,m=o-a*h,_=i-u*h;n=r,r=b,o=a,i=u,a=m,u=_}if(n!==ut)throw new Error("invert: does not exist");return St(o,t)}function W2(e){let t=(e-ut)/Oo,r,n,o;for(r=e-ut,n=0;r%Oo===At;r/=Oo,n++);for(o=Oo;o<e&&q2(o,t,e)!==e-ut;o++);if(n===1){let a=(e+ut)/Hl;return function(d,h){let b=d.pow(h,a);if(!d.eql(d.sqr(b),h))throw new Error("Cannot find square root");return b}}let i=(r+ut)/Oo;return function(u,d){if(u.pow(d,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=n,b=u.pow(u.mul(u.ONE,o),r),m=u.pow(d,i),_=u.pow(d,r);for(;!u.eql(_,u.ONE);){if(u.eql(_,u.ZERO))return u.ZERO;let A=1;for(let k=u.sqr(_);A<h&&!u.eql(k,u.ONE);A++)k=u.sqr(k);let C=u.pow(b,ut<<BigInt(h-A-1));b=u.sqr(C),m=u.mul(m,C),_=u.mul(_,b),h=A}return m}}function Q2(e){if(e%Hl===j2){let t=(e+ut)/Hl;return function(n,o){let i=n.pow(o,t);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%kg===xg){let t=(e-xg)/kg;return function(n,o){let i=n.mul(o,Oo),a=n.pow(i,t),u=n.mul(o,a),d=n.mul(n.mul(u,Oo),a),h=n.mul(u,n.sub(d,n.ONE));if(!n.eql(n.sqr(h),o))throw new Error("Cannot find square root");return h}}return e%V2,W2(e)}var K2=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Vl(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=K2.reduce((n,o)=>(n[o]="function",n),t);return Gn(e,r)}function G2(e,t,r){if(r<At)throw new Error("Expected power > 0");if(r===At)return e.ONE;if(r===ut)return t;let n=e.ONE,o=t;for(;r>At;)r&ut&&(n=e.mul(n,o)),o=e.sqr(o),r>>=ut;return n}function Z2(e,t){let r=new Array(t.length),n=t.reduce((i,a,u)=>e.is0(a)?i:(r[u]=i,e.mul(i,a)),e.ONE),o=e.inv(n);return t.reduceRight((i,a,u)=>e.is0(a)?i:(r[u]=e.mul(i,r[u]),e.mul(i,a)),o),r}function ql(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Sg(e,t,r=!1,n={}){if(e<=At)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=ql(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=Q2(e),u=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:os(o),ZERO:At,ONE:ut,create:d=>St(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return At<=d&&d<e},is0:d=>d===At,isOdd:d=>(d&ut)===ut,neg:d=>St(-d,e),eql:(d,h)=>d===h,sqr:d=>St(d*d,e),add:(d,h)=>St(d+h,e),sub:(d,h)=>St(d-h,e),mul:(d,h)=>St(d*h,e),pow:(d,h)=>G2(u,d,h),div:(d,h)=>St(d*Ra(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>Ra(d,e),sqrt:n.sqrt||(d=>a(u,d)),invertBatch:d=>Z2(u,d),cmov:(d,h,b)=>b?h:d,toBytes:d=>r?Oa(d,i):Br(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return r?Na(d):Rt(d)}});return Object.freeze(u)}function Ag(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Wl(e){let t=Ag(e);return t+Math.ceil(t/2)}function Tg(e,t,r=!1){let n=e.length,o=Ag(t),i=Wl(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let a=r?Rt(e):Na(e),u=St(a,t-ut)+ut;return r?Oa(u,o):Br(u,o)}var J2=BigInt(0),Ql=BigInt(1);function $g(e,t){let r=(o,i)=>{let a=i.negate();return o?a:i},n=o=>{let i=Math.ceil(t/o)+1,a=2**(o-1);return{windows:i,windowSize:a}};return{constTimeNegate:r,unsafeLadder(o,i){let a=e.ZERO,u=o;for(;i>J2;)i&Ql&&(a=a.add(u)),u=u.double(),i>>=Ql;return a},precomputeWindow(o,i){let{windows:a,windowSize:u}=n(i),d=[],h=o,b=h;for(let m=0;m<a;m++){b=h,d.push(b);for(let _=1;_<u;_++)b=b.add(h),d.push(b);h=b.double()}return d},wNAF(o,i,a){let{windows:u,windowSize:d}=n(o),h=e.ZERO,b=e.BASE,m=BigInt(2**o-1),_=2**o,A=BigInt(o);for(let C=0;C<u;C++){let k=C*d,N=Number(a&m);a>>=A,N>d&&(N-=_,a+=Ql);let R=k,B=k+Math.abs(N)-1,f=C%2!==0,p=N<0;N===0?b=b.add(r(f,i[R])):h=h.add(r(p,i[B]))}return{p:h,f:b}},wNAFCached(o,i,a,u){let d=o._WINDOW_SIZE||1,h=i.get(o);return h||(h=this.precomputeWindow(o,d),d!==1&&i.set(o,u(h))),this.wNAF(d,h,a)}}}function Kl(e){return Vl(e.Fp),Gn(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...ql(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function X2(e){let t=Kl(e);Gn(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:e3,hexToBytes:t3}=jl,Ro={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Ro;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:e3(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Ro,r=typeof e=="string"?t3(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=Ro._parseInt(r.subarray(2)),{d:a,l:u}=Ro._parseInt(i);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(e){let t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,r=h=>{let b=h.toString(16);return b.length&1?`0${b}`:b},n=t(r(e.s)),o=t(r(e.r)),i=n.length/2,a=o.length/2,u=r(i),d=r(a);return`30${r(a+i+4)}02${d}${o}02${u}${n}`}},pn=BigInt(0),hr=BigInt(1),i7=BigInt(2),Bg=BigInt(3),s7=BigInt(4);function r3(e){let t=X2(e),{Fp:r}=t,n=t.toBytes||((C,k,N)=>{let R=k.toAffine();return hn(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),o=t.fromBytes||(C=>{let k=C.subarray(1),N=r.fromBytes(k.subarray(0,r.BYTES)),R=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:N,y:R}});function i(C){let{a:k,b:N}=t,R=r.sqr(C),B=r.mul(R,C);return r.add(r.add(B,r.mul(C,k)),N)}if(!r.eql(r.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(C){return typeof C=="bigint"&&pn<C&&C<t.n}function u(C){if(!a(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(C){let{allowedPrivateKeyLengths:k,nByteLength:N,wrapPrivateKey:R,n:B}=t;if(k&&typeof C!="bigint"){if(C instanceof Uint8Array&&(C=Io(C)),typeof C!="string"||!k.includes(C.length))throw new Error("Invalid key");C=C.padStart(N*2,"0")}let f;try{f=typeof C=="bigint"?C:Rt(kt("private key",C,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof C}`)}return R&&(f=St(f,B)),u(f),f}let h=new Map;function b(C){if(!(C instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(k,N,R){if(this.px=k,this.py=N,this.pz=R,k==null||!r.isValid(k))throw new Error("x required");if(N==null||!r.isValid(N))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required")}static fromAffine(k){let{x:N,y:R}=k||{};if(!k||!r.isValid(N)||!r.isValid(R))throw new Error("invalid affine point");if(k instanceof m)throw new Error("projective point not allowed");let B=f=>r.eql(f,r.ZERO);return B(N)&&B(R)?m.ZERO:new m(N,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){let N=r.invertBatch(k.map(R=>R.pz));return k.map((R,B)=>R.toAffine(N[B])).map(m.fromAffine)}static fromHex(k){let N=m.fromAffine(o(kt("pointHex",k)));return N.assertValidity(),N}static fromPrivateKey(k){return m.BASE.multiply(d(k))}_setWindowSize(k){this._WINDOW_SIZE=k,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:k,y:N}=this.toAffine();if(!r.isValid(k)||!r.isValid(N))throw new Error("bad point: x or y not FE");let R=r.sqr(N),B=i(k);if(!r.eql(R,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:k}=this.toAffine();if(r.isOdd)return!r.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){b(k);let{px:N,py:R,pz:B}=this,{px:f,py:p,pz:w}=k,v=r.eql(r.mul(N,w),r.mul(f,B)),S=r.eql(r.mul(R,w),r.mul(p,B));return v&&S}negate(){return new m(this.px,r.neg(this.py),this.pz)}double(){let{a:k,b:N}=t,R=r.mul(N,Bg),{px:B,py:f,pz:p}=this,w=r.ZERO,v=r.ZERO,S=r.ZERO,T=r.mul(B,B),I=r.mul(f,f),M=r.mul(p,p),P=r.mul(B,f);return P=r.add(P,P),S=r.mul(B,p),S=r.add(S,S),w=r.mul(k,S),v=r.mul(R,M),v=r.add(w,v),w=r.sub(I,v),v=r.add(I,v),v=r.mul(w,v),w=r.mul(P,w),S=r.mul(R,S),M=r.mul(k,M),P=r.sub(T,M),P=r.mul(k,P),P=r.add(P,S),S=r.add(T,T),T=r.add(S,T),T=r.add(T,M),T=r.mul(T,P),v=r.add(v,T),M=r.mul(f,p),M=r.add(M,M),T=r.mul(M,P),w=r.sub(w,T),S=r.mul(M,I),S=r.add(S,S),S=r.add(S,S),new m(w,v,S)}add(k){b(k);let{px:N,py:R,pz:B}=this,{px:f,py:p,pz:w}=k,v=r.ZERO,S=r.ZERO,T=r.ZERO,I=t.a,M=r.mul(t.b,Bg),P=r.mul(N,f),$=r.mul(R,p),F=r.mul(B,w),q=r.add(N,R),x=r.add(f,p);q=r.mul(q,x),x=r.add(P,$),q=r.sub(q,x),x=r.add(N,B);let z=r.add(f,w);return x=r.mul(x,z),z=r.add(P,F),x=r.sub(x,z),z=r.add(R,B),v=r.add(p,w),z=r.mul(z,v),v=r.add($,F),z=r.sub(z,v),T=r.mul(I,x),v=r.mul(M,F),T=r.add(v,T),v=r.sub($,T),T=r.add($,T),S=r.mul(v,T),$=r.add(P,P),$=r.add($,P),F=r.mul(I,F),x=r.mul(M,x),$=r.add($,F),F=r.sub(P,F),F=r.mul(I,F),x=r.add(x,F),P=r.mul($,x),S=r.add(S,P),P=r.mul(z,x),v=r.mul(q,v),v=r.sub(v,P),P=r.mul(q,$),T=r.mul(z,T),T=r.add(T,P),new m(v,S,T)}subtract(k){return this.add(k.negate())}is0(){return this.equals(m.ZERO)}wNAF(k){return A.wNAFCached(this,h,k,N=>{let R=r.invertBatch(N.map(B=>B.pz));return N.map((B,f)=>B.toAffine(R[f])).map(m.fromAffine)})}multiplyUnsafe(k){let N=m.ZERO;if(k===pn)return N;if(u(k),k===hr)return this;let{endo:R}=t;if(!R)return A.unsafeLadder(this,k);let{k1neg:B,k1:f,k2neg:p,k2:w}=R.splitScalar(k),v=N,S=N,T=this;for(;f>pn||w>pn;)f&hr&&(v=v.add(T)),w&hr&&(S=S.add(T)),T=T.double(),f>>=hr,w>>=hr;return B&&(v=v.negate()),p&&(S=S.negate()),S=new m(r.mul(S.px,R.beta),S.py,S.pz),v.add(S)}multiply(k){u(k);let N=k,R,B,{endo:f}=t;if(f){let{k1neg:p,k1:w,k2neg:v,k2:S}=f.splitScalar(N),{p:T,f:I}=this.wNAF(w),{p:M,f:P}=this.wNAF(S);T=A.constTimeNegate(p,T),M=A.constTimeNegate(v,M),M=new m(r.mul(M.px,f.beta),M.py,M.pz),R=T.add(M),B=I.add(P)}else{let{p,f:w}=this.wNAF(N);R=p,B=w}return m.normalizeZ([R,B])[0]}multiplyAndAddUnsafe(k,N,R){let B=m.BASE,f=(w,v)=>v===pn||v===hr||!w.equals(B)?w.multiplyUnsafe(v):w.multiply(v),p=f(this,N).add(f(k,R));return p.is0()?void 0:p}toAffine(k){let{px:N,py:R,pz:B}=this,f=this.is0();k==null&&(k=f?r.ONE:r.inv(B));let p=r.mul(N,k),w=r.mul(R,k),v=r.mul(B,k);if(f)return{x:r.ZERO,y:r.ZERO};if(!r.eql(v,r.ONE))throw new Error("invZ was invalid");return{x:p,y:w}}isTorsionFree(){let{h:k,isTorsionFree:N}=t;if(k===hr)return!0;if(N)return N(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:k,clearCofactor:N}=t;return k===hr?this:N?N(m,this):this.multiplyUnsafe(t.h)}toRawBytes(k=!0){return this.assertValidity(),n(m,this,k)}toHex(k=!0){return Io(this.toRawBytes(k))}}m.BASE=new m(t.Gx,t.Gy,r.ONE),m.ZERO=new m(r.ZERO,r.ONE,r.ZERO);let _=t.nBitLength,A=$g(m,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:m,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:a}}function n3(e){let t=Kl(e);return Gn(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function Lg(e){let t=n3(e),{Fp:r,n}=t,o=r.BYTES+1,i=2*r.BYTES+1;function a(x){return pn<x&&x<r.ORDER}function u(x){return St(x,n)}function d(x){return Ra(x,n)}let{ProjectivePoint:h,normPrivateKeyToScalar:b,weierstrassEquation:m,isWithinCurveOrder:_}=r3({...t,toBytes(x,z,V){let K=z.toAffine(),Z=r.toBytes(K.x),W=hn;return V?W(Uint8Array.from([z.hasEvenY()?2:3]),Z):W(Uint8Array.from([4]),Z,r.toBytes(K.y))},fromBytes(x){let z=x.length,V=x[0],K=x.subarray(1);if(z===o&&(V===2||V===3)){let Z=Rt(K);if(!a(Z))throw new Error("Point is not on curve");let W=m(Z),J=r.sqrt(W),le=(J&hr)===hr;return(V&1)===1!==le&&(J=r.neg(J)),{x:Z,y:J}}else if(z===i&&V===4){let Z=r.fromBytes(K.subarray(0,r.BYTES)),W=r.fromBytes(K.subarray(r.BYTES,2*r.BYTES));return{x:Z,y:W}}else throw new Error(`Point of length ${z} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),A=x=>Io(Br(x,t.nByteLength));function C(x){let z=n>>hr;return x>z}function k(x){return C(x)?u(-x):x}let N=(x,z,V)=>Rt(x.slice(z,V));class R{constructor(z,V,K){this.r=z,this.s=V,this.recovery=K,this.assertValidity()}static fromCompact(z){let V=t.nByteLength;return z=kt("compactSignature",z,V*2),new R(N(z,0,V),N(z,V,2*V))}static fromDER(z){let{r:V,s:K}=Ro.toSig(kt("DER",z));return new R(V,K)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new R(this.r,this.s,z)}recoverPublicKey(z){let{r:V,s:K,recovery:Z}=this,W=S(kt("msgHash",z));if(Z==null||![0,1,2,3].includes(Z))throw new Error("recovery id invalid");let J=Z===2||Z===3?V+t.n:V;if(J>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let le=(Z&1)===0?"02":"03",_e=h.fromHex(le+A(J)),ve=d(J),Ie=u(-W*ve),ie=u(K*ve),Se=h.BASE.multiplyAndAddUnsafe(_e,Ie,ie);if(!Se)throw new Error("point at infinify");return Se.assertValidity(),Se}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return No(this.toDERHex())}toDERHex(){return Ro.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return No(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}let B={isValidPrivateKey(x){try{return b(x),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{let x=Wl(t.n);return Tg(t.randomBytes(x),t.n)},precompute(x=8,z=h.BASE){return z._setWindowSize(x),z.multiply(BigInt(3)),z}};function f(x,z=!0){return h.fromPrivateKey(x).toRawBytes(z)}function p(x){let z=x instanceof Uint8Array,V=typeof x=="string",K=(z||V)&&x.length;return z?K===o||K===i:V?K===2*o||K===2*i:x instanceof h}function w(x,z,V=!0){if(p(x))throw new Error("first arg must be private key");if(!p(z))throw new Error("second arg must be public key");return h.fromHex(z).multiply(b(x)).toRawBytes(V)}let v=t.bits2int||function(x){let z=Rt(x),V=x.length*8-t.nBitLength;return V>0?z>>BigInt(V):z},S=t.bits2int_modN||function(x){return u(v(x))},T=os(t.nBitLength);function I(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(pn<=x&&x<T))throw new Error(`bigint expected < 2^${t.nBitLength}`);return Br(x,t.nByteLength)}function M(x,z,V=P){if(["recovered","canonical"].some(Re=>Re in V))throw new Error("sign() legacy options not supported");let{hash:K,randomBytes:Z}=t,{lowS:W,prehash:J,extraEntropy:le}=V;W==null&&(W=!0),x=kt("msgHash",x),J&&(x=kt("prehashed msgHash",K(x)));let _e=S(x),ve=b(z),Ie=[I(ve),I(_e)];if(le!=null){let Re=le===!0?Z(r.BYTES):le;Ie.push(kt("extraEntropy",Re))}let ie=hn(...Ie),Se=_e;function Ve(Re){let je=v(Re);if(!_(je))return;let Et=d(je),Qe=h.BASE.multiply(je).toAffine(),he=u(Qe.x);if(he===pn)return;let Me=u(Et*u(Se+he*ve));if(Me===pn)return;let Ce=(Qe.x===he?0:2)|Number(Qe.y&hr),Ne=Me;return W&&C(Me)&&(Ne=k(Me),Ce^=1),new R(he,Ne,Ce)}return{seed:ie,k2sig:Ve}}let P={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function F(x,z,V=P){let{seed:K,k2sig:Z}=M(x,z,V),W=t;return Fl(W.hash.outputLen,W.nByteLength,W.hmac)(K,Z)}h.BASE._setWindowSize(8);function q(x,z,V,K=$){let Z=x;if(z=kt("msgHash",z),V=kt("publicKey",V),"strict"in K)throw new Error("options.strict was renamed to lowS");let{lowS:W,prehash:J}=K,le,_e;try{if(typeof Z=="string"||Z instanceof Uint8Array)try{le=R.fromDER(Z)}catch(Qe){if(!(Qe instanceof Ro.Err))throw Qe;le=R.fromCompact(Z)}else if(typeof Z=="object"&&typeof Z.r=="bigint"&&typeof Z.s=="bigint"){let{r:Qe,s:he}=Z;le=new R(Qe,he)}else throw new Error("PARSE");_e=h.fromHex(V)}catch(Qe){if(Qe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(W&&le.hasHighS())return!1;J&&(z=t.hash(z));let{r:ve,s:Ie}=le,ie=S(z),Se=d(Ie),Ve=u(ie*Se),Re=u(ve*Se),je=h.BASE.multiplyAndAddUnsafe(_e,Ve,Re)?.toAffine();return je?u(je.x)===ve:!1}return{CURVE:t,getPublicKey:f,getSharedSecret:w,sign:F,verify:q,ProjectivePoint:h,Signature:R,utils:B}}var Ua=class extends ui{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,gg(t);let n=ns(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?t.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return ci(this),this.iHash.update(t),this}digestInto(t){ci(this),Ul(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Gl=(e,t,r)=>new Ua(e,t).update(r).digest();Gl.create=(e,t)=>new Ua(e,t);function o3(e){return{hash:e,hmac:(t,...r)=>Gl(e,t,wg(...r)),randomBytes:Ba}}function Cg(e,t){let r=n=>Lg({...e,...o3(n)});return Object.freeze({...r(t),create:r})}var Fa=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),za=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Ng=BigInt(1),Ma=BigInt(2),Pg=(e,t)=>(e+t/Ma)/t;function Og(e){let t=Fa,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),d=BigInt(88),h=e*e*e%t,b=h*h*e%t,m=ar(b,r,t)*b%t,_=ar(m,r,t)*b%t,A=ar(_,Ma,t)*h%t,C=ar(A,o,t)*A%t,k=ar(C,i,t)*C%t,N=ar(k,u,t)*k%t,R=ar(N,d,t)*N%t,B=ar(R,u,t)*k%t,f=ar(B,r,t)*b%t,p=ar(f,a,t)*C%t,w=ar(p,n,t)*h%t,v=ar(w,Ma,t);if(!Yl.eql(Yl.sqr(v),e))throw new Error("Cannot find square root");return v}var Yl=Sg(Fa,void 0,void 0,{sqrt:Og}),ed=Cg({a:BigInt(0),b:BigInt(7),Fp:Yl,n:za,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=za,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Ng*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,a=BigInt("0x100000000000000000000000000000000"),u=Pg(i*e,t),d=Pg(-n*e,t),h=St(e-u*r-d*o,t),b=St(-u*n-d*i,t),m=h>a,_=b>a;if(m&&(h=t-h),_&&(b=t-b),h>a||b>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:h,k2neg:_,k2:b}}}},Ca),ja=BigInt(0),Rg=e=>typeof e=="bigint"&&ja<e&&e<Fa,i3=e=>typeof e=="bigint"&&ja<e&&e<za,Ig={};function Da(e,...t){let r=Ig[e];if(r===void 0){let n=Ca(Uint8Array.from(e,o=>o.charCodeAt(0)));r=hn(n,n),Ig[e]=r}return Ca(hn(r,...t))}var td=e=>e.toRawBytes(!0).slice(1),Jl=e=>Br(e,32),Zl=e=>St(e,Fa),is=e=>St(e,za),rd=ed.ProjectivePoint,s3=(e,t,r)=>rd.BASE.multiplyAndAddUnsafe(e,t,r);function Xl(e){let t=ed.utils.normPrivateKeyToScalar(e),r=rd.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:is(-t),bytes:td(r)}}function Ug(e){if(!Rg(e))throw new Error("bad x: need 0 < x < p");let t=Zl(e*e),r=Zl(t*e+BigInt(7)),n=Og(r);n%Ma!==ja&&(n=Zl(-n));let o=new rd(e,n,Ng);return o.assertValidity(),o}function zg(...e){return is(Rt(Da("BIP0340/challenge",...e)))}function a3(e){return Xl(e).bytes}function c3(e,t,r=Ba(32)){let n=kt("message",e),{bytes:o,scalar:i}=Xl(t),a=kt("auxRand",r,32),u=Jl(i^Rt(Da("BIP0340/aux",a))),d=Da("BIP0340/nonce",u,o,n),h=is(Rt(d));if(h===ja)throw new Error("sign failed: k is zero");let{bytes:b,scalar:m}=Xl(h),_=zg(b,o,n),A=new Uint8Array(64);if(A.set(b,0),A.set(Jl(is(m+_*i)),32),!Mg(A,n,o))throw new Error("sign: Invalid signature produced");return A}function Mg(e,t,r){let n=kt("signature",e,64),o=kt("message",t),i=kt("publicKey",r,32);try{let a=Ug(Rt(i)),u=Rt(n.subarray(0,32));if(!Rg(u))return!1;let d=Rt(n.subarray(32,64));if(!i3(d))return!1;let h=zg(Jl(u),td(a),o),b=s3(a,d,is(-h));return!(!b||!b.hasEvenY()||b.toAffine().x!==u)}catch{return!1}}var pr={getPublicKey:a3,sign:c3,verify:Mg,utils:{randomPrivateKey:ed.utils.randomPrivateKey,lift_x:Ug,pointToBytes:td,numberToBytesBE:Br,bytesToNumberBE:Rt,taggedHash:Da,mod:St}};var gn=Symbol("verified"),u3=e=>e instanceof Object;function nd(e){if(!u3(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let n=0;n<r.length;n++)if(typeof r[n]=="object")return!1}return!0}function od(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function l3(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Dg(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function d3(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");od(e.outputLen),od(e.blockLen)}function f3(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function h3(e,t){Dg(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var p3={number:od,bool:l3,bytes:Dg,hash:d3,exists:f3,output:h3},Ha=p3;function g3(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),a=Number(r>>o&i),u=Number(r&i),d=n?4:0,h=n?0:4;e.setUint32(t+d,a,n),e.setUint32(t+h,u,n)}var Va=class extends ya{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=va(this.buffer)}update(t){Ha.exists(this);let{view:r,buffer:n,blockLen:o}=this;t=Al(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=va(t);for(;o<=i-a;a+=o)this.process(d,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Ha.exists(this),Ha.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let m=a;m<o;m++)r[m]=0;g3(n,o-8,BigInt(this.length*8),i),this.process(n,0);let u=va(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,b=this.get();if(h>b.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)u.setUint32(4*m,b[m],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%r&&t.buffer.set(n),t}};var m3=(e,t,r)=>e&t^~e&r,b3=(e,t,r)=>e&t^e&r^t&r,w3=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Zn=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Yn=new Uint32Array(64),qa=class extends Va{constructor(){super(64,32,8,!1),this.A=Zn[0]|0,this.B=Zn[1]|0,this.C=Zn[2]|0,this.D=Zn[3]|0,this.E=Zn[4]|0,this.F=Zn[5]|0,this.G=Zn[6]|0,this.H=Zn[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:a,G:u,H:d}=this;return[t,r,n,o,i,a,u,d]}set(t,r,n,o,i,a,u,d){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,r){for(let m=0;m<16;m++,r+=4)Yn[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){let _=Yn[m-15],A=Yn[m-2],C=Tr(_,7)^Tr(_,18)^_>>>3,k=Tr(A,17)^Tr(A,19)^A>>>10;Yn[m]=k+Yn[m-7]+C+Yn[m-16]|0}let{A:n,B:o,C:i,D:a,E:u,F:d,G:h,H:b}=this;for(let m=0;m<64;m++){let _=Tr(u,6)^Tr(u,11)^Tr(u,25),A=b+_+m3(u,d,h)+w3[m]+Yn[m]|0,k=(Tr(n,2)^Tr(n,13)^Tr(n,22))+b3(n,o,i)|0;b=h,h=d,d=u,u=a+A|0,a=i,i=o,o=n,n=A+k|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,b=b+this.H|0,this.set(n,o,i,a,u,d,h,b)}roundClean(){Yn.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},id=class extends qa{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},Wa=$l(()=>new qa),$7=$l(()=>new id);var ad=class{generateSecretKey(){return pr.utils.randomPrivateKey()}getPublicKey(t){return xt(pr.getPublicKey(t))}finalizeEvent(t,r){let n=t;return n.pubkey=xt(pr.getPublicKey(r)),n.id=sd(n),n.sig=xt(pr.sign(sd(n),r)),n[gn]=!0,n}verifyEvent(t){if(typeof t[gn]=="boolean")return t[gn];let r=sd(t);if(r!==t.id)return t[gn]=!1,!1;try{let n=pr.verify(t.sig,r,t.pubkey);return t[gn]=n,n}catch{return t[gn]=!1,!1}}};function y3(e){if(!nd(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function sd(e){let t=Wa(Nl.encode(y3(e)));return xt(t)}var Qa=new ad,O7=Qa.generateSecretKey,R7=Qa.getPublicKey,U7=Qa.finalizeEvent,Fg=Qa.verifyEvent;var jg=22242;function v3(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1)return!1;for(let r in e)if(r[0]==="#"){let n=r.slice(1),o=e[`#${n}`];if(o&&!t.tags.find(([i,a])=>i===r.slice(1)&&o.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Hg(e,t){for(let r=0;r<e.length;r++)if(v3(e[r],t))return!0;return!1}function Vg(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,o=e.slice(n).indexOf('"')+n+1;return e.slice(o,o+64)}function qg(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let r=e.slice(t+7+1).indexOf('"');if(r===-1)return null;let n=t+7+1+r,o=e.slice(n+1,80).indexOf('"');if(o===-1)return null;let i=n+1+o;return e.slice(n+1,i)}function Wg(e,t){return{kind:jg,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function Qg(){return new Promise(e=>{let t=new MessageChannel,r=()=>{t.port1.removeEventListener("message",r),e()};t.port1.addEventListener("message",r),t.port2.postMessage(0),t.port1.start()})}var Kg=e=>(e[gn]=!0,!0);var Ka=class e{url;_connected=!1;onclose=null;onnotice=t=>console.debug(`NOTICE from ${this.url}: ${t}`);_onauth=null;baseEoseTimeout=4400;connectionTimeout=4400;publishTimeout=4400;openSubs=new Map;connectionTimeoutHandle;connectionPromise;openCountRequests=new Map;openEventPublishes=new Map;ws;incomingMessageQueue=new xa;queueRunning=!1;challenge;authPromise;serial=0;verifyEvent;_WebSocket;constructor(t,r){this.url=Wn(t),this.verifyEvent=r.verifyEvent,this._WebSocket=r.websocketImplementation||WebSocket}static async connect(t,r){let n=new e(t,r);return await n.connect(),n}closeAllSubscriptions(t){for(let[r,n]of this.openSubs)n.close(t);this.openSubs.clear();for(let[r,n]of this.openEventPublishes)n.reject(new Error(t));this.openEventPublishes.clear();for(let[r,n]of this.openCountRequests)n.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.authPromise=void 0,this.connectionPromise=new Promise((t,r)=>{this.connectionTimeoutHandle=setTimeout(()=>{r("connection timed out"),this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new this._WebSocket(this.url)}catch(n){r(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=n=>{r(n.message||"websocket error"),this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{this._connected&&(this._connected=!1,this.connectionPromise=void 0,this.onclose?.(),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await Qg();this.queueRunning=!1}handleNext(){let t=this.incomingMessageQueue.dequeue();if(!t)return!1;let r=qg(t);if(r){let n=this.openSubs.get(r);if(!n)return;let o=Vg(t,"id"),i=n.alreadyHaveEvent?.(o);if(n.receivedEvent?.(this,o),i)return}try{let n=JSON.parse(t);switch(n[0]){case"EVENT":{let o=this.openSubs.get(n[1]),i=n[2];this.verifyEvent(i)&&Hg(o.filters,i)&&o.onevent(i);return}case"COUNT":{let o=n[1],i=n[2],a=this.openCountRequests.get(o);a&&(a.resolve(i.count),this.openCountRequests.delete(o));return}case"EOSE":{let o=this.openSubs.get(n[1]);if(!o)return;o.receivedEose();return}case"OK":{let o=n[1],i=n[2],a=n[3],u=this.openEventPublishes.get(o);u&&(clearTimeout(u.timeout),i?u.resolve(a):u.reject(new Error(a)),this.openEventPublishes.delete(o));return}case"CLOSED":{let o=n[1],i=this.openSubs.get(o);if(!i)return;i.closed=!0,i.close(n[2]);return}case"NOTICE":this.onnotice(n[1]);return;case"AUTH":{this.challenge=n[1],this.authPromise=void 0,this._onauth?.(n[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{this.ws?.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");if(this.authPromise)return this.authPromise;let r=await t(Wg(this.url,this.challenge));return this.authPromise=new Promise((n,o)=>{let i=setTimeout(()=>{let a=this.openEventPublishes.get(r.id);a&&(a.reject(new Error("auth timed out")),this.openEventPublishes.delete(r.id))},this.publishTimeout);this.openEventPublishes.set(r.id,{resolve:n,reject:o,timeout:i})}),this.send('["AUTH",'+JSON.stringify(r)+"]"),this.authPromise}async publish(t){let r=new Promise((n,o)=>{let i=setTimeout(()=>{let a=this.openEventPublishes.get(t.id);a&&(a.reject(new Error("publish timed out")),this.openEventPublishes.delete(t.id))},this.publishTimeout);this.openEventPublishes.set(t.id,{resolve:n,reject:o,timeout:i})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),r}async count(t,r){this.serial++;let n=r?.id||"count:"+this.serial,o=new Promise((i,a)=>{this.openCountRequests.set(n,{resolve:i,reject:a})});return this.send('["COUNT","'+n+'",'+JSON.stringify(t).substring(1)),o}subscribe(t,r){let n=this.prepareSubscription(t,r);return n.fire(),n}prepareSubscription(t,r){this.serial++;let n=r.id||(r.label?r.label+":":"sub:")+this.serial,o=new cd(this,n,t,r);return this.openSubs.set(n,o),o}close(){this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,this.ws?.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},cd=class{relay;id;closed=!1;eosed=!1;filters;alreadyHaveEvent;receivedEvent;onevent;oneose;onclose;eoseTimeout;eoseTimeoutHandle;constructor(t,r,n,o){this.relay=t,this.filters=n,this.id=r,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(i=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,i)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,this.oneose?.())}close(t="closed by caller"){!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),this.onclose?.(t)}};var Ga=class{relays=new Map;seenOn=new Map;trackRelays=!1;verifyEvent;trustedRelayURLs=new Set;_WebSocket;constructor(t){this.verifyEvent=t.verifyEvent,this._WebSocket=t.websocketImplementation}async ensureRelay(t,r){t=Wn(t);let n=this.relays.get(t);return n||(n=new Ka(t,{verifyEvent:this.trustedRelayURLs.has(t)?Kg:this.verifyEvent,websocketImplementation:this._WebSocket}),r?.connectionTimeout&&(n.connectionTimeout=r.connectionTimeout),this.relays.set(t,n)),await n.connect(),n}close(t){t.map(Wn).forEach(r=>{this.relays.get(r)?.close()})}subscribe(t,r,n){return this.subscribeMap(t.map(o=>({url:o,filter:r})),n)}subscribeMany(t,r,n){return this.subscribeMap(t.flatMap(o=>r.map(i=>({url:o,filter:i}))),n)}subscribeMap(t,r){this.trackRelays&&(r.receivedEvent=(m,_)=>{let A=this.seenOn.get(_);A||(A=new Set,this.seenOn.set(_,A)),A.add(m)});let n=new Set,o=[],i=[],a=m=>{i[m]||(i[m]=!0,i.filter(_=>_).length===t.length&&(r.oneose?.(),a=()=>{}))},u=[],d=(m,_)=>{u[m]||(a(m),u[m]=_,u.filter(A=>A).length===t.length&&(r.onclose?.(u),d=()=>{}))},h=m=>{if(r.alreadyHaveEvent?.(m))return!0;let _=n.has(m);return n.add(m),_},b=Promise.all(t.map(async({url:m,filter:_},A)=>{m=Wn(m);let C;try{C=await this.ensureRelay(m,{connectionTimeout:r.maxWait?Math.max(r.maxWait*.8,r.maxWait-1e3):void 0})}catch(N){d(A,N?.message||String(N));return}let k=C.subscribe([_],{...r,oneose:()=>a(A),onclose:N=>{N.startsWith("auth-required:")&&r.doauth?C.auth(r.doauth).then(()=>{C.subscribe([_],{...r,oneose:()=>a(A),onclose:R=>{d(A,R)},alreadyHaveEvent:h,eoseTimeout:r.maxWait})}).catch(R=>{d(A,`auth was required and attempted, but failed with: ${R}`)}):d(A,N)},alreadyHaveEvent:h,eoseTimeout:r.maxWait});o.push(k)}));return{async close(){await b,o.forEach(m=>{m.close()})}}}subscribeManyMap(t,r){this.trackRelays&&(r.receivedEvent=(_,A)=>{let C=this.seenOn.get(A);C||(C=new Set,this.seenOn.set(A,C)),C.add(_)});let n=new Set,o=[],i=Object.keys(t).length,a=[],u=_=>{a[_]||(a[_]=!0,a.filter(A=>A).length===i&&(r.oneose?.(),u=()=>{}))},d=[],h=(_,A)=>{d[_]||(u(_),d[_]=A,d.filter(C=>C).length===i&&(r.onclose?.(d),h=()=>{}))},b=_=>{if(r.alreadyHaveEvent?.(_))return!0;let A=n.has(_);return n.add(_),A},m=Promise.all(Object.entries(t).map(async(_,A,C)=>{if(C.indexOf(_)!==A){h(A,"duplicate url");return}let[k,N]=_;k=Wn(k);let R;try{R=await this.ensureRelay(k,{connectionTimeout:r.maxWait?Math.max(r.maxWait*.8,r.maxWait-1e3):void 0})}catch(f){h(A,f?.message||String(f));return}let B=R.subscribe(N,{...r,oneose:()=>u(A),onclose:f=>{f.startsWith("auth-required:")&&r.doauth?R.auth(r.doauth).then(()=>{R.subscribe(N,{...r,oneose:()=>u(A),onclose:p=>{h(A,p)},alreadyHaveEvent:b,eoseTimeout:r.maxWait})}).catch(p=>{h(A,`auth was required and attempted, but failed with: ${p}`)}):h(A,f)},alreadyHaveEvent:b,eoseTimeout:r.maxWait});o.push(B)}));return{async close(){await m,o.forEach(_=>{_.close()})}}}subscribeEose(t,r,n){let o=this.subscribe(t,r,{...n,oneose(){o.close()}});return o}subscribeManyEose(t,r,n){let o=this.subscribeMany(t,r,{...n,oneose(){o.close()}});return o}async querySync(t,r,n){return new Promise(async o=>{let i=[];this.subscribeEose(t,r,{...n,onevent(a){i.push(a)},onclose(a){o(i)}})})}async get(t,r,n){r.limit=1;let o=await this.querySync(t,r,n);return o.sort((i,a)=>a.created_at-i.created_at),o[0]||null}publish(t,r){return t.map(Wn).map(async(n,o,i)=>{if(i.indexOf(n)!==o)return Promise.reject("duplicate url");let a=await this.ensureRelay(n);return a.publish(r).then(u=>{if(this.trackRelays){let d=this.seenOn.get(r.id);d||(d=new Set,this.seenOn.set(r.id,d)),d.add(a)}return u})})}listConnectionStatus(){let t=new Map;return this.relays.forEach((r,n)=>t.set(n,r.connected)),t}destroy(){this.relays.forEach(t=>t.close()),this.relays=new Map}};var Gg;try{Gg=WebSocket}catch{}var Za=class extends Ga{constructor(){super({verifyEvent:Fg,websocketImplementation:Gg})}};var Yg=ll(kl(),1);var ss=["wss://purplepag.es","wss://relay.nos.social","wss://user.kindpag.es"],Zg=["wss://purplepag.es","wss://relay.nos.social","wss://user.kindpag.es"];var _3=0,m9=ld(3,ss,ud(e=>{if(e.length>=2&&e[0]==="p")return e[1]}),e=>[]),Uo=ld(10002,Zg,ud(e=>{if(e.length===2)return{url:e[1],read:!0,write:!0};if(e[2]==="read")return{url:e[1],read:!0,write:!1};if(e[2]==="write")return{url:e[1],read:!1,write:!0}}),e=>[{url:"wss://relay.damus.io",read:!0,write:!0},{url:"wss://nos.lol",read:!0,write:!0}]),b9=ld(1e4,[],ud(e=>{if(e.length>=2){switch(e[0]){case"p":return{label:"pubkey",value:e[1]};case"e":return{label:"thread",value:e[1]};case"t":return{label:"hashtag",value:e[1]};case"word":return{label:"word",value:e[1]}}return}}),e=>[]);function ud(e){return t=>t?t.tags.map(e).filter(hg):[]}function ld(e,t,r,n){let o=Aa(),i=rs(`@nostr/gadgets/list:${e}`,"cache"),a=new Yg.default(u=>new Promise(async d=>{let h=[],b=Math.round(Date.now()/1e3),m=await Sa(u.map(A=>A.target),i).then(A=>A.map((C,k)=>{let N=u[k];return N.index=k,C?!C.lastAttempt||C.lastAttempt<b-60*60*24*2?(h.push(N),C):(C.event===null&&C.lastAttempt<Date.now()/1e3-60*60&&h.push(N),C):(h.push(N),{items:n(N.target),event:null})}));if(h.length===0){d(m);return}let _={};for(let A=0;A<h.length;A++){let C=h[A],k=C.relays.slice(0,Math.min(4,C.relays.length));do k.push(E3(t));while(k.length<3);for(let N=0;N<k.length;N++){let R=k[N],B=_[R];B||(B=[{kinds:[e],authors:[]}],_[R]=B),B[0]?.authors?.push(C.target)}}try{let A;A=mn.subscribeManyMap(_,{label:`kind:${e}:batch(${h.length})`,onevent(C){for(let k=0;k<h.length;k++){let N=h[k];if(N.target===C.pubkey){if(m[N.index]?.event?.created_at||0>C.created_at)return;m[N.index]={event:C,items:r(C)};return}}},oneose(){A?.close()},async onclose(){d(m),ka(h.map(C=>[C.target,{...m[C.index],lastAttempt:b}]),i)}})}catch(A){d(m.map(C=>A))}}),{cache:!0,cacheKeyFn:u=>u.target,cacheMap:o});return async function(u,d=[]){let h=d;if(e===10002)return await a.load({target:u,relays:h});{let b=await Uo(u,d);return h.push(...b.items.filter(({write:m})=>m).map(({url:m})=>m).slice(0,3)),await a.load({target:u,relays:h})}}}function E3(e){return e[_3++%e.length]}var Ya=class{relayBySerial=[];orderedRelaysByPubKey={};hasLoadedRelaysFor=new Set;export(){return JSON.stringify({relayBySerial:this.relayBySerial,orderedRelaysByPubKey:this.orderedRelaysByPubKey})}import(t){let{relayBySerial:r,orderedRelaysByPubKey:n}=JSON.parse(t);this.relayBySerial=r,this.orderedRelaysByPubKey=n}save(t,r,n,o){let i=this.relayBySerial.indexOf(r);i===-1&&(i=this.relayBySerial.length,this.relayBySerial.push(r));let a=this.orderedRelaysByPubKey[t];a||(a=[]);let u=a.findIndex(d=>d.serial===i);if(u===-1){let d=new dd(i);d.timestamps[n]=o,a.push(d)}else a[u].timestamps[n]<o&&(a[u].timestamps[n]=o);this.orderedRelaysByPubKey[t]=a}async topN(t,r){if(!this.hasLoadedRelaysFor.has(t)){try{let{event:i,items:a}=await Uo(t);i&&a.forEach(u=>{u.write&&this.save(t,u.url,Vr.lastInRelayList,i.created_at)})}catch{}this.hasLoadedRelaysFor.add(t)}let n=[],o=this.orderedRelaysByPubKey[t];if(o){o.sort((i,a)=>a.sum()-i.sum());for(let i=0;i<r&&i<o.length;i++)n.push(this.relayBySerial[o[i].serial])}return n}printScores(){console.log("= print scores");for(let t in this.orderedRelaysByPubKey){let r=this.orderedRelaysByPubKey[t];console.log(`== relay scores for ${t}`);for(let n=0;n<r.entries.length;n++){let o=r[n];console.log(`  ${n.toString().padStart(3)} :: ${this.relayBySerial[o.serial].padEnd(30)} (${o.serial}) ::> ${o.sum().toString().padStart(12)}`)}}}},dd=class{serial;timestamps=new Array(7).fill(0);constructor(t){this.serial=t}sum(){let t=Date.now()/1e3+86400,r=0;for(let n=0;n<this.timestamps.length;n++){if(this.timestamps[n]===0)continue;let o=x3[n]*1e10/Math.pow(Math.max(t-this.timestamps[n],1),1.3);r+=o}return r}},Vr;(function(e){e[e.lastFetchAttempt=0]="lastFetchAttempt",e[e.mostRecentEventFetched=1]="mostRecentEventFetched",e[e.lastInRelayList=2]="lastInRelayList",e[e.lastInTag=3]="lastInTag",e[e.lastInNprofile=4]="lastInNprofile",e[e.lastInNevent=5]="lastInNevent",e[e.lastInNIP05=6]="lastInNIP05"})(Vr||(Vr={}));var x3={[Vr.lastFetchAttempt]:-500,[Vr.mostRecentEventFetched]:700,[Vr.lastInRelayList]:350,[Vr.lastInTag]:5,[Vr.lastInNprofile]:22,[Vr.lastInNevent]:8,[Vr.lastInNIP05]:7};var mn=new Za;var x9=new Ya;var Jg=0;var Xg=rs("@nostr/gadgets/metadata","cache");function r0(e){return typeof e=="string"?e0.load({pubkey:e}):e0.load(e)}var e0=new t0.default(async e=>new Promise(async t=>{let r=[],n=Math.round(Date.now()/1e3),o=await Sa(e.map(a=>a.pubkey),Xg).then(a=>a.map((u,d)=>{let h=e[d];if(u)return u.lastAttempt<n-60*60*24*2?(r.push(h),u.lastAttempt=n,u):(u.lastAttempt<n-60*60&&!u.metadata.name&&!u.metadata.picture&&!u.metadata.about&&(r.push(h),u.lastAttempt=Math.round(Date.now()/1e3)),u);{r.push(h);let b=k3(h.pubkey);return b.lastAttempt=n,b}}));if(r.length===0){t(o);return}let i={};await Promise.all(r.map(async({pubkey:a,relays:u=[]})=>{let d=new Set(u.slice(0,3));try{let{items:h}=await Uo(a),b=0;for(let m=0;m<h.length&&!(h[m].write&&(d.add(h[m].url),b++,b>=2));m++);}catch(h){console.error("Failed to load relay list for",a,h)}do d.add(ss[Jg%ss.length]),Jg++;while(d.size<2);i[a]=Array.from(d)}));try{let a={};for(let[d,h]of Object.entries(i))for(let b of h)a[b]||(a[b]=[{kinds:[0],authors:[]}]),a[b][0].authors.push(d);let u=mn.subscribeManyMap(a,{label:`metadata(${e.length})`,onevent(d){for(let h=0;h<e.length;h++)if(e[h].pubkey===d.pubkey){let b=o[h];if(b.lastUpdated>d.created_at)return;S3(b,d);return}},oneose(){t(o),u.close();let d=[];for(let h=0;h<o.length;h++){let b=o[h];b.pubkey&&d.push([b.pubkey,b])}ka(d,Xg)}})}catch(a){for(let u=0;u<o.length;u++)o[u]=a;t(o)}}),{cacheKeyFn:e=>e.pubkey,cache:!0,cacheMap:Aa()});function k3(e){let t=lg(e);return{pubkey:e,npub:t,shortName:t.substring(0,8)+"\u2026"+t.substring(59),lastUpdated:0,metadata:{}}}function S3(e,t){let r={};try{r=JSON.parse(t.content)}catch{}e.metadata=r,e.shortName=r.name||r.display_name||r.nip05?.split("@")?.[0]||e.shortName,r.picture&&(e.image=r.picture)}var as=new TextDecoder("utf-8"),li=new TextEncoder;var n0=5e3;function A3(e){let t=new Uint8Array(4);return t[0]=e>>24&255,t[1]=e>>16&255,t[2]=e>>8&255,t[3]=e&255,t}function di(e){let{prefix:t,words:r}=qn.decode(e,n0),n=new Uint8Array(qn.fromWords(r));switch(t){case"nprofile":{let o=fd(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for nprofile");if(o[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:xt(o[0][0]),relays:o[1]?o[1].map(i=>as.decode(i)):[]}}}case"nevent":{let o=fd(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for nevent");if(o[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(o[2]&&o[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(o[3]&&o[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:xt(o[0][0]),relays:o[1]?o[1].map(i=>as.decode(i)):[],author:o[2]?.[0]?xt(o[2][0]):void 0,kind:o[3]?.[0]?parseInt(xt(o[3][0]),16):void 0}}}case"naddr":{let o=fd(n);if(!o[0]?.[0])throw new Error("missing TLV 0 for naddr");if(!o[2]?.[0])throw new Error("missing TLV 2 for naddr");if(o[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!o[3]?.[0])throw new Error("missing TLV 3 for naddr");if(o[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:as.decode(o[0][0]),pubkey:xt(o[2][0]),kind:parseInt(xt(o[3][0]),16),relays:o[1]?o[1].map(i=>as.decode(i)):[]}}}case"nsec":return{type:t,data:n};case"npub":case"note":return{type:t,data:xt(n)};default:throw new Error(`unknown prefix ${t}`)}}function fd(e){let t={},r=e;for(;r.length>0;){let n=r[0],o=r[1],i=r.slice(2,2+o);if(r=r.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${n}`);t[n]=t[n]||[],t[n].push(i)}return t}function o0(e){return T3("npub",Po(e))}function hd(e,t){let r=qn.toWords(t);return qn.encode(e,r,n0)}function T3(e,t){return hd(e,t)}function Ja(e){let t;e.kind!==void 0&&(t=A3(e.kind));let r=s0({0:[Po(e.id)],1:(e.relays||[]).map(n=>li.encode(n)),2:e.author?[Po(e.author)]:[],3:t?[new Uint8Array(t)]:[]});return hd("nevent",r)}function i0(e){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,e.kind,!1);let r=s0({0:[li.encode(e.identifier)],1:(e.relays||[]).map(n=>li.encode(n)),2:[Po(e.pubkey)],3:[new Uint8Array(t)]});return hd("naddr",r)}function s0(e){let t=[];return Object.entries(e).reverse().forEach(([r,n])=>{n.forEach(o=>{let i=new Uint8Array(o.length+2);i.set([parseInt(r)],0),i.set([o.length],1),i.set(o,2),t.push(i)})}),Tl(...t)}async function a0(){let e=document.querySelector('meta[name="author"]'),t=document.querySelector('meta[name="relays"]'),r=document.querySelector('meta[name="topics"]'),n=document.querySelector('meta[name="comments"]'),o;e?o=e.getAttribute("content"):(console.warn("Missing meta tags for configuration, using hodlbod as a fallback"),o="npub1jlrs53pkdfjnts29kveljul2sm0actt6n8dxrrzqcersttvcuv3qdjynqn");let i=[],a=[],u=t?.getAttribute?.("content")?.split(",").map(A=>A.trim());if(u&&u.length>0)i=u,a=u;else{let A=(await Uo(di(o).data)).items;a=A.filter(C=>C.write).map(C=>C.url).slice(0,5),i=A.filter(C=>C.read).map(C=>C.url)}let d=r?.getAttribute?.("content")?.split(",").map(A=>A.trim()).filter(A=>A!=="")||[],h=(n?.getAttribute?.("content")||"no")==="yes",b=[],m=document.querySelectorAll("meta"),_="block:";return m.forEach(A=>{let C=A.getAttribute("name");if(!C||!C.startsWith(_))return;let k=A.getAttribute("content"),N=k?k.split("-"):[],R,B=C.substring(_.length);switch(B){case"articles":R={count:2,minChars:10,style:"grid"};break;case"notes":R={count:10,minChars:0,style:"list"};break;case"images":R={count:10,minChars:0,style:"grid"};break;default:return}N.length>0&&!isNaN(Number(N[0]))&&(R.count=parseInt(N[0],10),N.shift());let f=N.findIndex(p=>["list","slide","grid"].includes(p));f>=0&&(R.style=N[f],N.splice(f,1)),N.forEach(p=>{p.startsWith("m")&&!isNaN(Number(p.substring(1)))&&(R.minChars=parseInt(p.substring(1),10)),p.startsWith("i")&&(R.ids=R.ids||[],R.ids.push(p.substring(1)))}),b.push({type:B,config:R})}),b.length==0&&(b.push({type:"articles",config:{count:3,style:"grid",minChars:10}}),b.push({type:"notes",config:{count:10,style:"slide",minChars:400}}),b.push({type:"articles",config:{count:2,style:"grid",minChars:10}}),b.push({type:"images",config:{count:10,style:"grid",minChars:0}}),b.push({type:"articles",config:{count:10,style:"list",minChars:0}}),b.push({type:"articles",config:{count:2,style:"grid",minChars:0}}),b.push({type:"articles",config:{count:30,style:"list",minChars:0}})),{npub:o,readRelays:i,writeRelays:a,topics:d,comments:h,blocks:b}}var f0=ll(u0(),1);var zo=Symbol("verified"),B3=e=>e instanceof Object;function pd(e){if(!B3(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let n=0;n<r.length;n++)if(typeof r[n]=="object")return!1}return!0}var L3=/\W/m,l0=/\W |\W$|$|,| /m;function*ec(e){let t=e.length,r=0,n=0;for(;n<t;){let o=e.indexOf(":",n);if(o===-1)break;if(e.substring(o-5,o)==="nostr"){let i=e.substring(o+60).match(L3),a=i?o+60+i.index:t;try{let u,{data:d,type:h}=di(e.substring(o+1,a));switch(h){case"npub":u={pubkey:d};break;case"nsec":case"note":n=a+1;continue;default:u=d}r!==o-5&&(yield{type:"text",text:e.substring(r,o-5)}),yield{type:"reference",pointer:u},n=a,r=n;continue}catch{n=o+1;continue}}else if(e.substring(o-5,o)==="https"||e.substring(o-4,o)==="http"){let i=e.substring(o+4).match(l0),a=i?o+4+i.index:t,u=e[o-1]==="s"?5:4;try{let d=new URL(e.substring(o-u,a));if(d.hostname.indexOf(".")===-1)throw new Error("invalid url");if(r!==o-u&&(yield{type:"text",text:e.substring(r,o-u)}),d.pathname.endsWith(".png")||d.pathname.endsWith(".jpg")||d.pathname.endsWith(".jpeg")||d.pathname.endsWith(".gif")||d.pathname.endsWith(".webp")){yield{type:"image",url:d.toString()},n=a,r=n;continue}if(d.pathname.endsWith(".mp4")||d.pathname.endsWith(".avi")||d.pathname.endsWith(".webm")||d.pathname.endsWith(".mkv")){yield{type:"video",url:d.toString()},n=a,r=n;continue}if(d.pathname.endsWith(".mp3")||d.pathname.endsWith(".aac")||d.pathname.endsWith(".ogg")||d.pathname.endsWith(".opus")){yield{type:"audio",url:d.toString()},n=a,r=n;continue}yield{type:"url",url:d.toString()},n=a,r=n;continue}catch{n=a+1;continue}}else if(e.substring(o-3,o)==="wss"||e.substring(o-2,o)==="ws"){let i=e.substring(o+4).match(l0),a=i?o+4+i.index:t,u=e[o-1]==="s"?3:2;try{let d=new URL(e.substring(o-u,a));if(d.hostname.indexOf(".")===-1)throw new Error("invalid ws url");r!==o-u&&(yield{type:"text",text:e.substring(r,o-u)}),yield{type:"relay",url:d.toString()},n=a,r=n;continue}catch{n=a+1;continue}}else{n=o+1;continue}}r!==t&&(yield{type:"text",text:e.substring(r)})}function h0(e){for(let t of e.tags)if(t[0]==="e"&&(t[3]==="root"||t[3]==="reply"))return!1;return!0}var gd=new Intl.DateTimeFormat("en-US",{day:"2-digit",month:"long",year:"numeric"});function cs(e){let t,r,n=[],o,i=!1;if(e.kind===30023)t=e.tags.find(([a])=>a==="title")?.[1],t||(t="Article of "+gd.format(new Date(e.created_at*1e3)),i=!0),r=e.tags.find(([a])=>a==="summary")?.[1]||void 0,o=e.tags.find(([a])=>a==="image")?.[1]||void 0;else if(e.kind==20)t=e.tags.find(([a])=>a==="title")?.[1],t||(t="Photo of "+gd.format(new Date(e.created_at*1e3)),i=!0),r=e.content,e.tags.forEach(a=>{if(a[0]==="imeta"){let u=a[1].split(" ")[1];n.push(u)}}),o=n[0];else if(t=e.tags.find(([a])=>a==="subject")?.[1],t||(t="Note of "+gd.format(new Date(e.created_at*1e3)),i=!0),r=O3(e.content,504),r.length>503){for(r=r.substring(0,500);r.endsWith(".");)r=r?.substring(0,r.length-1);r.endsWith(" ")?r=r.trimEnd()+" (...)":r+="..."}return{id:e.id,kind:e.kind,created_at:e.created_at,title:t,autogeneratedTitle:i,image:o,images:n,summary:r,content:e.content}}async function C3(e){try{let t=e.match(/^([a-zA-Z0-9-_.]+)@([a-zA-Z0-9-.]+)$/);if(!t)return null;let[r,n,o]=t,i=`https://${o}/.well-known/nostr.json?name=${n}`,a=await fetch(i);if(!a.ok)return console.error(`Failed to fetch NIP-05 data: ${a.status}`),null;let u=await a.json();return u&&u.names&&u.names[n]?u.names[n]:null}catch(t){return console.error("Error resolving NIP-05 address:",t),null}}async function us(e){let t,r=[];if(e.includes("@")){let n=await C3(e);if(n)t=n;else return console.error("Failed to resolve NIP-05 address"),null}else try{let n=di(e);if(n.type==="npub")t=n.data;else if(n.type==="nprofile")t=n.data.pubkey,r=n.data.relays||[];else return console.error("author should be an npub"),null}catch(n){if(e.length===64)t=e;else return console.error("Failed to decode npub:",n),null}return r0({pubkey:t,relays:r})}async function P3(e){let t=/nostr:(npub1\w+|nprofile1\w+)/g,n=(e.match(t)||[]).map(async a=>{try{let u=await us(a.slice(6));return u?{match:a,replacement:`<a href='https://njump.me/${a}'>${u.shortName}</a>`}:{match:a,replacement:a}}catch(u){return console.error("Failed to fetch profile:",u),{match:a,replacement:a}}}),o=await Promise.all(n),i=e;return o.forEach(({match:a,replacement:u})=>{i=i.replace(a,u)}),i}function I3(e){let t=/(^|\s|\n|\()(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|\)|$)/gm;e=e.replace(t,(n,o,i)=>`${o}nostr:${i}`);let r=/(^|\s|\n)nostr:(nevent1\w+|note1\w+|npub1\w+|nprofile1\w+)(?=\s|\n|$)/gm;return e=e.replace(r,(n,o,i)=>{let a=i.slice(0,24);return`${o}<a href='https://njump.me/${i}'>${a}</a>`}),e}function N3(e){let t=/(?<![(])(?![^<]*>)(https?:\/\/\S+(?:(?!\.(?:png|jpg|jpeg|gif|bmp|mp4|webm|ogg|mov))\S*))/gi;return e.replace(t,n=>{let o=n.length>75?`${n.slice(0,72)}...`:n;return` <a href="${n}" target="_blank" rel="noopener noreferrer">${o}</a> `})}function O3(e,t){let r="";for(let n of ec(e)){switch(n.type){case"text":r+=n.text;break;case"url":case"image":case"video":case"audio":case"relay":r+=F3(n.url);break;case"reference":let o;"id"in n.pointer?o=Ja(n.pointer):"identifier"in n.pointer?o=i0(n.pointer):o=o0(n.pointer.pubkey),r+=D3(o);break}if(r.length>t)break}return r}function R3(e){let t=/(?<![(])(https?:\/\/\S+\.(?:png|jpg|jpeg|gif|bmp))(?![\)])/g;return e.replace(t,(n,o)=>` <img src='${o}' /> `)}function U3(e){let t=/(?:https?:\/\/\S+\.(?:mp4|webm|ogg|mov))|(?:\!\[.*?\]\((https?:\/\/\S+\.(?:mp4|webm|ogg|mov))\))/gi;return e.replace(t,n=>{let o=n.match(/https?:\/\/\S+\.(?:mp4|webm|ogg|mov)/)?.[0]||n.match(/\((https?:\/\/\S+\.(?:mp4|webm|ogg|mov))\)/)?.[1];return o?` <video controls><source src="${o}" type="video/mp4"></video> `:n})}function z3(e){let t=/\s*(https?:\/\/\S+\.(?:mp3))(\s*|$)/gi;return e.replace(t,(n,o)=>` <audio controls src="${o}"></audio> `)}function M3(e){return[{regex:/<<|»/g,replacement:"&laquo;"},{regex:/>>|«/g,replacement:"&raquo;"},{regex:/\.\.\./g,replacement:"&hellip;"},{regex:/---/g,replacement:"&mdash;"},{regex:/--/g,replacement:"&mdash;"}].forEach(({regex:r,replacement:n})=>{e=e.replace(r,n)}),e}async function p0(e){let t=e.content;return t=await P3(t),t=I3(t),t=R3(t),t=U3(t),t=z3(t),t=M3(t),e.kind==1&&(t=t.replace(/\n/g,`
<br/>`),t=N3(t)),"title"in e&&(t=t.replace("# "+e.title,"")),e.kind===30023&&(t=new f0.default.Converter({simplifiedAutoLink:!0,tables:!0,strikethrough:!0}).makeHtml(t)),t}function jt(e,t=!1){let r=new Date(e*1e3),n={day:"2-digit",month:"long",year:"numeric"},o=new Intl.DateTimeFormat("en-US",n).formatToParts(r),i,a,u;o.forEach(h=>{h.type==="day"&&(i=h.value),h.type==="month"&&(a=h.value),h.type==="year"&&(u=h.value)});let d=`${i} ${a} ${u}`;if(t){let h={hour:"2-digit",minute:"2-digit",hourCycle:"h23"},m=new Intl.DateTimeFormat("en-US",h).format(r);d+=` - ${m}`}return d}async function md(){try{let e=await fetch(window.location.href,{method:"GET",headers:{Accept:"text/html"}});if(!e.ok)throw new Error("Network response was not ok");let t=await e.text(),r=new Blob([t],{type:"text/html"}),n=URL.createObjectURL(r),o=document.createElement("a");o.href=n,o.download="index.html",o.click(),URL.revokeObjectURL(n)}catch(e){console.error("Error downloading the original HTML:",e)}}function D3(e){let t=e.indexOf("1");return e.substring(0,t+3)+"\u2026"+e.substring(e.length-5)}function F3(e){if(e.length<=30)return e;try{let t=new URL(e);if(e.length<=40)return`${t.host}${t.pathname}${t.search.length?"?":""}${t.search}`;if(e.length<=50&&t.pathname.length<20)return`${t.host}${t.pathname}`;let r=t.pathname,n=t.pathname.split("/"),o=n[n.length-1];return o.length>10&&(o=`\u2026${o.substring(o.length-6)}`),n.length>2?r=`/\u2026/${o}`:r=`/${o}`,`${t.host}${r}`}catch{return e}}var fi=[];function ls(e,t=De){let r,n=new Set;function o(u){if(tt(e,u)&&(e=u,r)){let d=!fi.length;for(let h of n)h[1](),fi.push(h,e);if(d){for(let h=0;h<fi.length;h+=2)fi[h][0](fi[h+1]);fi.length=0}}}function i(u){o(u(e))}function a(u,d=De){let h=[u,d];return n.add(h),n.size===1&&(r=t(o,i)||De),u(e),()=>{n.delete(h),n.size===0&&r&&(r(),r=null)}}return{set:o,update:i,subscribe:a}}var hi=ls("");function j3(e){let t;return{c(){t=ae("div"),t.innerHTML='<div class="loader svelte-mae19q"></div>',oe(t,"class","loader-container svelte-mae19q")},m(r,n){fe(r,t,n)},p:De,i:De,o:De,d(r){r&&ue(t)}}}var bd=class extends rt{constructor(t){super(),ct(this,t,null,j3,tt,{})}},g0=bd;function m0(e,t,r){let n=e.slice();return n[7]=t[r],n}function b0(e,t,r){let n=e.slice();return n[7]=t[r],n}function w0(e){let t;function r(i,a){if(i[0]==="grid")return V3;if(i[0]==="list")return H3}let n=r(e,-1),o=n&&n(e);return{c(){t=ae("section"),o&&o.c(),oe(t,"class","block articles")},m(i,a){fe(i,t,a),o&&o.m(t,null)},p(i,a){n===(n=r(i,a))&&o?o.p(i,a):(o&&o.d(1),o=n&&n(i),o&&(o.c(),o.m(t,null)))},d(i){i&&ue(t),o&&o.d()}}}function H3(e){let t,r,n=Je(e[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=v0(m0(e,n,i));return{c(){t=ae("div"),r=ae("ul");for(let i=0;i<o.length;i+=1)o[i].c();oe(t,"class","list")},m(i,a){fe(i,t,a),re(t,r);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(r,null)},p(i,a){if(a&4){n=Je(i[2]);let u;for(u=0;u<n.length;u+=1){let d=m0(i,n,u);o[u]?o[u].p(d,a):(o[u]=v0(d),o[u].c(),o[u].m(r,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}},d(i){i&&ue(t),Xt(o,i)}}}function V3(e){let t,r,n=Je(e[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=k0(b0(e,n,i));return{c(){t=ae("div");for(let i=0;i<o.length;i+=1)o[i].c();oe(t,"class",r="grid "+(e[2].length%2!==0?"odd":""))},m(i,a){fe(i,t,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(i,a){if(a&6){n=Je(i[2]);let u;for(u=0;u<n.length;u+=1){let d=b0(i,n,u);o[u]?o[u].p(d,a):(o[u]=k0(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}a&4&&r!==(r="grid "+(i[2].length%2!==0?"odd":""))&&oe(t,"class",r)},d(i){i&&ue(t),Xt(o,i)}}}function y0(e){let t,r=e[7].summary+"",n;return{c(){t=ae("div"),n=ze(r),oe(t,"class","summary")},m(o,i){fe(o,t,i),re(t,n)},p(o,i){i&4&&r!==(r=o[7].summary+"")&&Ze(n,r)},d(o){o&&ue(t)}}}function v0(e){let t,r,n,o=e[7].title+"",i,a,u,d,h=e[7].summary&&y0(e);return{c(){t=ae("li"),r=ae("a"),n=ae("h2"),i=ze(o),a=Pe(),h&&h.c(),d=Pe(),oe(r,"href",u=`#${e[7].id}`)},m(b,m){fe(b,t,m),re(t,r),re(r,n),re(n,i),re(r,a),h&&h.m(r,null),re(t,d)},p(b,m){m&4&&o!==(o=b[7].title+"")&&Ze(i,o),b[7].summary?h?h.p(b,m):(h=y0(b),h.c(),h.m(r,null)):h&&(h.d(1),h=null),m&4&&u!==(u=`#${b[7].id}`)&&oe(r,"href",u)},d(b){b&&ue(t),h&&h.d()}}}function _0(e){let t,r;return{c(){t=ae("img"),It(t.src,r=e[7].image)||oe(t,"src",r)},m(n,o){fe(n,t,o)},p(n,o){o&4&&!It(t.src,r=n[7].image)&&oe(t,"src",r)},d(n){n&&ue(t)}}}function E0(e){let t,r=e[7].summary+"";return{c(){t=ae("div"),oe(t,"class","summary")},m(n,o){fe(n,t,o),t.innerHTML=r},p(n,o){o&4&&r!==(r=n[7].summary+"")&&(t.innerHTML=r)},d(n){n&&ue(t)}}}function x0(e){let t;return{c(){t=ae("span"),t.textContent="- \u{1F4CC} Pinned",oe(t,"class","pinned")},m(r,n){fe(r,t,n)},d(r){r&&ue(t)}}}function k0(e){let t,r,n,o,i=e[7].title+"",a,u,d,h,b,m=jt(e[7].created_at)+"",_,A,C=e[1]&&e[1].some(R),k,N;function R(...w){return e[6](e[7],...w)}let B=e[7].image&&_0(e),f=e[7].summary&&E0(e),p=C&&x0(e);return{c(){t=ae("div"),r=ae("a"),B&&B.c(),n=Pe(),o=ae("div"),a=ze(i),u=Pe(),f&&f.c(),d=Pe(),h=ae("div"),b=ae("span"),_=ze(m),A=Pe(),p&&p.c(),N=Pe(),oe(o,"class","title"),oe(b,"class","date"),oe(r,"href",k=`#${e[7].id}`),oe(t,"class","item")},m(w,v){fe(w,t,v),re(t,r),B&&B.m(r,null),re(r,n),re(r,o),re(o,a),re(r,u),f&&f.m(r,null),re(r,d),re(r,h),re(h,b),re(b,_),re(h,A),p&&p.m(h,null),re(t,N)},p(w,v){e=w,e[7].image?B?B.p(e,v):(B=_0(e),B.c(),B.m(r,n)):B&&(B.d(1),B=null),v&4&&i!==(i=e[7].title+"")&&Ze(a,i),e[7].summary?f?f.p(e,v):(f=E0(e),f.c(),f.m(r,d)):f&&(f.d(1),f=null),v&4&&m!==(m=jt(e[7].created_at)+"")&&Ze(_,m),v&6&&(C=e[1]&&e[1].some(R)),C?p||(p=x0(e),p.c(),p.m(h,null)):p&&(p.d(1),p=null),v&4&&k!==(k=`#${e[7].id}`)&&oe(r,"href",k)},d(w){w&&ue(t),B&&B.d(),f&&f.d(),p&&p.d()}}}function q3(e){let t,r=e[2].length>0&&w0(e);return{c(){r&&r.c(),t=Nt()},m(n,o){r&&r.m(n,o),fe(n,t,o)},p(n,[o]){n[2].length>0?r?r.p(n,o):(r=w0(n),r.c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:De,o:De,d(n){n&&ue(t),r&&r.d(n)}}}function W3(e,t,r){let{source:n}=t,{count:o}=t,{style:i}=t,{minChars:a}=t,{ids:u=void 0}=t,d=[];Ot(()=>{(async()=>u?(r(0,i="grid"),r(2,d=await n.fetchIds(u))):r(2,d=await n.pluck(o,a)))()});let h=(b,m)=>b.id.endsWith(m);return e.$$set=b=>{"source"in b&&r(3,n=b.source),"count"in b&&r(4,o=b.count),"style"in b&&r(0,i=b.style),"minChars"in b&&r(5,a=b.minChars),"ids"in b&&r(1,u=b.ids)},[i,u,d,n,o,a,h]}var wd=class extends rt{constructor(t){super(),ct(this,t,W3,q3,tt,{source:3,count:4,style:0,minChars:5,ids:1})}},yd=wd;function qr(...e){return e.filter(Boolean).join(" ")}function vd(e,t){if(e){let r=Object.keys(e);for(let n=0;n<r.length;n++){let o=r[n];if(o!=="__proto__"&&t(e[o],o)===!1)break}}return e}function tc(e){let t=e.Components.Elements?.list.children;return t&&Array.prototype.slice.call(t)||[]}function Mo(e){return e!==null&&typeof e=="object"}function ds(e,t){if(Array.isArray(e)&&Array.isArray(t))return e.length===t.length&&!e.some((r,n)=>!ds(r,t[n]));if(Mo(e)&&Mo(t)){let r=Object.keys(e),n=Object.keys(t);return r.length===n.length&&!r.some(o=>!Object.prototype.hasOwnProperty.call(t,o)||!ds(e[o],t[o]))}return e===t}function _d(e,t){return e.length===t.length&&!e.some((r,n)=>r!==t[n])}function fs(e,t){let r=e;return vd(t,(n,o)=>{Array.isArray(n)?r[o]=n.slice():Mo(n)?r[o]=fs(Mo(r[o])?r[o]:{},n):r[o]=n}),r}function S0(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Q3(e,t,r){return t&&S0(e.prototype,t),r&&S0(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var A0="(prefers-reduced-motion: reduce)",mi=1,K3=2,yi=3,_i=4,Es=5,nc=6,ac=7,G3={CREATED:mi,MOUNTED:K3,IDLE:yi,MOVING:_i,SCROLLING:Es,DRAGGING:nc,DESTROYED:ac};function _n(e){e.length=0}function to(e,t,r){return Array.prototype.slice.call(e,t,r)}function Xe(e){return e.bind.apply(e,[null].concat(to(arguments,1)))}var D0=setTimeout,Ad=function(){};function T0(e){return requestAnimationFrame(e)}function dc(e,t){return typeof t===e}function gs(e){return!Id(e)&&dc("object",e)}var Pd=Array.isArray,F0=Xe(dc,"function"),Xn=Xe(dc,"string"),xs=Xe(dc,"undefined");function Id(e){return e===null}function j0(e){try{return e instanceof(e.ownerDocument.defaultView||window).HTMLElement}catch{return!1}}function ks(e){return Pd(e)?e:[e]}function br(e,t){ks(e).forEach(t)}function Nd(e,t){return e.indexOf(t)>-1}function oc(e,t){return e.push.apply(e,ks(t)),e}function wn(e,t,r){e&&br(t,function(n){n&&e.classList[r?"add":"remove"](n)})}function Wr(e,t){wn(e,Xn(t)?t.split(" "):t,!0)}function Ss(e,t){br(t,e.appendChild.bind(e))}function Od(e,t){br(e,function(r){var n=(t||r).parentNode;n&&n.insertBefore(r,t)})}function ms(e,t){return j0(e)&&(e.msMatchesSelector||e.matches).call(e,t)}function H0(e,t){var r=e?to(e.children):[];return t?r.filter(function(n){return ms(n,t)}):r}function As(e,t){return t?H0(e,t)[0]:e.firstElementChild}var bs=Object.keys;function Fo(e,t,r){return e&&(r?bs(e).reverse():bs(e)).forEach(function(n){n!=="__proto__"&&t(e[n],n)}),e}function ws(e){return to(arguments,1).forEach(function(t){Fo(t,function(r,n){e[n]=t[n]})}),e}function Jn(e){return to(arguments,1).forEach(function(t){Fo(t,function(r,n){Pd(r)?e[n]=r.slice():gs(r)?e[n]=Jn({},gs(e[n])?e[n]:{},r):e[n]=r})}),e}function $0(e,t){br(t||bs(e),function(r){delete e[r]})}function Qr(e,t){br(e,function(r){br(t,function(n){r&&r.removeAttribute(n)})})}function Fe(e,t,r){gs(t)?Fo(t,function(n,o){Fe(e,o,n)}):br(e,function(n){Id(r)||r===""?Qr(n,t):n.setAttribute(t,String(r))})}function bi(e,t,r){var n=document.createElement(e);return t&&(Xn(t)?Wr(n,t):Fe(n,t)),r&&Ss(r,n),n}function Lr(e,t,r){if(xs(r))return getComputedStyle(e)[t];Id(r)||(e.style[t]=""+r)}function ys(e,t){Lr(e,"display",t)}function V0(e){e.setActive&&e.setActive()||e.focus({preventScroll:!0})}function Cr(e,t){return e.getAttribute(t)}function B0(e,t){return e&&e.classList.contains(t)}function gr(e){return e.getBoundingClientRect()}function jo(e){br(e,function(t){t&&t.parentNode&&t.parentNode.removeChild(t)})}function q0(e){return As(new DOMParser().parseFromString(e,"text/html").body)}function bn(e,t){e.preventDefault(),t&&(e.stopPropagation(),e.stopImmediatePropagation())}function W0(e,t){return e&&e.querySelector(t)}function Rd(e,t){return t?to(e.querySelectorAll(t)):[]}function yn(e,t){wn(e,t,!1)}function Td(e){return e.timeStamp}function Do(e){return Xn(e)?e:e?e+"px":""}var Ts="splide",Ud="data-"+Ts;function hs(e,t){if(!e)throw new Error("["+Ts+"] "+(t||""))}var eo=Math.min,cc=Math.max,uc=Math.floor,vs=Math.ceil,er=Math.abs;function Q0(e,t,r){return er(e-t)<r}function ic(e,t,r,n){var o=eo(t,r),i=cc(t,r);return n?o<e&&e<i:o<=e&&e<=i}function pi(e,t,r){var n=eo(t,r),o=cc(t,r);return eo(cc(n,e),o)}function $d(e){return+(e>0)-+(e<0)}function Bd(e,t){return br(t,function(r){e=e.replace("%s",""+r)}),e}function zd(e){return e<10?"0"+e:""+e}var L0={};function Z3(e){return""+e+zd(L0[e]=(L0[e]||0)+1)}function K0(){var e=[];function t(a,u,d,h){o(a,u,function(b,m,_){var A="addEventListener"in b,C=A?b.removeEventListener.bind(b,m,d,h):b.removeListener.bind(b,d);A?b.addEventListener(m,d,h):b.addListener(d),e.push([b,m,_,d,C])})}function r(a,u,d){o(a,u,function(h,b,m){e=e.filter(function(_){return _[0]===h&&_[1]===b&&_[2]===m&&(!d||_[3]===d)?(_[4](),!1):!0})})}function n(a,u,d){var h,b=!0;return typeof CustomEvent=="function"?h=new CustomEvent(u,{bubbles:b,detail:d}):(h=document.createEvent("CustomEvent"),h.initCustomEvent(u,b,!1,d)),a.dispatchEvent(h),h}function o(a,u,d){br(a,function(h){h&&br(u,function(b){b.split(" ").forEach(function(m){var _=m.split(".");d(h,_[0],_[1])})})})}function i(){e.forEach(function(a){a[4]()}),_n(e)}return{bind:t,unbind:r,dispatch:n,destroy:i}}var En="mounted",C0="ready",Pr="move",ro="moved",$s="click",fc="active",hc="inactive",pc="visible",gc="hidden",ht="refresh",Ut="updated",Ho="resize",Bs="resized",Md="drag",Dd="dragging",Fd="dragged",Ls="scroll",no="scrolled",Y3="overflow",mc="destroy",bc="arrows:mounted",wc="arrows:updated",yc="pagination:mounted",vc="pagination:updated",Cs="navigation:mounted",_c="autoplay:play",Ec="autoplay:playing",xc="autoplay:pause",Ps="lazyload:loaded",G0="sk",Z0="sh",lc="ei";function nt(e){var t=e?e.event.bus:document.createDocumentFragment(),r=K0();function n(i,a){r.bind(t,ks(i).join(" "),function(u){a.apply(a,Pd(u.detail)?u.detail:[])})}function o(i){r.dispatch(t,i,to(arguments,1))}return e&&e.event.on(mc,r.destroy),ws(r,{bus:t,on:n,off:Xe(r.unbind,t),emit:o})}function kc(e,t,r,n){var o=Date.now,i,a=0,u,d=!0,h=0;function b(){if(!d){if(a=e?eo((o()-i)/e,1):1,r&&r(a),a>=1&&(t(),i=o(),n&&++h>=n))return _();u=T0(b)}}function m(R){R||C(),i=o()-(R?a*e:0),d=!1,u=T0(b)}function _(){d=!0}function A(){i=o(),a=0,r&&r(a)}function C(){u&&cancelAnimationFrame(u),a=0,u=0,d=!0}function k(R){e=R}function N(){return d}return{start:m,rewind:A,pause:_,cancel:C,set:k,isPaused:N}}function J3(e){var t=e;function r(o){t=o}function n(o){return Nd(ks(o),t)}return{set:r,is:n}}function X3(e,t){var r=kc(t||0,e,null,1);return function(){r.isPaused()&&r.start()}}function e8(e,t,r){var n=e.state,o=r.breakpoints||{},i=r.reducedMotion||{},a=K0(),u=[];function d(){var C=r.mediaQuery==="min";bs(o).sort(function(k,N){return C?+k-+N:+N-+k}).forEach(function(k){b(o[k],"("+(C?"min":"max")+"-width:"+k+"px)")}),b(i,A0),m()}function h(C){C&&a.destroy()}function b(C,k){var N=matchMedia(k);a.bind(N,"change",m),u.push([C,N])}function m(){var C=n.is(ac),k=r.direction,N=u.reduce(function(R,B){return Jn(R,B[1].matches?B[0]:{})},{});$0(r),A(N),r.destroy?e.destroy(r.destroy==="completely"):C?(h(!0),e.mount()):k!==r.direction&&e.refresh()}function _(C){matchMedia(A0).matches&&(C?Jn(r,i):$0(r,bs(i)))}function A(C,k,N){Jn(r,C),k&&Jn(Object.getPrototypeOf(r),C),(N||!n.is(mi))&&e.emit(Ut,r)}return{setup:d,destroy:h,reduce:_,set:A}}var Sc="Arrow",Ac=Sc+"Left",Tc=Sc+"Right",Y0=Sc+"Up",J0=Sc+"Down";var P0="rtl",$c="ttb",Ed={width:["height"],left:["top","right"],right:["bottom","left"],x:["y"],X:["Y"],Y:["X"],ArrowLeft:[Y0,Tc],ArrowRight:[J0,Ac]};function t8(e,t,r){function n(i,a,u){u=u||r.direction;var d=u===P0&&!a?1:u===$c?0:-1;return Ed[i]&&Ed[i][d]||i.replace(/width|left|right/i,function(h,b){var m=Ed[h.toLowerCase()][d]||h;return b>0?m.charAt(0).toUpperCase()+m.slice(1):m})}function o(i){return i*(r.direction===P0?1:-1)}return{resolve:n,orient:o}}var vn="role",wi="tabindex",r8="disabled",Ir="aria-",Is=Ir+"controls",X0=Ir+"current",I0=Ir+"selected",mr=Ir+"label",jd=Ir+"labelledby",em=Ir+"hidden",Hd=Ir+"orientation",_s=Ir+"roledescription",N0=Ir+"live",O0=Ir+"busy",R0=Ir+"atomic",Vd=[vn,wi,r8,Is,X0,mr,jd,em,Hd,_s],Kr=Ts+"__",oo="is-",xd=Ts,U0=Kr+"track",n8=Kr+"list",Bc=Kr+"slide",tm=Bc+"--clone",o8=Bc+"__container",qd=Kr+"arrows",Lc=Kr+"arrow",rm=Lc+"--prev",nm=Lc+"--next",Cc=Kr+"pagination",om=Cc+"__page",i8=Kr+"progress",s8=i8+"__bar",Wd=Kr+"toggle",AT=Wd+"__play",TT=Wd+"__pause",a8=Kr+"spinner",c8=Kr+"sr",u8=oo+"initialized",Vo=oo+"active",im=oo+"prev",sm=oo+"next",Ld=oo+"visible",Cd=oo+"loading",am=oo+"focus-in",cm=oo+"overflow",l8=[Vo,Ld,im,sm,Cd,am,cm],d8={slide:Bc,clone:tm,arrows:qd,arrow:Lc,prev:rm,next:nm,pagination:Cc,page:om,spinner:a8};function f8(e,t){if(F0(e.closest))return e.closest(t);for(var r=e;r&&r.nodeType===1&&!ms(r,t);)r=r.parentElement;return r}var h8=5,z0=200,um="touchstart mousedown",kd="touchmove mousemove",Sd="touchend touchcancel mouseup click";function p8(e,t,r){var n=nt(e),o=n.on,i=n.bind,a=e.root,u=r.i18n,d={},h=[],b=[],m=[],_,A,C;function k(){f(),p(),B()}function N(){o(ht,R),o(ht,k),o(Ut,B),i(document,um+" keydown",function(S){C=S.type==="keydown"},{capture:!0}),i(a,"focusin",function(){wn(a,am,!!C)})}function R(S){var T=Vd.concat("style");_n(h),yn(a,b),yn(_,m),Qr([_,A],T),Qr(a,S?T:["style",_s])}function B(){yn(a,b),yn(_,m),b=v(xd),m=v(U0),Wr(a,b),Wr(_,m),Fe(a,mr,r.label),Fe(a,jd,r.labelledby)}function f(){_=w("."+U0),A=As(_,"."+n8),hs(_&&A,"A track/list element is missing."),oc(h,H0(A,"."+Bc+":not(."+tm+")")),Fo({arrows:qd,pagination:Cc,prev:rm,next:nm,bar:s8,toggle:Wd},function(S,T){d[T]=w("."+S)}),ws(d,{root:a,track:_,list:A,slides:h})}function p(){var S=a.id||Z3(Ts),T=r.role;a.id=S,_.id=_.id||S+"-track",A.id=A.id||S+"-list",!Cr(a,vn)&&a.tagName!=="SECTION"&&T&&Fe(a,vn,T),Fe(a,_s,u.carousel),Fe(A,vn,"presentation")}function w(S){var T=W0(a,S);return T&&f8(T,"."+xd)===a?T:void 0}function v(S){return[S+"--"+r.type,S+"--"+r.direction,r.drag&&S+"--draggable",r.isNavigation&&S+"--nav",S===xd&&Vo]}return ws(d,{setup:k,mount:N,destroy:R})}var vi="slide",Ei="loop",Ns="fade";function g8(e,t,r,n){var o=nt(e),i=o.on,a=o.emit,u=o.bind,d=e.Components,h=e.root,b=e.options,m=b.isNavigation,_=b.updateOnMove,A=b.i18n,C=b.pagination,k=b.slideFocus,N=d.Direction.resolve,R=Cr(n,"style"),B=Cr(n,mr),f=r>-1,p=As(n,"."+o8),w;function v(){f||(n.id=h.id+"-slide"+zd(t+1),Fe(n,vn,C?"tabpanel":"group"),Fe(n,_s,A.slide),Fe(n,mr,B||Bd(A.slideLabel,[t+1,e.length]))),S()}function S(){u(n,"click",Xe(a,$s,K)),u(n,"keydown",Xe(a,G0,K)),i([ro,Z0,no],P),i(Cs,I),_&&i(Pr,M)}function T(){w=!0,o.destroy(),yn(n,l8),Qr(n,Vd),Fe(n,"style",R),Fe(n,mr,B||"")}function I(){var Z=e.splides.map(function(W){var J=W.splide.Components.Slides.getAt(t);return J?J.slide.id:""}).join(" ");Fe(n,mr,Bd(A.slideX,(f?r:t)+1)),Fe(n,Is,Z),Fe(n,vn,k?"button":""),k&&Qr(n,_s)}function M(){w||P()}function P(){if(!w){var Z=e.index;$(),F(),wn(n,im,t===Z-1),wn(n,sm,t===Z+1)}}function $(){var Z=x();Z!==B0(n,Vo)&&(wn(n,Vo,Z),Fe(n,X0,m&&Z||""),a(Z?fc:hc,K))}function F(){var Z=z(),W=!Z&&(!x()||f);if(e.state.is([_i,Es])||Fe(n,em,W||""),Fe(Rd(n,b.focusableNodes||""),wi,W?-1:""),k&&Fe(n,wi,W?-1:0),Z!==B0(n,Ld)&&(wn(n,Ld,Z),a(Z?pc:gc,K)),!Z&&document.activeElement===n){var J=d.Slides.getAt(e.index);J&&V0(J.slide)}}function q(Z,W,J){Lr(J&&p||n,Z,W)}function x(){var Z=e.index;return Z===t||b.cloneStatus&&Z===r}function z(){if(e.is(Ns))return x();var Z=gr(d.Elements.track),W=gr(n),J=N("left",!0),le=N("right",!0);return uc(Z[J])<=vs(W[J])&&uc(W[le])<=vs(Z[le])}function V(Z,W){var J=er(Z-t);return!f&&(b.rewind||e.is(Ei))&&(J=eo(J,e.length-J)),J<=W}var K={index:t,slideIndex:r,slide:n,container:p,isClone:f,mount:v,destroy:T,update:P,style:q,isWithin:V};return K}function m8(e,t,r){var n=nt(e),o=n.on,i=n.emit,a=n.bind,u=t.Elements,d=u.slides,h=u.list,b=[];function m(){_(),o(ht,A),o(ht,_)}function _(){d.forEach(function(P,$){k(P,$,-1)})}function A(){w(function(P){P.destroy()}),_n(b)}function C(){w(function(P){P.update()})}function k(P,$,F){var q=g8(e,$,F,P);q.mount(),b.push(q),b.sort(function(x,z){return x.index-z.index})}function N(P){return P?v(function($){return!$.isClone}):b}function R(P){var $=t.Controller,F=$.toIndex(P),q=$.hasFocus()?1:r.perPage;return v(function(x){return ic(x.index,F,F+q-1)})}function B(P){return v(P)[0]}function f(P,$){br(P,function(F){if(Xn(F)&&(F=q0(F)),j0(F)){var q=d[$];q?Od(F,q):Ss(h,F),Wr(F,r.classes.slide),T(F,Xe(i,Ho))}}),i(ht)}function p(P){jo(v(P).map(function($){return $.slide})),i(ht)}function w(P,$){N($).forEach(P)}function v(P){return b.filter(F0(P)?P:function($){return Xn(P)?ms($.slide,P):Nd(ks(P),$.index)})}function S(P,$,F){w(function(q){q.style(P,$,F)})}function T(P,$){var F=Rd(P,"img"),q=F.length;q?F.forEach(function(x){a(x,"load error",function(){--q||$()})}):$()}function I(P){return P?d.length:b.length}function M(){return b.length>r.perPage}return{mount:m,destroy:A,update:C,register:k,get:N,getIn:R,getAt:B,add:f,remove:p,forEach:w,filter:v,style:S,getLength:I,isEnough:M}}function b8(e,t,r){var n=nt(e),o=n.on,i=n.bind,a=n.emit,u=t.Slides,d=t.Direction.resolve,h=t.Elements,b=h.root,m=h.track,_=h.list,A=u.getAt,C=u.style,k,N,R;function B(){f(),i(window,"resize load",X3(Xe(a,Ho))),o([Ut,ht],f),o(Ho,p)}function f(){k=r.direction===$c,Lr(b,"maxWidth",Do(r.width)),Lr(m,d("paddingLeft"),w(!1)),Lr(m,d("paddingRight"),w(!0)),p(!0)}function p(K){var Z=gr(b);(K||N.width!==Z.width||N.height!==Z.height)&&(Lr(m,"height",v()),C(d("marginRight"),Do(r.gap)),C("width",T()),C("height",I(),!0),N=Z,a(Bs),R!==(R=V())&&(wn(b,cm,R),a(Y3,R)))}function w(K){var Z=r.padding,W=d(K?"right":"left");return Z&&Do(Z[W]||(gs(Z)?0:Z))||"0px"}function v(){var K="";return k&&(K=S(),hs(K,"height or heightRatio is missing."),K="calc("+K+" - "+w(!1)+" - "+w(!0)+")"),K}function S(){return Do(r.height||gr(_).width*r.heightRatio)}function T(){return r.autoWidth?null:Do(r.fixedWidth)||(k?"":M())}function I(){return Do(r.fixedHeight)||(k?r.autoHeight?null:M():S())}function M(){var K=Do(r.gap);return"calc((100%"+(K&&" + "+K)+")/"+(r.perPage||1)+(K&&" - "+K)+")"}function P(){return gr(_)[d("width")]}function $(K,Z){var W=A(K||0);return W?gr(W.slide)[d("width")]+(Z?0:x()):0}function F(K,Z){var W=A(K);if(W){var J=gr(W.slide)[d("right")],le=gr(_)[d("left")];return er(J-le)+(Z?0:x())}return 0}function q(K){return F(e.length-1)-F(0)+$(0,K)}function x(){var K=A(0);return K&&parseFloat(Lr(K.slide,d("marginRight")))||0}function z(K){return parseFloat(Lr(m,d("padding"+(K?"Right":"Left"))))||0}function V(){return e.is(Ns)||q(!0)>P()}return{mount:B,resize:p,listSize:P,slideSize:$,sliderSize:q,totalSize:F,getPadding:z,isOverflow:V}}var w8=2;function y8(e,t,r){var n=nt(e),o=n.on,i=t.Elements,a=t.Slides,u=t.Direction.resolve,d=[],h;function b(){o(ht,m),o([Ut,Ho],A),(h=N())&&(C(h),t.Layout.resize(!0))}function m(){_(),b()}function _(){jo(d),_n(d),n.destroy()}function A(){var R=N();h!==R&&(h<R||!R)&&n.emit(ht)}function C(R){var B=a.get().slice(),f=B.length;if(f){for(;B.length<R;)oc(B,B);oc(B.slice(-R),B.slice(0,R)).forEach(function(p,w){var v=w<R,S=k(p.slide,w);v?Od(S,B[0].slide):Ss(i.list,S),oc(d,S),a.register(S,w-R+(v?0:f),p.index)})}}function k(R,B){var f=R.cloneNode(!0);return Wr(f,r.classes.clone),f.id=e.root.id+"-clone"+zd(B+1),f}function N(){var R=r.clones;if(!e.is(Ei))R=0;else if(xs(R)){var B=r[u("fixedWidth")]&&t.Layout.slideSize(0),f=B&&vs(gr(i.track)[u("width")]/B);R=f||r[u("autoWidth")]&&e.length||r.perPage*w8}return R}return{mount:b,destroy:_}}function v8(e,t,r){var n=nt(e),o=n.on,i=n.emit,a=e.state.set,u=t.Layout,d=u.slideSize,h=u.getPadding,b=u.totalSize,m=u.listSize,_=u.sliderSize,A=t.Direction,C=A.resolve,k=A.orient,N=t.Elements,R=N.list,B=N.track,f;function p(){f=t.Transition,o([En,Bs,Ut,ht],w)}function w(){t.Controller.isBusy()||(t.Scroll.cancel(),S(e.index),t.Slides.update())}function v(W,J,le,_e){W!==J&&K(W>le)&&(P(),T(M(q(),W>le),!0)),a(_i),i(Pr,J,le,W),f.start(J,function(){a(yi),i(ro,J,le,W),_e&&_e()})}function S(W){T(F(W,!0))}function T(W,J){if(!e.is(Ns)){var le=J?W:I(W);Lr(R,"transform","translate"+C("X")+"("+le+"px)"),W!==le&&i(Z0)}}function I(W){if(e.is(Ei)){var J=$(W),le=J>t.Controller.getEnd(),_e=J<0;(_e||le)&&(W=M(W,le))}return W}function M(W,J){var le=W-V(J),_e=_();return W-=k(_e*(vs(er(le)/_e)||1))*(J?1:-1),W}function P(){T(q(),!0),f.cancel()}function $(W){for(var J=t.Slides.get(),le=0,_e=1/0,ve=0;ve<J.length;ve++){var Ie=J[ve].index,ie=er(F(Ie,!0)-W);if(ie<=_e)_e=ie,le=Ie;else break}return le}function F(W,J){var le=k(b(W-1)-z(W));return J?x(le):le}function q(){var W=C("left");return gr(R)[W]-gr(B)[W]+k(h(!1))}function x(W){return r.trimSpace&&e.is(vi)&&(W=pi(W,0,k(_(!0)-m()))),W}function z(W){var J=r.focus;return J==="center"?(m()-d(W,!0))/2:+J*d(W)||0}function V(W){return F(W?t.Controller.getEnd():0,!!r.trimSpace)}function K(W){var J=k(M(q(),W));return W?J>=0:J<=R[C("scrollWidth")]-gr(B)[C("width")]}function Z(W,J){J=xs(J)?q():J;var le=W!==!0&&k(J)<k(V(!1)),_e=W!==!1&&k(J)>k(V(!0));return le||_e}return{mount:p,move:v,jump:S,translate:T,shift:M,cancel:P,toIndex:$,toPosition:F,getPosition:q,getLimit:V,exceededLimit:Z,reposition:w}}function _8(e,t,r){var n=nt(e),o=n.on,i=n.emit,a=t.Move,u=a.getPosition,d=a.getLimit,h=a.toPosition,b=t.Slides,m=b.isEnough,_=b.getLength,A=r.omitEnd,C=e.is(Ei),k=e.is(vi),N=Xe(q,!1),R=Xe(q,!0),B=r.start||0,f,p=B,w,v,S;function T(){I(),o([Ut,ht,lc],I),o(Bs,M)}function I(){w=_(!0),v=r.perMove,S=r.perPage,f=K();var ie=pi(B,0,A?f:w-1);ie!==B&&(B=ie,a.reposition())}function M(){f!==K()&&i(lc)}function P(ie,Se,Ve){if(!Ie()){var Re=F(ie),je=V(Re);je>-1&&(Se||je!==B)&&(le(je),a.move(Re,je,p,Ve))}}function $(ie,Se,Ve,Re){t.Scroll.scroll(ie,Se,Ve,function(){var je=V(a.toIndex(u()));le(A?eo(je,f):je),Re&&Re()})}function F(ie){var Se=B;if(Xn(ie)){var Ve=ie.match(/([+\-<>])(\d+)?/)||[],Re=Ve[1],je=Ve[2];Re==="+"||Re==="-"?Se=x(B+ +(""+Re+(+je||1)),B):Re===">"?Se=je?Z(+je):N(!0):Re==="<"&&(Se=R(!0))}else Se=C?ie:pi(ie,0,f);return Se}function q(ie,Se){var Ve=v||(ve()?1:S),Re=x(B+Ve*(ie?-1:1),B,!(v||ve()));return Re===-1&&k&&!Q0(u(),d(!ie),1)?ie?0:f:Se?Re:V(Re)}function x(ie,Se,Ve){if(m()||ve()){var Re=z(ie);Re!==ie&&(Se=ie,ie=Re,Ve=!1),ie<0||ie>f?!v&&(ic(0,ie,Se,!0)||ic(f,Se,ie,!0))?ie=Z(W(ie)):C?ie=Ve?ie<0?-(w%S||S):w:ie:r.rewind?ie=ie<0?f:0:ie=-1:Ve&&ie!==Se&&(ie=Z(W(Se)+(ie<Se?-1:1)))}else ie=-1;return ie}function z(ie){if(k&&r.trimSpace==="move"&&ie!==B)for(var Se=u();Se===h(ie,!0)&&ic(ie,0,e.length-1,!r.rewind);)ie<B?--ie:++ie;return ie}function V(ie){return C?(ie+w)%w||0:ie}function K(){for(var ie=w-(ve()||C&&v?1:S);A&&ie-- >0;)if(h(w-1,!0)!==h(ie,!0)){ie++;break}return pi(ie,0,w-1)}function Z(ie){return pi(ve()?ie:S*ie,0,f)}function W(ie){return ve()?eo(ie,f):uc((ie>=f?w-1:ie)/S)}function J(ie){var Se=a.toIndex(ie);return k?pi(Se,0,f):Se}function le(ie){ie!==B&&(p=B,B=ie)}function _e(ie){return ie?p:B}function ve(){return!xs(r.focus)||r.isNavigation}function Ie(){return e.state.is([_i,Es])&&!!r.waitForTransition}return{mount:T,go:P,scroll:$,getNext:N,getPrev:R,getAdjacent:q,getEnd:K,setIndex:le,getIndex:_e,toIndex:Z,toPage:W,toDest:J,hasFocus:ve,isBusy:Ie}}var E8="http://www.w3.org/2000/svg",x8="m15.5 0.932-4.3 4.38 14.5 14.6-14.5 14.5 4.3 4.4 14.6-14.6 4.4-4.3-4.4-4.4-14.6-14.6z",rc=40;function k8(e,t,r){var n=nt(e),o=n.on,i=n.bind,a=n.emit,u=r.classes,d=r.i18n,h=t.Elements,b=t.Controller,m=h.arrows,_=h.track,A=m,C=h.prev,k=h.next,N,R,B={};function f(){w(),o(Ut,p)}function p(){v(),f()}function w(){var $=r.arrows;$&&!(C&&k)&&I(),C&&k&&(ws(B,{prev:C,next:k}),ys(A,$?"":"none"),Wr(A,R=qd+"--"+r.direction),$&&(S(),P(),Fe([C,k],Is,_.id),a(bc,C,k)))}function v(){n.destroy(),yn(A,R),N?(jo(m?[C,k]:A),C=k=null):Qr([C,k],Vd)}function S(){o([En,ro,ht,no,lc],P),i(k,"click",Xe(T,">")),i(C,"click",Xe(T,"<"))}function T($){b.go($,!0)}function I(){A=m||bi("div",u.arrows),C=M(!0),k=M(!1),N=!0,Ss(A,[C,k]),!m&&Od(A,_)}function M($){var F='<button class="'+u.arrow+" "+($?u.prev:u.next)+'" type="button"><svg xmlns="'+E8+'" viewBox="0 0 '+rc+" "+rc+'" width="'+rc+'" height="'+rc+'" focusable="false"><path d="'+(r.arrowPath||x8)+'" />';return q0(F)}function P(){if(C&&k){var $=e.index,F=b.getPrev(),q=b.getNext(),x=F>-1&&$<F?d.last:d.prev,z=q>-1&&$>q?d.first:d.next;C.disabled=F<0,k.disabled=q<0,Fe(C,mr,x),Fe(k,mr,z),a(wc,C,k,F,q)}}return{arrows:B,mount:f,destroy:v,update:P}}var S8=Ud+"-interval";function A8(e,t,r){var n=nt(e),o=n.on,i=n.bind,a=n.emit,u=kc(r.interval,e.go.bind(e,">"),S),d=u.isPaused,h=t.Elements,b=t.Elements,m=b.root,_=b.toggle,A=r.autoplay,C,k,N=A==="pause";function R(){A&&(B(),_&&Fe(_,Is,h.track.id),N||f(),v())}function B(){r.pauseOnHover&&i(m,"mouseenter mouseleave",function(I){C=I.type==="mouseenter",w()}),r.pauseOnFocus&&i(m,"focusin focusout",function(I){k=I.type==="focusin",w()}),_&&i(_,"click",function(){N?f():p(!0)}),o([Pr,Ls,ht],u.rewind),o(Pr,T)}function f(){d()&&t.Slides.isEnough()&&(u.start(!r.resetProgress),k=C=N=!1,v(),a(_c))}function p(I){I===void 0&&(I=!0),N=!!I,v(),d()||(u.pause(),a(xc))}function w(){N||(C||k?p(!1):f())}function v(){_&&(wn(_,Vo,!N),Fe(_,mr,r.i18n[N?"play":"pause"]))}function S(I){var M=h.bar;M&&Lr(M,"width",I*100+"%"),a(Ec,I)}function T(I){var M=t.Slides.getAt(I);u.set(M&&+Cr(M.slide,S8)||r.interval)}return{mount:R,destroy:u.cancel,play:f,pause:p,isPaused:d}}function T8(e,t,r){var n=nt(e),o=n.on;function i(){r.cover&&(o(Ps,Xe(u,!0)),o([En,Ut,ht],Xe(a,!0)))}function a(d){t.Slides.forEach(function(h){var b=As(h.container||h.slide,"img");b&&b.src&&u(d,b,h)})}function u(d,h,b){b.style("background",d?'center/cover no-repeat url("'+h.src+'")':"",!0),ys(h,d?"none":"")}return{mount:i,destroy:Xe(a,!1)}}var $8=10,B8=600,L8=.6,C8=1.5,P8=800;function I8(e,t,r){var n=nt(e),o=n.on,i=n.emit,a=e.state.set,u=t.Move,d=u.getPosition,h=u.getLimit,b=u.exceededLimit,m=u.translate,_=e.is(vi),A,C,k=1;function N(){o(Pr,p),o([Ut,ht],w)}function R(S,T,I,M,P){var $=d();if(p(),I&&(!_||!b())){var F=t.Layout.sliderSize(),q=$d(S)*F*uc(er(S)/F)||0;S=u.toPosition(t.Controller.toDest(S%F))+q}var x=Q0($,S,1);k=1,T=x?0:T||cc(er(S-$)/C8,P8),C=M,A=kc(T,B,Xe(f,$,S,P),1),a(Es),i(Ls),A.start()}function B(){a(yi),C&&C(),i(no)}function f(S,T,I,M){var P=d(),$=S+(T-S)*v(M),F=($-P)*k;m(P+F),_&&!I&&b()&&(k*=L8,er(F)<$8&&R(h(b(!0)),B8,!1,C,!0))}function p(){A&&A.cancel()}function w(){A&&!A.isPaused()&&(p(),B())}function v(S){var T=r.easingFunc;return T?T(S):1-Math.pow(1-S,4)}return{mount:N,destroy:p,scroll:R,cancel:w}}var gi={passive:!1,capture:!0};function N8(e,t,r){var n=nt(e),o=n.on,i=n.emit,a=n.bind,u=n.unbind,d=e.state,h=t.Move,b=t.Scroll,m=t.Controller,_=t.Elements.track,A=t.Media.reduce,C=t.Direction,k=C.resolve,N=C.orient,R=h.getPosition,B=h.exceededLimit,f,p,w,v,S,T=!1,I,M,P;function $(){a(_,kd,Ad,gi),a(_,Sd,Ad,gi),a(_,um,q,gi),a(_,"click",V,{capture:!0}),a(_,"dragstart",bn),o([En,Ut],F)}function F(){var he=r.drag;Qe(!he),v=he==="free"}function q(he){if(I=!1,!M){var Me=je(he);Re(he.target)&&(Me||!he.button)&&(m.isBusy()?bn(he,!0):(P=Me?_:window,S=d.is([_i,Es]),w=null,a(P,kd,x,gi),a(P,Sd,z,gi),h.cancel(),b.cancel(),K(he)))}}function x(he){if(d.is(nc)||(d.set(nc),i(Md)),he.cancelable)if(S){h.translate(f+Ve(ve(he)));var Me=Ie(he)>z0,Ce=T!==(T=B());(Me||Ce)&&K(he),I=!0,i(Dd),bn(he)}else J(he)&&(S=W(he),bn(he))}function z(he){d.is(nc)&&(d.set(yi),i(Fd)),S&&(Z(he),bn(he)),u(P,kd,x),u(P,Sd,z),S=!1}function V(he){!M&&I&&bn(he,!0)}function K(he){w=p,p=he,f=R()}function Z(he){var Me=le(he),Ce=_e(Me),Ne=r.rewind&&r.rewindByDrag;A(!1),v?m.scroll(Ce,0,r.snap):e.is(Ns)?m.go(N($d(Me))<0?Ne?"<":"-":Ne?">":"+"):e.is(vi)&&T&&Ne?m.go(B(!0)?">":"<"):m.go(m.toDest(Ce),!0),A(!0)}function W(he){var Me=r.dragMinThreshold,Ce=gs(Me),Ne=Ce&&Me.mouse||0,qe=(Ce?Me.touch:+Me)||10;return er(ve(he))>(je(he)?qe:Ne)}function J(he){return er(ve(he))>er(ve(he,!0))}function le(he){if(e.is(Ei)||!T){var Me=Ie(he);if(Me&&Me<z0)return ve(he)/Me}return 0}function _e(he){return R()+$d(he)*eo(er(he)*(r.flickPower||600),v?1/0:t.Layout.listSize()*(r.flickMaxPages||1))}function ve(he,Me){return Se(he,Me)-Se(ie(he),Me)}function Ie(he){return Td(he)-Td(ie(he))}function ie(he){return p===he&&w||p}function Se(he,Me){return(je(he)?he.changedTouches[0]:he)["page"+k(Me?"Y":"X")]}function Ve(he){return he/(T&&e.is(vi)?h8:1)}function Re(he){var Me=r.noDrag;return!ms(he,"."+om+", ."+Lc)&&(!Me||!ms(he,Me))}function je(he){return typeof TouchEvent<"u"&&he instanceof TouchEvent}function Et(){return S}function Qe(he){M=he}return{mount:$,disable:Qe,isDragging:Et}}var O8={Spacebar:" ",Right:Tc,Left:Ac,Up:Y0,Down:J0};function Qd(e){return e=Xn(e)?e:e.key,O8[e]||e}var M0="keydown";function R8(e,t,r){var n=nt(e),o=n.on,i=n.bind,a=n.unbind,u=e.root,d=t.Direction.resolve,h,b;function m(){_(),o(Ut,A),o(Ut,_),o(Pr,k)}function _(){var R=r.keyboard;R&&(h=R==="global"?window:u,i(h,M0,N))}function A(){a(h,M0)}function C(R){b=R}function k(){var R=b;b=!0,D0(function(){b=R})}function N(R){if(!b){var B=Qd(R);B===d(Ac)?e.go("<"):B===d(Tc)&&e.go(">")}}return{mount:m,destroy:A,disable:C}}var ps=Ud+"-lazy",sc=ps+"-srcset",U8="["+ps+"], ["+sc+"]";function z8(e,t,r){var n=nt(e),o=n.on,i=n.off,a=n.bind,u=n.emit,d=r.lazyLoad==="sequential",h=[ro,no],b=[];function m(){r.lazyLoad&&(_(),o(ht,_))}function _(){_n(b),A(),d?R():(i(h),o(h,C),C())}function A(){t.Slides.forEach(function(B){Rd(B.slide,U8).forEach(function(f){var p=Cr(f,ps),w=Cr(f,sc);if(p!==f.src||w!==f.srcset){var v=r.classes.spinner,S=f.parentElement,T=As(S,"."+v)||bi("span",v,S);b.push([f,B,T]),f.src||ys(f,"none")}})})}function C(){b=b.filter(function(B){var f=r.perPage*((r.preloadPages||1)+1)-1;return B[1].isWithin(e.index,f)?k(B):!0}),b.length||i(h)}function k(B){var f=B[0];Wr(B[1].slide,Cd),a(f,"load error",Xe(N,B)),Fe(f,"src",Cr(f,ps)),Fe(f,"srcset",Cr(f,sc)),Qr(f,ps),Qr(f,sc)}function N(B,f){var p=B[0],w=B[1];yn(w.slide,Cd),f.type!=="error"&&(jo(B[2]),ys(p,""),u(Ps,p,w),u(Ho)),d&&R()}function R(){b.length&&k(b.shift())}return{mount:m,destroy:Xe(_n,b),check:C}}function M8(e,t,r){var n=nt(e),o=n.on,i=n.emit,a=n.bind,u=t.Slides,d=t.Elements,h=t.Controller,b=h.hasFocus,m=h.getIndex,_=h.go,A=t.Direction.resolve,C=d.pagination,k=[],N,R;function B(){f(),o([Ut,ht,lc],B);var M=r.pagination;C&&ys(C,M?"":"none"),M&&(o([Pr,Ls,no],I),p(),I(),i(yc,{list:N,items:k},T(e.index)))}function f(){N&&(jo(C?to(N.children):N),yn(N,R),_n(k),N=null),n.destroy()}function p(){var M=e.length,P=r.classes,$=r.i18n,F=r.perPage,q=b()?h.getEnd()+1:vs(M/F);N=C||bi("ul",P.pagination,d.track.parentElement),Wr(N,R=Cc+"--"+S()),Fe(N,vn,"tablist"),Fe(N,mr,$.select),Fe(N,Hd,S()===$c?"vertical":"");for(var x=0;x<q;x++){var z=bi("li",null,N),V=bi("button",{class:P.page,type:"button"},z),K=u.getIn(x).map(function(W){return W.slide.id}),Z=!b()&&F>1?$.pageX:$.slideX;a(V,"click",Xe(w,x)),r.paginationKeyboard&&a(V,"keydown",Xe(v,x)),Fe(z,vn,"presentation"),Fe(V,vn,"tab"),Fe(V,Is,K.join(" ")),Fe(V,mr,Bd(Z,x+1)),Fe(V,wi,-1),k.push({li:z,button:V,page:x})}}function w(M){_(">"+M,!0)}function v(M,P){var $=k.length,F=Qd(P),q=S(),x=-1;F===A(Tc,!1,q)?x=++M%$:F===A(Ac,!1,q)?x=(--M+$)%$:F==="Home"?x=0:F==="End"&&(x=$-1);var z=k[x];z&&(V0(z.button),_(">"+x),bn(P,!0))}function S(){return r.paginationDirection||r.direction}function T(M){return k[h.toPage(M)]}function I(){var M=T(m(!0)),P=T(m());if(M){var $=M.button;yn($,Vo),Qr($,I0),Fe($,wi,-1)}if(P){var F=P.button;Wr(F,Vo),Fe(F,I0,!0),Fe(F,wi,"")}i(vc,{list:N,items:k},M,P)}return{items:k,mount:B,destroy:f,getAt:T,update:I}}var D8=[" ","Enter"];function F8(e,t,r){var n=r.isNavigation,o=r.slideFocus,i=[];function a(){e.splides.forEach(function(C){C.isParent||(h(e,C.splide),h(C.splide,e))}),n&&b()}function u(){i.forEach(function(C){C.destroy()}),_n(i)}function d(){u(),a()}function h(C,k){var N=nt(C);N.on(Pr,function(R,B,f){k.go(k.is(Ei)?f:R)}),i.push(N)}function b(){var C=nt(e),k=C.on;k($s,_),k(G0,A),k([En,Ut],m),i.push(C),C.emit(Cs,e.splides)}function m(){Fe(t.Elements.list,Hd,r.direction===$c?"vertical":"")}function _(C){e.go(C.index)}function A(C,k){Nd(D8,Qd(k))&&(_(C),bn(k))}return{setup:Xe(t.Media.set,{slideFocus:xs(o)?n:o},!0),mount:a,destroy:u,remount:d}}function j8(e,t,r){var n=nt(e),o=n.bind,i=0;function a(){r.wheel&&o(t.Elements.track,"wheel",u,gi)}function u(h){if(h.cancelable){var b=h.deltaY,m=b<0,_=Td(h),A=r.wheelMinThreshold||0,C=r.wheelSleep||0;er(b)>A&&_-i>C&&(e.go(m?"<":">"),i=_),d(m)&&bn(h)}}function d(h){return!r.releaseWheel||e.state.is(_i)||t.Controller.getAdjacent(h)!==-1}return{mount:a}}var H8=90;function V8(e,t,r){var n=nt(e),o=n.on,i=t.Elements.track,a=r.live&&!r.isNavigation,u=bi("span",c8),d=kc(H8,Xe(b,!1));function h(){a&&(_(!t.Autoplay.isPaused()),Fe(i,R0,!0),u.textContent="\u2026",o(_c,Xe(_,!0)),o(xc,Xe(_,!1)),o([ro,no],Xe(b,!0)))}function b(A){Fe(i,O0,A),A?(Ss(i,u),d.start()):(jo(u),d.cancel())}function m(){Qr(i,[N0,R0,O0]),jo(u)}function _(A){a&&Fe(i,N0,A?"off":"polite")}return{mount:h,disable:_,destroy:m}}var q8=Object.freeze({__proto__:null,Media:e8,Direction:t8,Elements:p8,Slides:m8,Layout:b8,Clones:y8,Move:v8,Controller:_8,Arrows:k8,Autoplay:A8,Cover:T8,Scroll:I8,Drag:N8,Keyboard:R8,LazyLoad:z8,Pagination:M8,Sync:F8,Wheel:j8,Live:V8}),W8={prev:"Previous slide",next:"Next slide",first:"Go to first slide",last:"Go to last slide",slideX:"Go to slide %s",pageX:"Go to page %s",play:"Start autoplay",pause:"Pause autoplay",carousel:"carousel",slide:"slide",select:"Select a slide to show",slideLabel:"%s of %s"},Q8={type:"slide",role:"region",speed:400,perPage:1,cloneStatus:!0,arrows:!0,pagination:!0,paginationKeyboard:!0,interval:5e3,pauseOnHover:!0,pauseOnFocus:!0,resetProgress:!0,easing:"cubic-bezier(0.25, 1, 0.5, 1)",drag:!0,direction:"ltr",trimSpace:!0,focusableNodes:"a, button, textarea, input, select, iframe",live:!0,classes:d8,i18n:W8,reducedMotion:{speed:0,rewindSpeed:0,autoplay:"pause"}};function K8(e,t,r){var n=t.Slides;function o(){nt(e).on([En,ht],i)}function i(){n.forEach(function(u){u.style("transform","translateX(-"+100*u.index+"%)")})}function a(u,d){n.style("transition","opacity "+r.speed+"ms "+r.easing),D0(d)}return{mount:o,start:a,cancel:Ad}}function G8(e,t,r){var n=t.Move,o=t.Controller,i=t.Scroll,a=t.Elements.list,u=Xe(Lr,a,"transition"),d;function h(){nt(e).bind(a,"transitionend",function(A){A.target===a&&d&&(m(),d())})}function b(A,C){var k=n.toPosition(A,!0),N=n.getPosition(),R=_(A);er(k-N)>=1&&R>=1?r.useScroll?i.scroll(k,R,!1,C):(u("transform "+R+"ms "+r.easing),n.translate(k,!0),d=C):(n.jump(A),C())}function m(){u(""),i.cancel()}function _(A){var C=r.rewindSpeed;if(e.is(vi)&&C){var k=o.getIndex(!0),N=o.getEnd();if(k===0&&A>=N||k>=N&&A===0)return C}return r.speed}return{mount:h,start:b,cancel:m}}var Z8=function(){function e(r,n){this.event=nt(),this.Components={},this.state=J3(mi),this.splides=[],this._o={},this._E={};var o=Xn(r)?W0(document,r):r;hs(o,o+" is invalid."),this.root=o,n=Jn({label:Cr(o,mr)||"",labelledby:Cr(o,jd)||""},Q8,e.defaults,n||{});try{Jn(n,JSON.parse(Cr(o,Ud)))}catch{hs(!1,"Invalid JSON")}this._o=Object.create(Jn({},n))}var t=e.prototype;return t.mount=function(n,o){var i=this,a=this.state,u=this.Components;hs(a.is([mi,ac]),"Already mounted!"),a.set(mi),this._C=u,this._T=o||this._T||(this.is(Ns)?K8:G8),this._E=n||this._E;var d=ws({},q8,this._E,{Transition:this._T});return Fo(d,function(h,b){var m=h(i,u,i._o);u[b]=m,m.setup&&m.setup()}),Fo(u,function(h){h.mount&&h.mount()}),this.emit(En),Wr(this.root,u8),a.set(yi),this.emit(C0),this},t.sync=function(n){return this.splides.push({splide:n}),n.splides.push({splide:this,isParent:!0}),this.state.is(yi)&&(this._C.Sync.remount(),n.Components.Sync.remount()),this},t.go=function(n){return this._C.Controller.go(n),this},t.on=function(n,o){return this.event.on(n,o),this},t.off=function(n){return this.event.off(n),this},t.emit=function(n){var o;return(o=this.event).emit.apply(o,[n].concat(to(arguments,1))),this},t.add=function(n,o){return this._C.Slides.add(n,o),this},t.remove=function(n){return this._C.Slides.remove(n),this},t.is=function(n){return this._o.type===n},t.refresh=function(){return this.emit(ht),this},t.destroy=function(n){n===void 0&&(n=!0);var o=this.event,i=this.state;return i.is(mi)?nt(this).on(C0,this.destroy.bind(this,n)):(Fo(this._C,function(a){a.destroy&&a.destroy(n)},!0),o.emit(mc),o.destroy(),n&&_n(this.splides),i.set(ac)),this},Q3(e,[{key:"options",get:function(){return this._o},set:function(n){this._C.Media.set(n,!0,!0)}},{key:"length",get:function(){return this._C.Slides.getLength(!0)}},{key:"index",get:function(){return this._C.Controller.getIndex()}}]),e}(),Pc=Z8;Pc.defaults={};Pc.STATES=G3;var Y8=[En,ht,Ho,Bs,Md,Dd,Fd,Ls,no,mc,_c,xc];function lm(e,t){let r=(n,o={})=>{t(J8(n),{splide:e,...o})};e.on($s,(n,o)=>{r($s,{Slide:n,e:o})}),e.on(Pr,(n,o,i)=>{r(Pr,{index:n,prev:o,dest:i})}),e.on(ro,(n,o,i)=>{r(ro,{index:n,prev:o,dest:i})}),e.on(fc,n=>{r(fc,{Slide:n})}),e.on(hc,n=>{r(hc,{Slide:n})}),e.on(pc,n=>{r(pc,{Slide:n})}),e.on(gc,n=>{r(gc,{Slide:n})}),e.on(Ut,n=>{r(Ut,n)}),e.on(bc,(n,o)=>{r(bc,{prev:n,next:o})}),e.on(wc,(n,o)=>{r(wc,{prev:n,next:o})}),e.on(yc,(n,o)=>{r(yc,{data:n,item:o})}),e.on(vc,(n,o,i)=>{r(vc,{data:n,prev:o,curr:i})}),e.on(Cs,n=>{r(Cs,{splides:n})}),e.on(Ec,n=>{r(Ec,{rate:n})}),e.on(Ps,(n,o)=>{r(Ps,{img:n,Slide:o})}),Y8.forEach(n=>{e.on(n,()=>{r(n)})})}function J8(e){return e.split(":").map((t,r)=>r>0?t.charAt(0).toUpperCase()+t.slice(1):t).join("").replace("Lazyload","LazyLoad")}function X8(e){let t,r=e[11].default,n=So(r,e,e[13],null);return{c(){n&&n.c()},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8192)&&To(n,r,o,o[13],t?Ao(r,o[13],i,null):$o(o[13]),null)},i(o){t||(Ee(n,o),t=!0)},o(o){Te(n,o),t=!1},d(o){n&&n.d(o)}}}function eE(e){let t,r;return t=new Gd({props:{$$slots:{default:[tE]},$$scope:{ctx:e}}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&8192&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function tE(e){let t,r=e[11].default,n=So(r,e,e[13],null);return{c(){n&&n.c()},m(o,i){n&&n.m(o,i),t=!0},p(o,i){n&&n.p&&(!t||i&8192)&&To(n,r,o,o[13],t?Ao(r,o[13],i,null):$o(o[13]),null)},i(o){t||(Ee(n,o),t=!0)},o(o){Te(n,o),t=!1},d(o){n&&n.d(o)}}}function rE(e){let t,r,n,o,i,a=[eE,X8],u=[];function d(m,_){return m[1]?0:1}r=d(e,-1),n=u[r]=a[r](e);let h=[{class:o=qr("splide",e[0])},e[3]],b={};for(let m=0;m<h.length;m+=1)b=Pt(b,h[m]);return{c(){t=ae("div"),n.c(),cn(t,b)},m(m,_){fe(m,t,_),u[r].m(t,null),e[12](t),i=!0},p(m,[_]){let A=r;r=d(m,_),r===A?u[r].p(m,_):(yt(),Te(u[A],1,1,()=>{u[A]=null}),vt(),n=u[r],n?n.p(m,_):(n=u[r]=a[r](m),n.c()),Ee(n,1),n.m(t,null)),cn(t,b=jr(h,[(!i||_&1&&o!==(o=qr("splide",m[0])))&&{class:o},_&8&&m[3]]))},i(m){i||(Ee(n),i=!0)},o(m){Te(n),i=!1},d(m){m&&ue(t),u[r].d(),e[12](null)}}}function nE(e,t,r){let n=["class","options","splide","extensions","transition","hasTrack","go","sync"],o=an(t,n),{$$slots:i={},$$scope:a}=t,{class:u=void 0}=t,{options:d={}}=t,{splide:h=void 0}=t,{extensions:b=void 0}=t,{transition:m=void 0}=t,{hasTrack:_=!0}=t,A=bl(),C,k,N=fs({},d);Ot(()=>(r(4,h=new Pc(C,d)),lm(h,A),h.mount(b,m),k=tc(h),()=>h.destroy())),gl(()=>{if(h){let p=tc(h);_d(k,p)||(h.refresh(),k=p.slice())}});function R(p){h?.go(p)}function B(p){h?.sync(p)}function f(p){ma[p?"unshift":"push"](()=>{C=p,r(2,C)})}return e.$$set=p=>{t=Pt(Pt({},t),oi(p)),r(3,o=an(t,n)),"class"in p&&r(0,u=p.class),"options"in p&&r(5,d=p.options),"splide"in p&&r(4,h=p.splide),"extensions"in p&&r(6,b=p.extensions),"transition"in p&&r(7,m=p.transition),"hasTrack"in p&&r(1,_=p.hasTrack),"$$scope"in p&&r(13,a=p.$$scope)},e.$$.update=()=>{e.$$.dirty&1072&&h&&!ds(N,d)&&(r(4,h.options=d,h),r(10,N=fs({},N)))},[u,_,C,o,h,d,b,m,R,B,N,i,f,a]}var Kd=class extends rt{constructor(t){super(),ct(this,t,nE,rE,tt,{class:0,options:5,splide:4,extensions:6,transition:7,hasTrack:1,go:8,sync:9})}get class(){return this.$$.ctx[0]}set class(t){this.$$set({class:t}),Ar()}get options(){return this.$$.ctx[5]}set options(t){this.$$set({options:t}),Ar()}get splide(){return this.$$.ctx[4]}set splide(t){this.$$set({splide:t}),Ar()}get extensions(){return this.$$.ctx[6]}set extensions(t){this.$$set({extensions:t}),Ar()}get transition(){return this.$$.ctx[7]}set transition(t){this.$$set({transition:t}),Ar()}get hasTrack(){return this.$$.ctx[1]}set hasTrack(t){this.$$set({hasTrack:t}),Ar()}get go(){return this.$$.ctx[8]}get sync(){return this.$$.ctx[9]}},Os=Kd;function oE(e){let t,r,n,o,i=e[3].default,a=So(i,e,e[2],null),u=[{class:n=qr("splide__track",e[0])},e[1]],d={};for(let h=0;h<u.length;h+=1)d=Pt(d,u[h]);return{c(){t=ae("div"),r=ae("ul"),a&&a.c(),oe(r,"class","splide__list"),cn(t,d)},m(h,b){fe(h,t,b),re(t,r),a&&a.m(r,null),o=!0},p(h,[b]){a&&a.p&&(!o||b&4)&&To(a,i,h,h[2],o?Ao(i,h[2],b,null):$o(h[2]),null),cn(t,d=jr(u,[(!o||b&1&&n!==(n=qr("splide__track",h[0])))&&{class:n},b&2&&h[1]]))},i(h){o||(Ee(a,h),o=!0)},o(h){Te(a,h),o=!1},d(h){h&&ue(t),a&&a.d(h)}}}function iE(e,t,r){let n=["class"],o=an(t,n),{$$slots:i={},$$scope:a}=t,{class:u=void 0}=t;return e.$$set=d=>{t=Pt(Pt({},t),oi(d)),r(1,o=an(t,n)),"class"in d&&r(0,u=d.class),"$$scope"in d&&r(2,a=d.$$scope)},[u,o,a,i]}var Zd=class extends rt{constructor(t){super(),ct(this,t,iE,oE,tt,{class:0})}},Gd=Zd;function sE(e){let t,r,n,o=e[3].default,i=So(o,e,e[2],null),a=[{class:r=qr("splide__slide",e[0])},e[1]],u={};for(let d=0;d<a.length;d+=1)u=Pt(u,a[d]);return{c(){t=ae("li"),i&&i.c(),cn(t,u)},m(d,h){fe(d,t,h),i&&i.m(t,null),n=!0},p(d,[h]){i&&i.p&&(!n||h&4)&&To(i,o,d,d[2],n?Ao(o,d[2],h,null):$o(d[2]),null),cn(t,u=jr(a,[(!n||h&1&&r!==(r=qr("splide__slide",d[0])))&&{class:r},h&2&&d[1]]))},i(d){n||(Ee(i,d),n=!0)},o(d){Te(i,d),n=!1},d(d){d&&ue(t),i&&i.d(d)}}}function aE(e,t,r){let n=["class"],o=an(t,n),{$$slots:i={},$$scope:a}=t,{class:u=void 0}=t;return e.$$set=d=>{t=Pt(Pt({},t),oi(d)),r(1,o=an(t,n)),"class"in d&&r(0,u=d.class),"$$scope"in d&&r(2,a=d.$$scope)},[u,o,a,i]}var Yd=class extends rt{constructor(t){super(),ct(this,t,aE,sE,tt,{class:0})}},Rs=Yd;var Xd=class{generateSecretKey(){return pr.utils.randomPrivateKey()}getPublicKey(t){return xt(pr.getPublicKey(t))}finalizeEvent(t,r){let n=t;return n.pubkey=xt(pr.getPublicKey(r)),n.id=Jd(n),n.sig=xt(pr.sign(Jd(n),r)),n[zo]=!0,n}verifyEvent(t){if(typeof t[zo]=="boolean")return t[zo];let r=Jd(t);if(r!==t.id)return t[zo]=!1,!1;try{let n=pr.verify(t.sig,r,t.pubkey);return t[zo]=n,n}catch{return t[zo]=!1,!1}}};function cE(e){if(!pd(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Jd(e){let t=Wa(li.encode(cE(e)));return xt(t)}var Ic=new Xd,s$=Ic.generateSecretKey,a$=Ic.getPublicKey,c$=Ic.finalizeEvent,u$=Ic.verifyEvent;var uE=Object.defineProperty,lE=(e,t,r)=>t in e?uE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,dm=(e,t,r)=>lE(e,typeof t!="symbol"?t+"":t,r),Nc=class{constructor(){dm(this,"_locking"),dm(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let t,r=new Promise(o=>t=()=>{this._locks-=1,o()}),n=this._locking.then(()=>t);return this._locking=this._locking.then(()=>r),n}};var Us=ls(!1),Oc=ls(0),xi=class{relays;filter;#e=[];#n=Math.round(Date.now()/1e3);#t;#r={};#o=new Nc;constructor(t,r){this.relays=t,this.filter=r,this.#t=r.kinds?.[0]||1}async pluck(t,r){let n=await this.#o.lock(),o=[],i=this.#e;for(this.#e=[];i.length>0||Object.keys(this.#r).length<this.relays.length;){if(i.length<t){let a=this.relays.filter(u=>!this.#r[u]).slice(0,2);if(a.length){let u=await mn.querySync(a,{...this.filter,until:this.#n,limit:t*(r>(this.#t===1?0:10)?3:1)*(this.#t===1?6:1)});u.length===0?a.forEach(d=>{this.#r[d]=!0}):(this.#t===1&&(u=u.filter(h0)),i.push(...u),i.sort((d,h)=>d.created_at-h.created_at),this.#n=i[0]?.created_at-1)}}for(let a=i.length-1;a>=0;a--){let u=i[a];if(r>0){if(u.kind===30023){if(u.content.length<r){this.#e.push(u),i.splice(a,1);continue}}else if(!dE(u,r)){this.#e.push(u),i.splice(a,1);continue}}if(i.splice(a,1),o.push(cs(u)),o.length===t)return n(),this.#e.push(...i),this.#e.sort((d,h)=>d.created_at-h.created_at),Oc.update(d=>d+o.length),Us.set(!0),o}}return this.#e.sort((a,u)=>a.created_at-u.created_at),Oc.update(a=>a+o.length),Us.set(!0),o}async fetchIds(t){let r=await mn.querySync(this.relays.slice(0,5),{ids:t});return Us.set(!0),r.map(cs)}};function dE(e,t){let r=0;for(let n of ec(e.content)){switch(n.type){case"text":r+=n.text.length;case"url":case"image":case"video":case"audio":case"reference":r+=14}if(r>=t)return!0}return!1}function fm(e,t,r){let n=e.slice();return n[8]=t[r],n}function hm(e,t,r){let n=e.slice();return n[8]=t[r],n}function pm(e,t,r){let n=e.slice();return n[8]=t[r],n}function gm(e){let t,r,n,o,i=[pE,hE,fE],a=[];function u(d,h){return d[0]==="grid"?0:d[0]==="list"?1:d[0]==="slide"&&d[2]?2:-1}return~(r=u(e,-1))&&(n=a[r]=i[r](e)),{c(){t=ae("section"),n&&n.c(),oe(t,"class","block notes")},m(d,h){fe(d,t,h),~r&&a[r].m(t,null),o=!0},p(d,h){let b=r;r=u(d,h),r===b?~r&&a[r].p(d,h):(n&&(yt(),Te(a[b],1,1,()=>{a[b]=null}),vt()),~r?(n=a[r],n?n.p(d,h):(n=a[r]=i[r](d),n.c()),Ee(n,1),n.m(t,null)):n=null)},i(d){o||(Ee(n),o=!0)},o(d){Te(n),o=!1},d(d){d&&ue(t),~r&&a[r].d()}}}function fE(e){let t,r;return t=new Os({props:{class:"slide",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[mE]},$$scope:{ctx:e}}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&32776&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function hE(e){let t,r,n=Je(e[3]),o=[];for(let i=0;i<n.length;i+=1)o[i]=bm(hm(e,n,i));return{c(){t=ae("div"),r=ae("ul");for(let i=0;i<o.length;i+=1)o[i].c();oe(t,"class","list")},m(i,a){fe(i,t,a),re(t,r);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(r,null)},p(i,a){if(a&8){n=Je(i[3]);let u;for(u=0;u<n.length;u+=1){let d=hm(i,n,u);o[u]?o[u].p(d,a):(o[u]=bm(d),o[u].c(),o[u].m(r,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}},i:De,o:De,d(i){i&&ue(t),Xt(o,i)}}}function pE(e){let t,r,n=Je(e[3]),o=[];for(let i=0;i<n.length;i+=1)o[i]=_m(pm(e,n,i));return{c(){t=ae("div");for(let i=0;i<o.length;i+=1)o[i].c();oe(t,"class",r="grid "+(e[3].length%2!==0?"odd":""))},m(i,a){fe(i,t,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(i,a){if(a&10){n=Je(i[3]);let u;for(u=0;u<n.length;u+=1){let d=pm(i,n,u);o[u]?o[u].p(d,a):(o[u]=_m(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}a&8&&r!==(r="grid "+(i[3].length%2!==0?"odd":""))&&oe(t,"class",r)},i:De,o:De,d(i){i&&ue(t),Xt(o,i)}}}function gE(e){let t,r,n=jt(e[8].created_at,!0)+"",o,i,a,u=e[8].summary+"",d,h,b;return{c(){t=ae("a"),r=ae("div"),o=ze(n),i=Pe(),a=ae("div"),d=ze(u),b=Pe(),oe(r,"class","date"),oe(a,"class","summary"),oe(t,"href",h=`#${e[8].id}`)},m(m,_){fe(m,t,_),re(t,r),re(r,o),re(t,i),re(t,a),re(a,d),fe(m,b,_)},p(m,_){_&8&&n!==(n=jt(m[8].created_at,!0)+"")&&Ze(o,n),_&8&&u!==(u=m[8].summary+"")&&Ze(d,u),_&8&&h!==(h=`#${m[8].id}`)&&oe(t,"href",h)},d(m){m&&(ue(t),ue(b))}}}function mm(e){let t,r;return t=new Rs({props:{$$slots:{default:[gE]},$$scope:{ctx:e}}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&32776&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function mE(e){let t,r,n=Je(e[3]),o=[];for(let a=0;a<n.length;a+=1)o[a]=mm(fm(e,n,a));let i=a=>Te(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();t=Nt()},m(a,u){for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(a,u);fe(a,t,u),r=!0},p(a,u){if(u&8){n=Je(a[3]);let d;for(d=0;d<n.length;d+=1){let h=fm(a,n,d);o[d]?(o[d].p(h,u),Ee(o[d],1)):(o[d]=mm(h),o[d].c(),Ee(o[d],1),o[d].m(t.parentNode,t))}for(yt(),d=n.length;d<o.length;d+=1)i(d);vt()}},i(a){if(!r){for(let u=0;u<n.length;u+=1)Ee(o[u]);r=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)Te(o[u]);r=!1},d(a){a&&ue(t),Xt(o,a)}}}function bm(e){let t,r,n,o=e[8].title+"",i,a,u,d=e[8].summary+"",h,b,m;return{c(){t=ae("li"),r=ae("a"),n=ae("h2"),i=ze(o),a=Pe(),u=ae("div"),h=ze(d),m=Pe(),oe(u,"class","summary"),oe(r,"href",b=`#${e[8].id}`)},m(_,A){fe(_,t,A),re(t,r),re(r,n),re(n,i),re(r,a),re(r,u),re(u,h),re(t,m)},p(_,A){A&8&&o!==(o=_[8].title+"")&&Ze(i,o),A&8&&d!==(d=_[8].summary+"")&&Ze(h,d),A&8&&b!==(b=`#${_[8].id}`)&&oe(r,"href",b)},d(_){_&&ue(t)}}}function wm(e){let t,r;return{c(){t=ae("img"),It(t.src,r=e[8].image)||oe(t,"src",r)},m(n,o){fe(n,t,o)},p(n,o){o&8&&!It(t.src,r=n[8].image)&&oe(t,"src",r)},d(n){n&&ue(t)}}}function ym(e){let t,r=e[8].summary+"";return{c(){t=ae("div"),oe(t,"class","summary")},m(n,o){fe(n,t,o),t.innerHTML=r},p(n,o){o&8&&r!==(r=n[8].summary+"")&&(t.innerHTML=r)},d(n){n&&ue(t)}}}function vm(e){let t;return{c(){t=ae("span"),t.textContent="- \u{1F4CC} Pinned",oe(t,"class","pinned")},m(r,n){fe(r,t,n)},d(r){r&&ue(t)}}}function _m(e){let t,r,n,o,i=e[8].title+"",a,u,d,h,b=jt(e[8].created_at)+"",m,_,A=e[1]&&e[1].some(N),C,k;function N(...p){return e[7](e[8],...p)}let R=e[8].image&&wm(e),B=e[8].summary&&ym(e),f=A&&vm(e);return{c(){t=ae("div"),r=ae("a"),R&&R.c(),n=Pe(),o=ae("div"),a=ze(i),u=Pe(),B&&B.c(),d=Pe(),h=ae("span"),m=ze(b),_=Pe(),f&&f.c(),k=Pe(),oe(o,"class","title"),oe(h,"class","date"),oe(r,"href",C=`#${e[8].id}`),oe(t,"class","item")},m(p,w){fe(p,t,w),re(t,r),R&&R.m(r,null),re(r,n),re(r,o),re(o,a),re(r,u),B&&B.m(r,null),re(r,d),re(r,h),re(h,m),re(r,_),f&&f.m(r,null),re(t,k)},p(p,w){e=p,e[8].image?R?R.p(e,w):(R=wm(e),R.c(),R.m(r,n)):R&&(R.d(1),R=null),w&8&&i!==(i=e[8].title+"")&&Ze(a,i),e[8].summary?B?B.p(e,w):(B=ym(e),B.c(),B.m(r,d)):B&&(B.d(1),B=null),w&8&&b!==(b=jt(e[8].created_at)+"")&&Ze(m,b),w&10&&(A=e[1]&&e[1].some(N)),A?f||(f=vm(e),f.c(),f.m(r,null)):f&&(f.d(1),f=null),w&8&&C!==(C=`#${e[8].id}`)&&oe(r,"href",C)},d(p){p&&ue(t),R&&R.d(),B&&B.d(),f&&f.d()}}}function bE(e){let t,r,n=e[3].length>0&&gm(e);return{c(){n&&n.c(),t=Nt()},m(o,i){n&&n.m(o,i),fe(o,t,i),r=!0},p(o,[i]){o[3].length>0?n?(n.p(o,i),i&8&&Ee(n,1)):(n=gm(o),n.c(),Ee(n,1),n.m(t.parentNode,t)):n&&(yt(),Te(n,1,1,()=>{n=null}),vt())},i(o){r||(Ee(n),r=!0)},o(o){Te(n),r=!1},d(o){o&&ue(t),n&&n.d(o)}}}function wE(e,t,r){let{source:n}=t,{count:o}=t,{style:i}=t,{minChars:a}=t,{ids:u=void 0}=t,{noMoreEvents:d=!1}=t,h=[];Ot(()=>{(async()=>u?(r(0,i="grid"),r(3,h=await n.fetchIds(u))):r(3,h=await n.pluck(o,a)))()});let b=(m,_)=>m.id.endsWith(_);return e.$$set=m=>{"source"in m&&r(4,n=m.source),"count"in m&&r(5,o=m.count),"style"in m&&r(0,i=m.style),"minChars"in m&&r(6,a=m.minChars),"ids"in m&&r(1,u=m.ids),"noMoreEvents"in m&&r(2,d=m.noMoreEvents)},[i,u,d,h,n,o,a,b]}var ef=class extends rt{constructor(t){super(),ct(this,t,wE,bE,tt,{source:4,count:5,style:0,minChars:6,ids:1,noMoreEvents:2})}},tf=ef;function Em(e,t,r){let n=e.slice();return n[7]=t[r],n}function xm(e,t,r){let n=e.slice();return n[7]=t[r],n}function km(e,t,r){let n=e.slice();return n[7]=t[r],n}function Sm(e){let t,r,n,o,i=[_E,vE,yE],a=[];function u(d,h){return d[0]==="grid"?0:d[0]==="list"?1:d[0]==="slide"?2:-1}return~(r=u(e,-1))&&(n=a[r]=i[r](e)),{c(){t=ae("section"),n&&n.c(),oe(t,"class","block images")},m(d,h){fe(d,t,h),~r&&a[r].m(t,null),o=!0},p(d,h){let b=r;r=u(d,h),r===b?~r&&a[r].p(d,h):(n&&(yt(),Te(a[b],1,1,()=>{a[b]=null}),vt()),~r?(n=a[r],n?n.p(d,h):(n=a[r]=i[r](d),n.c()),Ee(n,1),n.m(t,null)):n=null)},i(d){o||(Ee(n),o=!0)},o(d){Te(n),o=!1},d(d){d&&ue(t),~r&&a[r].d()}}}function yE(e){let t,r;return t=new Os({props:{class:"short-notes",options:{type:"loop",gap:"1rem",pagination:!1,perPage:3,breakpoints:{640:{perPage:2}},autoplay:!0},$$slots:{default:[xE]},$$scope:{ctx:e}}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&16388&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function vE(e){let t,r,n=Je(e[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=Tm(xm(e,n,i));return{c(){t=ae("div"),r=ae("ul");for(let i=0;i<o.length;i+=1)o[i].c();oe(t,"class","list")},m(i,a){fe(i,t,a),re(t,r);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(r,null)},p(i,a){if(a&4){n=Je(i[2]);let u;for(u=0;u<n.length;u+=1){let d=xm(i,n,u);o[u]?o[u].p(d,a):(o[u]=Tm(d),o[u].c(),o[u].m(r,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}},i:De,o:De,d(i){i&&ue(t),Xt(o,i)}}}function _E(e){let t,r,n=Je(e[2]),o=[];for(let i=0;i<n.length;i+=1)o[i]=Lm(km(e,n,i));return{c(){t=ae("div");for(let i=0;i<o.length;i+=1)o[i].c();oe(t,"class",r="grid "+(e[2].length%2!==0?"odd":"")+" "+(e[2].length==1?"single":""))},m(i,a){fe(i,t,a);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null)},p(i,a){if(a&6){n=Je(i[2]);let u;for(u=0;u<n.length;u+=1){let d=km(i,n,u);o[u]?o[u].p(d,a):(o[u]=Lm(d),o[u].c(),o[u].m(t,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=n.length}a&4&&r!==(r="grid "+(i[2].length%2!==0?"odd":"")+" "+(i[2].length==1?"single":""))&&oe(t,"class",r)},i:De,o:De,d(i){i&&ue(t),Xt(o,i)}}}function EE(e){let t,r,n=jt(e[7].created_at,!0)+"",o,i,a=e[7].summary+"",u,d,h;return{c(){t=ae("a"),r=ae("div"),o=ze(n),i=Pe(),u=ze(a),h=Pe(),oe(r,"class","date"),oe(t,"href",d=`#${e[7].id}`)},m(b,m){fe(b,t,m),re(t,r),re(r,o),re(t,i),re(t,u),fe(b,h,m)},p(b,m){m&4&&n!==(n=jt(b[7].created_at,!0)+"")&&Ze(o,n),m&4&&a!==(a=b[7].summary+"")&&Ze(u,a),m&4&&d!==(d=`#${b[7].id}`)&&oe(t,"href",d)},d(b){b&&(ue(t),ue(h))}}}function Am(e){let t,r;return t=new Rs({props:{$$slots:{default:[EE]},$$scope:{ctx:e}}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&16388&&(i.$$scope={dirty:o,ctx:n}),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function xE(e){let t,r,n=Je(e[2]),o=[];for(let a=0;a<n.length;a+=1)o[a]=Am(Em(e,n,a));let i=a=>Te(o[a],1,1,()=>{o[a]=null});return{c(){for(let a=0;a<o.length;a+=1)o[a].c();t=Nt()},m(a,u){for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(a,u);fe(a,t,u),r=!0},p(a,u){if(u&4){n=Je(a[2]);let d;for(d=0;d<n.length;d+=1){let h=Em(a,n,d);o[d]?(o[d].p(h,u),Ee(o[d],1)):(o[d]=Am(h),o[d].c(),Ee(o[d],1),o[d].m(t.parentNode,t))}for(yt(),d=n.length;d<o.length;d+=1)i(d);vt()}},i(a){if(!r){for(let u=0;u<n.length;u+=1)Ee(o[u]);r=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)Te(o[u]);r=!1},d(a){a&&ue(t),Xt(o,a)}}}function Tm(e){let t,r,n,o=e[7].title+"",i,a,u,d,h=e[7].summary+"",b,m;return{c(){t=ae("li"),r=ae("h2"),n=ae("a"),i=ze(o),u=Pe(),d=ae("div"),b=ze(h),m=Pe(),oe(n,"href",a=`#${e[7].id}`),oe(d,"class","summary")},m(_,A){fe(_,t,A),re(t,r),re(r,n),re(n,i),re(t,u),re(t,d),re(d,b),re(t,m)},p(_,A){A&4&&o!==(o=_[7].title+"")&&Ze(i,o),A&4&&a!==(a=`#${_[7].id}`)&&oe(n,"href",a),A&4&&h!==(h=_[7].summary+"")&&Ze(b,h)},d(_){_&&ue(t)}}}function $m(e){let t,r=e[7].title+"",n;return{c(){t=ae("div"),n=ze(r),oe(t,"class","title")},m(o,i){fe(o,t,i),re(t,n)},p(o,i){i&4&&r!==(r=o[7].title+"")&&Ze(n,r)},d(o){o&&ue(t)}}}function Bm(e){let t;return{c(){t=ae("span"),t.textContent="- \u{1F4CC} Pinned",oe(t,"class","pinned")},m(r,n){fe(r,t,n)},d(r){r&&ue(t)}}}function Lm(e){let t,r,n,o,i,a,u,d=jt(e[7].created_at)+"",h,b,m=e[1]&&e[1].some(C),_,A;function C(...R){return e[6](e[7],...R)}let k=!e[7].autogeneratedTitle&&e[7].title&&$m(e),N=m&&Bm(e);return{c(){t=ae("div"),r=ae("a"),n=ae("img"),i=Pe(),k&&k.c(),a=Pe(),u=ae("span"),h=ze(d),b=Pe(),N&&N.c(),A=Pe(),It(n.src,o=e[7].image)||oe(n,"src",o),oe(u,"class","date"),oe(r,"href",_=`#${e[7].id}`),oe(t,"class","item")},m(R,B){fe(R,t,B),re(t,r),re(r,n),re(r,i),k&&k.m(r,null),re(r,a),re(r,u),re(u,h),re(r,b),N&&N.m(r,null),re(t,A)},p(R,B){e=R,B&4&&!It(n.src,o=e[7].image)&&oe(n,"src",o),!e[7].autogeneratedTitle&&e[7].title?k?k.p(e,B):(k=$m(e),k.c(),k.m(r,a)):k&&(k.d(1),k=null),B&4&&d!==(d=jt(e[7].created_at)+"")&&Ze(h,d),B&6&&(m=e[1]&&e[1].some(C)),m?N||(N=Bm(e),N.c(),N.m(r,null)):N&&(N.d(1),N=null),B&4&&_!==(_=`#${e[7].id}`)&&oe(r,"href",_)},d(R){R&&ue(t),k&&k.d(),N&&N.d()}}}function kE(e){let t,r,n=e[2].length>0&&Sm(e);return{c(){n&&n.c(),t=Nt()},m(o,i){n&&n.m(o,i),fe(o,t,i),r=!0},p(o,[i]){o[2].length>0?n?(n.p(o,i),i&4&&Ee(n,1)):(n=Sm(o),n.c(),Ee(n,1),n.m(t.parentNode,t)):n&&(yt(),Te(n,1,1,()=>{n=null}),vt())},i(o){r||(Ee(n),r=!0)},o(o){Te(n),r=!1},d(o){o&&ue(t),n&&n.d(o)}}}function SE(e,t,r){let{source:n}=t,{count:o}=t,{style:i}=t,{minChars:a}=t,{ids:u=void 0}=t,d=[];Ot(()=>{(async()=>u?(r(0,i="grid"),r(2,d=await n.fetchIds(u))):r(2,d=await n.pluck(o,a)))()});let h=(b,m)=>b.id.endsWith(m);return e.$$set=b=>{"source"in b&&r(3,n=b.source),"count"in b&&r(4,o=b.count),"style"in b&&r(0,i=b.style),"minChars"in b&&r(5,a=b.minChars),"ids"in b&&r(1,u=b.ids)},[i,u,d,n,o,a,h]}var rf=class extends rt{constructor(t){super(),ct(this,t,SE,kE,tt,{source:3,count:4,style:0,minChars:5,ids:1})}},nf=rf;function Cm(e,t,r){let n=e.slice();return n[11]=t[r],n}function Pm(e,t,r){let n=e.slice();return n[14]=t[r],n}function Im(e){let t,r,n,o,i=e[2].slice(0,9)+"..."+e[2].slice(-5),a,u,d,h,b,m,_,A,C=e[1]?.shortName+"",k;return{c(){t=ae("div"),r=ae("div"),n=ze("Profile: "),o=ae("a"),a=ze(i),d=Pe(),h=ae("h1"),b=ae("div"),m=ae("img"),A=Pe(),k=ze(C),oe(o,"href",u="https://njump.me/"+e[2]),oe(r,"class","external-link"),It(m.src,_=e[1]?.image)||oe(m,"src",_),oe(b,"class","picture-container"),oe(t,"class","header home")},m(N,R){fe(N,t,R),re(t,r),re(r,n),re(r,o),re(o,a),re(t,d),re(t,h),re(h,b),re(b,m),re(h,A),re(h,k)},p(N,R){R&4&&i!==(i=N[2].slice(0,9)+"..."+N[2].slice(-5))&&Ze(a,i),R&4&&u!==(u="https://njump.me/"+N[2])&&oe(o,"href",u),R&2&&!It(m.src,_=N[1]?.image)&&oe(m,"src",_),R&2&&C!==(C=N[1]?.shortName+"")&&Ze(k,C)},d(N){N&&ue(t)}}}function Nm(e){let t,r,n,o,i,a,u=Je(e[3]),d=[];for(let h=0;h<u.length;h+=1)d[h]=Om(Pm(e,u,h));return{c(){t=ae("div"),r=ae("div"),n=ae("a"),o=ze("Home"),a=Pe();for(let h=0;h<d.length;h+=1)d[h].c();oe(n,"href","#"),oe(n,"class",i=e[0]==""?"selected":""),oe(t,"class","topic-wrapper svelte-1ifx1we"),Bo(t,"hidden",!e[8])},m(h,b){fe(h,t,b),re(t,r),re(r,n),re(n,o),re(t,a);for(let m=0;m<d.length;m+=1)d[m]&&d[m].m(t,null)},p(h,b){if(b&1&&i!==(i=h[0]==""?"selected":"")&&oe(n,"class",i),b&9){u=Je(h[3]);let m;for(m=0;m<u.length;m+=1){let _=Pm(h,u,m);d[m]?d[m].p(_,b):(d[m]=Om(_),d[m].c(),d[m].m(t,null))}for(;m<d.length;m+=1)d[m].d(1);d.length=u.length}b&256&&Bo(t,"hidden",!h[8])},d(h){h&&ue(t),Xt(d,h)}}}function Om(e){let t,r,n,o=e[14]+"",i,a,u;return{c(){t=ae("div"),r=ae("a"),n=ze("#"),i=ze(o),oe(r,"href",a="#tags/"+e[14]),oe(r,"class",u=e[14]==e[0]?"selected":"")},m(d,h){fe(d,t,h),re(t,r),re(r,n),re(r,i)},p(d,h){h&8&&o!==(o=d[14]+"")&&Ze(i,o),h&8&&a!==(a="#tags/"+d[14])&&oe(r,"href",a),h&9&&u!==(u=d[14]==d[0]?"selected":"")&&oe(r,"class",u)},d(d){d&&ue(t)}}}function Rm(e){let t,r,n=Je(e[4]),o=[];for(let a=0;a<n.length;a+=1)o[a]=Um(Cm(e,n,a));let i=a=>Te(o[a],1,1,()=>{o[a]=null});return{c(){t=ae("div");for(let a=0;a<o.length;a+=1)o[a].c();oe(t,"class","svelte-1ifx1we"),Bo(t,"hidden",!e[8])},m(a,u){fe(a,t,u);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(t,null);r=!0},p(a,u){if(u&496){n=Je(a[4]);let d;for(d=0;d<n.length;d+=1){let h=Cm(a,n,d);o[d]?(o[d].p(h,u),Ee(o[d],1)):(o[d]=Um(h),o[d].c(),Ee(o[d],1),o[d].m(t,null))}for(yt(),d=n.length;d<o.length;d+=1)i(d);vt()}(!r||u&256)&&Bo(t,"hidden",!a[8])},i(a){if(!r){for(let u=0;u<n.length;u+=1)Ee(o[u]);r=!0}},o(a){o=o.filter(Boolean);for(let u=0;u<o.length;u+=1)Te(o[u]);r=!1},d(a){a&&ue(t),Xt(o,a)}}}function AE(e){let t,r,n=[{source:e[6]},e[11].config],o={};for(let i=0;i<n.length;i+=1)o=Pt(o,n[i]);return t=new nf({props:o}),{c(){ft(t.$$.fragment)},m(i,a){st(t,i,a),r=!0},p(i,a){let u=a&80?jr(n,[a&64&&{source:i[6]},a&16&&wa(i[11].config)]):{};t.$set(u)},i(i){r||(Ee(t.$$.fragment,i),r=!0)},o(i){Te(t.$$.fragment,i),r=!1},d(i){at(t,i)}}}function TE(e){let t,r,n=[{source:e[5]},e[11].config,{noMoreEvents:e[8]}],o={};for(let i=0;i<n.length;i+=1)o=Pt(o,n[i]);return t=new tf({props:o}),{c(){ft(t.$$.fragment)},m(i,a){st(t,i,a),r=!0},p(i,a){let u=a&304?jr(n,[a&32&&{source:i[5]},a&16&&wa(i[11].config),a&256&&{noMoreEvents:i[8]}]):{};t.$set(u)},i(i){r||(Ee(t.$$.fragment,i),r=!0)},o(i){Te(t.$$.fragment,i),r=!1},d(i){at(t,i)}}}function $E(e){let t,r,n=[{source:e[7]},e[11].config],o={};for(let i=0;i<n.length;i+=1)o=Pt(o,n[i]);return t=new yd({props:o}),{c(){ft(t.$$.fragment)},m(i,a){st(t,i,a),r=!0},p(i,a){let u=a&144?jr(n,[a&128&&{source:i[7]},a&16&&wa(i[11].config)]):{};t.$set(u)},i(i){r||(Ee(t.$$.fragment,i),r=!0)},o(i){Te(t.$$.fragment,i),r=!1},d(i){at(t,i)}}}function Um(e){let t,r,n,o,i=[$E,TE,AE],a=[];function u(d,h){return d[11].type==="articles"?0:d[11].type==="notes"?1:d[11].type==="images"?2:-1}return~(t=u(e,-1))&&(r=a[t]=i[t](e)),{c(){r&&r.c(),n=Nt()},m(d,h){~t&&a[t].m(d,h),fe(d,n,h),o=!0},p(d,h){let b=t;t=u(d,h),t===b?~t&&a[t].p(d,h):(r&&(yt(),Te(a[b],1,1,()=>{a[b]=null}),vt()),~t?(r=a[t],r?r.p(d,h):(r=a[t]=i[t](d),r.c()),Ee(r,1),r.m(n.parentNode,n)):r=null)},i(d){o||(Ee(r),o=!0)},o(d){Te(r),o=!1},d(d){d&&ue(n),~t&&a[t].d(d)}}}function zm(e){let t,r,n,o,i,a;return t=new yd({props:{source:e[7],minChars:10,count:40,style:"grid"}}),n=new nf({props:{source:e[6],minChars:0,count:40,style:"grid"}}),i=new tf({props:{source:e[5],minChars:0,count:40,style:"grid"}}),{c(){ft(t.$$.fragment),r=Pe(),ft(n.$$.fragment),o=Pe(),ft(i.$$.fragment)},m(u,d){st(t,u,d),fe(u,r,d),st(n,u,d),fe(u,o,d),st(i,u,d),a=!0},p(u,d){let h={};d&128&&(h.source=u[7]),t.$set(h);let b={};d&64&&(b.source=u[6]),n.$set(b);let m={};d&32&&(m.source=u[5]),i.$set(m)},i(u){a||(Ee(t.$$.fragment,u),Ee(n.$$.fragment,u),Ee(i.$$.fragment,u),a=!0)},o(u){Te(t.$$.fragment,u),Te(n.$$.fragment,u),Te(i.$$.fragment,u),a=!1},d(u){u&&(ue(r),ue(o)),at(t,u),at(n,u),at(i,u)}}}function BE(e){let t,r,n,o,i,a,u,d=e[1]&&Im(e),h=e[3].length>0&&Nm(e),b=e[4]&&Rm(e),m=e[0].length>0&&e[8]&&e[9]<12&&zm(e);return a=new g0({}),{c(){d&&d.c(),t=Pe(),h&&h.c(),r=Pe(),b&&b.c(),n=Pe(),m&&m.c(),o=Pe(),i=ae("div"),ft(a.$$.fragment),oe(i,"class","svelte-1ifx1we"),Bo(i,"hidden",e[8])},m(_,A){d&&d.m(_,A),fe(_,t,A),h&&h.m(_,A),fe(_,r,A),b&&b.m(_,A),fe(_,n,A),m&&m.m(_,A),fe(_,o,A),fe(_,i,A),st(a,i,null),u=!0},p(_,[A]){_[1]?d?d.p(_,A):(d=Im(_),d.c(),d.m(t.parentNode,t)):d&&(d.d(1),d=null),_[3].length>0?h?h.p(_,A):(h=Nm(_),h.c(),h.m(r.parentNode,r)):h&&(h.d(1),h=null),_[4]?b?(b.p(_,A),A&16&&Ee(b,1)):(b=Rm(_),b.c(),Ee(b,1),b.m(n.parentNode,n)):b&&(yt(),Te(b,1,1,()=>{b=null}),vt()),_[0].length>0&&_[8]&&_[9]<12?m?(m.p(_,A),A&769&&Ee(m,1)):(m=zm(_),m.c(),Ee(m,1),m.m(o.parentNode,o)):m&&(yt(),Te(m,1,1,()=>{m=null}),vt()),(!u||A&256)&&Bo(i,"hidden",_[8])},i(_){u||(Ee(b),Ee(m),Ee(a.$$.fragment,_),u=!0)},o(_){Te(b),Te(m),Te(a.$$.fragment,_),u=!1},d(_){_&&(ue(t),ue(r),ue(n),ue(o),ue(i)),d&&d.d(_),h&&h.d(_),b&&b.d(_),m&&m.d(_),at(a)}}}function LE(e,t,r){let n,o;fl(e,Us,C=>r(8,n=C)),fl(e,Oc,C=>r(9,o=C));let i="",a=[],u,d,h,b,{tag:m}=t,{profile:_}=t,{config:A}=t;return Ot(()=>{if(!_)throw new Error("invalid npub");r(2,i=A.npub),r(3,a=A.topics),r(4,u=A.blocks),hi.set(_.shortName+" home, powered by Nostr");let C=m?{"#t":[m.substring(5)]}:{};r(5,d=new xi(A.writeRelays,{kinds:[1],authors:[_.pubkey],...C})),r(6,h=new xi(A.writeRelays,{kinds:[20],authors:[_.pubkey],...C})),r(7,b=new xi(A.writeRelays,{kinds:[30023],authors:[_.pubkey],...C}))}),e.$$set=C=>{"tag"in C&&r(0,m=C.tag),"profile"in C&&r(1,_=C.profile),"config"in C&&r(10,A=C.config)},hi.subscribe(C=>{document.title=C}),[m,_,i,a,u,d,h,b,n,o,A]}var of=class extends rt{constructor(t){super(),ct(this,t,LE,BE,tt,{tag:0,profile:1,config:10})}},sf=of;var CE=Object.defineProperty,PE=(e,t,r)=>t in e?CE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,we=(e,t,r)=>(PE(e,typeof t!="symbol"?t+"":t,r),r),IE=(e,t)=>e===t,rr=Symbol("solid-proxy"),Ws=Symbol("solid-track"),Hc={equals:IE},mb=_b,Tn=1,Vc=2,bb={owned:null,cleanups:null,context:null,owner:null},af={},it=null,cf=null,ot=null,qt=null,kn=null,ou=0;function Sf(e,t){let r=ot,n=it,o=e.length===0,i=t===void 0?n:t,a=o?bb:{owned:null,cleanups:null,context:i?i.context:null,owner:i},u=o?e:()=>e(()=>xr(()=>su(a)));it=a,ot=null;try{return ho(u,!0)}finally{ot=r,it=n}}function _t(e,t){t=t?Object.assign({},Hc,t):Hc;let r={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},n=o=>(typeof o=="function"&&(o=o(r.value)),vb(r,o));return[yb.bind(r),n]}function uo(e,t,r){let n=iu(e,t,!0,Tn);Di(n)}function _r(e,t,r){let n=iu(e,t,!1,Tn);Di(n)}function Ii(e,t,r){mb=zE;let n=iu(e,t,!1,Tn),o=Af&&OE(Af);o&&(n.suspense=o),(!r||!r.render)&&(n.user=!0),kn?kn.push(n):Di(n)}function We(e,t,r){r=r?Object.assign({},Hc,r):Hc;let n=iu(e,t,!0,0);return n.observers=null,n.observerSlots=null,n.comparator=r.equals||void 0,Di(n),yb.bind(n)}function NE(e){return e&&typeof e=="object"&&"then"in e}function wb(e,t,r){let n,o,i;arguments.length===2&&typeof t=="object"||arguments.length===1?(n=!0,o=e,i=t||{}):(n=e,o=t,i=r||{});let a=null,u=af,d=!1,h="initialValue"in i,b=typeof n=="function"&&We(n),m=new Set,[_,A]=(i.storage||_t)(i.initialValue),[C,k]=_t(void 0),[N,R]=_t(void 0,{equals:!1}),[B,f]=_t(h?"ready":"unresolved");function p(T,I,M,P){return a===T&&(a=null,P!==void 0&&(h=!0),(T===u||I===u)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(P,{value:I})),u=af,w(I,M)),I}function w(T,I){ho(()=>{I===void 0&&A(()=>T),f(I!==void 0?"errored":h?"ready":"unresolved"),k(I);for(let M of m.keys())M.decrement();m.clear()},!1)}function v(){let T=Af,I=_(),M=C();if(M!==void 0&&!a)throw M;return ot&&!ot.user&&T&&uo(()=>{N(),a&&(T.resolved||m.has(T)||(T.increment(),m.add(T)))}),I}function S(T=!0){if(T!==!1&&d)return;d=!1;let I=b?b():n;if(I==null||I===!1){p(a,xr(_));return}let M=u!==af?u:xr(()=>o(I,{value:_(),refetching:T}));return NE(M)?(a=M,"value"in M?(M.status==="success"?p(a,M.value,void 0,I):p(a,void 0,void 0,I),M):(d=!0,queueMicrotask(()=>d=!1),ho(()=>{f(h?"refreshing":"pending"),R()},!1),M.then(P=>p(M,P,void 0,I),P=>p(M,void 0,xb(P),I)))):(p(a,M,void 0,I),M)}return Object.defineProperties(v,{state:{get:()=>B()},error:{get:()=>C()},loading:{get(){let T=B();return T==="pending"||T==="refreshing"}},latest:{get(){if(!h)return v();let T=C();if(T&&!a)throw T;return _()}}}),b?uo(()=>S(!1)):S(!1),[v,{refetch:S,mutate:A}]}function $i(e){return ho(e,!1)}function xr(e){if(ot===null)return e();let t=ot;ot=null;try{return e()}finally{ot=t}}function lo(e,t,r){let n=Array.isArray(e),o,i=r&&r.defer;return a=>{let u;if(n){u=Array(e.length);for(let h=0;h<e.length;h++)u[h]=e[h]()}else u=e();if(i){i=!1;return}let d=xr(()=>t(u,o,a));return o=u,d}}function Bi(e){return it===null||(it.cleanups===null?it.cleanups=[e]:it.cleanups.push(e)),e}function Ni(){return ot}function OE(e){return it&&it.context&&it.context[e.id]!==void 0?it.context[e.id]:e.defaultValue}var Af;function yb(){if(this.sources&&this.state)if(this.state===Tn)Di(this);else{let e=qt;qt=null,ho(()=>Wc(this),!1),qt=e}if(ot){let e=this.observers?this.observers.length:0;ot.sources?(ot.sources.push(this),ot.sourceSlots.push(e)):(ot.sources=[this],ot.sourceSlots=[e]),this.observers?(this.observers.push(ot),this.observerSlots.push(ot.sources.length-1)):(this.observers=[ot],this.observerSlots=[ot.sources.length-1])}return this.value}function vb(e,t,r){let n=e.value;return(!e.comparator||!e.comparator(n,t))&&(e.value=t,e.observers&&e.observers.length&&ho(()=>{for(let o=0;o<e.observers.length;o+=1){let i=e.observers[o],a=cf&&cf.running;a&&cf.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?qt.push(i):kn.push(i),i.observers&&Eb(i)),a||(i.state=Tn)}if(qt.length>1e6)throw qt=[],new Error},!1)),t}function Di(e){if(!e.fn)return;su(e);let t=it,r=ot,n=ou;ot=it=e,RE(e,e.value,n),ot=r,it=t}function RE(e,t,r){let n;try{n=e.fn(t)}catch(o){return e.pure&&(e.state=Tn,e.owned&&e.owned.forEach(su),e.owned=null),e.updatedAt=r+1,kb(o)}(!e.updatedAt||e.updatedAt<=r)&&(e.updatedAt!=null&&"observers"in e?vb(e,n):e.value=n,e.updatedAt=r)}function iu(e,t,r,n=Tn,o){let i={fn:e,state:n,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:it,context:it?it.context:null,pure:r};return it===null||it!==bb&&(it.owned?it.owned.push(i):it.owned=[i]),i}function qc(e){if(e.state===0)return;if(e.state===Vc)return Wc(e);if(e.suspense&&xr(e.suspense.inFallback))return e.suspense.effects.push(e);let t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ou);)e.state&&t.push(e);for(let r=t.length-1;r>=0;r--)if(e=t[r],e.state===Tn)Di(e);else if(e.state===Vc){let n=qt;qt=null,ho(()=>Wc(e,t[0]),!1),qt=n}}function ho(e,t){if(qt)return e();let r=!1;t||(qt=[]),kn?r=!0:kn=[],ou++;try{let n=e();return UE(r),n}catch(n){r||(kn=null),qt=null,kb(n)}}function UE(e){if(qt&&(_b(qt),qt=null),e)return;let t=kn;kn=null,t.length&&ho(()=>mb(t),!1)}function _b(e){for(let t=0;t<e.length;t++)qc(e[t])}function zE(e){let t,r=0;for(t=0;t<e.length;t++){let n=e[t];n.user?e[r++]=n:qc(n)}for(t=0;t<r;t++)qc(e[t])}function Wc(e,t){e.state=0;for(let r=0;r<e.sources.length;r+=1){let n=e.sources[r];if(n.sources){let o=n.state;o===Tn?n!==t&&(!n.updatedAt||n.updatedAt<ou)&&qc(n):o===Vc&&Wc(n,t)}}}function Eb(e){for(let t=0;t<e.observers.length;t+=1){let r=e.observers[t];r.state||(r.state=Vc,r.pure?qt.push(r):kn.push(r),r.observers&&Eb(r))}}function su(e){let t;if(e.sources)for(;e.sources.length;){let r=e.sources.pop(),n=e.sourceSlots.pop(),o=r.observers;if(o&&o.length){let i=o.pop(),a=r.observerSlots.pop();n<o.length&&(i.sourceSlots[a]=n,o[n]=i,r.observerSlots[n]=a)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)su(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function xb(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function kb(e,t=it){throw xb(e)}var Mm=Symbol("fallback");function Dm(e){for(let t=0;t<e.length;t++)e[t]()}function ME(e,t,r={}){let n=[],o=[],i=[],a=[],u=0,d;return Bi(()=>Dm(i)),()=>{let h=e()||[];return h[Ws],xr(()=>{if(h.length===0)return u!==0&&(Dm(i),i=[],n=[],o=[],u=0,a=[]),r.fallback&&(n=[Mm],o[0]=Sf(m=>(i[0]=m,r.fallback())),u=1),o;for(n[0]===Mm&&(i[0](),i=[],n=[],o=[],u=0),d=0;d<h.length;d++)d<n.length&&n[d]!==h[d]?a[d](()=>h[d]):d>=n.length&&(o[d]=Sf(b));for(;d<n.length;d++)i[d]();return u=a.length=i.length=h.length,n=h.slice(0),o=o.slice(0,u)});function b(m){i[d]=m;let[_,A]=_t(h[d]);return a[d]=A,t(_,d)}}}function Or(e,t){return xr(()=>e(t||{}))}var DE=e=>`Stale read from <${e}>.`;function FE(e){let t="fallback"in e&&{fallback:()=>e.fallback};return We(ME(()=>e.each,e.children,t||void 0))}function Qc(e){let t=e.keyed,r=We(()=>e.when,void 0,{equals:(n,o)=>t?n===o:!n==!o});return We(()=>{let n=r();if(n){let o=e.children;return typeof o=="function"&&o.length>0?xr(()=>o(t?n:()=>{if(!xr(r))throw DE("Show");return e.when})):o}return e.fallback},void 0,void 0)}function jE(e,t,r){let n=r.length,o=t.length,i=n,a=0,u=0,d=t[o-1].nextSibling,h=null;for(;a<o||u<i;){if(t[a]===r[u]){a++,u++;continue}for(;t[o-1]===r[i-1];)o--,i--;if(o===a){let b=i<n?u?r[u-1].nextSibling:r[i-u]:d;for(;u<i;)e.insertBefore(r[u++],b)}else if(i===u)for(;a<o;)(!h||!h.has(t[a]))&&t[a].remove(),a++;else if(t[a]===r[i-1]&&r[u]===t[o-1]){let b=t[--o].nextSibling;e.insertBefore(r[u++],t[a++].nextSibling),e.insertBefore(r[--i],b),t[o]=r[i]}else{if(!h){h=new Map;let m=u;for(;m<i;)h.set(r[m],m++)}let b=h.get(t[a]);if(b!=null)if(u<b&&b<i){let m=a,_=1,A;for(;++m<o&&m<i&&!((A=h.get(t[m]))==null||A!==b+_);)_++;if(_>b-u){let C=t[a];for(;u<b;)e.insertBefore(r[u++],C)}else e.replaceChild(r[u++],t[a++])}else a++;else t[a++].remove()}}}var Fm="_$DX_DELEGATE";function He(e,t,r){let n,o=()=>{let a=document.createElement("template");return a.innerHTML=e,r?a.content.firstChild.firstChild:a.content.firstChild},i=t?()=>xr(()=>document.importNode(n||(n=o()),!0)):()=>(n||(n=o())).cloneNode(!0);return i.cloneNode=i,i}function qf(e,t=window.document){let r=t[Fm]||(t[Fm]=new Set);for(let n=0,o=e.length;n<o;n++){let i=e[n];r.has(i)||(r.add(i),t.addEventListener(i,qE))}}function Vt(e,t,r){r==null?e.removeAttribute(t):e.setAttribute(t,r)}function HE(e,t,r,n){if(n)Array.isArray(r)?(e[`$$${t}`]=r[0],e[`$$${t}Data`]=r[1]):e[`$$${t}`]=r;else if(Array.isArray(r)){let o=r[0];e.addEventListener(t,r[0]=i=>o.call(e,r[1],i))}else e.addEventListener(t,r)}function VE(e,t,r){if(!t)return r?Vt(e,"style"):t;let n=e.style;if(typeof t=="string")return n.cssText=t;typeof r=="string"&&(n.cssText=r=void 0),r||(r={}),t||(t={});let o,i;for(i in r)t[i]==null&&n.removeProperty(i),delete r[i];for(i in t)o=t[i],o!==r[i]&&(n.setProperty(i,o),r[i]=o);return r}function Sb(e,t,r){return xr(()=>e(t,r))}function Le(e,t,r,n){if(r!==void 0&&!n&&(n=[]),typeof t!="function")return Kc(e,t,n,r);_r(o=>Kc(e,t(),o,r),n)}function qE(e){let t=`$$${e.type}`,r=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==r&&Object.defineProperty(e,"target",{configurable:!0,value:r}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return r||document}});r;){let n=r[t];if(n&&!r.disabled){let o=r[`${t}Data`];if(o!==void 0?n.call(r,o,e):n.call(r,e),e.cancelBubble)return}r=r._$host||r.parentNode||r.host}}function Kc(e,t,r,n,o){for(;typeof r=="function";)r=r();if(t===r)return r;let i=typeof t,a=n!==void 0;if(e=a&&r[0]&&r[0].parentNode||e,i==="string"||i==="number")if(i==="number"&&(t=t.toString()),a){let u=r[0];u&&u.nodeType===3?u.data=t:u=document.createTextNode(t),r=ki(e,r,n,u)}else r!==""&&typeof r=="string"?r=e.firstChild.data=t:r=e.textContent=t;else if(t==null||i==="boolean")r=ki(e,r,n);else{if(i==="function")return _r(()=>{let u=t();for(;typeof u=="function";)u=u();r=Kc(e,u,r,n)}),()=>r;if(Array.isArray(t)){let u=[],d=r&&Array.isArray(r);if(Tf(u,t,r,o))return _r(()=>r=Kc(e,u,r,n,!0)),()=>r;if(u.length===0){if(r=ki(e,r,n),a)return r}else d?r.length===0?jm(e,u,n):jE(e,r,u):(r&&ki(e),jm(e,u));r=u}else if(t.nodeType){if(Array.isArray(r)){if(a)return r=ki(e,r,n,t);ki(e,r,null,t)}else r==null||r===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);r=t}}return r}function Tf(e,t,r,n){let o=!1;for(let i=0,a=t.length;i<a;i++){let u=t[i],d=r&&r[i],h;if(!(u==null||u===!0||u===!1))if((h=typeof u)=="object"&&u.nodeType)e.push(u);else if(Array.isArray(u))o=Tf(e,u,d)||o;else if(h==="function")if(n){for(;typeof u=="function";)u=u();o=Tf(e,Array.isArray(u)?u:[u],Array.isArray(d)?d:[d])||o}else e.push(u),o=!0;else{let b=String(u);d&&d.nodeType===3&&d.data===b?e.push(d):e.push(document.createTextNode(b))}}return o}function jm(e,t,r=null){for(let n=0,o=t.length;n<o;n++)e.insertBefore(t[n],r)}function ki(e,t,r,n){if(r===void 0)return e.textContent="";let o=n||document.createTextNode("");if(t.length){let i=!1;for(let a=t.length-1;a>=0;a--){let u=t[a];if(o!==u){let d=u.parentNode===e;!i&&!a?d?e.replaceChild(o,u):e.insertBefore(o,r):d&&u.remove()}else i=!0}}else e.insertBefore(o,r);return[o]}function WE(e){return Object.keys(e).reduce((r,n)=>{let o=e[n];return r[n]=Object.assign({},o),Tb(o.value)&&!YE(o.value)&&!Array.isArray(o.value)&&(r[n].value=Object.assign({},o.value)),Array.isArray(o.value)&&(r[n].value=o.value.slice(0)),r},{})}function QE(e){return e?Object.keys(e).reduce((r,n)=>{let o=e[n];return r[n]=Tb(o)&&"value"in o?o:{value:o},r[n].attribute||(r[n].attribute=ZE(n)),r[n].parse="parse"in r[n]?r[n].parse:typeof r[n].value!="string",r},{}):{}}function KE(e){return Object.keys(e).reduce((r,n)=>(r[n]=e[n].value,r),{})}function GE(e,t){let r=WE(t);return Object.keys(t).forEach(o=>{let i=r[o],a=e.getAttribute(i.attribute),u=e[o];a&&(i.value=i.parse?Ab(a):a),u!=null&&(i.value=Array.isArray(u)?u.slice(0):u),i.reflect&&Hm(e,i.attribute,i.value),Object.defineProperty(e,o,{get(){return i.value},set(d){let h=i.value;i.value=d,i.reflect&&Hm(this,i.attribute,i.value);for(let b=0,m=this.__propertyChangedCallbacks.length;b<m;b++)this.__propertyChangedCallbacks[b](o,d,h)},enumerable:!0,configurable:!0})}),r}function Ab(e){if(e)try{return JSON.parse(e)}catch{return e}}function Hm(e,t,r){if(r==null||r===!1)return e.removeAttribute(t);let n=JSON.stringify(r);e.__updating[t]=!0,n==="true"&&(n=""),e.setAttribute(t,n),Promise.resolve().then(()=>delete e.__updating[t])}function ZE(e){return e.replace(/\.?([A-Z]+)/g,(t,r)=>"-"+r.toLowerCase()).replace("_","-").replace(/^-/,"")}function Tb(e){return e!=null&&(typeof e=="object"||typeof e=="function")}function YE(e){return Object.prototype.toString.call(e)==="[object Function]"}function JE(e){return typeof e=="function"&&e.toString().indexOf("class")===0}var uf;function XE(e,t){let r=Object.keys(t);return class extends e{static get observedAttributes(){return r.map(o=>t[o].attribute)}constructor(){super(),this.__initialized=!1,this.__released=!1,this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props={}}connectedCallback(){if(this.__initialized)return;this.__releaseCallbacks=[],this.__propertyChangedCallbacks=[],this.__updating={},this.props=GE(this,t);let o=KE(this.props),i=this.Component,a=uf;try{uf=this,this.__initialized=!0,JE(i)?new i(o,{element:this}):i(o,{element:this})}finally{uf=a}}async disconnectedCallback(){if(await Promise.resolve(),this.isConnected)return;this.__propertyChangedCallbacks.length=0;let o=null;for(;o=this.__releaseCallbacks.pop();)o(this);delete this.__initialized,this.__released=!0}attributeChangedCallback(o,i,a){if(this.__initialized&&!this.__updating[o]&&(o=this.lookupProp(o),o in t)){if(a==null&&!this[o])return;this[o]=t[o].parse?Ab(a):a}}lookupProp(o){if(t)return r.find(i=>o===i||o===t[i].attribute)}get renderRoot(){return this.shadowRoot||this.attachShadow({mode:"open"})}addReleaseCallback(o){this.__releaseCallbacks.push(o)}addPropertyChangedCallback(o){this.__propertyChangedCallbacks.push(o)}}}function ex(e,t={},r={}){let{BaseElement:n=HTMLElement,extension:o}=r;return i=>{if(!e)throw new Error("tag is required to register a Component");let a=customElements.get(e);return a?(a.prototype.Component=i,a):(a=XE(n,QE(t)),a.prototype.Component=i,a.prototype.registeredTag=e,customElements.define(e,a,o),a)}}function tx(e){let t=Object.keys(e),r={};for(let n=0;n<t.length;n++){let[o,i]=_t(e[t[n]]);Object.defineProperty(r,t[n],{get:o,set(a){i(()=>a)}})}return r}function rx(e){if(e.assignedSlot&&e.assignedSlot._$owner)return e.assignedSlot._$owner;let t=e.parentNode;for(;t&&!t._$owner&&!(t.assignedSlot&&t.assignedSlot._$owner);)t=t.parentNode;return t&&t.assignedSlot?t.assignedSlot._$owner:e._$owner}function nx(e){return(t,r)=>{let{element:n}=r;return Sf(o=>{let i=tx(t);n.addPropertyChangedCallback((u,d)=>i[u]=d),n.addReleaseCallback(()=>{n.renderRoot.textContent="",o()});let a=e(i,r);return Le(n.renderRoot,a)},rx(n))}}function ox(e,t,r){return arguments.length===2&&(r=t,t={}),ex(e,t)(nx(r))}var ix=`#ztr-content,
#ztr-content img {
  max-width: 100%;
}

#ztr-root {
  display: flex;
  flex-direction: column;
  font-family: var(--ztr-font);
  font-size: var(--ztr-font-size);
  color: var(--ztr-text-color);
  border: 1px solid transparent;
  word-wrap: break-word;
  /* removes margin collapse */
  margin-top: 4em;
  line-height: 1.2em;
}

#ztr-subtitle {
  font-size: 1.2em;
  color: #666;
}

a {
  color: var(--ztr-link-color);
  text-decoration: none;
}

/* Comment */

.ztr-comment {
  position: relative;
  margin: 0;
  padding: 0;
}

.ztr-comment,
.ztr-reply-button {
  background-color: var(--ztr-background-color, rgba(0, 0, 0, 0.03));
}

.ztr-comment-body {
  padding: 1em;
}

.ztr-comment:first-child {
  border-top-left-radius: 0.3em;
  border-top-right-radius: 0.3em;
}

.ztr-comment:last-child {
  border-bottom-left-radius: 0.3em;
  border-bottom-right-radius: 0.3em;
}

.ztr-comment-info-wrapper {
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.ztr-comment-info {
  display: flex;
  align-items: center;
}

.ztr-comment-info-picture {
  width: 3.5em;
}

ul.ztr-comment-info-items {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0;
  font-size: 0.9em;
}

ul.ztr-comment-info-items li {
  display: inline-block;
  cursor: default;
  padding-right: 0.5em;
}

ul.ztr-comment-info-items li a {
  font-weight: 600;
}

.ztr-comment-info-author a {
  font-size: 1.2em;
  padding-right: 0.2em;
}

.ztr-comment-info-dots {
  cursor: pointer;
}

.ztr-comment-info-separator {
  width: 0.5em;
}

.ztr-comment-info-picture img {
  width: 2em;
  height: 2em;
  border-radius: 50%;
  padding: 0.5em;
  position: relative;
  display: block;
  object-fit: cover;
}

.ztr-comment-text,
#ztr-content {
  margin-bottom: 0.75em;
  padding: 0 0.8em 0 3.5em;
  line-height: 1.5em;
  line-break: loose;
  word-break: break-word;
  overflow: hidden;
  max-width: 750px;
}

.ztr-comment-text p {
  margin: 0 0 0.5em 0;
}

.ztr-comment-text code {
  font-size: 1.1em;
  margin: 0 0.2em;
}

.ztr-comment-text pre,
.ztr-info-pane pre {
  white-space: pre-wrap;
  white-space: -moz-pre-wrap;
  word-wrap: break-word;
}

.ztr-comment-text a:hover {
  text-decoration: underline;
}

.ztr-comment-text img {
  max-width: 100%;
}

.ztr-comment-text .warning {
  margin-top: 0em;
  font-size: 0.8em;
  display: flex;
  align-items: center;
}

.ztr-comment-text .warning svg {
  height: 1.2em;
  fill: #e4984d;
  padding-right: 0.7em;
}

.ztr-comment-replies {
  margin-left: 2em;
}

.highlight p {
  background: #F6AD55;
  color: #2B2B2B;
  display: inline;
  padding: 0.2em;
}

/* Styling the reply to comment form */

.ztr-comment-expand {
  display: flex;
  justify-content: center;
}

.ztr-comment-expand span {
  margin: 1em 0 1em 0.35em;
  cursor: pointer;
}

ul.ztr-comment-actions,
.ztr-comment-expand {
  display: flex;
  align-items: center;
  list-style: none;
  margin: 0;
  padding: 0 0 0 3.5em;
  font-weight: 600;
  user-select: none;
}

ul.ztr-comment-actions li {
  display: inline-flex;
  align-items: center;
  text-align: center;
  padding: 0 2em 0 0;
  cursor: pointer;
}

ul.ztr-comment-actions li span {
  padding: 0.25em 0.25em 0 0.25em;
  color: var(--ztr-icon-color, #3B3B3B);
}

svg {
  fill: var(--ztr-icon-color, #3B3B3B);
  width: 1.1em;
  height: 1.1em;
}

.ztr-comment-action-reply:hover svg {
  fill: #92379c;
}

.ztr-comment-action-reply:hover span {
  color: #92379c;
}

.ztr-comment-action-zap:hover svg {
  fill: #e4984d;
}

.ztr-comment-action-zap:hover span {
  color: #e4984d;
}

.ztr-comment-action-like:hover svg {
  fill: #e35428;
}

.ztr-comment-action-like:hover span {
  color: #e35428;
}

.ztr-reply-form {
  padding: 0 0.5em 0 3.5em;
}

.ztr-reply-form textarea {
  font-family: var(--ztr-font);
  font-size: 1.1em;
  line-height: 1.4;
  color: #2B2B2B;
  background-color: #FDFDFD;
  border: 1px solid #BBB;
  outline: none;
  width: calc(100% - 1.5em);
  padding: 0.7em;
  margin: 0.5em 0;
  height: 4em;
  border-radius: 0.2em;
  min-height: 4em;
  resize: vertical;
}

.ztr-reply-form:disabled {
  opacity: 65%;
  user-select: none;
}

.ztr-reply-controls {
  display: flex;
  align-items: center;
  justify-content: flex-end;
}

.ztr-reply-controls span {
  font-weight: bold;
  font-size: 0.85em;
  margin-right: 1em;
  user-select: none;
  cursor: default;
}

.ztr-reply-error {
  color: rgb(202, 23, 23);
}

.ztr-reply-controls button {
  font-family: var(--ztr-font);
  appearance: none;
  border: none;
  padding: 0.5em 1em;
  border-radius: 0.2em;
  font-size: 0.85em;
  font-weight: 600;
  cursor: pointer;
}

.ztr-reply-login-button {
  color: white;
  background-color: var(--ztr-login-button-color, #2B2B2B);
  margin-left: 1em;
}

.ztr-reply-button {
  color: var(--ztr-text-color);
  display: flex;
  align-items: center;
}

.ztr-info-pane {
  padding: 0 0.5em 1em 3.5em;
}

.ztr-info-pane pre {
  font-size: 0.8em;
}

.ztr-spinner {
  width: 1.2em;
  height: 1.2em;
  padding: 0.9em;
  animation: rotate 4s linear infinite;
}

.ztr-reply-button:disabled {
  opacity: 65%;
  pointer-events: none;
  cursor: pointer;
  user-select: none;
}

.ztr-spinner .path {
  stroke: var(--ztr-text-color, #2B2B2B);
  stroke-linecap: round;
  animation: dash 1.5s ease-in-out infinite;
}

@keyframes rotate {
  100% {
    transform: rotate(360deg);
  }
}

@keyframes dash {
  0% {
    stroke-dasharray: 1, 150;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -35;
  }

  100% {
    stroke-dasharray: 90, 150;
    stroke-dashoffset: -124;
  }
}

/* new */

.ztr-comment-new .ztr-reply-form {
  margin: 0.5em 0;
  padding: 0;
}

.ztr-comment-new .ztr-comment-body {
  padding: 0;
}

.ztr-comment-new .ztr-comment-actions {
  font-size: 1.1em;
  padding: 0;
}

/* Dark mode defaults */

@media (prefers-color-scheme: dark) {
  .ztr-spinner .path {
    stroke: var(--ztr-text-color, #DEDEDE);
  }

  .ztr-comment,
  .ztr-reply-button {
    background-color: var(--ztr-background-color, rgba(255, 255, 255, 0.06));
  }

  .ztr-reply-login-button {
    color: #2B2B2B;
    background-color: var(--ztr-login-button-color, #DEDEDE);
  }

  svg {
    fill: var(--ztr-icon-color, #DEDEDE);
  }

  ul.ztr-comment-actions li span {
    color: var(--ztr-icon-color);
  }

  .ztr-comment-action-reply:hover svg {
    fill: #96609c;
  }

  .ztr-comment-action-reply:hover span {
    color: #96609c;
  }
}`;function Vm(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function $b(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function sx(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Vm(e.outputLen),Vm(e.blockLen)}function Gc(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function ax(e,t){$b(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var lf=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var Bb=e=>e instanceof Uint8Array,df=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Gr=(e,t)=>e<<32-t|e>>>t,cx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!cx)throw new Error("Non little-endian hardware is not supported");function ux(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Wf(e){if(typeof e=="string"&&(e=ux(e)),!Bb(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}function lx(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!Bb(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}var Lb=class{clone(){return this._cloneInto()}};function dx(e){let t=n=>e().update(Wf(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Cb(e=32){if(lf&&typeof lf.getRandomValues=="function")return lf.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}function fx(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),a=Number(r>>o&i),u=Number(r&i),d=n?4:0,h=n?0:4;e.setUint32(t+d,a,n),e.setUint32(t+h,u,n)}var hx=class extends Lb{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=df(this.buffer)}update(t){Gc(this);let{view:r,buffer:n,blockLen:o}=this;t=Wf(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=df(t);for(;o<=i-a;a+=o)this.process(d,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Gc(this),ax(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let m=a;m<o;m++)r[m]=0;fx(n,o-8,BigInt(this.length*8),i),this.process(n,0);let u=df(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,b=this.get();if(h>b.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)u.setUint32(4*m,b[m],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%r&&t.buffer.set(n),t}},px=(e,t,r)=>e&t^~e&r,gx=(e,t,r)=>e&t^e&r^t&r,mx=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),io=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),so=new Uint32Array(64),bx=class extends hx{constructor(){super(64,32,8,!1),this.A=io[0]|0,this.B=io[1]|0,this.C=io[2]|0,this.D=io[3]|0,this.E=io[4]|0,this.F=io[5]|0,this.G=io[6]|0,this.H=io[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:a,G:u,H:d}=this;return[t,r,n,o,i,a,u,d]}set(t,r,n,o,i,a,u,d){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,r){for(let m=0;m<16;m++,r+=4)so[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){let _=so[m-15],A=so[m-2],C=Gr(_,7)^Gr(_,18)^_>>>3,k=Gr(A,17)^Gr(A,19)^A>>>10;so[m]=k+so[m-7]+C+so[m-16]|0}let{A:n,B:o,C:i,D:a,E:u,F:d,G:h,H:b}=this;for(let m=0;m<64;m++){let _=Gr(u,6)^Gr(u,11)^Gr(u,25),A=b+_+px(u,d,h)+mx[m]+so[m]|0,k=(Gr(n,2)^Gr(n,13)^Gr(n,22))+gx(n,o,i)|0;b=h,h=d,d=u,u=a+A|0,a=i,i=o,o=n,n=A+k|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,b=b+this.H|0,this.set(n,o,i,a,u,d,h,b)}roundClean(){so.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},$f=dx(()=>new bx);var Pb=BigInt(0),au=BigInt(1),wx=BigInt(2),cu=e=>e instanceof Uint8Array,yx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function Oi(e){if(!cu(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=yx[e[r]];return t}function Ib(e){let t=e.toString(16);return t.length&1?`0${t}`:t}function Qf(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return BigInt(e===""?"0":`0x${e}`)}function Ri(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let o=n*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[n]=a}return r}function nr(e){return Qf(Oi(e))}function Kf(e){if(!cu(e))throw new Error("Uint8Array expected");return Qf(Oi(Uint8Array.from(e).reverse()))}function po(e,t){return Ri(e.toString(16).padStart(t*2,"0"))}function Gf(e,t){return po(e,t).reverse()}function vx(e){return Ri(Ib(e))}function Ht(e,t,r){let n;if(typeof t=="string")try{n=Ri(t)}catch(i){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${i}`)}else if(cu(t))n=Uint8Array.from(t);else throw new Error(`${e} must be hex string or Uint8Array`);let o=n.length;if(typeof r=="number"&&o!==r)throw new Error(`${e} expected ${r} bytes, got ${o}`);return n}function Go(...e){let t=new Uint8Array(e.reduce((n,o)=>n+o.length,0)),r=0;return e.forEach(n=>{if(!cu(n))throw new Error("Uint8Array expected");t.set(n,r),r+=n.length}),t}function _x(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ex(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function xx(e){let t;for(t=0;e>Pb;e>>=au,t+=1);return t}function kx(e,t){return e>>BigInt(t)&au}var Sx=(e,t,r)=>e|(r?au:Pb)<<BigInt(t),Zf=e=>(wx<<BigInt(e-1))-au,ff=e=>new Uint8Array(e),qm=e=>Uint8Array.from(e);function Nb(e,t,r){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=ff(e),o=ff(e),i=0,a=()=>{n.fill(1),o.fill(0),i=0},u=(...m)=>r(o,n,...m),d=(m=ff())=>{o=u(qm([0]),m),n=u(),m.length!==0&&(o=u(qm([1]),m),n=u())},h=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let m=0,_=[];for(;m<t;){n=u();let A=n.slice();_.push(A),m+=n.length}return Go(..._)};return(m,_)=>{a(),d(m);let A;for(;!(A=_(h()));)d();return a(),A}}var Ax={bigint:e=>typeof e=="bigint",function:e=>typeof e=="function",boolean:e=>typeof e=="boolean",string:e=>typeof e=="string",stringOrUint8Array:e=>typeof e=="string"||e instanceof Uint8Array,isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>typeof e=="function"&&Number.isSafeInteger(e.outputLen)};function Gs(e,t,r={}){let n=(o,i,a)=>{let u=Ax[i];if(typeof u!="function")throw new Error(`Invalid validator "${i}", expected function`);let d=e[o];if(!(a&&d===void 0)&&!u(d,e))throw new Error(`Invalid param ${String(o)}=${d} (${typeof d}), expected ${i}`)};for(let[o,i]of Object.entries(t))n(o,i,!1);for(let[o,i]of Object.entries(r))n(o,i,!0);return e}var Tx=Object.freeze(Object.defineProperty({__proto__:null,bitGet:kx,bitLen:xx,bitMask:Zf,bitSet:Sx,bytesToHex:Oi,bytesToNumberBE:nr,bytesToNumberLE:Kf,concatBytes:Go,createHmacDrbg:Nb,ensureBytes:Ht,equalBytes:_x,hexToBytes:Ri,hexToNumber:Qf,numberToBytesBE:po,numberToBytesLE:Gf,numberToHexUnpadded:Ib,numberToVarBytesBE:vx,utf8ToBytes:Ex,validateObject:Gs},Symbol.toStringTag,{value:"Module"}));var $t=BigInt(0),pt=BigInt(1),Wo=BigInt(2),$x=BigInt(3),Bf=BigInt(4),Wm=BigInt(5),Qm=BigInt(8);BigInt(9);BigInt(16);function zt(e,t){let r=e%t;return r>=$t?r:t+r}function Bx(e,t,r){if(r<=$t||t<$t)throw new Error("Expected power/modulo > 0");if(r===pt)return $t;let n=pt;for(;t>$t;)t&pt&&(n=n*e%r),e=e*e%r,t>>=pt;return n}function wr(e,t,r){let n=e;for(;t-- >$t;)n*=n,n%=r;return n}function Lf(e,t){if(e===$t||t<=$t)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let r=zt(e,t),n=t,o=$t,i=pt;for(;r!==$t;){let u=n/r,d=n%r,h=o-i*u;n=r,r=d,o=i,i=h}if(n!==pt)throw new Error("invert: does not exist");return zt(o,t)}function Lx(e){let t=(e-pt)/Wo,r,n,o;for(r=e-pt,n=0;r%Wo===$t;r/=Wo,n++);for(o=Wo;o<e&&Bx(o,t,e)!==e-pt;o++);if(n===1){let a=(e+pt)/Bf;return function(d,h){let b=d.pow(h,a);if(!d.eql(d.sqr(b),h))throw new Error("Cannot find square root");return b}}let i=(r+pt)/Wo;return function(u,d){if(u.pow(d,t)===u.neg(u.ONE))throw new Error("Cannot find square root");let h=n,b=u.pow(u.mul(u.ONE,o),r),m=u.pow(d,i),_=u.pow(d,r);for(;!u.eql(_,u.ONE);){if(u.eql(_,u.ZERO))return u.ZERO;let A=1;for(let k=u.sqr(_);A<h&&!u.eql(k,u.ONE);A++)k=u.sqr(k);let C=u.pow(b,pt<<BigInt(h-A-1));b=u.sqr(C),m=u.mul(m,C),_=u.mul(_,b),h=A}return m}}function Cx(e){if(e%Bf===$x){let t=(e+pt)/Bf;return function(n,o){let i=n.pow(o,t);if(!n.eql(n.sqr(i),o))throw new Error("Cannot find square root");return i}}if(e%Qm===Wm){let t=(e-Wm)/Qm;return function(n,o){let i=n.mul(o,Wo),a=n.pow(i,t),u=n.mul(o,a),d=n.mul(n.mul(u,Wo),a),h=n.mul(u,n.sub(d,n.ONE));if(!n.eql(n.sqr(h),o))throw new Error("Cannot find square root");return h}}return Lx(e)}var Px=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Ix(e){let t={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=Px.reduce((n,o)=>(n[o]="function",n),t);return Gs(e,r)}function Nx(e,t,r){if(r<$t)throw new Error("Expected power > 0");if(r===$t)return e.ONE;if(r===pt)return t;let n=e.ONE,o=t;for(;r>$t;)r&pt&&(n=e.mul(n,o)),o=e.sqr(o),r>>=pt;return n}function Ox(e,t){let r=new Array(t.length),n=t.reduce((i,a,u)=>e.is0(a)?i:(r[u]=i,e.mul(i,a)),e.ONE),o=e.inv(n);return t.reduceRight((i,a,u)=>e.is0(a)?i:(r[u]=e.mul(i,r[u]),e.mul(i,a)),o),r}function Ob(e,t){let r=t!==void 0?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function Rx(e,t,r=!1,n={}){if(e<=$t)throw new Error(`Expected Field ORDER > 0, got ${e}`);let{nBitLength:o,nByteLength:i}=Ob(e,t);if(i>2048)throw new Error("Field lengths over 2048 bytes are not supported");let a=Cx(e),u=Object.freeze({ORDER:e,BITS:o,BYTES:i,MASK:Zf(o),ZERO:$t,ONE:pt,create:d=>zt(d,e),isValid:d=>{if(typeof d!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof d}`);return $t<=d&&d<e},is0:d=>d===$t,isOdd:d=>(d&pt)===pt,neg:d=>zt(-d,e),eql:(d,h)=>d===h,sqr:d=>zt(d*d,e),add:(d,h)=>zt(d+h,e),sub:(d,h)=>zt(d-h,e),mul:(d,h)=>zt(d*h,e),pow:(d,h)=>Nx(u,d,h),div:(d,h)=>zt(d*Lf(h,e),e),sqrN:d=>d*d,addN:(d,h)=>d+h,subN:(d,h)=>d-h,mulN:(d,h)=>d*h,inv:d=>Lf(d,e),sqrt:n.sqrt||(d=>a(u,d)),invertBatch:d=>Ox(u,d),cmov:(d,h,b)=>b?h:d,toBytes:d=>r?Gf(d,i):po(d,i),fromBytes:d=>{if(d.length!==i)throw new Error(`Fp.fromBytes: expected ${i}, got ${d.length}`);return r?Kf(d):nr(d)}});return Object.freeze(u)}function Rb(e){if(typeof e!="bigint")throw new Error("field order must be bigint");let t=e.toString(2).length;return Math.ceil(t/8)}function Ub(e){let t=Rb(e);return t+Math.ceil(t/2)}function Ux(e,t,r=!1){let n=e.length,o=Rb(t),i=Ub(t);if(n<16||n<i||n>1024)throw new Error(`expected ${i}-1024 bytes of input, got ${n}`);let a=r?nr(e):Kf(e),u=zt(a,t-pt)+pt;return r?Gf(u,o):po(u,o)}var zx=BigInt(0),hf=BigInt(1);function Mx(e,t){let r=(o,i)=>{let a=i.negate();return o?a:i},n=o=>{let i=Math.ceil(t/o)+1,a=2**(o-1);return{windows:i,windowSize:a}};return{constTimeNegate:r,unsafeLadder(o,i){let a=e.ZERO,u=o;for(;i>zx;)i&hf&&(a=a.add(u)),u=u.double(),i>>=hf;return a},precomputeWindow(o,i){let{windows:a,windowSize:u}=n(i),d=[],h=o,b=h;for(let m=0;m<a;m++){b=h,d.push(b);for(let _=1;_<u;_++)b=b.add(h),d.push(b);h=b.double()}return d},wNAF(o,i,a){let{windows:u,windowSize:d}=n(o),h=e.ZERO,b=e.BASE,m=BigInt(2**o-1),_=2**o,A=BigInt(o);for(let C=0;C<u;C++){let k=C*d,N=Number(a&m);a>>=A,N>d&&(N-=_,a+=hf);let R=k,B=k+Math.abs(N)-1,f=C%2!==0,p=N<0;N===0?b=b.add(r(f,i[R])):h=h.add(r(p,i[B]))}return{p:h,f:b}},wNAFCached(o,i,a,u){let d=o._WINDOW_SIZE||1,h=i.get(o);return h||(h=this.precomputeWindow(o,d),d!==1&&i.set(o,u(h))),this.wNAF(d,h,a)}}}function zb(e){return Ix(e.Fp),Gs(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...Ob(e.n,e.nBitLength),...e,p:e.Fp.ORDER})}function Dx(e){let t=zb(e);Gs(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:o}=t;if(r){if(!n.eql(o,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}var{bytesToNumberBE:Fx,hexToBytes:jx}=Tx,Ko={Err:class extends Error{constructor(t=""){super(t)}},_parseInt(e){let{Err:t}=Ko;if(e.length<2||e[0]!==2)throw new t("Invalid signature integer tag");let r=e[1],n=e.subarray(2,r+2);if(!r||n.length!==r)throw new t("Invalid signature integer: wrong length");if(n[0]&128)throw new t("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new t("Invalid signature integer: unnecessary leading zero");return{d:Fx(n),l:e.subarray(r+2)}},toSig(e){let{Err:t}=Ko,r=typeof e=="string"?jx(e):e;if(!(r instanceof Uint8Array))throw new Error("ui8a expected");let n=r.length;if(n<2||r[0]!=48)throw new t("Invalid signature tag");if(r[1]!==n-2)throw new t("Invalid signature: incorrect length");let{d:o,l:i}=Ko._parseInt(r.subarray(2)),{d:a,l:u}=Ko._parseInt(i);if(u.length)throw new t("Invalid signature: left bytes after parsing");return{r:o,s:a}},hexFromSig(e){let t=h=>Number.parseInt(h[0],16)&8?"00"+h:h,r=h=>{let b=h.toString(16);return b.length&1?`0${b}`:b},n=t(r(e.s)),o=t(r(e.r)),i=n.length/2,a=o.length/2,u=r(i),d=r(a);return`30${r(a+i+4)}02${d}${o}02${u}${n}`}},xn=BigInt(0),yr=BigInt(1);BigInt(2);var Km=BigInt(3);BigInt(4);function Hx(e){let t=Dx(e),{Fp:r}=t,n=t.toBytes||((C,k,N)=>{let R=k.toAffine();return Go(Uint8Array.from([4]),r.toBytes(R.x),r.toBytes(R.y))}),o=t.fromBytes||(C=>{let k=C.subarray(1),N=r.fromBytes(k.subarray(0,r.BYTES)),R=r.fromBytes(k.subarray(r.BYTES,2*r.BYTES));return{x:N,y:R}});function i(C){let{a:k,b:N}=t,R=r.sqr(C),B=r.mul(R,C);return r.add(r.add(B,r.mul(C,k)),N)}if(!r.eql(r.sqr(t.Gy),i(t.Gx)))throw new Error("bad generator point: equation left != right");function a(C){return typeof C=="bigint"&&xn<C&&C<t.n}function u(C){if(!a(C))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function d(C){let{allowedPrivateKeyLengths:k,nByteLength:N,wrapPrivateKey:R,n:B}=t;if(k&&typeof C!="bigint"){if(C instanceof Uint8Array&&(C=Oi(C)),typeof C!="string"||!k.includes(C.length))throw new Error("Invalid key");C=C.padStart(N*2,"0")}let f;try{f=typeof C=="bigint"?C:nr(Ht("private key",C,N))}catch{throw new Error(`private key must be ${N} bytes, hex or bigint, not ${typeof C}`)}return R&&(f=zt(f,B)),u(f),f}let h=new Map;function b(C){if(!(C instanceof m))throw new Error("ProjectivePoint expected")}class m{constructor(k,N,R){if(this.px=k,this.py=N,this.pz=R,k==null||!r.isValid(k))throw new Error("x required");if(N==null||!r.isValid(N))throw new Error("y required");if(R==null||!r.isValid(R))throw new Error("z required")}static fromAffine(k){let{x:N,y:R}=k||{};if(!k||!r.isValid(N)||!r.isValid(R))throw new Error("invalid affine point");if(k instanceof m)throw new Error("projective point not allowed");let B=f=>r.eql(f,r.ZERO);return B(N)&&B(R)?m.ZERO:new m(N,R,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(k){let N=r.invertBatch(k.map(R=>R.pz));return k.map((R,B)=>R.toAffine(N[B])).map(m.fromAffine)}static fromHex(k){let N=m.fromAffine(o(Ht("pointHex",k)));return N.assertValidity(),N}static fromPrivateKey(k){return m.BASE.multiply(d(k))}_setWindowSize(k){this._WINDOW_SIZE=k,h.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:k,y:N}=this.toAffine();if(!r.isValid(k)||!r.isValid(N))throw new Error("bad point: x or y not FE");let R=r.sqr(N),B=i(k);if(!r.eql(R,B))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:k}=this.toAffine();if(r.isOdd)return!r.isOdd(k);throw new Error("Field doesn't support isOdd")}equals(k){b(k);let{px:N,py:R,pz:B}=this,{px:f,py:p,pz:w}=k,v=r.eql(r.mul(N,w),r.mul(f,B)),S=r.eql(r.mul(R,w),r.mul(p,B));return v&&S}negate(){return new m(this.px,r.neg(this.py),this.pz)}double(){let{a:k,b:N}=t,R=r.mul(N,Km),{px:B,py:f,pz:p}=this,w=r.ZERO,v=r.ZERO,S=r.ZERO,T=r.mul(B,B),I=r.mul(f,f),M=r.mul(p,p),P=r.mul(B,f);return P=r.add(P,P),S=r.mul(B,p),S=r.add(S,S),w=r.mul(k,S),v=r.mul(R,M),v=r.add(w,v),w=r.sub(I,v),v=r.add(I,v),v=r.mul(w,v),w=r.mul(P,w),S=r.mul(R,S),M=r.mul(k,M),P=r.sub(T,M),P=r.mul(k,P),P=r.add(P,S),S=r.add(T,T),T=r.add(S,T),T=r.add(T,M),T=r.mul(T,P),v=r.add(v,T),M=r.mul(f,p),M=r.add(M,M),T=r.mul(M,P),w=r.sub(w,T),S=r.mul(M,I),S=r.add(S,S),S=r.add(S,S),new m(w,v,S)}add(k){b(k);let{px:N,py:R,pz:B}=this,{px:f,py:p,pz:w}=k,v=r.ZERO,S=r.ZERO,T=r.ZERO,I=t.a,M=r.mul(t.b,Km),P=r.mul(N,f),$=r.mul(R,p),F=r.mul(B,w),q=r.add(N,R),x=r.add(f,p);q=r.mul(q,x),x=r.add(P,$),q=r.sub(q,x),x=r.add(N,B);let z=r.add(f,w);return x=r.mul(x,z),z=r.add(P,F),x=r.sub(x,z),z=r.add(R,B),v=r.add(p,w),z=r.mul(z,v),v=r.add($,F),z=r.sub(z,v),T=r.mul(I,x),v=r.mul(M,F),T=r.add(v,T),v=r.sub($,T),T=r.add($,T),S=r.mul(v,T),$=r.add(P,P),$=r.add($,P),F=r.mul(I,F),x=r.mul(M,x),$=r.add($,F),F=r.sub(P,F),F=r.mul(I,F),x=r.add(x,F),P=r.mul($,x),S=r.add(S,P),P=r.mul(z,x),v=r.mul(q,v),v=r.sub(v,P),P=r.mul(q,$),T=r.mul(z,T),T=r.add(T,P),new m(v,S,T)}subtract(k){return this.add(k.negate())}is0(){return this.equals(m.ZERO)}wNAF(k){return A.wNAFCached(this,h,k,N=>{let R=r.invertBatch(N.map(B=>B.pz));return N.map((B,f)=>B.toAffine(R[f])).map(m.fromAffine)})}multiplyUnsafe(k){let N=m.ZERO;if(k===xn)return N;if(u(k),k===yr)return this;let{endo:R}=t;if(!R)return A.unsafeLadder(this,k);let{k1neg:B,k1:f,k2neg:p,k2:w}=R.splitScalar(k),v=N,S=N,T=this;for(;f>xn||w>xn;)f&yr&&(v=v.add(T)),w&yr&&(S=S.add(T)),T=T.double(),f>>=yr,w>>=yr;return B&&(v=v.negate()),p&&(S=S.negate()),S=new m(r.mul(S.px,R.beta),S.py,S.pz),v.add(S)}multiply(k){u(k);let N=k,R,B,{endo:f}=t;if(f){let{k1neg:p,k1:w,k2neg:v,k2:S}=f.splitScalar(N),{p:T,f:I}=this.wNAF(w),{p:M,f:P}=this.wNAF(S);T=A.constTimeNegate(p,T),M=A.constTimeNegate(v,M),M=new m(r.mul(M.px,f.beta),M.py,M.pz),R=T.add(M),B=I.add(P)}else{let{p,f:w}=this.wNAF(N);R=p,B=w}return m.normalizeZ([R,B])[0]}multiplyAndAddUnsafe(k,N,R){let B=m.BASE,f=(w,v)=>v===xn||v===yr||!w.equals(B)?w.multiplyUnsafe(v):w.multiply(v),p=f(this,N).add(f(k,R));return p.is0()?void 0:p}toAffine(k){let{px:N,py:R,pz:B}=this,f=this.is0();k==null&&(k=f?r.ONE:r.inv(B));let p=r.mul(N,k),w=r.mul(R,k),v=r.mul(B,k);if(f)return{x:r.ZERO,y:r.ZERO};if(!r.eql(v,r.ONE))throw new Error("invZ was invalid");return{x:p,y:w}}isTorsionFree(){let{h:k,isTorsionFree:N}=t;if(k===yr)return!0;if(N)return N(m,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:k,clearCofactor:N}=t;return k===yr?this:N?N(m,this):this.multiplyUnsafe(t.h)}toRawBytes(k=!0){return this.assertValidity(),n(m,this,k)}toHex(k=!0){return Oi(this.toRawBytes(k))}}m.BASE=new m(t.Gx,t.Gy,r.ONE),m.ZERO=new m(r.ZERO,r.ONE,r.ZERO);let _=t.nBitLength,A=Mx(m,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:m,normPrivateKeyToScalar:d,weierstrassEquation:i,isWithinCurveOrder:a}}function Vx(e){let t=zb(e);return Gs(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}function qx(e){let t=Vx(e),{Fp:r,n}=t,o=r.BYTES+1,i=2*r.BYTES+1;function a(x){return xn<x&&x<r.ORDER}function u(x){return zt(x,n)}function d(x){return Lf(x,n)}let{ProjectivePoint:h,normPrivateKeyToScalar:b,weierstrassEquation:m,isWithinCurveOrder:_}=Hx({...t,toBytes(x,z,V){let K=z.toAffine(),Z=r.toBytes(K.x),W=Go;return V?W(Uint8Array.from([z.hasEvenY()?2:3]),Z):W(Uint8Array.from([4]),Z,r.toBytes(K.y))},fromBytes(x){let z=x.length,V=x[0],K=x.subarray(1);if(z===o&&(V===2||V===3)){let Z=nr(K);if(!a(Z))throw new Error("Point is not on curve");let W=m(Z),J=r.sqrt(W),le=(J&yr)===yr;return(V&1)===1!==le&&(J=r.neg(J)),{x:Z,y:J}}else if(z===i&&V===4){let Z=r.fromBytes(K.subarray(0,r.BYTES)),W=r.fromBytes(K.subarray(r.BYTES,2*r.BYTES));return{x:Z,y:W}}else throw new Error(`Point of length ${z} was invalid. Expected ${o} compressed bytes or ${i} uncompressed bytes`)}}),A=x=>Oi(po(x,t.nByteLength));function C(x){let z=n>>yr;return x>z}function k(x){return C(x)?u(-x):x}let N=(x,z,V)=>nr(x.slice(z,V));class R{constructor(z,V,K){this.r=z,this.s=V,this.recovery=K,this.assertValidity()}static fromCompact(z){let V=t.nByteLength;return z=Ht("compactSignature",z,V*2),new R(N(z,0,V),N(z,V,2*V))}static fromDER(z){let{r:V,s:K}=Ko.toSig(Ht("DER",z));return new R(V,K)}assertValidity(){if(!_(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!_(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(z){return new R(this.r,this.s,z)}recoverPublicKey(z){let{r:V,s:K,recovery:Z}=this,W=S(Ht("msgHash",z));if(Z==null||![0,1,2,3].includes(Z))throw new Error("recovery id invalid");let J=Z===2||Z===3?V+t.n:V;if(J>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let le=(Z&1)===0?"02":"03",_e=h.fromHex(le+A(J)),ve=d(J),Ie=u(-W*ve),ie=u(K*ve),Se=h.BASE.multiplyAndAddUnsafe(_e,Ie,ie);if(!Se)throw new Error("point at infinify");return Se.assertValidity(),Se}hasHighS(){return C(this.s)}normalizeS(){return this.hasHighS()?new R(this.r,u(-this.s),this.recovery):this}toDERRawBytes(){return Ri(this.toDERHex())}toDERHex(){return Ko.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Ri(this.toCompactHex())}toCompactHex(){return A(this.r)+A(this.s)}}let B={isValidPrivateKey(x){try{return b(x),!0}catch{return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{let x=Ub(t.n);return Ux(t.randomBytes(x),t.n)},precompute(x=8,z=h.BASE){return z._setWindowSize(x),z.multiply(BigInt(3)),z}};function f(x,z=!0){return h.fromPrivateKey(x).toRawBytes(z)}function p(x){let z=x instanceof Uint8Array,V=typeof x=="string",K=(z||V)&&x.length;return z?K===o||K===i:V?K===2*o||K===2*i:x instanceof h}function w(x,z,V=!0){if(p(x))throw new Error("first arg must be private key");if(!p(z))throw new Error("second arg must be public key");return h.fromHex(z).multiply(b(x)).toRawBytes(V)}let v=t.bits2int||function(x){let z=nr(x),V=x.length*8-t.nBitLength;return V>0?z>>BigInt(V):z},S=t.bits2int_modN||function(x){return u(v(x))},T=Zf(t.nBitLength);function I(x){if(typeof x!="bigint")throw new Error("bigint expected");if(!(xn<=x&&x<T))throw new Error(`bigint expected < 2^${t.nBitLength}`);return po(x,t.nByteLength)}function M(x,z,V=P){if(["recovered","canonical"].some(Re=>Re in V))throw new Error("sign() legacy options not supported");let{hash:K,randomBytes:Z}=t,{lowS:W,prehash:J,extraEntropy:le}=V;W==null&&(W=!0),x=Ht("msgHash",x),J&&(x=Ht("prehashed msgHash",K(x)));let _e=S(x),ve=b(z),Ie=[I(ve),I(_e)];if(le!=null){let Re=le===!0?Z(r.BYTES):le;Ie.push(Ht("extraEntropy",Re))}let ie=Go(...Ie),Se=_e;function Ve(Re){let je=v(Re);if(!_(je))return;let Et=d(je),Qe=h.BASE.multiply(je).toAffine(),he=u(Qe.x);if(he===xn)return;let Me=u(Et*u(Se+he*ve));if(Me===xn)return;let Ce=(Qe.x===he?0:2)|Number(Qe.y&yr),Ne=Me;return W&&C(Me)&&(Ne=k(Me),Ce^=1),new R(he,Ne,Ce)}return{seed:ie,k2sig:Ve}}let P={lowS:t.lowS,prehash:!1},$={lowS:t.lowS,prehash:!1};function F(x,z,V=P){let{seed:K,k2sig:Z}=M(x,z,V),W=t;return Nb(W.hash.outputLen,W.nByteLength,W.hmac)(K,Z)}h.BASE._setWindowSize(8);function q(x,z,V,K=$){var Z;let W=x;if(z=Ht("msgHash",z),V=Ht("publicKey",V),"strict"in K)throw new Error("options.strict was renamed to lowS");let{lowS:J,prehash:le}=K,_e,ve;try{if(typeof W=="string"||W instanceof Uint8Array)try{_e=R.fromDER(W)}catch(he){if(!(he instanceof Ko.Err))throw he;_e=R.fromCompact(W)}else if(typeof W=="object"&&typeof W.r=="bigint"&&typeof W.s=="bigint"){let{r:he,s:Me}=W;_e=new R(he,Me)}else throw new Error("PARSE");ve=h.fromHex(V)}catch(he){if(he.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(J&&_e.hasHighS())return!1;le&&(z=t.hash(z));let{r:Ie,s:ie}=_e,Se=S(z),Ve=d(ie),Re=u(Se*Ve),je=u(Ie*Ve),Et=(Z=h.BASE.multiplyAndAddUnsafe(ve,Re,je))==null?void 0:Z.toAffine();return Et?u(Et.x)===Ie:!1}return{CURVE:t,getPublicKey:f,getSharedSecret:w,sign:F,verify:q,ProjectivePoint:h,Signature:R,utils:B}}var Zc=class extends Lb{constructor(t,r){super(),this.finished=!1,this.destroyed=!1,sx(t);let n=Wf(r);if(this.iHash=t.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let o=this.blockLen,i=new Uint8Array(o);i.set(n.length>o?t.create().update(n).digest():n);for(let a=0;a<i.length;a++)i[a]^=54;this.iHash.update(i),this.oHash=t.create();for(let a=0;a<i.length;a++)i[a]^=106;this.oHash.update(i),i.fill(0)}update(t){return Gc(this),this.iHash.update(t),this}digestInto(t){Gc(this),$b(t,this.outputLen),this.finished=!0,this.iHash.digestInto(t),this.oHash.update(t),this.oHash.digestInto(t),this.destroy()}digest(){let t=new Uint8Array(this.oHash.outputLen);return this.digestInto(t),t}_cloneInto(t){t||(t=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:o,destroyed:i,blockLen:a,outputLen:u}=this;return t=t,t.finished=o,t.destroyed=i,t.blockLen=a,t.outputLen=u,t.oHash=r._cloneInto(t.oHash),t.iHash=n._cloneInto(t.iHash),t}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Mb=(e,t,r)=>new Zc(e,t).update(r).digest();Mb.create=(e,t)=>new Zc(e,t);function Wx(e){return{hash:e,hmac:(t,...r)=>Mb(e,t,lx(...r)),randomBytes:Cb}}function Qx(e,t){let r=n=>qx({...e,...Wx(n)});return Object.freeze({...r(t),create:r})}var uu=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Yc=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Db=BigInt(1),Jc=BigInt(2),Gm=(e,t)=>(e+t/Jc)/t;function Fb(e){let t=uu,r=BigInt(3),n=BigInt(6),o=BigInt(11),i=BigInt(22),a=BigInt(23),u=BigInt(44),d=BigInt(88),h=e*e*e%t,b=h*h*e%t,m=wr(b,r,t)*b%t,_=wr(m,r,t)*b%t,A=wr(_,Jc,t)*h%t,C=wr(A,o,t)*A%t,k=wr(C,i,t)*C%t,N=wr(k,u,t)*k%t,R=wr(N,d,t)*N%t,B=wr(R,u,t)*k%t,f=wr(B,r,t)*b%t,p=wr(f,a,t)*C%t,w=wr(p,n,t)*h%t,v=wr(w,Jc,t);if(!Cf.eql(Cf.sqr(v),e))throw new Error("Cannot find square root");return v}var Cf=Rx(uu,void 0,void 0,{sqrt:Fb}),Yf=Qx({a:BigInt(0),b:BigInt(7),Fp:Cf,n:Yc,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=Yc,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Db*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=r,a=BigInt("0x100000000000000000000000000000000"),u=Gm(i*e,t),d=Gm(-n*e,t),h=zt(e-u*r-d*o,t),b=zt(-u*n-d*i,t),m=h>a,_=b>a;if(m&&(h=t-h),_&&(b=t-b),h>a||b>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:h,k2neg:_,k2:b}}}},$f),lu=BigInt(0),jb=e=>typeof e=="bigint"&&lu<e&&e<uu,Kx=e=>typeof e=="bigint"&&lu<e&&e<Yc,Zm={};function Xc(e,...t){let r=Zm[e];if(r===void 0){let n=$f(Uint8Array.from(e,o=>o.charCodeAt(0)));r=Go(n,n),Zm[e]=r}return $f(Go(r,...t))}var Jf=e=>e.toRawBytes(!0).slice(1),Pf=e=>po(e,32),pf=e=>zt(e,uu),Qs=e=>zt(e,Yc),Xf=Yf.ProjectivePoint,Gx=(e,t,r)=>Xf.BASE.multiplyAndAddUnsafe(e,t,r);function If(e){let t=Yf.utils.normPrivateKeyToScalar(e),r=Xf.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:Qs(-t),bytes:Jf(r)}}function Hb(e){if(!jb(e))throw new Error("bad x: need 0 < x < p");let t=pf(e*e),r=pf(t*e+BigInt(7)),n=Fb(r);n%Jc!==lu&&(n=pf(-n));let o=new Xf(e,n,Db);return o.assertValidity(),o}function Vb(...e){return Qs(nr(Xc("BIP0340/challenge",...e)))}function Zx(e){return If(e).bytes}function Yx(e,t,r=Cb(32)){let n=Ht("message",e),{bytes:o,scalar:i}=If(t),a=Ht("auxRand",r,32),u=Pf(i^nr(Xc("BIP0340/aux",a))),d=Xc("BIP0340/nonce",u,o,n),h=Qs(nr(d));if(h===lu)throw new Error("sign failed: k is zero");let{bytes:b,scalar:m}=If(h),_=Vb(b,o,n),A=new Uint8Array(64);if(A.set(b,0),A.set(Pf(Qs(m+_*i)),32),!qb(A,n,o))throw new Error("sign: Invalid signature produced");return A}function qb(e,t,r){let n=Ht("signature",e,64),o=Ht("message",t),i=Ht("publicKey",r,32);try{let a=Hb(nr(i)),u=nr(n.subarray(0,32));if(!jb(u))return!1;let d=nr(n.subarray(32,64));if(!Kx(d))return!1;let h=Vb(Pf(u),Jf(a),o),b=Gx(a,d,Qs(-h));return!(!b||!b.hasEvenY()||b.toAffine().x!==u)}catch{return!1}}var Zt={getPublicKey:Zx,sign:Yx,verify:qb,utils:{randomPrivateKey:Yf.utils.randomPrivateKey,lift_x:Hb,pointToBytes:Jf,numberToBytesBE:po,bytesToNumberBE:nr,taggedHash:Xc,mod:zt}};var Wb=e=>e instanceof Uint8Array,gf=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),Zr=(e,t)=>e<<32-t|e>>>t,Jx=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Jx)throw new Error("Non little-endian hardware is not supported");var Xx=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function et(e){if(!Wb(e))throw new Error("Uint8Array expected");let t="";for(let r=0;r<e.length;r++)t+=Xx[e[r]];return t}function Qb(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);let t=e.length;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(t/2);for(let n=0;n<r.length;n++){let o=n*2,i=e.slice(o,o+2),a=Number.parseInt(i,16);if(Number.isNaN(a)||a<0)throw new Error("Invalid byte sequence");r[n]=a}return r}function e4(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function Kb(e){if(typeof e=="string"&&(e=e4(e)),!Wb(e))throw new Error(`expected Uint8Array, got ${typeof e}`);return e}var Nf=class{clone(){return this._cloneInto()}};function Gb(e){let t=n=>e().update(Kb(n)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function Of(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Wrong positive integer: ${e}`)}function t4(e){if(typeof e!="boolean")throw new Error(`Expected boolean, not ${e}`)}function Zb(e,...t){if(!(e instanceof Uint8Array))throw new Error("Expected Uint8Array");if(t.length>0&&!t.includes(e.length))throw new Error(`Expected Uint8Array of length ${t}, not of length=${e.length}`)}function r4(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");Of(e.outputLen),Of(e.blockLen)}function n4(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function o4(e,t){Zb(e);let r=t.outputLen;if(e.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}var mf={number:Of,bool:t4,bytes:Zb,hash:r4,exists:n4,output:o4};function i4(e,t,r,n){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,r,n);let o=BigInt(32),i=BigInt(4294967295),a=Number(r>>o&i),u=Number(r&i),d=n?4:0,h=n?0:4;e.setUint32(t+d,a,n),e.setUint32(t+h,u,n)}var Rf=class extends Nf{constructor(t,r,n,o){super(),this.blockLen=t,this.outputLen=r,this.padOffset=n,this.isLE=o,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=gf(this.buffer)}update(t){mf.exists(this);let{view:r,buffer:n,blockLen:o}=this;t=Kb(t);let i=t.length;for(let a=0;a<i;){let u=Math.min(o-this.pos,i-a);if(u===o){let d=gf(t);for(;o<=i-a;a+=o)this.process(d,a);continue}n.set(t.subarray(a,a+u),this.pos),this.pos+=u,a+=u,this.pos===o&&(this.process(r,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){mf.exists(this),mf.output(t,this),this.finished=!0;let{buffer:r,view:n,blockLen:o,isLE:i}=this,{pos:a}=this;r[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>o-a&&(this.process(n,0),a=0);for(let m=a;m<o;m++)r[m]=0;i4(n,o-8,BigInt(this.length*8),i),this.process(n,0);let u=gf(t),d=this.outputLen;if(d%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let h=d/4,b=this.get();if(h>b.length)throw new Error("_sha2: outputLen bigger than state");for(let m=0;m<h;m++)u.setUint32(4*m,b[m],i)}digest(){let{buffer:t,outputLen:r}=this;this.digestInto(t);let n=t.slice(0,r);return this.destroy(),n}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());let{blockLen:r,buffer:n,length:o,finished:i,destroyed:a,pos:u}=this;return t.length=o,t.pos=u,t.finished=i,t.destroyed=a,o%r&&t.buffer.set(n),t}},s4=(e,t,r)=>e&t^~e&r,a4=(e,t,r)=>e&t^e&r^t&r,c4=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ao=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),co=new Uint32Array(64),eu=class extends Rf{constructor(){super(64,32,8,!1),this.A=ao[0]|0,this.B=ao[1]|0,this.C=ao[2]|0,this.D=ao[3]|0,this.E=ao[4]|0,this.F=ao[5]|0,this.G=ao[6]|0,this.H=ao[7]|0}get(){let{A:t,B:r,C:n,D:o,E:i,F:a,G:u,H:d}=this;return[t,r,n,o,i,a,u,d]}set(t,r,n,o,i,a,u,d){this.A=t|0,this.B=r|0,this.C=n|0,this.D=o|0,this.E=i|0,this.F=a|0,this.G=u|0,this.H=d|0}process(t,r){for(let m=0;m<16;m++,r+=4)co[m]=t.getUint32(r,!1);for(let m=16;m<64;m++){let _=co[m-15],A=co[m-2],C=Zr(_,7)^Zr(_,18)^_>>>3,k=Zr(A,17)^Zr(A,19)^A>>>10;co[m]=k+co[m-7]+C+co[m-16]|0}let{A:n,B:o,C:i,D:a,E:u,F:d,G:h,H:b}=this;for(let m=0;m<64;m++){let _=Zr(u,6)^Zr(u,11)^Zr(u,25),A=b+_+s4(u,d,h)+c4[m]+co[m]|0,k=(Zr(n,2)^Zr(n,13)^Zr(n,22))+a4(n,o,i)|0;b=h,h=d,d=u,u=a+A|0,a=i,i=o,o=n,n=A+k|0}n=n+this.A|0,o=o+this.B|0,i=i+this.C|0,a=a+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,b=b+this.H|0,this.set(n,o,i,a,u,d,h,b)}roundClean(){co.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},Uf=class extends eu{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}},eh=Gb(()=>new eu);Gb(()=>new Uf);var qo=Symbol("verified"),u4=e=>e instanceof Object;function l4(e){if(!u4(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let n=0;n<r.length;n++)if(typeof r[n]=="object")return!1}return!0}new TextDecoder("utf-8");var d4=new TextEncoder;function Fs(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var f4=class{constructor(t){we(this,"value"),we(this,"next",null),we(this,"prev",null),this.value=t}},h4=class{constructor(){we(this,"first"),we(this,"last"),this.first=null,this.last=null}enqueue(t){let r=new f4(t);return this.last?this.last===this.first?(this.last=r,this.last.prev=this.first,this.first.next=r):(r.prev=this.last,this.last.next=r,this.last=r):(this.first=r,this.last=r),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let r=this.first;return this.first=null,this.last=null,r.value}let t=this.first;return this.first=t.next,t.value}},p4=class{generateSecretKey(){return Zt.utils.randomPrivateKey()}getPublicKey(t){return et(Zt.getPublicKey(t))}finalizeEvent(t,r){let n=t;return n.pubkey=et(Zt.getPublicKey(r)),n.id=bf(n),n.sig=et(Zt.sign(bf(n),r)),n[qo]=!0,n}verifyEvent(t){if(typeof t[qo]=="boolean")return t[qo];let r=bf(t);if(r!==t.id)return t[qo]=!1,!1;try{let n=Zt.verify(t.sig,r,t.pubkey);return t[qo]=n,n}catch{return t[qo]=!1,!1}}};function g4(e){if(!l4(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function bf(e){let t=eh(d4.encode(g4(e)));return et(t)}var du=new p4;du.generateSecretKey;du.getPublicKey;du.finalizeEvent;var m4=du.verifyEvent,b4=22242;function w4(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(r=>t.id.startsWith(r))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(r=>t.pubkey.startsWith(r)))return!1;for(let r in e)if(r[0]==="#"){let n=r.slice(1),o=e[`#${n}`];if(o&&!t.tags.find(([i,a])=>i===r.slice(1)&&o.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function y4(e,t){for(let r=0;r<e.length;r++)if(w4(e[r],t))return!0;return!1}function v4(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,o=e.slice(n).indexOf('"')+n+1;return e.slice(o,o+64)}function _4(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let r=e.slice(t+7+1).indexOf('"');if(r===-1)return null;let n=t+7+1+r,o=e.slice(n+1,80).indexOf('"');if(o===-1)return null;let i=n+1+o;return e.slice(n+1,i)}function E4(e,t){return{kind:b4,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function x4(){return new Promise(e=>{let t=new MessageChannel,r=()=>{t.port1.removeEventListener("message",r),e()};t.port1.addEventListener("message",r),t.port2.postMessage(0),t.port1.start()})}var k4=e=>(e[qo]=!0,!0),Yb;try{Yb=WebSocket}catch{}var Jb=class{constructor(t,r){we(this,"url"),we(this,"_connected",!1),we(this,"onclose",null),we(this,"onnotice",n=>console.debug(`NOTICE from ${this.url}: ${n}`)),we(this,"_onauth",null),we(this,"baseEoseTimeout",4400),we(this,"connectionTimeout",4400),we(this,"openSubs",new Map),we(this,"connectionTimeoutHandle"),we(this,"connectionPromise"),we(this,"openCountRequests",new Map),we(this,"openEventPublishes",new Map),we(this,"ws"),we(this,"incomingMessageQueue",new h4),we(this,"queueRunning",!1),we(this,"challenge"),we(this,"serial",0),we(this,"verifyEvent"),this.url=Fs(t),this.verifyEvent=r.verifyEvent}static async connect(t,r){let n=new Jb(t,r);return await n.connect(),n}closeAllSubscriptions(t){for(let[r,n]of this.openSubs)n.close(t);this.openSubs.clear();for(let[r,n]of this.openEventPublishes)n.reject(new Error(t));this.openEventPublishes.clear();for(let[r,n]of this.openCountRequests)n.reject(new Error(t));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((t,r)=>{this.connectionTimeoutHandle=setTimeout(()=>{var n;r("connection timed out"),this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new Yb(this.url)}catch(n){r(n);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,t()},this.ws.onerror=n=>{var o;r(n.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(o=this.onclose)==null||o.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var n;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await x4();this.queueRunning=!1}handleNext(){var t,r,n;let o=this.incomingMessageQueue.dequeue();if(!o)return!1;let i=_4(o);if(i){let a=this.openSubs.get(i);if(!a)return;let u=v4(o,"id"),d=(t=a.alreadyHaveEvent)==null?void 0:t.call(a,u);if((r=a.receivedEvent)==null||r.call(a,this,u),d)return}try{let a=JSON.parse(o);switch(a[0]){case"EVENT":{let u=this.openSubs.get(a[1]),d=a[2];this.verifyEvent(d)&&y4(u.filters,d)&&u.onevent(d);return}case"COUNT":{let u=a[1],d=a[2],h=this.openCountRequests.get(u);h&&(h.resolve(d.count),this.openCountRequests.delete(u));return}case"EOSE":{let u=this.openSubs.get(a[1]);if(!u)return;u.receivedEose();return}case"OK":{let u=a[1],d=a[2],h=a[3],b=this.openEventPublishes.get(u);d?b.resolve(h):b.reject(new Error(h)),this.openEventPublishes.delete(u);return}case"CLOSED":{let u=a[1],d=this.openSubs.get(u);if(!d)return;d.closed=!0,d.close(a[2]);return}case"NOTICE":this.onnotice(a[1]);return;case"AUTH":{this.challenge=a[1],(n=this._onauth)==null||n.call(this,a[1]);return}}}catch{return}}async send(t){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var r;(r=this.ws)==null||r.send(t)})}async auth(t){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let r=await t(E4(this.url,this.challenge)),n=new Promise((o,i)=>{this.openEventPublishes.set(r.id,{resolve:o,reject:i})});return this.send('["AUTH",'+JSON.stringify(r)+"]"),n}async publish(t){let r=new Promise((n,o)=>{this.openEventPublishes.set(t.id,{resolve:n,reject:o})});return this.send('["EVENT",'+JSON.stringify(t)+"]"),r}async count(t,r){this.serial++;let n=r?.id||"count:"+this.serial,o=new Promise((i,a)=>{this.openCountRequests.set(n,{resolve:i,reject:a})});return this.send('["COUNT","'+n+'",'+JSON.stringify(t)+"]"),o}subscribe(t,r){let n=this.prepareSubscription(t,r);return n.fire(),n}prepareSubscription(t,r){this.serial++;let n=r.id||"sub:"+this.serial,o=new S4(this,n,t,r);return this.openSubs.set(n,o),o}close(){var t;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(t=this.ws)==null||t.close()}_onmessage(t){this.incomingMessageQueue.enqueue(t.data),this.queueRunning||this.runQueue()}},S4=class{constructor(t,r,n,o){we(this,"relay"),we(this,"id"),we(this,"closed",!1),we(this,"eosed",!1),we(this,"filters"),we(this,"alreadyHaveEvent"),we(this,"receivedEvent"),we(this,"onevent"),we(this,"oneose"),we(this,"onclose"),we(this,"eoseTimeout"),we(this,"eoseTimeoutHandle"),this.relay=t,this.filters=n,this.id=r,this.alreadyHaveEvent=o.alreadyHaveEvent,this.receivedEvent=o.receivedEvent,this.eoseTimeout=o.eoseTimeout||t.baseEoseTimeout,this.oneose=o.oneose,this.onclose=o.onclose,this.onevent=o.onevent||(i=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,i)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var t;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(t=this.oneose)==null||t.call(this))}close(t="closed by caller"){var r;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(r=this.onclose)==null||r.call(this,t)}},A4=class{constructor(e){we(this,"relays",new Map),we(this,"seenOn",new Map),we(this,"trackRelays",!1),we(this,"verifyEvent"),we(this,"trustedRelayURLs",new Set),this.verifyEvent=e.verifyEvent}async ensureRelay(e,t){e=Fs(e);let r=this.relays.get(e);return r||(r=new Jb(e,{verifyEvent:this.trustedRelayURLs.has(e)?k4:this.verifyEvent}),t?.connectionTimeout&&(r.connectionTimeout=t.connectionTimeout),this.relays.set(e,r)),await r.connect(),r}close(e){e.map(Fs).forEach(t=>{var r;(r=this.relays.get(t))==null||r.close()})}subscribeMany(e,t,r){this.trackRelays&&(r.receivedEvent=(m,_)=>{let A=this.seenOn.get(_);A||(A=new Set,this.seenOn.set(_,A)),A.add(m)});let n=new Set,o=[],i=[],a=m=>{var _;i[m]=!0,i.filter(A=>A).length===e.length&&((_=r.oneose)==null||_.call(r),a=()=>{})},u=[],d=(m,_)=>{var A;a(m),u[m]=_,u.filter(C=>C).length===e.length&&((A=r.onclose)==null||A.call(r,u),d=()=>{})},h=m=>{var _;if((_=r.alreadyHaveEvent)!=null&&_.call(r,m))return!0;let A=n.has(m);return n.add(m),A},b=Promise.all(e.map(Fs).map(async(m,_,A)=>{if(A.indexOf(m)!==_){d(_,"duplicate url");return}let C;try{C=await this.ensureRelay(m,{connectionTimeout:r.maxWait?Math.max(r.maxWait*.8,r.maxWait-1e3):void 0})}catch(N){d(_,N?.message||String(N));return}let k=C.subscribe(t,{...r,oneose:()=>a(_),onclose:N=>d(_,N),alreadyHaveEvent:h,eoseTimeout:r.maxWait});o.push(k)}));return{async close(){await b,o.forEach(m=>{m.close()})}}}subscribeManyEose(e,t,r){let n=this.subscribeMany(e,t,{...r,oneose(){n.close()}});return n}async querySync(e,t,r){return new Promise(async n=>{let o=[];this.subscribeManyEose(e,[t],{...r,onevent(i){o.push(i)},onclose(i){n(o)}})})}async get(e,t,r){t.limit=1;let n=await this.querySync(e,t,r);return n.sort((o,i)=>i.created_at-o.created_at),n[0]||null}publish(e,t){return e.map(Fs).map(async(r,n,o)=>o.indexOf(r)!==n?Promise.reject("duplicate url"):(await this.ensureRelay(r)).publish(t))}},T4=class extends A4{constructor(){super({verifyEvent:m4})}},Ks=Symbol("store-raw"),Jr=Symbol("store-node"),vr=Symbol("store-has"),Xb=Symbol("store-self");function ew(e){let t=e[rr];if(!t&&(Object.defineProperty(e,rr,{value:t=new Proxy(e,B4)}),!Array.isArray(e))){let r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let o=0,i=r.length;o<i;o++){let a=r[o];n[a].get&&Object.defineProperty(e,a,{enumerable:n[a].enumerable,get:n[a].get.bind(t)})}}return t}function Sn(e){let t;return e!=null&&typeof e=="object"&&(e[rr]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function An(e,t=new Set){let r,n,o,i;if(r=e!=null&&e[Ks])return r;if(!Sn(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let a=0,u=e.length;a<u;a++)o=e[a],(n=An(o,t))!==o&&(e[a]=n)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);let a=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let d=0,h=a.length;d<h;d++)i=a[d],!u[i].get&&(o=e[i],(n=An(o,t))!==o&&(e[i]=n))}return e}function Ui(e,t){let r=e[t];return r||Object.defineProperty(e,t,{value:r=Object.create(null)}),r}function Zo(e,t,r){if(e[t])return e[t];let[n,o]=_t(r,{equals:!1,internal:!0});return n.$=o,e[t]=n}function $4(e,t){let r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||!r.configurable||t===rr||t===Jr||(delete r.value,delete r.writable,r.get=()=>e[rr][t]),r}function th(e){Ni()&&Zo(Ui(e,Jr),Xb)()}function tw(e){return th(e),Reflect.ownKeys(e)}var B4={get(e,t,r){if(t===Ks)return e;if(t===rr)return r;if(t===Ws)return th(e),r;let n=Ui(e,Jr),o=n[t],i=o?o():e[t];if(t===Jr||t===vr||t==="__proto__")return i;if(!o){let a=Object.getOwnPropertyDescriptor(e,t);Ni()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(a&&a.get)&&(i=Zo(n,t,i)())}return Sn(i)?ew(i):i},has(e,t){return t===Ks||t===rr||t===Ws||t===Jr||t===vr||t==="__proto__"?!0:(Ni()&&Zo(Ui(e,vr),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:tw,getOwnPropertyDescriptor:$4};function tr(e,t,r,n=!1){if(!n&&e[t]===r)return;let o=e[t],i=e.length;r===void 0?(delete e[t],e[vr]&&e[vr][t]&&o!==void 0&&e[vr][t].$()):(e[t]=r,e[vr]&&e[vr][t]&&o===void 0&&e[vr][t].$());let a=Ui(e,Jr),u;if((u=Zo(a,t,o))&&u.$(()=>r),Array.isArray(e)&&e.length!==i){for(let d=e.length;d<i;d++)(u=a[d])&&u.$();(u=Zo(a,"length",i))&&u.$(e.length)}(u=a[Xb])&&u.$()}function rw(e,t){let r=Object.keys(t);for(let n=0;n<r.length;n+=1){let o=r[n];tr(e,o,t[o])}}function L4(e,t){if(typeof t=="function"&&(t=t(e)),t=An(t),Array.isArray(t)){if(e===t)return;let r=0,n=t.length;for(;r<n;r++){let o=t[r];e[r]!==o&&tr(e,r,o)}tr(e,"length",n)}else rw(e,t)}function js(e,t,r=[]){let n,o=e;if(t.length>1){n=t.shift();let a=typeof n,u=Array.isArray(e);if(Array.isArray(n)){for(let d=0;d<n.length;d++)js(e,[n[d]].concat(t),r);return}else if(u&&a==="function"){for(let d=0;d<e.length;d++)n(e[d],d)&&js(e,[d].concat(t),r);return}else if(u&&a==="object"){let{from:d=0,to:h=e.length-1,by:b=1}=n;for(let m=d;m<=h;m+=b)js(e,[m].concat(t),r);return}else if(t.length>1){js(e[n],t,[n].concat(r));return}o=e[n],r=[n].concat(r)}let i=t[0];typeof i=="function"&&(i=i(o,r),i===o)||n===void 0&&i==null||(i=An(i),n===void 0||Sn(o)&&Sn(i)&&!Array.isArray(i)?rw(o,i):tr(e,n,i))}function C4(...[e,t]){let r=An(e||{}),n=Array.isArray(r),o=ew(r);function i(...a){$i(()=>{n&&a.length===1?L4(r,a[0]):js(r,a)})}return[o,i]}function P4(e,t){let r=Reflect.getOwnPropertyDescriptor(e,t);return!r||r.get||r.set||!r.configurable||t===rr||t===Jr||(delete r.value,delete r.writable,r.get=()=>e[rr][t],r.set=n=>e[rr][t]=n),r}var I4={get(e,t,r){if(t===Ks)return e;if(t===rr)return r;if(t===Ws)return th(e),r;let n=Ui(e,Jr),o=n[t],i=o?o():e[t];if(t===Jr||t===vr||t==="__proto__")return i;if(!o){let a=Object.getOwnPropertyDescriptor(e,t),u=typeof i=="function";if(Ni()&&(!u||e.hasOwnProperty(t))&&!(a&&a.get))i=Zo(n,t,i)();else if(i!=null&&u&&i===Array.prototype[t])return(...d)=>$i(()=>Array.prototype[t].apply(r,d))}return Sn(i)?nw(i):i},has(e,t){return t===Ks||t===rr||t===Ws||t===Jr||t===vr||t==="__proto__"?!0:(Ni()&&Zo(Ui(e,vr),t)(),t in e)},set(e,t,r){return $i(()=>tr(e,t,An(r))),!0},deleteProperty(e,t){return $i(()=>tr(e,t,void 0,!0)),!0},ownKeys:tw,getOwnPropertyDescriptor:P4};function nw(e){let t=e[rr];if(!t){Object.defineProperty(e,rr,{value:t=new Proxy(e,I4)});let r=Object.keys(e),n=Object.getOwnPropertyDescriptors(e);for(let o=0,i=r.length;o<i;o++){let a=r[o];if(n[a].get){let u=n[a].get.bind(t);Object.defineProperty(e,a,{get:u})}if(n[a].set){let u=n[a].set;Object.defineProperty(e,a,{set:h=>$i(()=>u.call(t,h))})}}}return t}function rh(e,t){let r=An(e||{});return nw(r)}var zf=Symbol("store-root");function Ti(e,t,r,n,o){let i=t[r];if(e===i)return;if(r!==zf&&(!Sn(e)||!Sn(i)||o&&e[o]!==i[o])){tr(t,r,e);return}if(Array.isArray(e)){if(e.length&&i.length&&(!n||o&&e[0]&&e[0][o]!=null)){let d,h,b,m,_,A,C,k;for(b=0,m=Math.min(i.length,e.length);b<m&&(i[b]===e[b]||o&&i[b]&&e[b]&&i[b][o]===e[b][o]);b++)Ti(e[b],i,b,n,o);let N=new Array(e.length),R=new Map;for(m=i.length-1,_=e.length-1;m>=b&&_>=b&&(i[m]===e[_]||o&&i[b]&&e[b]&&i[m][o]===e[_][o]);m--,_--)N[_]=i[m];if(b>_||b>m){for(h=b;h<=_;h++)tr(i,h,e[h]);for(;h<e.length;h++)tr(i,h,N[h]),Ti(e[h],i,h,n,o);i.length>e.length&&tr(i,"length",e.length);return}for(C=new Array(_+1),h=_;h>=b;h--)A=e[h],k=o&&A?A[o]:A,d=R.get(k),C[h]=d===void 0?-1:d,R.set(k,h);for(d=b;d<=m;d++)A=i[d],k=o&&A?A[o]:A,h=R.get(k),h!==void 0&&h!==-1&&(N[h]=i[d],h=C[h],R.set(k,h));for(h=b;h<e.length;h++)h in N?(tr(i,h,N[h]),Ti(e[h],i,h,n,o)):tr(i,h,e[h])}else for(let d=0,h=e.length;d<h;d++)Ti(e[d],i,d,n,o);i.length>e.length&&tr(i,"length",e.length);return}let a=Object.keys(e);for(let d=0,h=a.length;d<h;d++)Ti(e[a[d]],i,a[d],n,o);let u=Object.keys(i);for(let d=0,h=u.length;d<h;d++)e[u[d]]===void 0&&tr(i,u[d],void 0)}function N4(e,t={}){let{merge:r,key:n="id"}=t,o=An(e);return i=>{if(!Sn(i)||!Sn(o))return o;let a=Ti(o,{[zf]:i},zf,r,n);return a===void 0?i:a}}var Li=new T4,xe=rh({rootEventIds:[],filter:{},profiles:()=>[]}),Gt=rh({}),O4=["reply","likes","zaps","publish","watch","replyAnonymously","hideContent"],R4=e=>O4.includes(e);function Fi(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function $n(...e){let t=(o,i)=>a=>o(i(a)),r=Array.from(e).reverse().reduce((o,i)=>o?t(o,i.encode):i.encode,void 0),n=e.reduce((o,i)=>o?t(o,i.decode):i.decode,void 0);return{encode:r,decode:n}}function Bn(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return t.map(r=>{if(Fi(r),r<0||r>=e.length)throw new Error(`Digit index outside alphabet: ${r} (alphabet: ${e.length})`);return e[r]})},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("alphabet.decode input should be array of strings");return t.map(r=>{if(typeof r!="string")throw new Error(`alphabet.decode: not string element=${r}`);let n=e.indexOf(r);if(n===-1)throw new Error(`Unknown letter: "${r}". Allowed: ${e}`);return n})}}}function Ln(e=""){if(typeof e!="string")throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="string")throw new Error("join.encode input should be array of strings");for(let r of t)if(typeof r!="string")throw new Error(`join.encode: non-string input=${r}`);return t.join(e)},decode:t=>{if(typeof t!="string")throw new Error("join.decode input should be string");return t.split(e)}}}function fu(e,t="="){if(Fi(e),typeof t!="string")throw new Error("padding chr should be string");return{encode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let n of r)if(typeof n!="string")throw new Error(`padding.encode: non-string input=${n}`);for(;r.length*e%8;)r.push(t);return r},decode(r){if(!Array.isArray(r)||r.length&&typeof r[0]!="string")throw new Error("padding.encode input should be array of strings");for(let o of r)if(typeof o!="string")throw new Error(`padding.decode: non-string input=${o}`);let n=r.length;if(n*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if(!((n-1)*e%8))throw new Error("Invalid padding: string has too much padding");return r.slice(0,n)}}}function ow(e){if(typeof e!="function")throw new Error("normalize fn should be function");return{encode:t=>t,decode:t=>e(t)}}function Ym(e,t,r){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: wrong to=${r}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let n=0,o=[],i=Array.from(e);for(i.forEach(a=>{if(Fi(a),a<0||a>=t)throw new Error(`Wrong integer: ${a}`)});;){let a=0,u=!0;for(let d=n;d<i.length;d++){let h=i[d],b=t*a+h;if(!Number.isSafeInteger(b)||t*a/t!==a||b-h!==t*a)throw new Error("convertRadix: carry overflow");if(a=b%r,i[d]=Math.floor(b/r),!Number.isSafeInteger(i[d])||i[d]*r+a!==b)throw new Error("convertRadix: carry overflow");if(u)i[d]?u=!1:n=d;else continue}if(o.push(a),u)break}for(let a=0;a<e.length-1&&e[a]===0;a++)o.push(0);return o.reverse()}var iw=(e,t)=>t?iw(t,e%t):e,tu=(e,t)=>e+(t-iw(e,t));function Mf(e,t,r,n){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw new Error(`convertRadix2: wrong to=${r}`);if(tu(t,r)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${tu(t,r)}`);let o=0,i=0,a=2**r-1,u=[];for(let d of e){if(Fi(d),d>=2**t)throw new Error(`convertRadix2: invalid data word=${d} from=${t}`);if(o=o<<t|d,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)u.push((o>>i-r&a)>>>0);o&=2**i-1}if(o=o<<r-i&a,!n&&i>=t)throw new Error("Excess padding");if(!n&&o)throw new Error(`Non-zero padding: ${o}`);return n&&i>0&&u.push(o>>>0),u}function U4(e){return Fi(e),{encode:t=>{if(!(t instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return Ym(Array.from(t),2**8,e)},decode:t=>{if(!Array.isArray(t)||t.length&&typeof t[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(Ym(t,e,2**8))}}}function go(e,t=!1){if(Fi(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(tu(8,e)>32||tu(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!(r instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return Mf(Array.from(r),8,e,!t)},decode:r=>{if(!Array.isArray(r)||r.length&&typeof r[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(Mf(r,e,8,t))}}}function Jm(e){if(typeof e!="function")throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch{}}}var z4=$n(go(4),Bn("0123456789ABCDEF"),Ln("")),M4=$n(go(5),Bn("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),fu(5),Ln(""));$n(go(5),Bn("0123456789ABCDEFGHIJKLMNOPQRSTUV"),fu(5),Ln(""));$n(go(5),Bn("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),Ln(""),ow(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));var D4=$n(go(6),Bn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),fu(6),Ln("")),F4=$n(go(6),Bn("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),fu(6),Ln("")),nh=e=>$n(U4(58),Bn(e),Ln("")),Df=nh("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");nh("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ");nh("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");var Xm=[0,2,3,5,6,7,9,10,11],j4={encode(e){let t="";for(let r=0;r<e.length;r+=8){let n=e.subarray(r,r+8);t+=Df.encode(n).padStart(Xm[n.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){let n=e.slice(r,r+11),o=Xm.indexOf(n.length),i=Df.decode(n);for(let a=0;a<i.length-o;a++)if(i[a]!==0)throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(i.slice(i.length-o)))}return Uint8Array.from(t)}},Ff=$n(Bn("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),Ln("")),eb=[996825010,642813549,513874426,1027748829,705979059];function zs(e){let t=e>>25,r=(e&33554431)<<5;for(let n=0;n<eb.length;n++)(t>>n&1)===1&&(r^=eb[n]);return r}function tb(e,t,r=1){let n=e.length,o=1;for(let i=0;i<n;i++){let a=e.charCodeAt(i);if(a<33||a>126)throw new Error(`Invalid prefix (${e})`);o=zs(o)^a>>5}o=zs(o);for(let i=0;i<n;i++)o=zs(o)^e.charCodeAt(i)&31;for(let i of t)o=zs(o)^i;for(let i=0;i<6;i++)o=zs(o);return o^=r,Ff.encode(Mf([o%2**30],30,5,!1))}function sw(e){let t=e==="bech32"?1:734539939,r=go(5),n=r.decode,o=r.encode,i=Jm(n);function a(b,m,_=90){if(typeof b!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof b}`);if(!Array.isArray(m)||m.length&&typeof m[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof m}`);let A=b.length+7+m.length;if(_!==!1&&A>_)throw new TypeError(`Length ${A} exceeds limit ${_}`);return b=b.toLowerCase(),`${b}1${Ff.encode(m)}${tb(b,m,t)}`}function u(b,m=90){if(typeof b!="string")throw new Error(`bech32.decode input should be string, not ${typeof b}`);if(b.length<8||m!==!1&&b.length>m)throw new TypeError(`Wrong string length: ${b.length} (${b}). Expected (8..${m})`);let _=b.toLowerCase();if(b!==_&&b!==b.toUpperCase())throw new Error("String must be lowercase or uppercase");b=_;let A=b.lastIndexOf("1");if(A===0||A===-1)throw new Error('Letter "1" must be present between prefix and data only');let C=b.slice(0,A),k=b.slice(A+1);if(k.length<6)throw new Error("Data must be at least 6 characters long");let N=Ff.decode(k).slice(0,-6),R=tb(C,N,t);if(!k.endsWith(R))throw new Error(`Invalid checksum in ${b}: expected "${R}"`);return{prefix:C,words:N}}let d=Jm(u);function h(b){let{prefix:m,words:_}=u(b,!1);return{prefix:m,words:_,bytes:n(_)}}return{encode:a,decode:u,decodeToBytes:h,decodeUnsafe:d,fromWords:n,fromWordsUnsafe:i,toWords:o}}var zi=sw("bech32");sw("bech32m");var H4={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},V4=$n(go(4),Bn("0123456789abcdef"),Ln(""),ow(e=>{if(typeof e!="string"||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})),q4={utf8:H4,hex:V4,base16:z4,base32:M4,base64:D4,base64url:F4,base58:Df,base58xmr:j4};`${Object.keys(q4).join(", ")}`;var Ms=new TextDecoder("utf-8");new TextEncoder;var aw=5e3;function Dc(e){var t,r,n,o,i,a,u,d;let{prefix:h,words:b}=zi.decode(e,aw),m=new Uint8Array(zi.fromWords(b));switch(h){case"nprofile":{let _=Rc(m);if(!((t=_[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:et(_[0][0]),relays:_[1]?_[1].map(A=>Ms.decode(A)):[]}}}case"nevent":{let _=Rc(m);if(!((r=_[0])!=null&&r[0]))throw new Error("missing TLV 0 for nevent");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(_[2]&&_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(_[3]&&_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:et(_[0][0]),relays:_[1]?_[1].map(A=>Ms.decode(A)):[],author:(n=_[2])!=null&&n[0]?et(_[2][0]):void 0,kind:(o=_[3])!=null&&o[0]?parseInt(et(_[3][0]),16):void 0}}}case"naddr":{let _=Rc(m);if(!((i=_[0])!=null&&i[0]))throw new Error("missing TLV 0 for naddr");if(!((a=_[2])!=null&&a[0]))throw new Error("missing TLV 2 for naddr");if(_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=_[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ms.decode(_[0][0]),pubkey:et(_[2][0]),kind:parseInt(et(_[3][0]),16),relays:_[1]?_[1].map(A=>Ms.decode(A)):[]}}}case"nrelay":{let _=Rc(m);if(!((d=_[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ms.decode(_[0][0])}}case"nsec":return{type:h,data:m};case"npub":case"note":return{type:h,data:et(m)};default:throw new Error(`unknown prefix ${h}`)}}function Rc(e){let t={},r=e;for(;r.length>0;){let n=r[0],o=r[1],i=r.slice(2,2+o);if(r=r.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${n}`);t[n]=t[n]||[],t[n].push(i)}return t}function cw(e){return uw("npub",Qb(e))}function rb(e){return uw("note",Qb(e))}function W4(e,t){let r=zi.toWords(t);return zi.encode(e,r,aw)}function uw(e,t){return W4(e,t)}var Ds=new TextDecoder("utf-8");new TextEncoder;var Q4=5e3,K4=/[\x21-\x7E]{1,83}1[023456789acdefghjklmnpqrstuvwxyz]{6,}/;function lw(e){var t,r,n,o,i,a,u,d;let{prefix:h,words:b}=zi.decode(e,Q4),m=new Uint8Array(zi.fromWords(b));switch(h){case"nprofile":{let _=Uc(m);if(!((t=_[0])!=null&&t[0]))throw new Error("missing TLV 0 for nprofile");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");return{type:"nprofile",data:{pubkey:et(_[0][0]),relays:_[1]?_[1].map(A=>Ds.decode(A)):[]}}}case"nevent":{let _=Uc(m);if(!((r=_[0])!=null&&r[0]))throw new Error("missing TLV 0 for nevent");if(_[0][0].length!==32)throw new Error("TLV 0 should be 32 bytes");if(_[2]&&_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(_[3]&&_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"nevent",data:{id:et(_[0][0]),relays:_[1]?_[1].map(A=>Ds.decode(A)):[],author:(n=_[2])!=null&&n[0]?et(_[2][0]):void 0,kind:(o=_[3])!=null&&o[0]?parseInt(et(_[3][0]),16):void 0}}}case"naddr":{let _=Uc(m);if(!((i=_[0])!=null&&i[0]))throw new Error("missing TLV 0 for naddr");if(!((a=_[2])!=null&&a[0]))throw new Error("missing TLV 2 for naddr");if(_[2][0].length!==32)throw new Error("TLV 2 should be 32 bytes");if(!((u=_[3])!=null&&u[0]))throw new Error("missing TLV 3 for naddr");if(_[3][0].length!==4)throw new Error("TLV 3 should be 4 bytes");return{type:"naddr",data:{identifier:Ds.decode(_[0][0]),pubkey:et(_[2][0]),kind:parseInt(et(_[3][0]),16),relays:_[1]?_[1].map(A=>Ds.decode(A)):[]}}}case"nrelay":{let _=Uc(m);if(!((d=_[0])!=null&&d[0]))throw new Error("missing TLV 0 for nrelay");return{type:"nrelay",data:Ds.decode(_[0][0])}}case"nsec":return{type:h,data:m};case"npub":case"note":return{type:h,data:et(m)};default:throw new Error(`unknown prefix ${h}`)}}function Uc(e){let t={},r=e;for(;r.length>0;){let n=r[0],o=r[1],i=r.slice(2,2+o);if(r=r.slice(2+o),i.length<o)throw new Error(`not enough data to read on TLV ${n}`);t[n]=t[n]||[],t[n].push(i)}return t}var G4=new RegExp(`nostr:(${K4.source})`),dw=()=>new RegExp(`\\b${G4.source}\\b`,"g");function*Z4(e){let t=e.matchAll(dw());for(let r of t)try{let[n,o]=r;yield{uri:n,value:o,decoded:lw(o),start:r.index,end:r.index+n.length}}catch{}}function Y4(e,t){return e.replaceAll(dw(),(r,n)=>t({uri:r,value:n,decoded:lw(n)}))}var J4=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function X4(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var fw={exports:{}};(function(e,t){(function(r,n){e.exports=n()})(J4,function(){function r(u){return u.replace(/\\([(){}[\]#*+\-.!_\\])/g,function(d,h){return String.fromCharCode(1,o.indexOf(h)+i)}).replace(/(\*\*|__|~~)(\S(?:[\s\S]*?\S)?)\1/g,function(d,h,b){return h==="~~"?"<del>"+b+"</del>":"<b>"+b+"</b>"}).replace(/(\n|^|\W)([_\*])(\S(?:[\s\S]*?\S)?)\2(\W|$|\n)/g,function(d,h,b,m,_){return h+"<i>"+m+"</i>"+_}).replace(/(!?)\[([^\]<>]+)\]\((\+?)([^ \)<>]+)(?: "([^\(\)\"]+)")?\)/g,function(d,h,b,m,_,A){var C=A?' title="'+A+'"':"";return h?'<img src="'+a.href(_)+'" alt="'+b+'"'+C+"/>":(m&&(C+=' target="_blank"'),'<a href="'+a.href(_)+'"'+C+">"+b+"</a>")})}function n(u){return u.replace(/\x01([\x0f-\x1c])/g,function(d,h){return o.charAt(h.charCodeAt(0)-i)})}var o="\\[!]#{()}*+-._",i=16,a=function(u){return u.replace(/.+(?:\n.+)*/g,function(d){var h=/^\s{4}([^]*)$/.exec(d);if(h)return"<pre><code>"+h[1].replace(/\n    /g,`
`)+"</code></pre>";for(var b,m=[],_=r(d).split(`
`),A=0,C=_.length;C>A;++A){var k=_[A],N=/^\s{0,3}(\#{1,6})\s+(.*?)\s*#*\s*$/.exec(k);if(N)m.push(b=[N[2],"h",N[1].length]);else{var R=/^(\s*)(?:[-*]|(\d[.)])) (.+)$/.exec(k);R?m.push(b=[R[3],R[2]?"ol":"ul",R[1].length]):/^\s{0,3}([-])(\s*\1){2,}\s*$/.test(k)?m.push(b=["","hr"]):b&&b[1]!=="hr"&&b[1]!=="h"?b[0]+=`
`+k:m.push(b=[k,"p",""])}}var B="",f=[];for(A=0,C=m.length;C>A;++A){b=m[A];var p=b[0],w=b[1],v=b[2];if(w==="ul"||w==="ol")!f.length||v>f[0][1]?(f.unshift([w,v]),B+="<"+f[0][0]+"><li>"+p):f.length>1&&v<=f[1][1]?(B+="</li></"+f.shift()[0]+">",--A):B+="</li><li>"+p;else{for(;f.length;)B+="</li></"+f.shift()[0]+">";B+=w==="hr"?"<hr/>":"<"+w+v+a.headAttrs(v,p)+">"+p+"</"+w+v+">"}}for(;f.length;)B+="</li></"+f.shift()[0]+">";return n(B)})};return a.href=function(u){return u},a.headAttrs=function(u,d){return""},a})})(fw);var ek=fw.exports,tk=X4(ek);function rk(e){return async()=>new Promise(t=>{setTimeout(t,e)})}function nk(e,{delay:t=void 0}={}){if(typeof t!="number"&&t!==void 0)throw new TypeError(`Expected \`interval\` to be of type \`number\` but received type \`${typeof t}\``);let r=t===void 0?async()=>{}:rk(t),n=[];return o=>{n.push(o),n.length===1&&(async()=>(await r(),e(n),n=[]))()}}var ok=(e,t)=>t.some(r=>e instanceof r),nb,ob;function ik(){return nb||(nb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function sk(){return ob||(ob=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var hw=new WeakMap,jf=new WeakMap,pw=new WeakMap,wf=new WeakMap,oh=new WeakMap;function ak(e){let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{r(fo(e.result)),o()},a=()=>{n(e.error),o()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(r=>{r instanceof IDBCursor&&hw.set(r,e)}).catch(()=>{}),oh.set(t,e),t}function ck(e){if(jf.has(e))return;let t=new Promise((r,n)=>{let o=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{r(),o()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),o()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});jf.set(e,t)}var Hf={get(e,t,r){if(e instanceof IDBTransaction){if(t==="done")return jf.get(e);if(t==="objectStoreNames")return e.objectStoreNames||pw.get(e);if(t==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return fo(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function uk(e){Hf=e(Hf)}function lk(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...r){let n=e.call(yf(this),t,...r);return pw.set(n,t.sort?t.sort():[t]),fo(n)}:sk().includes(e)?function(...t){return e.apply(yf(this),t),fo(hw.get(this))}:function(...t){return fo(e.apply(yf(this),t))}}function dk(e){return typeof e=="function"?lk(e):(e instanceof IDBTransaction&&ck(e),ok(e,ik())?new Proxy(e,Hf):e)}function fo(e){if(e instanceof IDBRequest)return ak(e);if(wf.has(e))return wf.get(e);let t=dk(e);return t!==e&&(wf.set(e,t),oh.set(t,e)),t}var yf=e=>oh.get(e);function fk(e,t,{blocked:r,upgrade:n,blocking:o,terminated:i}={}){let a=indexedDB.open(e,t),u=fo(a);return n&&a.addEventListener("upgradeneeded",d=>{n(fo(a.result),d.oldVersion,d.newVersion,fo(a.transaction),d)}),r&&a.addEventListener("blocked",d=>r(d.oldVersion,d.newVersion,d)),u.then(d=>{i&&d.addEventListener("close",()=>i()),o&&d.addEventListener("versionchange",h=>o(h.oldVersion,h.newVersion,h))}).catch(()=>{}),u}var hk=["get","getKey","getAll","getAllKeys","count"],pk=["put","add","delete","clear"],vf=new Map;function ib(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(vf.get(t))return vf.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,o=pk.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(o||hk.includes(r)))return;let i=async function(a,...u){let d=this.transaction(a,o?"readwrite":"readonly"),h=d.store;return n&&(h=h.index(u.shift())),(await Promise.all([h[r](...u),o&&d.done]))[0]};return vf.set(t,i),i}uk(e=>({...e,get:(t,r,n)=>ib(t,r)||e.get(t,r,n),has:(t,r)=>!!ib(t,r)||e.has(t,r)}));function gk(e){let t={reply:void 0,root:void 0,mentions:[],profiles:[]},r=[];for(let n of e.tags)n[0]==="e"&&n[1]&&r.push(n),n[0]==="p"&&n[1]&&t.profiles.push({pubkey:n[1],relays:n[2]?[n[2]]:[]});for(let n=0;n<r.length;n++){let o=r[n],[i,a,u,d]=o,h={id:a,relays:u?[u]:[]},b=n===0,m=n===r.length-1;if(d==="root"){t.root=h;continue}if(d==="reply"){t.reply=h;continue}if(d==="mention"){t.mentions.push(h);continue}if(b){t.root=h;continue}if(m){t.reply=h;continue}t.mentions.push(h)}return t}var Hs={events:"id",aggregates:["eid","k"],profiles:["pk"],relays:["n","a"]},mk=async(e,t)=>{if(t<=1){let i=[...e.objectStoreNames];await Promise.all(i.map(a=>e.deleteObjectStore(a)))}let r=e.createObjectStore("events",{keyPath:Hs.events});r.createIndex("a","a"),r.createIndex("ro","ro"),r.createIndex("r","r"),r.createIndex("d","d"),r.createIndex("k","k"),e.createObjectStore("aggregates",{keyPath:Hs.aggregates}),e.createObjectStore("profiles",{keyPath:Hs.profiles}).createIndex("l","l"),e.createObjectStore("relays",{keyPath:Hs.relays}).createIndex("a","a")},ru=e=>{var t,r;let n=gk(e),o=e.tags.find(k=>k[0]==="a"),i=o&&o[1],a=o&&o[3]==="mention",u=e.tags.find(k=>k[0]==="r"),d=u&&u[1],h=e.tags.filter(k=>k[0]==="t"),b=[...new Set(h.map(k=>k[1]))],m=e.tags.find(k=>k[0]==="d"),_=m&&m[1],A=e.tags.find(k=>k[0]==="title"),C=A&&A[1];return{id:e.id??"",k:e.kind,c:e.content,ts:e.created_at,pk:e.pubkey,ro:(t=n.root)==null?void 0:t.id,re:(r=n.reply)==null?void 0:r.id,me:n.mentions.map(k=>k.id),p:n.profiles.map(k=>k.pubkey),a:i,am:a,r:d,t:b,d:_,tl:C}},bk=()=>({}),Ci=bk(),sb=!0,ab,hu=async()=>{if(sb!==!1)try{return ab||(ab=await fk("zapthreads",2,{upgrade:mk}))}catch{sb=!1}},zc=e=>{let t=We(lo(e,()=>{let[r,n,o]=e(),i=()=>Mi(r,n,o),[a,{mutate:u}]=wb(()=>Vs[r],i,{initialValue:[],storage:gw});return Mi(r,n,o).then(u),a}));return()=>t()()},cb=e=>{let t=We(lo(e,()=>{let[r,n,o]=e(),i=()=>Pi(r,n,o),[a,{mutate:u}]=wb(()=>Vs[r],i,{initialValue:void 0,storage:gw});return Pi(r,n,o).then(u),a}));return()=>t()()},Mi=async(e,t,r)=>{let n=await hu();if(!n){let o=Ci[e];if(o){if(r){let i=Array.isArray(t)?t:[t];return Object.values(o).filter(a=>i.includes(a[r.index]))}return Object.values(o)}return[]}if(t&&r){if(Array.isArray(t)){let o=t.map(a=>n.getAllFromIndex(e,r.index,a));return(await Promise.all(o)).flat()}return n.getAllFromIndex(e,r.index,t)}return n.getAll(e)},Pi=async(e,t,r)=>{let n=await hu();if(!n){let o=Ci[e];if(o){if(r)return Object.values(o).find(a=>a[r.index]===t);let i=(t.lower?t.lower:t).toString();return o[i]}return}return r?n.getFromIndex(e,r.index,t):n.get(e,t)},_f={},ub=(e,t)=>{Ci[e]??(Ci[e]={});for(let r of t){let n=Hs[e];n=Array.isArray(n)?n:[n];let o=n.map(i=>r[i]).join(",");Ci[e][o]=r}},Er=async(e,t,r={immediate:!1})=>{let n=await hu();if(r.immediate){n?n.put(e,t):ub(e,[t]),Vs[e]=+new Date;return}_f[e]||(_f[e]=nk(async o=>{if(!n){ub(e,o),Vs[e]=+new Date;return}let i=n.transaction(e,"readwrite");await Promise.all([...o.map(u=>i.store.put(u)),i.done])&&(Vs[e]=+new Date)},{delay:96})),_f[e](t)},wk=async()=>{let e=await hu();if(!e){Ci={};return}let t=[...e.objectStoreNames];await Promise.all(t.map(r=>e.clear(r)))},Vs=rh({});function gw(e){let[t,r]=C4({value:e});return[()=>t.value,n=>{let o=An(t.value);return typeof n=="function"&&(n=n(o)),r("value",N4(n)),t.value}]}var mw=async(e,t,r)=>{let n=+new Date,o=216e5,i=[...new Set(e)].filter(u=>{let d=r.find(h=>h.pk===u);return!(d?.l&&d.l>n-o)}).filter(u=>!!u);if(i.length===0)return;let a=await Li.querySync(t,{kinds:[0],authors:i});for(let u of i){let d=a.find(h=>h.pubkey===u);if(d){let h=JSON.parse(d.content),b=d.pubkey,m={pk:b,ts:d.created_at,i:h.image||h.picture,n:h.displayName||h.display_name||h.name},_=r.find(A=>A.pk===b);!_||!_?.n||_.ts<m.ts?Er("profiles",{...m,l:n}):Er("profiles",{..._,l:n})}}},yk=async(e,t)=>{let n=(await Mi("relays",e.value,{index:"a"})).filter(o=>t.includes(o.n)).map(o=>o.l);return n.length>0?Math.min(...n)+1:0},vk=async(e,t)=>{let r={};for(let o of t){let i=Li.seenOn.get(o.id);if(i)for(let a of i)o.ts>(r[a.url]||0)&&(r[a.url]=o.ts)}let n=await Mi("relays",e.value,{index:"a"});for(let o in r){let i=n.find(a=>a.n===o);i?r[o]>i.l&&(i.l=r[o],Er("relays",i)):Er("relays",{n:o,a:e.value,l:r[o]})}},_k=new RegExp("(?<=^|\\s)https?:\\/\\/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\\.[a-zA-Z0-9()]{1,6}\\b([-a-zA-Z0-9()@:%_\\+.~#?&\\/\\/=]*)","gi"),Ek=/(\S*(?:png|jpg|jpeg|gif|webp))/gi,xk=new RegExp("(?<=^|\\s)@?((naddr|npub|nevent|note)[a-z0-9]{20,})","g"),kk=/\`(.*?)\`/g,Sk=/\B\#([a-zA-Z0-9]+\b)(?!;)/g,bw=(e,t,r=[])=>{let n=e.c,o=t.urlPrefixes,i=t.profiles;n=n.replace(_k,u=>u.match(Ek)?`![image](${u})`:`[${u}](${u})`);let a=[...new Set(e.t)];if(a.length>0){let u=new RegExp(`(^|\\s)\\#(${a.join("|")})`,"gi");n=n.replaceAll(u,`$1[#$2](${o.tag}$2)`)}return n=n.replaceAll(xk,"nostr:$1"),n=Y4(n,({decoded:u,value:d})=>{switch(u.type){case"nprofile":let h=i().find(k=>k.pk===u.data.pubkey);return`[@${h?.n||Qo(d)}](${o.nprofile}${d})`;case"npub":let m=i().find(k=>k.pk===u.data);return`[@${m?.n||Qo(d)}](${o.npub}${d})`;case"note":return`[@${Qo(d)}](${o.note}${d})`;case"naddr":let A=u.data,C=r.find(k=>k.pk===A.pubkey&&k.d===A.identifier);return C&&C.tl?`[${C.tl}](${o.naddr}${d})`:`[@${Qo(d)}](${o.naddr}${d})`;case"nevent":return`[@${Qo(d)}](${o.nevent}${d})`;default:return d}}),n=n.replaceAll(kk,"<code>$1</code>"),tk(n.trim())},Ak=e=>{let t=[],r=Z4(e);for(let i of r){if(i.decoded.type==="npub"&&t.push(["p",i.decoded.data]),i.decoded.type==="naddr"){let a=i.decoded.data;t.push(["a",`${a.kind}:${a.pubkey}:${a.identifier}`,"","mention"])}i.decoded.type==="nevent"&&t.push(["e",i.decoded.data.id]),i.decoded.type==="note"&&t.push(["e",i.decoded.data])}let n=e.matchAll(Sk),o=new Set([...n].map(i=>i[1].toLowerCase()));for(let i of o)t.push(["t",i]);return t},Tk=(e="")=>{let t={naddr:"https://nostr.com/",npub:"https://nostr.com/",nprofile:"https://nostr.com/",nevent:"https://nostr.com/",note:"https://nostr.com/",tag:"https://snort.social/t/"};for(let r of e.split(",")){let[n,o]=r.split(":");o&&(t[n]=`https://${o}`)}return t},Qo=e=>e.substring(0,8)+"..."+e.substring(e.length-4),Fc=e=>e.sort((t,r)=>(t.ts||0)>=(r.ts||0)?-1:1),Rr=20,jc='data:image/svg+xml;utf-8,<svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg"><circle cx="512" cy="512" r="512" fill="%23333" fill-rule="evenodd" /></svg>',$k=e=>{let t=new Date,r=Math.floor((t.getTime()-e)/1e3);if(r<60)return"now";if(r<3600){let n=Math.floor(r/60);return`${n} minute${n===1?"":"s"} ago`}if(r<=86400){let n=Math.floor(r/3600);return`${n} hour${n===1?"":"s"} ago`}if(r<=604800){let n=Math.floor(r/86400);return`${n} day${n===1?"":"s"} ago`}if(r>604800){let n=new Date(e),o=n.toLocaleDateString("en-us",{day:"numeric",month:"long"}),i=n.getFullYear()===t.getFullYear()?"":" "+n.getFullYear();return"on "+o+i}return""},Bk=e=>e<1e4?e.toString():e<1e6?Math.round(e/1e3)+"k":Math.round(e/1e6)+"M",ih=e=>e.children.reduce((t,r)=>t+ih(r),e.children.length),Lk=/\/+$/,Ck=(e,t=!0)=>{let r=new URL(e);return r.hash="",t&&(r.pathname=r.pathname.replace(Lk,"")),r.toString()},ww=(e,t)=>{let r=e.map(o=>({...o,children:[]})),n=new Set(r.filter(o=>{if(t){let i=t.id===(o.re||o.ro);return i&&(o.parent=t),i}return!r.find(i=>i.id===(o.re||o.ro))}));r=r.filter(o=>!n.has(o));for(let o of n)o.children.push(...ww(r,o));return[...n]},Si=Symbol("verified"),Pk=e=>e instanceof Object;function Ik(e){if(!Pk(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let n=0;n<r.length;n++)if(typeof r[n]=="object")return!1}return!0}new TextDecoder("utf-8");var Nk=new TextEncoder,Ok=class{generateSecretKey(){return Zt.utils.randomPrivateKey()}getPublicKey(t){return et(Zt.getPublicKey(t))}finalizeEvent(t,r){let n=t;return n.pubkey=et(Zt.getPublicKey(r)),n.id=qs(n),n.sig=et(Zt.sign(qs(n),r)),n[Si]=!0,n}verifyEvent(t){if(typeof t[Si]=="boolean")return t[Si];let r=qs(t);if(r!==t.id)return t[Si]=!1,!1;try{let n=Zt.verify(t.sig,r,t.pubkey);return t[Si]=n,n}catch{return t[Si]=!1,!1}}};function Rk(e){if(!Ik(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function qs(e){let t=eh(Nk.encode(Rk(e)));return et(t)}var pu=new Ok,Uk=pu.generateSecretKey,yw=pu.getPublicKey,vw=pu.finalizeEvent;pu.verifyEvent;var zk=e=>{Ii(()=>{let t=e();t&&setTimeout(()=>t.focus())})},Ai=Symbol("verified"),Mk=e=>e instanceof Object;function Dk(e){if(!Mk(e)||typeof e.kind!="number"||typeof e.content!="string"||typeof e.created_at!="number"||typeof e.pubkey!="string"||!e.pubkey.match(/^[a-f0-9]{64}$/)||!Array.isArray(e.tags))return!1;for(let t=0;t<e.tags.length;t++){let r=e.tags[t];if(!Array.isArray(r))return!1;for(let n=0;n<r.length;n++)if(typeof r[n]=="object")return!1}return!0}new TextDecoder("utf-8");var Fk=new TextEncoder;function jk(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var Hk=class{constructor(e){we(this,"value"),we(this,"next",null),we(this,"prev",null),this.value=e}},Vk=class{constructor(){we(this,"first"),we(this,"last"),this.first=null,this.last=null}enqueue(e){let t=new Hk(e);return this.last?this.last===this.first?(this.last=t,this.last.prev=this.first,this.first.next=t):(t.prev=this.last,this.last.next=t,this.last=t):(this.first=t,this.last=t),!0}dequeue(){if(!this.first)return null;if(this.first===this.last){let t=this.first;return this.first=null,this.last=null,t.value}let e=this.first;return this.first=e.next,e.value}},qk=class{generateSecretKey(){return Zt.utils.randomPrivateKey()}getPublicKey(e){return et(Zt.getPublicKey(e))}finalizeEvent(e,t){let r=e;return r.pubkey=et(Zt.getPublicKey(t)),r.id=Ef(r),r.sig=et(Zt.sign(Ef(r),t)),r[Ai]=!0,r}verifyEvent(e){if(typeof e[Ai]=="boolean")return e[Ai];let t=Ef(e);if(t!==e.id)return e[Ai]=!1,!1;try{let r=Zt.verify(e.sig,t,e.pubkey);return e[Ai]=r,r}catch{return e[Ai]=!1,!1}}};function Wk(e){if(!Dk(e))throw new Error("can't serialize event with wrong or missing properties");return JSON.stringify([0,e.pubkey,e.created_at,e.kind,e.tags,e.content])}function Ef(e){let t=eh(Fk.encode(Wk(e)));return et(t)}var gu=new qk;gu.generateSecretKey;gu.getPublicKey;gu.finalizeEvent;var Qk=gu.verifyEvent,Kk=22242;function Gk(e,t){if(e.ids&&e.ids.indexOf(t.id)===-1&&!e.ids.some(r=>t.id.startsWith(r))||e.kinds&&e.kinds.indexOf(t.kind)===-1||e.authors&&e.authors.indexOf(t.pubkey)===-1&&!e.authors.some(r=>t.pubkey.startsWith(r)))return!1;for(let r in e)if(r[0]==="#"){let n=r.slice(1),o=e[`#${n}`];if(o&&!t.tags.find(([i,a])=>i===r.slice(1)&&o.indexOf(a)!==-1))return!1}return!(e.since&&t.created_at<e.since||e.until&&t.created_at>e.until)}function Zk(e,t){for(let r=0;r<e.length;r++)if(Gk(e[r],t))return!0;return!1}function Yk(e,t){let r=t.length+3,n=e.indexOf(`"${t}":`)+r,o=e.slice(n).indexOf('"')+n+1;return e.slice(o,o+64)}function Jk(e){let t=e.slice(0,22).indexOf('"EVENT"');if(t===-1)return null;let r=e.slice(t+7+1).indexOf('"');if(r===-1)return null;let n=t+7+1+r,o=e.slice(n+1,80).indexOf('"');if(o===-1)return null;let i=n+1+o;return e.slice(n+1,i)}function Xk(e,t){return{kind:Kk,created_at:Math.floor(Date.now()/1e3),tags:[["relay",e],["challenge",t]],content:""}}async function e6(){return new Promise(e=>{let t=new MessageChannel,r=()=>{t.port1.removeEventListener("message",r),e()};t.port1.addEventListener("message",r),t.port2.postMessage(0),t.port1.start()})}var _w;try{_w=WebSocket}catch{}var Ew=class{constructor(e,t){we(this,"url"),we(this,"_connected",!1),we(this,"onclose",null),we(this,"onnotice",r=>console.debug(`NOTICE from ${this.url}: ${r}`)),we(this,"_onauth",null),we(this,"baseEoseTimeout",4400),we(this,"connectionTimeout",4400),we(this,"openSubs",new Map),we(this,"connectionTimeoutHandle"),we(this,"connectionPromise"),we(this,"openCountRequests",new Map),we(this,"openEventPublishes",new Map),we(this,"ws"),we(this,"incomingMessageQueue",new Vk),we(this,"queueRunning",!1),we(this,"challenge"),we(this,"serial",0),we(this,"verifyEvent"),this.url=jk(e),this.verifyEvent=t.verifyEvent}static async connect(e,t){let r=new Ew(e,t);return await r.connect(),r}closeAllSubscriptions(e){for(let[t,r]of this.openSubs)r.close(e);this.openSubs.clear();for(let[t,r]of this.openEventPublishes)r.reject(new Error(e));this.openEventPublishes.clear();for(let[t,r]of this.openCountRequests)r.reject(new Error(e));this.openCountRequests.clear()}get connected(){return this._connected}async connect(){return this.connectionPromise?this.connectionPromise:(this.challenge=void 0,this.connectionPromise=new Promise((e,t)=>{this.connectionTimeoutHandle=setTimeout(()=>{var r;t("connection timed out"),this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection timed out")},this.connectionTimeout);try{this.ws=new _w(this.url)}catch(r){t(r);return}this.ws.onopen=()=>{clearTimeout(this.connectionTimeoutHandle),this._connected=!0,e()},this.ws.onerror=r=>{var n;t(r.message),this._connected&&(this._connected=!1,this.connectionPromise=void 0,(n=this.onclose)==null||n.call(this),this.closeAllSubscriptions("relay connection errored"))},this.ws.onclose=async()=>{var r;this._connected&&(this._connected=!1,this.connectionPromise=void 0,(r=this.onclose)==null||r.call(this),this.closeAllSubscriptions("relay connection closed"))},this.ws.onmessage=this._onmessage.bind(this)}),this.connectionPromise)}async runQueue(){for(this.queueRunning=!0;this.handleNext()!==!1;)await e6();this.queueRunning=!1}handleNext(){var e,t,r;let n=this.incomingMessageQueue.dequeue();if(!n)return!1;let o=Jk(n);if(o){let i=this.openSubs.get(o);if(!i)return;let a=Yk(n,"id"),u=(e=i.alreadyHaveEvent)==null?void 0:e.call(i,a);if((t=i.receivedEvent)==null||t.call(i,this,a),u)return}try{let i=JSON.parse(n);switch(i[0]){case"EVENT":{let a=this.openSubs.get(i[1]),u=i[2];this.verifyEvent(u)&&Zk(a.filters,u)&&a.onevent(u);return}case"COUNT":{let a=i[1],u=i[2],d=this.openCountRequests.get(a);d&&(d.resolve(u.count),this.openCountRequests.delete(a));return}case"EOSE":{let a=this.openSubs.get(i[1]);if(!a)return;a.receivedEose();return}case"OK":{let a=i[1],u=i[2],d=i[3],h=this.openEventPublishes.get(a);u?h.resolve(d):h.reject(new Error(d)),this.openEventPublishes.delete(a);return}case"CLOSED":{let a=i[1],u=this.openSubs.get(a);if(!u)return;u.closed=!0,u.close(i[2]);return}case"NOTICE":this.onnotice(i[1]);return;case"AUTH":{this.challenge=i[1],(r=this._onauth)==null||r.call(this,i[1]);return}}}catch{return}}async send(e){if(!this.connectionPromise)throw new Error("sending on closed connection");this.connectionPromise.then(()=>{var t;(t=this.ws)==null||t.send(e)})}async auth(e){if(!this.challenge)throw new Error("can't perform auth, no challenge was received");let t=await e(Xk(this.url,this.challenge)),r=new Promise((n,o)=>{this.openEventPublishes.set(t.id,{resolve:n,reject:o})});return this.send('["AUTH",'+JSON.stringify(t)+"]"),r}async publish(e){let t=new Promise((r,n)=>{this.openEventPublishes.set(e.id,{resolve:r,reject:n})});return this.send('["EVENT",'+JSON.stringify(e)+"]"),t}async count(e,t){this.serial++;let r=t?.id||"count:"+this.serial,n=new Promise((o,i)=>{this.openCountRequests.set(r,{resolve:o,reject:i})});return this.send('["COUNT","'+r+'",'+JSON.stringify(e)+"]"),n}subscribe(e,t){let r=this.prepareSubscription(e,t);return r.fire(),r}prepareSubscription(e,t){this.serial++;let r=t.id||"sub:"+this.serial,n=new t6(this,r,e,t);return this.openSubs.set(r,n),n}close(){var e;this.closeAllSubscriptions("relay connection closed by us"),this._connected=!1,(e=this.ws)==null||e.close()}_onmessage(e){this.incomingMessageQueue.enqueue(e.data),this.queueRunning||this.runQueue()}},t6=class{constructor(e,t,r,n){we(this,"relay"),we(this,"id"),we(this,"closed",!1),we(this,"eosed",!1),we(this,"filters"),we(this,"alreadyHaveEvent"),we(this,"receivedEvent"),we(this,"onevent"),we(this,"oneose"),we(this,"onclose"),we(this,"eoseTimeout"),we(this,"eoseTimeoutHandle"),this.relay=e,this.filters=r,this.id=t,this.alreadyHaveEvent=n.alreadyHaveEvent,this.receivedEvent=n.receivedEvent,this.eoseTimeout=n.eoseTimeout||e.baseEoseTimeout,this.oneose=n.oneose,this.onclose=n.onclose,this.onevent=n.onevent||(o=>{console.warn(`onevent() callback not defined for subscription '${this.id}' in relay ${this.relay.url}. event received:`,o)})}fire(){this.relay.send('["REQ","'+this.id+'",'+JSON.stringify(this.filters).substring(1)),this.eoseTimeoutHandle=setTimeout(this.receivedEose.bind(this),this.eoseTimeout)}receivedEose(){var e;this.eosed||(clearTimeout(this.eoseTimeoutHandle),this.eosed=!0,(e=this.oneose)==null||e.call(this))}close(e="closed by caller"){var t;!this.closed&&this.relay.connected&&(this.relay.send('["CLOSE",'+JSON.stringify(this.id)+"]"),this.closed=!0),this.relay.openSubs.delete(this.id),(t=this.onclose)==null||t.call(this,e)}},xw=class extends Ew{constructor(e){super(e,{verifyEvent:Qk})}static async connect(e){let t=new xw(e);return await t.connect(),t}};new TextDecoder("utf-8");new TextEncoder;function r6(e){e.indexOf("://")===-1&&(e="wss://"+e);let t=new URL(e);return t.pathname=t.pathname.replace(/\/+/g,"/"),t.pathname.endsWith("/")&&(t.pathname=t.pathname.slice(0,-1)),(t.port==="80"&&t.protocol==="ws:"||t.port==="443"&&t.protocol==="wss:")&&(t.port=""),t.searchParams.sort(),t.hash="",t.toString()}var n6=He("<div class=ztr-comment-info-picture><img>"),o6=He("<div class=ztr-reply-form><textarea></textarea><div class=ztr-reply-controls>"),i6=He("<span>Publishing is disabled"),s6=He("<span class=ztr-reply-error>Error: "),a6=He('<svg class=ztr-spinner viewBox="0 0 50 50"><circle class=path cx=25 cy=25 r=20 fill=none stroke-width=5>'),c6=He("<button class=ztr-reply-button>Reply as "),u6=He("<button class=ztr-reply-button>Reply anonymously"),l6=He("<button class=ztr-reply-login-button>Log in"),d6=He("<li class=ztr-comment-action-like><span> likes"),f6=He("<li class=ztr-comment-action-zap><span> sats"),h6=He("<div class=ztr-comment-new><div class=ztr-comment-body><ul class=ztr-comment-actions>"),kw=e=>{let[t,r]=_t(""),[n,o]=_t(!1),[i,a]=_t(),[u,d]=_t(""),h=()=>xe.anchor,b=xe.profiles,m=()=>xe.relays,_=async()=>{if(!window.nostr){C("Error: No NIP-07 extension!");return}let B=await window.nostr.getPublicKey();Gt.internal={pk:B,signEvent:async f=>window.nostr.signEvent(f)},d(""),Gt.active=Gt.internal};Ii(async()=>{if(Gt.active){let B=Gt.active.pk,f=b().find(p=>p.pk===B);f||(f={pk:B,l:0,ts:0},await Er("profiles",f)),a(f),mw([B],m(),b())}else a()});let A=async(B,f)=>{var p;o(!1),r(""),d(f??""),await Er("events",ru(B),{immediate:!0}),(p=e.onDone)==null||p.call(globalThis)},C=B=>{o(!1),d(`Error: ${B}`)},k=async B=>{let f;if(B)f=Gt.active;else{if(!Gt.anonymous){let I=Uk();Gt.anonymous={pk:yw(I),signEvent:async M=>({sig:vw(M,I).sig})}}f=Gt.anonymous}if(!f?.signEvent){C("Error: User has no signer!");return}let p=t().trim();if(!p)return;let w={kind:1,created_at:Math.round(Date.now()/1e3),content:p,pubkey:f.pk,tags:Ak(p)};if(xe.anchorAuthor!==w.pubkey&&w.tags.push(["p",xe.anchorAuthor]),xe.externalAuthor)try{let I=Dc(xe.externalAuthor).data;w.tags.push(["p",I])}catch{}if(e.replyTo){let I=await Pi("events",IDBKeyRange.only(e.replyTo));I&&(w.tags.push(["e",I.ro,"","root"]),I.pk!==w.pubkey&&w.tags.push(["p",I.pk])),w.tags.push(["e",e.replyTo,"","reply"])}else{let I=xe.version||xe.rootEventIds[0];if(I)w.tags.push(["e",I,"","root"]);else if(h().type==="http"){let M=r6(h().value),P={pubkey:f.pk,created_at:Math.round(Date.now()/1e3),kind:8812,tags:[["r",M]],content:`Comments on ${M} \u21B4`},$={id:qs(P),...P,...await f.signEvent(P)};Er("events",ru($)),xe.disableFeatures.includes("publish")?console.log("Publishing root event disabled",$):Li.publish(m(),$),xe.filter={"#e":[$.id]},w.tags.push(["e",$.id,"","root"])}}h().type==="naddr"&&w.tags.push(["a",h().value,"","root"]);let v=qs(w),S=await f.signEvent(w),T={id:v,...w,...S};if(o(!0),console.log(JSON.stringify(T,null,2)),xe.disableFeatures.includes("publish"))setTimeout(()=>A(T),1e3);else{let I=[];for(let M of m())try{await(await xw.connect(M)).publish(T)}catch(P){console.error(P),I.push(M)}if(I.length===m().length)C("Error: Your comment was not published to any relay");else{let M=`Published to ${I.length}/${m().length} relays (see console for more info)`,P=I.length>0?M:void 0;A(T,P)}I.length=0}},N=e.replyTo!==void 0,R;return zk(()=>N&&R),(()=>{let B=o6(),f=B.firstChild,p=f.nextSibling;f.addEventListener("change",v=>r(v.target.value));let w=R;return typeof w=="function"?Sb(w,f):R=f,f.autofocus=N,Le(p,(()=>{let v=We(()=>!!xe.disableFeatures.includes("publish"));return()=>v()&&i6()})(),null),Le(p,(()=>{let v=We(()=>!!u());return()=>v()&&(()=>{let S=s6();return S.firstChild,Le(S,u,null),S})()})(),null),Le(p,Or(Qc,{get when(){return!n()},get fallback(){return a6()},get children(){let v=n6(),S=v.firstChild;return _r(()=>{var T;return Vt(S,"src",((T=i())==null?void 0:T.i)||jc)}),v}}),null),Le(p,(()=>{let v=We(()=>!!i());return()=>v()&&(()=>{let S=c6();return S.firstChild,S.$$click=()=>k(i()),Le(S,()=>i().n||Qo(cw(i().pk)),null),_r(()=>S.disabled=n()),S})()})(),null),Le(p,(()=>{let v=We(()=>!i()&&!xe.disableFeatures.includes("replyAnonymously"));return()=>v()&&(()=>{let S=u6();return S.$$click=()=>k(),_r(()=>S.disabled=n()),S})()})(),null),Le(p,(()=>{let v=We(()=>!i());return()=>v()&&(()=>{let S=l6();return S.$$click=()=>_(),S})()})(),null),_r(v=>{let S=n(),T=xe.replyPlaceholder||"Add your comment...";return S!==v._v$&&(f.disabled=v._v$=S),T!==v._v$2&&Vt(f,"placeholder",v._v$2=T),v},{_v$:void 0,_v$2:void 0}),_r(()=>f.value=t()),B})()},p6=()=>{let e=()=>xe.anchor,t=cb(()=>["aggregates",IDBKeyRange.only([e().value,9735])]),r=cb(()=>["aggregates",IDBKeyRange.only([e().value,7])]),n=()=>{var i;return((i=t())==null?void 0:i.sum)??0},o=()=>{var i;return((i=r())==null?void 0:i.ids.length)??0};return(()=>{let i=h6(),a=i.firstChild,u=a.firstChild;return Le(u,Or(Qc,{get when(){return!xe.disableFeatures.includes("likes")},get children(){let d=d6(),h=d.firstChild,b=h.firstChild;return Le(d,D6,h),Le(h,o,b),d}}),null),Le(u,Or(Qc,{get when(){return!xe.disableFeatures.includes("zaps")},get children(){let d=f6(),h=d.firstChild,b=h.firstChild;return Le(d,M6,h),Le(h,()=>Bk(n()),b),d}}),null),Le(a,Or(kw,{}),null),i})()};qf(["click"]);function g6(e){return e!==null&&(typeof e=="object"||typeof e=="function")}function lb(e,...t){return typeof e=="function"?e(...t):e}function m6(e){let t={...e},r={...e},n={},o=a=>{let u=n[a];if(!u){if(!Ni())return t[a];n[a]=u=_t(t[a],{internal:!0}),delete t[a]}return u[0]()};for(let a in e)Object.defineProperty(r,a,{get:()=>o(a),enumerable:!0});let i=(a,u)=>{let d=n[a];if(d)return d[1](u);a in t&&(t[a]=lb(u,[t[a]]))};return[r,(a,u)=>{if(g6(a)){let d=xr(()=>Object.entries(lb(a,r)));$i(()=>{for(let[h,b]of d)i(h,()=>b)})}else i(a,u);return r}]}var Sw={width:null,height:null};function xf(e){if(!e)return{...Sw};let{width:t,height:r}=e.getBoundingClientRect();return{width:t,height:r}}function b6(e){let t=typeof e=="function",[r,n]=m6(t?Sw:xf(e)),o=new ResizeObserver(([i])=>n(xf(i.target)));return Bi(()=>o.disconnect()),t?Ii(()=>{let i=e();i&&(n(xf(i)),o.observe(i),Bi(()=>o.unobserve(i)))}):(o.observe(e),Bi(()=>o.unobserve(e))),r}var w6=He("<div class=ztr-thread>"),y6=He("<li class=ztr-comment-action-reply><span>"),v6=He("<div class=ztr-comment><div class=ztr-comment-body><div class=ztr-comment-info-wrapper><div class=ztr-comment-info><div class=ztr-comment-info-picture><img></div><ul class=ztr-comment-info-items><li class=ztr-comment-info-author><a target=_blank></a><span style=white-space:nowrap;><strong> <!>ed</strong> </span></li><li><a class=ztr-comment-info-dots></a></li></ul></div><ul class=ztr-comment-info-items></ul></div><div class=ztr-comment-text></div><div class=ztr-comment-text></div><ul class=ztr-comment-actions>"),_6=He("<li>\u25CF"),E6=He("<li> repl"),x6=He("<li><span>"),k6=He("<div class=ztr-info-pane><a target=_blank><small>Event data"),S6=He("<p class=warning><span>This is a <!> that referenced this article in <a>another thread"),A6=He("<p class=warning><span>Article contents may have changed since this <!> was made"),T6=He("<p class=warning><span>Article contents changed since this <!> was made"),$6=He("<div class=ztr-comment-expand><a></a><span>Show full comment"),B6=He("<div class=ztr-comment-replies>"),L6=He('<svg viewBox="0 -6 60 60"xmlns=http://www.w3.org/2000/svg><path d="M 12.6030 50.4905 C 13.3758 50.4905 13.9307 50.1140 14.8621 49.2421 L 20.6483 43.8720 C 19.5188 42.9803 18.6073 41.5733 18.6073 38.3433 L 18.6073 25.2052 C 18.6073 19.1217 22.3129 15.5152 28.3766 15.5152 L 42.2479 15.5152 L 42.2281 14.7622 C 41.9306 10.6999 39.2557 8.0643 34.7177 8.0643 L 7.5301 8.0643 C 2.9922 8.0643 0 10.7791 0 15.4954 L 0 34.9548 C 0 39.6710 2.9922 42.7028 7.5301 42.7028 L 10.8195 42.7028 L 10.8195 48.4693 C 10.8195 49.6979 11.4735 50.4905 12.6030 50.4905 Z M 44.6058 53.2450 C 45.7353 53.2450 46.3895 52.4325 46.3895 51.2237 L 46.3895 45.4374 L 48.4702 45.4374 C 53.0078 45.4374 56 42.4056 56 37.7092 L 56 25.6610 C 56 20.9250 53.0078 18.2300 48.4702 18.2300 L 28.8522 18.2300 C 24.1161 18.2300 21.3221 20.9250 21.3221 25.6610 L 21.3221 37.7092 C 21.3221 42.4056 24.1161 45.4374 28.8522 45.4374 L 35.1735 45.4374 L 42.3470 51.9767 C 43.2784 52.8487 43.8331 53.2450 44.6058 53.2450 Z">'),C6=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="-120 -80 528 588"><path d="M349.4 44.6c5.9-13.7 1.5-29.7-10.6-38.5s-28.6-8-39.9 1.8l-256 224c-10 8.8-13.6 22.9-8.9 35.3S50.7 288 64 288H175.5L98.6 467.4c-5.9 13.7-1.5 29.7 10.6 38.5s28.6 8 39.9-1.8l256-224c10-8.8 13.6-22.9 8.9-35.3s-16.6-20.7-30-20.7H272.5L349.4 44.6z">'),P6=He('<svg viewBox="0 -16 180 180"xmlns=http://www.w3.org/2000/svg><path d="M60.732 29.7C41.107 29.7 22 39.7 22 67.41c0 27.29 45.274 67.29 74 94.89 28.744-27.6 74-67.6 74-94.89 0-27.71-19.092-37.71-38.695-37.71C116 29.7 104.325 41.575 96 54.066 87.638 41.516 76 29.7 60.732 29.7z">'),I6=He('<svg viewBox="0 0 576 512"><path d="M168 80c-13.3 0-24 10.7-24 24V408c0 8.4-1.4 16.5-4.1 24H440c13.3 0 24-10.7 24-24V104c0-13.3-10.7-24-24-24H168zM72 480c-39.8 0-72-32.2-72-72V112C0 98.7 10.7 88 24 88s24 10.7 24 24V408c0 13.3 10.7 24 24 24s24-10.7 24-24V104c0-39.8 32.2-72 72-72H440c39.8 0 72 32.2 72 72V408c0 39.8-32.2 72-72 72H72zM176 136c0-13.3 10.7-24 24-24h96c13.3 0 24 10.7 24 24v80c0 13.3-10.7 24-24 24H200c-13.3 0-24-10.7-24-24V136zm200-24h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80h32c13.3 0 24 10.7 24 24s-10.7 24-24 24H376c-13.3 0-24-10.7-24-24s10.7-24 24-24zM200 272H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24zm0 80H408c13.3 0 24 10.7 24 24s-10.7 24-24 24H200c-13.3 0-24-10.7-24-24s10.7-24 24-24z">'),N6=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -200 560 640"><path d="M8 256a56 56 0 1 1 112 0A56 56 0 1 1 8 256zm160 0a56 56 0 1 1 112 0 56 56 0 1 1 -112 0zm216-56a56 56 0 1 1 0 112 56 56 0 1 1 0-112z">'),O6=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 256 512"><path d="M246.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-128-128c-9.2-9.2-22.9-11.9-34.9-6.9s-19.8 16.6-19.8 29.6l0 256c0 12.9 7.8 24.6 19.8 29.6s25.7 2.2 34.9-6.9l128-128z">'),R6=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 -50 320 512"><path d="M137.4 374.6c12.5 12.5 32.8 12.5 45.3 0l128-128c9.2-9.2 11.9-22.9 6.9-34.9s-16.6-19.8-29.6-19.8L32 192c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9l128 128z">'),U6=He('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 512 512"><path d="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480H40c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24V296c0 13.3 10.7 24 24 24s24-10.7 24-24V184c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z">'),Aw=e=>{let t=()=>xe.anchor,r=xe.profiles;return(()=>{let n=w6();return Le(n,Or(FE,{get each(){return Fc(e.nestedEvents())},children:o=>{let[i,a]=_t(!1),[u,d]=_t(!1),[h,b]=_t(!1),[m,_]=_t(!1),A=500,[C,k]=_t(),N=b6(C),[R,B]=_t(jc),f=()=>o().pk,p=()=>cw(f()),w=()=>r().find(z=>z.pk===f());Ii(async()=>{var z;B(((z=w())==null?void 0:z.i)||jc)});let v,S=()=>$k(o().ts*1e3),[T,I]=_t();Ii(()=>{I(S()),v=setInterval(()=>{I(S())},60*1e3)});let M=()=>o().a===t().value&&o().am,P=()=>o().k===9802?"highlight":M()?"mention":"comment",$=We(()=>ih(o())),F=()=>!o().parent&&!o().ro,q=()=>!o().parent&&o().ro&&!xe.rootEventIds.includes(o().ro),x=()=>!o().parent&&o().ro&&xe.rootEventIds.includes(o().ro)&&xe.version&&xe.version!==o().ro;return Bi(()=>clearInterval(v)),(()=>{let z=v6(),V=z.firstChild,K=V.firstChild,Z=K.firstChild,W=Z.firstChild,J=W.firstChild,le=W.nextSibling,_e=le.firstChild,ve=_e.firstChild,Ie=ve.nextSibling,ie=Ie.firstChild,Se=ie.firstChild,Ve=Se.nextSibling;Ve.nextSibling,ie.nextSibling;let Re=_e.nextSibling,je=Re.firstChild,Et=Z.nextSibling,Qe=K.nextSibling,he=Qe.nextSibling,Me=he.nextSibling;return J.addEventListener("error",()=>B(jc)),Le(ve,()=>{var Ce;return((Ce=w())==null?void 0:Ce.n)||Qo(p())}),Le(ie,P,Ve),Le(Ie,T,null),Le(le,(()=>{let Ce=We(()=>$()>0&&N.width>600);return()=>Ce()&&[_6(),(()=>{let Ne=E6(),qe=Ne.firstChild;return Le(Ne,$,qe),Le(Ne,()=>$()>1?"ies":"y",null),Le(Ne,()=>h()?" (hidden)":"",null),Ne})()]})(),Re),je.$$click=()=>_(!m()),Le(je,Tw),Le(Et,(()=>{let Ce=We(()=>$()>0);return()=>Ce()&&(()=>{let Ne=x6(),qe=Ne.firstChild;return qe.$$click=()=>b(!h()),Le(qe,(()=>{let Bt=We(()=>!!h());return()=>Bt()?j6():H6()})()),Ne})()})()),Le(V,(()=>{let Ce=We(()=>!!m());return()=>Ce()&&(()=>{let Ne=k6(),qe=Ne.firstChild;return _r(()=>Vt(qe,"href",xe.urlPrefixes.note+rb(o().id))),Ne})()})(),Qe),Le(Qe,(()=>{let Ce=We(()=>!!q());return()=>Ce()&&(()=>{let Ne=S6(),qe=Ne.firstChild,Bt=qe.firstChild,Wt=Bt.nextSibling,Mt=Wt.nextSibling,cr=Mt.nextSibling;return Le(Ne,kf,qe),Le(qe,P,Wt),_r(()=>Vt(cr,"href",xe.urlPrefixes.note+rb(o().ro))),Ne})()})(),null),Le(Qe,(()=>{let Ce=We(()=>!!F());return()=>Ce()&&(()=>{let Ne=A6(),qe=Ne.firstChild,Bt=qe.firstChild,Wt=Bt.nextSibling;return Wt.nextSibling,Le(Ne,kf,qe),Le(qe,P,Wt),Ne})()})(),null),Le(Qe,(()=>{let Ce=We(()=>!!x());return()=>Ce()&&(()=>{let Ne=T6(),qe=Ne.firstChild,Bt=qe.firstChild,Wt=Bt.nextSibling;return Wt.nextSibling,Le(Ne,kf,qe),Le(qe,P,Wt),Ne})()})(),null),Sb(k,he),Le(V,(()=>{let Ce=We(()=>!!(N.height&&N.height>=A&&!u()));return()=>Ce()&&(()=>{let Ne=$6(),qe=Ne.firstChild,Bt=qe.nextSibling;return`${Rr}px`!=null?qe.style.setProperty("height",`${Rr}px`):qe.style.removeProperty("height"),Le(qe,F6),Bt.$$click=()=>d(!0),Ne})()})(),Me),Le(Me,Or(Qc,{get when(){return!xe.disableFeatures.includes("reply")},get children(){let Ce=y6(),Ne=Ce.firstChild;return Ce.$$click=()=>a(!i())&&_(!1),Le(Ce,z6,Ne),Le(Ne,()=>i()?"Cancel":"Reply"),Ce}})),Le(V,(()=>{let Ce=We(()=>!!i());return()=>Ce()&&Or(kw,{get replyTo(){return o().id},onDone:()=>a(!1)})})(),null),Le(z,(()=>{let Ce=We(()=>!h());return()=>Ce()&&(()=>{let Ne=B6();return Le(Ne,Or(Aw,{nestedEvents:()=>o().children,get articles(){return e.articles}})),Ne})()})(),null),_r(Ce=>{let Ne=R(),qe=xe.urlPrefixes.npub+p(),Bt=o().k==9802,Wt=u()?{}:{"max-height":`${A}px`},Mt=bw(o(),xe,e.articles());return Ne!==Ce._v$&&Vt(J,"src",Ce._v$=Ne),qe!==Ce._v$2&&Vt(ve,"href",Ce._v$2=qe),Bt!==Ce._v$3&&he.classList.toggle("highlight",Ce._v$3=Bt),Ce._v$4=VE(he,Wt,Ce._v$4),Mt!==Ce._v$5&&(he.innerHTML=Ce._v$5=Mt),Ce},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),z})()}})),n})()},z6=()=>(()=>{let e=L6();return Vt(e,"width",Rr),Vt(e,"height",Rr),e})(),M6=()=>(()=>{let e=C6();return Vt(e,"width",Rr),Vt(e,"height",Rr),e})(),D6=()=>(()=>{let e=P6();return Vt(e,"width",Rr),Vt(e,"height",Rr),e})(),F6=()=>(()=>{let e=I6();return Vt(e,"width",Rr),Vt(e,"height",Rr),e})(),Tw=()=>N6(),j6=()=>O6(),H6=()=>R6(),kf=()=>(()=>{let e=U6();return Vt(e,"height",Rr),e})();qf(["click"]);var $w={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.bytes=e.stringToBytes=e.str=e.bytesToString=e.hex=e.utf8=e.bech32m=e.bech32=e.base58check=e.base58xmr=e.base58xrp=e.base58flickr=e.base58=e.base64url=e.base64=e.base32crockford=e.base32hex=e.base32=e.base16=e.utils=e.assertNumber=void 0;function t(P){if(!Number.isSafeInteger(P))throw new Error(`Wrong integer: ${P}`)}e.assertNumber=t;function r(...P){let $=(x,z)=>V=>x(z(V)),F=Array.from(P).reverse().reduce((x,z)=>x?$(x,z.encode):z.encode,void 0),q=P.reduce((x,z)=>x?$(x,z.decode):z.decode,void 0);return{encode:F,decode:q}}function n(P){return{encode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="number")throw new Error("alphabet.encode input should be an array of numbers");return $.map(F=>{if(t(F),F<0||F>=P.length)throw new Error(`Digit index outside alphabet: ${F} (alphabet: ${P.length})`);return P[F]})},decode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="string")throw new Error("alphabet.decode input should be array of strings");return $.map(F=>{if(typeof F!="string")throw new Error(`alphabet.decode: not string element=${F}`);let q=P.indexOf(F);if(q===-1)throw new Error(`Unknown letter: "${F}". Allowed: ${P}`);return q})}}}function o(P=""){if(typeof P!="string")throw new Error("join separator should be string");return{encode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="string")throw new Error("join.encode input should be array of strings");for(let F of $)if(typeof F!="string")throw new Error(`join.encode: non-string input=${F}`);return $.join(P)},decode:$=>{if(typeof $!="string")throw new Error("join.decode input should be string");return $.split(P)}}}function i(P,$="="){if(t(P),typeof $!="string")throw new Error("padding chr should be string");return{encode(F){if(!Array.isArray(F)||F.length&&typeof F[0]!="string")throw new Error("padding.encode input should be array of strings");for(let q of F)if(typeof q!="string")throw new Error(`padding.encode: non-string input=${q}`);for(;F.length*P%8;)F.push($);return F},decode(F){if(!Array.isArray(F)||F.length&&typeof F[0]!="string")throw new Error("padding.encode input should be array of strings");for(let x of F)if(typeof x!="string")throw new Error(`padding.decode: non-string input=${x}`);let q=F.length;if(q*P%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;q>0&&F[q-1]===$;q--)if(!((q-1)*P%8))throw new Error("Invalid padding: string has too much padding");return F.slice(0,q)}}}function a(P){if(typeof P!="function")throw new Error("normalize fn should be function");return{encode:$=>$,decode:$=>P($)}}function u(P,$,F){if($<2)throw new Error(`convertRadix: wrong from=${$}, base cannot be less than 2`);if(F<2)throw new Error(`convertRadix: wrong to=${F}, base cannot be less than 2`);if(!Array.isArray(P))throw new Error("convertRadix: data should be array");if(!P.length)return[];let q=0,x=[],z=Array.from(P);for(z.forEach(V=>{if(t(V),V<0||V>=$)throw new Error(`Wrong integer: ${V}`)});;){let V=0,K=!0;for(let Z=q;Z<z.length;Z++){let W=z[Z],J=$*V+W;if(!Number.isSafeInteger(J)||$*V/$!==V||J-W!==$*V)throw new Error("convertRadix: carry overflow");if(V=J%F,z[Z]=Math.floor(J/F),!Number.isSafeInteger(z[Z])||z[Z]*F+V!==J)throw new Error("convertRadix: carry overflow");if(K)z[Z]?K=!1:q=Z;else continue}if(x.push(V),K)break}for(let V=0;V<P.length-1&&P[V]===0;V++)x.push(0);return x.reverse()}let d=(P,$)=>$?d($,P%$):P,h=(P,$)=>P+($-d(P,$));function b(P,$,F,q){if(!Array.isArray(P))throw new Error("convertRadix2: data should be array");if($<=0||$>32)throw new Error(`convertRadix2: wrong from=${$}`);if(F<=0||F>32)throw new Error(`convertRadix2: wrong to=${F}`);if(h($,F)>32)throw new Error(`convertRadix2: carry overflow from=${$} to=${F} carryBits=${h($,F)}`);let x=0,z=0,V=2**F-1,K=[];for(let Z of P){if(t(Z),Z>=2**$)throw new Error(`convertRadix2: invalid data word=${Z} from=${$}`);if(x=x<<$|Z,z+$>32)throw new Error(`convertRadix2: carry overflow pos=${z} from=${$}`);for(z+=$;z>=F;z-=F)K.push((x>>z-F&V)>>>0);x&=2**z-1}if(x=x<<F-z&V,!q&&z>=$)throw new Error("Excess padding");if(!q&&x)throw new Error(`Non-zero padding: ${x}`);return q&&z>0&&K.push(x>>>0),K}function m(P){return t(P),{encode:$=>{if(!($ instanceof Uint8Array))throw new Error("radix.encode input should be Uint8Array");return u(Array.from($),2**8,P)},decode:$=>{if(!Array.isArray($)||$.length&&typeof $[0]!="number")throw new Error("radix.decode input should be array of strings");return Uint8Array.from(u($,P,2**8))}}}function _(P,$=!1){if(t(P),P<=0||P>32)throw new Error("radix2: bits should be in (0..32]");if(h(8,P)>32||h(P,8)>32)throw new Error("radix2: carry overflow");return{encode:F=>{if(!(F instanceof Uint8Array))throw new Error("radix2.encode input should be Uint8Array");return b(Array.from(F),8,P,!$)},decode:F=>{if(!Array.isArray(F)||F.length&&typeof F[0]!="number")throw new Error("radix2.decode input should be array of strings");return Uint8Array.from(b(F,P,8,$))}}}function A(P){if(typeof P!="function")throw new Error("unsafeWrapper fn should be function");return function(...$){try{return P.apply(null,$)}catch{}}}function C(P,$){if(t(P),typeof $!="function")throw new Error("checksum fn should be function");return{encode(F){if(!(F instanceof Uint8Array))throw new Error("checksum.encode: input should be Uint8Array");let q=$(F).slice(0,P),x=new Uint8Array(F.length+P);return x.set(F),x.set(q,F.length),x},decode(F){if(!(F instanceof Uint8Array))throw new Error("checksum.decode: input should be Uint8Array");let q=F.slice(0,-P),x=$(q).slice(0,P),z=F.slice(-P);for(let V=0;V<P;V++)if(x[V]!==z[V])throw new Error("Invalid checksum");return q}}}e.utils={alphabet:n,chain:r,checksum:C,radix:m,radix2:_,join:o,padding:i},e.base16=r(_(4),n("0123456789ABCDEF"),o("")),e.base32=r(_(5),n("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),i(5),o("")),e.base32hex=r(_(5),n("0123456789ABCDEFGHIJKLMNOPQRSTUV"),i(5),o("")),e.base32crockford=r(_(5),n("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),a(P=>P.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),e.base64=r(_(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),i(6),o("")),e.base64url=r(_(6),n("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),i(6),o(""));let k=P=>r(m(58),n(P),o(""));e.base58=k("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),e.base58flickr=k("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),e.base58xrp=k("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let N=[0,2,3,5,6,7,9,10,11];e.base58xmr={encode(P){let $="";for(let F=0;F<P.length;F+=8){let q=P.subarray(F,F+8);$+=e.base58.encode(q).padStart(N[q.length],"1")}return $},decode(P){let $=[];for(let F=0;F<P.length;F+=11){let q=P.slice(F,F+11),x=N.indexOf(q.length),z=e.base58.decode(q);for(let V=0;V<z.length-x;V++)if(z[V]!==0)throw new Error("base58xmr: wrong padding");$=$.concat(Array.from(z.slice(z.length-x)))}return Uint8Array.from($)}};let R=P=>r(C(4,$=>P(P($))),e.base58);e.base58check=R;let B=r(n("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),f=[996825010,642813549,513874426,1027748829,705979059];function p(P){let $=P>>25,F=(P&33554431)<<5;for(let q=0;q<f.length;q++)($>>q&1)===1&&(F^=f[q]);return F}function w(P,$,F=1){let q=P.length,x=1;for(let z=0;z<q;z++){let V=P.charCodeAt(z);if(V<33||V>126)throw new Error(`Invalid prefix (${P})`);x=p(x)^V>>5}x=p(x);for(let z=0;z<q;z++)x=p(x)^P.charCodeAt(z)&31;for(let z of $)x=p(x)^z;for(let z=0;z<6;z++)x=p(x);return x^=F,B.encode(b([x%2**30],30,5,!1))}function v(P){let $=P==="bech32"?1:734539939,F=_(5),q=F.decode,x=F.encode,z=A(q);function V(J,le,_e=90){if(typeof J!="string")throw new Error(`bech32.encode prefix should be string, not ${typeof J}`);if(!Array.isArray(le)||le.length&&typeof le[0]!="number")throw new Error(`bech32.encode words should be array of numbers, not ${typeof le}`);let ve=J.length+7+le.length;if(_e!==!1&&ve>_e)throw new TypeError(`Length ${ve} exceeds limit ${_e}`);return J=J.toLowerCase(),`${J}1${B.encode(le)}${w(J,le,$)}`}function K(J,le=90){if(typeof J!="string")throw new Error(`bech32.decode input should be string, not ${typeof J}`);if(J.length<8||le!==!1&&J.length>le)throw new TypeError(`Wrong string length: ${J.length} (${J}). Expected (8..${le})`);let _e=J.toLowerCase();if(J!==_e&&J!==J.toUpperCase())throw new Error("String must be lowercase or uppercase");J=_e;let ve=J.lastIndexOf("1");if(ve===0||ve===-1)throw new Error('Letter "1" must be present between prefix and data only');let Ie=J.slice(0,ve),ie=J.slice(ve+1);if(ie.length<6)throw new Error("Data must be at least 6 characters long");let Se=B.decode(ie).slice(0,-6),Ve=w(Ie,Se,$);if(!ie.endsWith(Ve))throw new Error(`Invalid checksum in ${J}: expected "${Ve}"`);return{prefix:Ie,words:Se}}let Z=A(K);function W(J){let{prefix:le,words:_e}=K(J,!1);return{prefix:le,words:_e,bytes:q(_e)}}return{encode:V,decode:K,decodeToBytes:W,decodeUnsafe:Z,fromWords:q,fromWordsUnsafe:z,toWords:x}}e.bech32=v("bech32"),e.bech32m=v("bech32m"),e.utf8={encode:P=>new TextDecoder().decode(P),decode:P=>new TextEncoder().encode(P)},e.hex=r(_(4),n("0123456789abcdef"),o(""),a(P=>{if(typeof P!="string"||P.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof P} with length ${P.length}`);return P.toLowerCase()}));let S={utf8:e.utf8,hex:e.hex,base16:e.base16,base32:e.base32,base64:e.base64,base64url:e.base64url,base58:e.base58,base58xmr:e.base58xmr},T=`Invalid encoding type. Available types: ${Object.keys(S).join(", ")}`,I=(P,$)=>{if(typeof P!="string"||!S.hasOwnProperty(P))throw new TypeError(T);if(!($ instanceof Uint8Array))throw new TypeError("bytesToString() expects Uint8Array");return S[P].encode($)};e.bytesToString=I,e.str=e.bytesToString;let M=(P,$)=>{if(!S.hasOwnProperty(P))throw new TypeError(T);if(typeof $!="string")throw new TypeError("stringToBytes() expects string");return S[P].decode($)};e.stringToBytes=M,e.bytes=e.stringToBytes})($w);var{bech32:Yr,hex:Nr,utf8:V6}=$w,db={bech32:"bc",pubKeyHash:0,scriptHash:5,validWitnessVersions:[0]},fb={bech32:"tb",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},hb={bech32:"bcrt",pubKeyHash:111,scriptHash:196,validWitnessVersions:[0]},pb={bech32:"sb",pubKeyHash:63,scriptHash:123,validWitnessVersions:[0]},Mc=["option_data_loss_protect","initial_routing_sync","option_upfront_shutdown_script","gossip_queries","var_onion_optin","gossip_queries_ex","option_static_remotekey","payment_secret","basic_mpp","option_support_large_channel"],q6={m:BigInt(1e3),u:BigInt(1e6),n:BigInt(1e9),p:BigInt(1e12)},W6=BigInt("2100000000000000000"),gb=BigInt(1e11),Vf={payment_hash:1,payment_secret:16,description:13,payee:19,description_hash:23,expiry:6,min_final_cltv_expiry:24,fallback_address:9,route_hint:3,feature_bits:5,metadata:27},Bw={};for(let e=0,t=Object.keys(Vf);e<t.length;e++){let r=t[e],n=Vf[t[e]].toString();Bw[n]=r}var Q6={1:e=>Nr.encode(Yr.fromWordsUnsafe(e)),16:e=>Nr.encode(Yr.fromWordsUnsafe(e)),13:e=>V6.encode(Yr.fromWordsUnsafe(e)),19:e=>Nr.encode(Yr.fromWordsUnsafe(e)),23:e=>Nr.encode(Yr.fromWordsUnsafe(e)),27:e=>Nr.encode(Yr.fromWordsUnsafe(e)),6:nu,24:nu,3:G6,5:Z6};function K6(e){return t=>({tagCode:parseInt(e),words:Yr.encode("unknown",t,Number.MAX_SAFE_INTEGER)})}function nu(e){return e.reverse().reduce((t,r,n)=>t+r*Math.pow(32,n),0)}function G6(e){let t=[],r,n,o,i,a,u=Yr.fromWordsUnsafe(e);for(;u.length>0;)r=Nr.encode(u.slice(0,33)),n=Nr.encode(u.slice(33,41)),o=parseInt(Nr.encode(u.slice(41,45)),16),i=parseInt(Nr.encode(u.slice(45,49)),16),a=parseInt(Nr.encode(u.slice(49,51)),16),u=u.slice(51),t.push({pubkey:r,short_channel_id:n,fee_base_msat:o,fee_proportional_millionths:i,cltv_expiry_delta:a});return t}function Z6(e){let t=e.slice().reverse().map(o=>[!!(o&1),!!(o&2),!!(o&4),!!(o&8),!!(o&16)]).reduce((o,i)=>o.concat(i),[]);for(;t.length<Mc.length*2;)t.push(!1);let r={};Mc.forEach((o,i)=>{let a;t[i*2]?a="required":t[i*2+1]?a="supported":a="unsupported",r[o]=a});let n=t.slice(Mc.length*2);return r.extra_bits={start_bit:Mc.length*2,bits:n,has_required:n.reduce((o,i,a)=>a%2!==0?o||!1:o||i,!1)},r}function Lw(e,t){let r,n;if(e.slice(-1).match(/^[munp]$/))r=e.slice(-1),n=e.slice(0,-1);else{if(e.slice(-1).match(/^[^munp0-9]$/))throw new Error("Not a valid multiplier for the amount");n=e}if(!n.match(/^\d+$/))throw new Error("Not a valid human readable amount");let o=BigInt(n),i=r?o*gb/q6[r]:o*gb;if(r==="p"&&o%BigInt(10)!==BigInt(0)||i>W6)throw new Error("Amount is outside of valid range");return t?i.toString():i}function Y6(e,t){if(typeof e!="string")throw new Error("Lightning Payment Request must be string");if(e.slice(0,2).toLowerCase()!=="ln")throw new Error("Not a proper lightning payment request");let r=[],n=Yr.decode(e,Number.MAX_SAFE_INTEGER);e=e.toLowerCase();let o=n.prefix,i=n.words,a=e.slice(o.length+1),u=i.slice(-104);i=i.slice(0,-104);let d=o.match(/^ln(\S+?)(\d*)([a-zA-Z]?)$/);if(d&&!d[2]&&(d=o.match(/^ln(\S+)$/)),!d)throw new Error("Not a proper lightning payment request");r.push({name:"lightning_network",letters:"ln"});let h=d[1],b;if(t){if(t.bech32===void 0||t.pubKeyHash===void 0||t.scriptHash===void 0||!Array.isArray(t.validWitnessVersions))throw new Error("Invalid network");b=t}else switch(h){case db.bech32:b=db;break;case fb.bech32:b=fb;break;case hb.bech32:b=hb;break;case pb.bech32:b=pb;break}if(!b||b.bech32!==h)throw new Error("Unknown coin bech32 prefix");r.push({name:"coin_network",letters:h,value:b});let m=d[2],_;if(m){let p=d[3];_=Lw(m+p,!0),r.push({name:"amount",letters:d[2]+d[3],value:_})}else _=null;r.push({name:"separator",letters:"1"});let A=nu(i.slice(0,7));i=i.slice(7),r.push({name:"timestamp",letters:a.slice(0,7),value:A}),a=a.slice(7);let C,k,N,R;for(;i.length>0;){let p=i[0].toString();C=Bw[p]||"unknown_tag",k=Q6[p]||K6(p),i=i.slice(1),N=nu(i.slice(0,2)),i=i.slice(2),R=i.slice(0,N),i=i.slice(N),r.push({name:C,tag:a[0],letters:a.slice(0,3+N),value:k(R)}),a=a.slice(3+N)}r.push({name:"signature",letters:a.slice(0,104),value:Nr.encode(Yr.fromWordsUnsafe(u))}),a=a.slice(104),r.push({name:"checksum",letters:a});let B={paymentRequest:e,sections:r,get expiry(){let p=r.find(w=>w.name==="expiry");if(p)return f("timestamp")+p.value},get route_hints(){return r.filter(p=>p.name==="route_hint").map(p=>p.value)}};for(let p in Vf)p!=="route_hint"&&Object.defineProperty(B,p,{get(){return f(p)}});return B;function f(p){let w=r.find(v=>v.name===p);return w?w.value:void 0}}var J6={decode:Y6,hrpToMillisat:Lw},X6=He("<div id=ztr-root><style></style><div style=float:right;opacity:0.2;>"),e5=He("<div id=ztr-content>"),t5=He("<h1>Error!"),r5=He("<div class=ztr-comment-text><pre></pre><p>Only properly formed NIP-19 naddr, note and nevent encoded entities and URLs are supported."),n5=He("<h2 id=ztr-title>"),o5=He("<p>Powered by <a href=https://github.com/fr4nzap/zapthreads>zapthreads"),i5=He("<button>Clear cache"),s5=He("<p>Anchor version: "),a5=e=>{uo(()=>{xe.anchor=(()=>{let f=e.anchor.trim();try{if(f.startsWith("http")){let w=!e.legacyUrl;return{type:"http",value:Ck(f,w)}}let p=Dc(f);switch(p.type){case"nevent":return{type:"note",value:p.data.id};case"note":return{type:"note",value:p.data};case"naddr":let w=p.data;return{type:"naddr",value:`${w.kind}:${w.pubkey}:${w.identifier}`}}}catch(p){return console.error(p),{type:"error",value:`Malformed anchor: ${f}`}}})();let B="wss://relay.damus.io,wss://nos.lol";xe.relays=(e.relays||B).split(",").map(f=>new URL(f).toString()),(e.author||"").startsWith("npub")&&(xe.externalAuthor=e.author),xe.disableFeatures=e.disable.split(",").map(f=>f.trim()).filter(R4),xe.urlPrefixes=Tk(e.urls),xe.replyPlaceholder=e.replyPlaceholder});let t=()=>xe.anchor,r=()=>xe.relays,n=()=>xe.disableFeatures,o=()=>e.version;xe.profiles=zc(()=>["profiles"]);let i=()=>n().includes("watch");uo(lo([t],()=>{xe.version=o()})),uo(lo([t,r],async()=>{if(t().type==="error")return;let B,f;switch(t().type){case"http":f=await Mi("events",t().value,{index:"r"}),xe.rootEventIds=Fc(f).map(P=>P.id),B={"#r":e.legacyUrl?[t().value]:[t().value,`${t().value}/`],kinds:[1,8812]};break;case"note":let S=await Pi("events",IDBKeyRange.only(t().value));if(S){f=[S],xe.rootEventIds=[S.id],xe.anchorAuthor=S.pk;return}else{f=[],B={ids:[t().value]};break}case"naddr":let[T,I,M]=t().value.split(":");f=(await Mi("events",M,{index:"d"})).filter(P=>P.pk===I),f.length>0&&(xe.rootEventIds=Fc(f).map(P=>P.id),xe.anchorAuthor=f[0].pk),B={authors:[I],kinds:[parseInt(T)],"#d":[M]};break;default:throw"error"}let w=(await Li.querySync(r(),{...B})).map(ru);for(let v of w)t().type=="http"?(v.k==1&&v.c.includes("\u21B4")||v.k==8812)&&Er("events",v):Er("events",v);switch(t().type){case"http":case"naddr":let v=[...f,...w],S=Fc([...v]).map(T=>T.id);(S.length>0&&S[0])!==xe.rootEventIds[0]&&(xe.rootEventIds=S);break;case"note":xe.rootEventIds=w.map(T=>T.id);break}w.length>0&&(xe.anchorAuthor=w[0].pk)}));let a=()=>xe.rootEventIds;uo(lo([a,o],()=>{switch(t().type){case"http":case"note":(xe.filter["#e"]??[]).toString()!==a().toString()&&(xe.filter={"#e":a()});return;case"naddr":let B=xe.filter["#a"]&&xe.filter["#a"][0];t().value!==B&&(xe.filter={"#a":[t().value]}),xe.version=o()||a()[0];return}},{defer:!0}));let u=We(()=>xe.filter,{defer:!0}),d;Ii(lo([u],async()=>{let B=u(),f=r(),p=t(),w=A(),v=xe.profiles();if(Object.entries(B).length===0)return;d?.close(),d=null,Bi(()=>{console.log("[zapthreads] unsubscribing and cleaning up",p.value),d?.close(),d=null});let S=[1,9802,7,9735];console.log("[zapthreads] subscribing to",p.value);let T=await yk(p,f),I=new Set,M={};d=Li.subscribeMany(f,[{...B,kinds:S,since:T}],{onevent(P){if(P.kind===1||P.kind===9802)P.content.trim()&&Er("events",ru(P));else if(P.kind===7)I.add(P.id);else if(P.kind===9735){let $=P.tags.find(F=>F[0]==="bolt11");$&&$[1]&&(M[P.id]=$[1])}},oneose(){(async()=>{let P=await Pi("aggregates",IDBKeyRange.only([p.value,7]))??{eid:p.value,ids:[],k:7};P.ids=[...new Set([...P.ids,...I])],Er("aggregates",P);let $=await Pi("aggregates",IDBKeyRange.only([p.value,9735]))??{eid:p.value,ids:[],k:9735,sum:0};$.sum=Object.entries(M).reduce((F,q)=>{if($.ids.includes(q[0]))return F;let z=J6.decode(q[1]).sections.find(K=>K.name==="amount"),V=Number(z.value)/1e3;return F+V},$.sum??0),$.ids=[...new Set([...$.ids,...Object.keys(M)])],Er("aggregates",$)})(),setTimeout(async()=>{await mw([...w.map(P=>P.pk)],f,v),vk(p,w),i()&&(d?.close(),Li.close(f))},96)}})},{defer:!0}));let h=()=>e.user;uo(lo(h,B=>{if(B){let f,p;B.startsWith("nsec")?(p=Dc(B).data,f=yw(p)):f=Dc(B).data,Gt.external={pk:f,signEvent:async w=>{if(p)return{sig:vw(w,p).sig};if(!window.nostr)throw alert("Please log in with a NIP-07 extension such as Alby or nos2x"),Gt.active=void 0,"No extension available";let v=await window.nostr.getPublicKey(),S=f;if(S!==v){let T=`ERROR: Event not signed. Supplied pubkey does not match extension pubkey. ${S} !== ${v}`;throw Gt.active=void 0,alert(T),T}else return window.nostr.signEvent(w)}},Gt.active=Gt.external}})),uo(lo(h,B=>{B||(Gt.active=void 0)},{defer:!0}));let b=zc(()=>["events",30023,{index:"k"}]),m=We(()=>{if(xe.disableFeatures.includes("hideContent")&&t().type==="naddr"){let[B,f,p]=t().value.split(":"),w=b().find(v=>v.d===p&&v.pk===f);if(w){let v=`# ${w.tl}
 ${w.c}`;return bw({...w,c:v},xe,[])}}}),_=We(()=>{switch(t().type){case"http":case"note":return zc(()=>["events",xe.rootEventIds,{index:"ro"}]);case"naddr":return zc(()=>["events",t().value,{index:"a"}]);default:return()=>[]}}),A=()=>_()(),C=We(()=>xe.rootEventIds&&xe.rootEventIds.length?ww(A()).filter(f=>!(f.k===9802&&f.children.length===0)):[]),k=()=>C().reduce((B,f)=>B+ih(f),C().length),[N,R]=_t(!1);return(()=>{let B=X6(),f=B.firstChild,p=f.nextSibling;return Le(f,ix),Le(B,(()=>{let w=We(()=>!!m());return()=>w()&&(()=>{let v=e5();return _r(()=>v.innerHTML=m()),v})()})(),p),Le(B,(()=>{let w=We(()=>t().type==="error");return()=>w()&&[t5(),(()=>{let v=r5(),S=v.firstChild;return Le(S,()=>t().value),v})()]})(),p),Le(B,(()=>{let w=We(()=>t().type!=="error");return()=>w()&&[We((()=>{let v=We(()=>!xe.disableFeatures.includes("reply"));return()=>v()&&Or(p6,{})})()),(()=>{let v=n5();return Le(v,(()=>{let S=We(()=>k()>0);return()=>S()&&`${k()} comment${k()==1?"":"s"}`})()),v})(),Or(Aw,{nestedEvents:C,articles:b})]})(),p),p.$$click=()=>R(!N()),Le(p,Tw),Le(B,(()=>{let w=We(()=>!!N());return()=>w()&&[o5(),We((()=>{let v=We(()=>!!xe.version);return()=>v()&&(()=>{let S=s5();return S.firstChild,Le(S,()=>xe.version,null),S})()})()),(()=>{let v=i5();return HE(v,"click",wk,!0),v})()]})(),null),B})()};ox("zap-threads",{anchor:"",version:"",relays:"",user:"",author:"",disable:"",urls:"","reply-placeholder":"","legacy-url":""},e=>Or(a5,{get anchor(){return e.anchor??""},get version(){return e.version??""},get relays(){return e.relays??""},get user(){return e.user??""},get author(){return e.author??""},get disable(){return e.disable??""},get urls(){return e.urls??""},get replyPlaceholder(){return e["reply-placeholder"]??""},get legacyUrl(){return e["legacy-url"]??""}}));qf(["click"]);function c5(e){return{c:De,m:De,p:De,d:De}}function u5(e){let t,r,n=jt(e[2].created_at,!0)+"",o,i,a,u=e[2].title+"",d,h,b,m,_,A,C=e[2].image&&Cw(e),k=e[4]&&Pw(e);return{c(){t=ae("div"),r=ae("div"),o=ze(n),i=Pe(),a=ae("h1"),d=ze(u),h=Pe(),C&&C.c(),b=Pe(),m=ae("div"),_=Pe(),k&&k.c(),A=Nt(),oe(r,"class","date"),oe(m,"class","content"),oe(t,"class","event-wrapper")},m(N,R){fe(N,t,R),re(t,r),re(r,o),re(t,i),re(t,a),re(a,d),re(t,h),C&&C.m(t,null),re(t,b),re(t,m),m.innerHTML=e[5],fe(N,_,R),k&&k.m(N,R),fe(N,A,R)},p(N,R){R&4&&n!==(n=jt(N[2].created_at,!0)+"")&&Ze(o,n),R&4&&u!==(u=N[2].title+"")&&Ze(d,u),N[2].image?C?C.p(N,R):(C=Cw(N),C.c(),C.m(t,b)):C&&(C.d(1),C=null),R&32&&(m.innerHTML=N[5]),N[4]?k?k.p(N,R):(k=Pw(N),k.c(),k.m(A.parentNode,A)):k&&(k.d(1),k=null)},d(N){N&&(ue(t),ue(_),ue(A)),C&&C.d(),k&&k.d(N)}}}function Cw(e){let t,r,n;return{c(){t=ae("img"),oe(t,"class",r=e[2].image?"note-image":"note-banner"),It(t.src,n=e[2].image)||oe(t,"src",n)},m(o,i){fe(o,t,i)},p(o,i){i&4&&r!==(r=o[2].image?"note-image":"note-banner")&&oe(t,"class",r),i&4&&!It(t.src,n=o[2].image)&&oe(t,"src",n)},d(o){o&&ue(t)}}}function Pw(e){let t,r;return{c(){t=ae("zap-threads"),Ji(t,"anchor",e[3]),Ji(t,"relays",r=e[1].join(","))},m(n,o){fe(n,t,o)},p(n,o){o&8&&Ji(t,"anchor",n[3]),o&2&&r!==(r=n[1].join(","))&&Ji(t,"relays",r)},d(n){n&&ue(t)}}}function l5(e){let t,r,n,o,i=e[3].substring(0,12)+"..."+e[3].slice(-5),a,u,d,h,b,m,_,A,C,k=e[0]?.shortName+"",N,R,B,f,p;function w(T,I){return I&4&&(f=null),f==null&&(f=!!(T[2]&&Object.keys(T[2]).length>0)),f?u5:c5}let v=w(e,-1),S=v(e);return{c(){t=ae("div"),r=ae("div"),n=ze("Note: "),o=ae("a"),a=ze(i),d=Pe(),h=ae("a"),b=ae("div"),m=ae("img"),A=Pe(),C=ae("span"),N=ze(k),R=ze(" homepage"),B=Pe(),S.c(),p=Nt(),oe(o,"href",u="https://njump.me/"+e[3]),oe(r,"class","external-link"),It(m.src,_=e[0]?.image)||oe(m,"src",_),oe(b,"class","picture-container"),oe(h,"href","#"),oe(t,"class","header note")},m(T,I){fe(T,t,I),re(t,r),re(r,n),re(r,o),re(o,a),re(t,d),re(t,h),re(h,b),re(b,m),re(h,A),re(h,C),re(C,N),re(C,R),fe(T,B,I),S.m(T,I),fe(T,p,I)},p(T,[I]){I&8&&i!==(i=T[3].substring(0,12)+"..."+T[3].slice(-5))&&Ze(a,i),I&8&&u!==(u="https://njump.me/"+T[3])&&oe(o,"href",u),I&1&&!It(m.src,_=T[0]?.image)&&oe(m,"src",_),I&1&&k!==(k=T[0]?.shortName+"")&&Ze(N,k),v===(v=w(T,I))&&S?S.p(T,I):(S.d(1),S=v(T),S&&(S.c(),S.m(p.parentNode,p)))},i:De,o:De,d(T){T&&(ue(t),ue(B),ue(p)),S.d(T)}}}function d5(e,t,r){let n,o,i,a="",u="",d=!1,{id:h}=t,{profile:b}=t,{config:m}=t;return Ot(async()=>{if(!b)throw new Error("invalid npub");if(r(1,o=m.readRelays),r(0,b=await us(m.npub)),!b)throw new Error("npub is invalid");r(3,u=Ja({id:h})),r(4,d=m.comments),mn.subscribeManyEose(m.writeRelays,[{ids:[h]}],{onevent:async _=>{console.log("Received event:",_),r(2,i=cs(_)),hi.set(i.title),r(8,a=await p0(i))},onclose(){console.log("Finish, subscription closed.")}})}),e.$$set=_=>{"id"in _&&r(6,h=_.id),"profile"in _&&r(0,b=_.profile),"config"in _&&r(7,m=_.config)},e.$$.update=()=>{e.$$.dirty&256&&r(5,n=a)},hi.subscribe(_=>{document.title=_}),[b,o,i,u,d,n,h,m,a]}var sh=class extends rt{constructor(t){super(),ct(this,t,d5,l5,tt,{id:6,profile:0,config:7})}},Iw=sh;function f5(e){let t,r,n,o,i,a,u;return{c(){t=ae("div"),r=ae("input"),n=Pe(),o=ae("label"),r.checked=e[0],oe(r,"type","checkbox"),oe(r,"id","theme-toggle"),oe(r,"class","svelte-19brd9o"),oe(o,"for","theme-toggle"),oe(o,"class","svelte-19brd9o"),oe(t,"class",i=hl(e[1]?"visible":"hidden")+" svelte-19brd9o")},m(d,h){fe(d,t,h),re(t,r),re(t,n),re(t,o),a||(u=Yi(r,"change",e[2]),a=!0)},p(d,[h]){h&1&&(r.checked=d[0]),h&2&&i!==(i=hl(d[1]?"visible":"hidden")+" svelte-19brd9o")&&oe(t,"class",i)},i:De,o:De,d(d){d&&ue(t),a=!1,u()}}}function Nw(e){e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}function h5(){if(localStorage.getItem("theme")==="dark")return!0;if(localStorage.getItem("theme")==="light")return!1;let e=window.matchMedia("(prefers-color-scheme: dark)").matches;return localStorage.setItem("systemTheme",e?"dark":"light"),e}function p5(e,t,r){let n=!1,o=!1;function i(){r(0,n=!n),localStorage.getItem("systemTheme")=="dark"&&n||localStorage.getItem("systemTheme")=="light"&&!n?localStorage.removeItem("theme"):localStorage.setItem("theme",n?"dark":"light"),Nw(n)}return Ot(()=>{r(0,n=h5()),r(1,o=!0);let a=window.matchMedia("(prefers-color-scheme: dark)"),u=d=>{localStorage.setItem("systemTheme",d.matches?"dark":"light"),localStorage.getItem("theme")||(r(0,n=d.matches),Nw(n))};return a.addEventListener?a.addEventListener("change",u):a.addListener(u),()=>{a.removeEventListener?a.removeEventListener("change",u):a.removeListener(u)}}),[n,o,i]}var ah=class extends rt{constructor(t){super(),ct(this,t,p5,f5,tt,{})}},Ow=ah;function Uw(e){let t;return{c(){t=ae("div"),t.innerHTML=`<h1>Oracolo</h1> <h2>Missing config!</h2> <p>You need to <a href="https://github.com/dtonon/oracolo?tab=readme-ov-file#configuration">configure your blog</a>
      adding some meta tags inside this HTML file.<br/><br/>
      Are you lazy? Use the handy web wizard at <a href="https://oracolo.me">oracolo.me</a>.</p>`,oe(t,"class","unfinished-setup")},m(r,n){fe(r,t,n)},d(r){r&&ue(t)}}}function zw(e){let t=e[0],r,n,o=Mw(e);return{c(){o.c(),r=Nt()},m(i,a){o.m(i,a),fe(i,r,a),n=!0},p(i,a){a&1&&tt(t,t=i[0])?(yt(),Te(o,1,1,De),vt(),o=Mw(i),o.c(),Ee(o,1),o.m(r.parentNode,r)):o.p(i,a)},i(i){n||(Ee(o),n=!0)},o(i){Te(o),n=!1},d(i){i&&ue(r),o.d(i)}}}function w5(e){let t,r;return t=new Iw({props:{id:e[0],profile:e[1],config:e[4]}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&1&&(i.id=n[0]),o&2&&(i.profile=n[1]),o&16&&(i.config=n[4]),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function y5(e){let t,r;return t=new sf({props:{tag:e[0],profile:e[1],config:e[4]}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&1&&(i.tag=n[0]),o&2&&(i.profile=n[1]),o&16&&(i.config=n[4]),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function v5(e){let t,r;return t=new sf({props:{tag:"",profile:e[1],config:e[4]}}),{c(){ft(t.$$.fragment)},m(n,o){st(t,n,o),r=!0},p(n,o){let i={};o&2&&(i.profile=n[1]),o&16&&(i.config=n[4]),t.$set(i)},i(n){r||(Ee(t.$$.fragment,n),r=!0)},o(n){Te(t.$$.fragment,n),r=!1},d(n){at(t,n)}}}function Mw(e){let t,r,n,o,i,a=[v5,y5,w5],u=[];function d(h,b){return b&1&&(t=null),h[0]===""?0:(t==null&&(t=!!h[0].startsWith("tags/")),t?1:2)}return r=d(e,-1),n=u[r]=a[r](e),{c(){n.c(),o=Nt()},m(h,b){u[r].m(h,b),fe(h,o,b),i=!0},p(h,b){let m=r;r=d(h,b),r===m?u[r].p(h,b):(yt(),Te(u[m],1,1,()=>{u[m]=null}),vt(),n=u[r],n?n.p(h,b):(n=u[r]=a[r](h),n.c()),Ee(n,1),n.m(o.parentNode,o))},i(h){i||(Ee(n),i=!0)},o(h){Te(n),i=!1},d(h){h&&ue(o),u[r].d(h)}}}function Dw(e){let t,r,n,o,i,a,u,d,h,b=e[3].length>0&&Fw(e);return{c(){t=ze(`Would you like to host this website yourself? It's just one HTML file,
    `),r=ae("button"),r.textContent="download it",n=ze("."),o=ae("br"),i=ae("br"),a=Pe(),b&&b.c(),u=Nt(),oe(r,"class","link-button")},m(m,_){fe(m,t,_),fe(m,r,_),fe(m,n,_),fe(m,o,_),fe(m,i,_),fe(m,a,_),b&&b.m(m,_),fe(m,u,_),d||(h=Yi(r,"click",e[5]),d=!0)},p(m,_){m[3].length>0?b?b.p(m,_):(b=Fw(m),b.c(),b.m(u.parentNode,u)):b&&(b.d(1),b=null)},d(m){m&&(ue(t),ue(r),ue(n),ue(o),ue(i),ue(a),ue(u)),b&&b.d(m),d=!1,h()}}}function Fw(e){let t,r=e[3].join(", ")+"",n;return{c(){t=ze("This page connects to some servers (Nostr relays) to retrieve data: "),n=ze(r)},m(o,i){fe(o,t,i),fe(o,n,i)},p(o,i){i&8&&r!==(r=o[3].join(", ")+"")&&Ze(n,r)},d(o){o&&(ue(t),ue(n))}}}function _5(e){let t,r=e[1]&&Object.keys(e[1]).length>0,n,o,i,a,u,d,h,b,m,_,A,C,k,N=e[2]&&Uw(e),R=r&&zw(e),B=!e[2]&&Dw(e);return C=new Ow({}),{c(){N&&N.c(),t=Pe(),R&&R.c(),n=Pe(),o=ae("div"),i=ze("This blog is powered by "),a=ae("a"),a.textContent="Oracolo",u=ze(` and Nostr.
  `),d=ae("a"),d.textContent="Make your own",h=ze("."),b=ae("br"),m=ae("br"),_=Pe(),B&&B.c(),A=Pe(),ft(C.$$.fragment),oe(a,"href","https://github.com/dtonon/oracolo"),oe(d,"href","https://oracolo.me"),oe(o,"class","footer")},m(f,p){N&&N.m(f,p),fe(f,t,p),R&&R.m(f,p),fe(f,n,p),fe(f,o,p),re(o,i),re(o,a),re(o,u),re(o,d),re(o,h),re(o,b),re(o,m),re(o,_),B&&B.m(o,null),fe(f,A,p),st(C,f,p),k=!0},p(f,[p]){f[2]?N||(N=Uw(f),N.c(),N.m(t.parentNode,t)):N&&(N.d(1),N=null),p&2&&(r=f[1]&&Object.keys(f[1]).length>0),r?R?(R.p(f,p),p&2&&Ee(R,1)):(R=zw(f),R.c(),Ee(R,1),R.m(n.parentNode,n)):R&&(yt(),Te(R,1,1,()=>{R=null}),vt()),f[2]?B&&(B.d(1),B=null):B?B.p(f,p):(B=Dw(f),B.c(),B.m(o,null))},i(f){k||(Ee(R),Ee(C.$$.fragment,f),k=!0)},o(f){Te(R),Te(C.$$.fragment,f),k=!1},d(f){f&&(ue(t),ue(n),ue(o),ue(A)),N&&N.d(f),R&&R.d(f),B&&B.d(),at(C,f)}}}function E5(e,t,r){let n="",o=null,i=!1,a="",u=null,d=[],h;Ot(()=>{let A=new URLSearchParams(window.location.search).get("download")==="true";a0().then(async C=>{if(C)r(4,h=C);else{r(2,i=!0);return}let{npub:k="",readRelays:N=[],writeRelays:R=[],comments:B=!1}=C;if(!k){r(2,i=!0);return}if(r(3,d=Array.from(new Set(N.concat(R)))),B)try{await Promise.resolve().then(()=>(Rw(),b5)),console.log("window.nostr.js has been successfully loaded")}catch(f){console.error("Failed to load window.nostr.js:",f)}if(b(),window.addEventListener("hashchange",b),r(1,o=await us(k)),o)a=o.metadata.name||o.shortName,u=o.image||null,A&&md();else{r(2,i=!0);return}}).catch(C=>{console.error("Error fetching config:",C),r(2,i=!0)})}),ml(()=>{window.removeEventListener("hashchange",b)});function b(){let _=window.location.hash.substring(1);_!==n&&r(0,n=_)}return[n,o,i,d,h,()=>md()]}var ch=class extends rt{constructor(t){super(),ct(this,t,E5,_5,tt,{})}},jw=ch;console.log("running");var Hw=new jw({target:document.getElementById("app")}),wL=Hw;window.destroySvelteApp=()=>Hw.$destroy();})();
/*! Bundled license information:

showdown/dist/showdown.js:
  (*! showdown v 2.1.0 - 21-04-2022 *)

window.nostr.js/dist/window.nostr.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@scure/base/lib/esm/index.js:
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/modular.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/curve.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/abstract/weierstrass.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/_shortw_utils.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@splidejs/splide/dist/js/splide.esm.js:
  (*!
   * Splide.js
   * Version  : 4.1.4
   * License  : MIT
   * Copyright: 2022 Naotoshi Fujita
   *)

zapthreads/dist/zapthreads.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
  (*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) *)
*/

    </script>
    <style>
html{font-size:20px}@media only screen and (max-width: 768px){html{font-size:18px}}body{margin:0;padding:0}html.dark body{background-color:#242424;color:#cbcbcb}#app{box-sizing:border-box;width:80%;max-width:900px;margin:2rem auto;font-family:Arial,Helvetica,sans-serif;color:#242424}@media only screen and (max-width: 768px){#app{width:100%;padding:0 1rem;max-width:unset}}html.dark #app{background-color:#242424;color:#ebebeb}a,a:visited{color:#242424}html.dark a,html.dark a:visited{color:#f5f5f5}h1{font-size:2rem;line-height:.9;margin-top:0}@media only screen and (max-width: 768px){h1{font-size:1.6rem}}ol,ul{padding-left:1rem;margin:0}ol li,ul li{margin-bottom:1rem}blockquote{margin:0;padding-left:1rem;border-left:8px solid #ebebeb}code{font-size:.9rem;padding:0 .4rem;border-radius:.2rem;background-color:#f6f6f6}html.dark code{background-color:#3e3e3e}pre code{overflow:scroll;display:block;padding:1rem .5rem;border-radius:.2rem}.unfinished-setup{width:80%;margin:0 auto;text-align:center}.header.home h1{font-size:3rem}.header .external-link{text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}@media only screen and (max-width: 768px){.header .external-link{margin-bottom:1rem;margin-right:2.5rem}}.header .external-link a{text-decoration:underline;color:#cbcbcb}.header .picture-container{position:relative;display:inline-block;width:2.5rem;height:2.5rem;overflow:hidden;border-radius:50%;margin-bottom:-.25rem}.header .picture-container img{position:absolute;top:50%;left:50%;width:100%;height:100%;object-fit:cover;transform:translate(-50%,-50%);clip-path:circle(50%)}.header.note{margin-bottom:2rem}.header.note .picture-container{width:1.5rem;height:1.5rem;margin-bottom:-.4rem}.header a{text-decoration:none}.header a span{text-decoration:underline}html.dark .header a:visited{color:#cbcbcb}html.dark .header .external-link,html.dark .header .external-link a{color:#747474}.topic-wrapper{margin-bottom:1.5rem;display:flex;flex-direction:row;flex-wrap:wrap;row-gap:1rem}.topic-wrapper div{display:inline-grid;margin-right:1rem}.topic-wrapper div a{padding:.4rem 1rem;background-color:#e0e0e0;text-decoration:none;border-radius:4px}.topic-wrapper div a:hover{background-color:#ebebeb}.topic-wrapper div a.selected{background-color:#242424;color:#f5f5f5}html.dark .topic-wrapper div a{background-color:#747474;color:#242424}html.dark .topic-wrapper div a:hover{background-color:#f5f5f5}html.dark .topic-wrapper div a.selected{background-color:#cbcbcb}.externalLink{display:block;text-align:right;margin-top:-1rem;font-size:.8em;color:#cbcbcb}.externalLink a{color:#cbcbcb}.link-button{background:none;border:none;text-decoration:underline;cursor:pointer;padding:0;font:inherit;color:inherit}.link-button:hover{text-decoration:none}.link-button:focus{outline:none}.about{margin-bottom:2rem;padding-bottom:1rem;border-bottom:8px solid #ebebeb}html.dark .about{border-bottom:8px solid #373737}.separator{margin-bottom:2rem;border-bottom:8px solid #ebebeb}html.dark .separator{border-bottom:8px solid #373737}.block{border-bottom:8px solid #f5f5f5;margin-bottom:1.5rem;padding-bottom:1.5rem;color:#747474}.block .summary{white-space:pre-wrap}.block .grid{display:flex;padding-top:.5rem;flex-wrap:wrap;justify-content:space-between;gap:2rem;width:100%}@media only screen and (max-width: 768px){.block .grid{display:block}}@media only screen and (max-width: 768px){.block .grid{padding-bottom:0rem}}.block .grid .item{flex:1 1 calc(50% - 2rem);box-sizing:border-box}@media only screen and (max-width: 768px){.block .grid .item{margin-bottom:2rem}}.block .grid .item a{text-decoration:none}.block .grid .item a:hover img{transform:scale(1.02)}.block .grid .item img{width:100%;object-fit:cover;margin-bottom:.5rem;border-radius:4px;transition:transform .3s ease}.block .grid .item .title{display:block;margin-bottom:.4rem;font-size:1.1rem;font-weight:bolder}.block .grid .item .summary{margin-bottom:.4rem;font-size:.9rem;word-break:break-word;color:#747474}.block .grid .item .date{font-size:.8rem;color:#a9a9a9}.block .grid .item .pinned{filter:grayscale(100%);font-size:.8rem;color:#494949}.block .grid.odd .item:first-child{flex:0 0 100%}.block.articles .grid .item img{height:240px}.block.articles .grid.odd .item:first-child img,.block.images .grid .item img{height:360px}.block.images .grid.odd .item:first-child img{height:auto}.block .list{margin-top:1rem}.block .list.short-feed-full li{margin-bottom:2rem}.block .list.short-feed-full .summary{color:#242424;font-size:.9rem;word-break:break-word}.block .list ul{list-style-type:none;padding:0;margin:0}.block .list ul li{margin-bottom:1rem}.block .list ul li:last-child{margin-bottom:0}.block .list ul li a{display:block;text-decoration:none}.block .list ul li a:hover{padding-left:12px;margin-left:-20px;border-left:8px solid #747474}.block .list ul li a:hover .summary{color:#242424}.block .list ul li h2{font-size:1.1rem;margin-bottom:.3rem}.block .list ul li .summary{margin-bottom:.4rem;font-size:.9rem;overflow-wrap:break-word;color:#747474}.block .list ul li .date{font-size:.8rem;color:#a9a9a9}.block .slide .splide__slide{font-size:.9rem;overflow-wrap:break-word}.block .slide .splide__slide a{text-decoration:none}.block .slide .splide__slide .date{font-size:.8rem;color:#a9a9a9;margin-bottom:.3rem}.block .slide .splide__arrow--prev{left:-3em}.block .slide .splide__arrow--next{right:-3em}@media only screen and (max-width: 768px){.block .slide .splide__arrow--prev,.block .slide .splide__arrow--next{display:none}}.block .slide .splide__arrow{background:none}.block .slide .splide__arrow svg{fill:#a9a9a9}html.dark .block{border-bottom:8px solid #373737}html.dark .block .grid{color:#cbcbcb}html.dark .block .grid .summary{color:#a6a6a6}html.dark .block .grid .date,html.dark .block .grid .pinned{color:#777}html.dark .block .list{color:#cbcbcb}html.dark .block .list.short-feed-full .summary{color:#fff}html.dark .block .list .summary{color:#a6a6a6}html.dark .block .list .date,html.dark .block .list .pinned{color:#777}html.dark .block .list a:hover{border-color:#747474}html.dark .block .list a:hover .summary{color:#f5f5f5}html.dark .block .slide a{color:#cbcbcb}.event-wrapper{position:relative;overflow-wrap:break-word}.event-wrapper h1,.event-wrapper h2,.event-wrapper h3{display:block;margin-top:1.4rem;margin-bottom:.6rem}.event-wrapper h1:first-of-type{margin-top:0rem}.event-wrapper .content{margin-top:1.5rem}.event-wrapper p{line-height:1.3rem;margin-top:0rem}.event-wrapper .date{display:block;margin-bottom:.5rem;font-size:.8rem;color:#a9a9a9}.event-wrapper img{display:block;margin:2rem auto;max-width:100%;border-radius:4px}.event-wrapper img.note-banner{margin:2.5rem auto 3.5rem;transform:scale(1.04);width:100%;object-fit:cover;max-height:50vh}.event-wrapper img.note-image{margin:0;margin-top:1.5rem;width:100%}.event-wrapper video{width:100%;margin:2rem auto}.event-wrapper audio{width:100%;margin:2rem auto}.footer{margin-top:4rem;padding-top:2rem;margin-bottom:2rem;border-top:8px solid #ebebeb;font-size:.8rem;text-align:center;color:#cbcbcb}.footer a{color:#cbcbcb}html.dark .footer{border-top:8px solid #373737;color:#747474}html.dark .footer a,html.dark .footer a:visited{color:#747474}zap-threads{font-size:.9rem}.loader-container.svelte-mae19q{display:flex;align-items:center;justify-content:center;height:80vh;background-color:#fafafa}html.dark .loader-container.svelte-mae19q{background-color:#2e2e2e}.loader.svelte-mae19q{display:inline-block;width:92px;height:92px;opacity:0;animation:svelte-mae19q-fade-in .5s .4s forwards,svelte-mae19q-loader-animation 2s linear infinite .4s}.loader.svelte-mae19q:after{content:" ";display:block;width:64px;height:64px;margin:8px;border-radius:50%;border:6px solid #a9a9a9;border-color:#a9a9a9 transparent #a9a9a9 transparent;animation:svelte-mae19q-loader-animation 2s linear infinite}html.dark .loader.svelte-mae19q:after{border:6px solid #373737;border-color:#373737 transparent #373737 transparent}@keyframes svelte-mae19q-loader-animation{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@keyframes svelte-mae19q-fade-in{to{opacity:1}}.splide__container{box-sizing:border-box;position:relative}.splide__list{backface-visibility:hidden;display:-ms-flexbox;display:flex;height:100%;margin:0!important;padding:0!important}.splide.is-initialized:not(.is-active) .splide__list{display:block}.splide__pagination{-ms-flex-align:center;align-items:center;display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-pack:center;justify-content:center;margin:0;pointer-events:none}.splide__pagination li{display:inline-block;line-height:1;list-style-type:none;margin:0;pointer-events:auto}.splide:not(.is-overflow) .splide__pagination{display:none}.splide__progress__bar{width:0}.splide{position:relative;visibility:hidden}.splide.is-initialized,.splide.is-rendered{visibility:visible}.splide__slide{backface-visibility:hidden;box-sizing:border-box;-ms-flex-negative:0;flex-shrink:0;list-style-type:none!important;margin:0;position:relative}.splide__slide img{vertical-align:bottom}.splide__spinner{animation:splide-loading 1s linear infinite;border:2px solid #999;border-left-color:transparent;border-radius:50%;contain:strict;display:inline-block;height:20px;inset:0;margin:auto;position:absolute;width:20px}.splide__sr{clip:rect(0 0 0 0);border:0;height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.splide__toggle.is-active .splide__toggle__play,.splide__toggle__pause{display:none}.splide__toggle.is-active .splide__toggle__pause{display:inline}.splide__track{overflow:hidden;position:relative;z-index:0}@keyframes splide-loading{0%{transform:rotate(0)}to{transform:rotate(1turn)}}.splide__track--draggable{-webkit-touch-callout:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.splide__track--fade>.splide__list>.splide__slide{margin:0!important;opacity:0;z-index:0}.splide__track--fade>.splide__list>.splide__slide.is-active{opacity:1;z-index:1}.splide--rtl{direction:rtl}.splide__track--ttb>.splide__list{display:block}.splide__arrow{-ms-flex-align:center;align-items:center;background:#ccc;border:0;border-radius:50%;cursor:pointer;display:-ms-flexbox;display:flex;height:2em;-ms-flex-pack:center;justify-content:center;opacity:.7;padding:0;position:absolute;top:50%;transform:translateY(-50%);width:2em;z-index:1}.splide__arrow svg{fill:#000;height:1.2em;width:1.2em}.splide__arrow:hover:not(:disabled){opacity:.9}.splide__arrow:disabled{opacity:.3}.splide__arrow:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide__arrow--prev{left:1em}.splide__arrow--prev svg{transform:scaleX(-1)}.splide__arrow--next{right:1em}.splide.is-focus-in .splide__arrow:focus{outline:3px solid #0bf;outline-offset:3px}.splide__pagination{bottom:.5em;left:0;padding:0 1em;position:absolute;right:0;z-index:1}.splide__pagination__page{background:#ccc;border:0;border-radius:50%;display:inline-block;height:8px;margin:3px;opacity:.7;padding:0;position:relative;transition:transform .2s linear;width:8px}.splide__pagination__page.is-active{background:#fff;transform:scale(1.4);z-index:1}.splide__pagination__page:hover{cursor:pointer;opacity:.9}.splide__pagination__page:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__pagination__page:focus{outline:3px solid #0bf;outline-offset:3px}.splide__progress__bar{background:#ccc;height:3px}.splide__slide{-webkit-tap-highlight-color:rgba(0,0,0,0)}.splide__slide:focus{outline:0}@supports (outline-offset:-3px){.splide__slide:focus-visible{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide__slide:focus-visible{border:3px solid #0bf}}@supports (outline-offset:-3px){.splide.is-focus-in .splide__slide:focus{outline:3px solid #0bf;outline-offset:-3px}}@media screen and (-ms-high-contrast:none){.splide.is-focus-in .splide__slide:focus{border:3px solid #0bf}.splide.is-focus-in .splide__track>.splide__list>.splide__slide:focus{border-color:#0bf}}.splide__toggle{cursor:pointer}.splide__toggle:focus-visible{outline:3px solid #0bf;outline-offset:3px}.splide.is-focus-in .splide__toggle:focus{outline:3px solid #0bf;outline-offset:3px}.splide__track--nav>.splide__list>.splide__slide{border:3px solid transparent;cursor:pointer}.splide__track--nav>.splide__list>.splide__slide.is-active{border:3px solid #000}.splide__arrows--rtl .splide__arrow--prev{left:auto;right:1em}.splide__arrows--rtl .splide__arrow--prev svg{transform:scaleX(1)}.splide__arrows--rtl .splide__arrow--next{left:1em;right:auto}.splide__arrows--rtl .splide__arrow--next svg{transform:scaleX(-1)}.splide__arrows--ttb .splide__arrow{left:50%;transform:translate(-50%)}.splide__arrows--ttb .splide__arrow--prev{top:1em}.splide__arrows--ttb .splide__arrow--prev svg{transform:rotate(-90deg)}.splide__arrows--ttb .splide__arrow--next{bottom:1em;top:auto}.splide__arrows--ttb .splide__arrow--next svg{transform:rotate(90deg)}.splide__pagination--ttb{display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;inset:0 .5em 0 auto;padding:1em 0}.hidden.svelte-1ifx1we{display:none}.hidden.svelte-19brd9o.svelte-19brd9o{visibility:hidden}.visible.svelte-19brd9o.svelte-19brd9o{visibility:visible}#theme-toggle.svelte-19brd9o.svelte-19brd9o{display:none}#theme-toggle.svelte-19brd9o+label.svelte-19brd9o{display:inline-block;cursor:pointer;height:1rem;width:1rem;position:absolute;top:1rem;right:3rem;border-radius:9px;transition-duration:.3s;content:"";@media only screen and (max-width: 768px){right:1rem}}#theme-toggle.svelte-19brd9o:not(:checked)+label.svelte-19brd9o{background-color:#ccc}#theme-toggle.svelte-19brd9o:checked+label.svelte-19brd9o{background-color:transparent;box-shadow:inset -6px -6px 1px 1px #3f3f3f}

    </style>
  </body>
</html>
